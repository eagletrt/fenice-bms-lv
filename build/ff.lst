ARM GAS  /tmp/ccWTW02a.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 28, 1
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 1
  10              		.eabi_attribute 34, 1
  11              		.eabi_attribute 18, 4
  12              		.file	"ff.c"
  13              		.text
  14              	.Ltext0:
  15              		.cfi_sections	.debug_frame
  16              		.section	.text.ld_word,"ax",%progbits
  17              		.align	1
  18              		.arch armv7e-m
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv5-d16
  24              	ld_word:
  25              	.LVL0:
  26              	.LFB141:
  27              		.file 1 "Middlewares/Third_Party/FatFs/src/ff.c"
   1:Middlewares/Third_Party/FatFs/src/ff.c **** /*----------------------------------------------------------------------------/
   2:Middlewares/Third_Party/FatFs/src/ff.c **** /  FatFs - Generic FAT file system module  R0.12c                             /
   3:Middlewares/Third_Party/FatFs/src/ff.c **** /-----------------------------------------------------------------------------/
   4:Middlewares/Third_Party/FatFs/src/ff.c **** /
   5:Middlewares/Third_Party/FatFs/src/ff.c **** / Copyright (C) 2017, ChaN, all right reserved.
   6:Middlewares/Third_Party/FatFs/src/ff.c **** /
   7:Middlewares/Third_Party/FatFs/src/ff.c **** / FatFs module is an open source software. Redistribution and use of FatFs in
   8:Middlewares/Third_Party/FatFs/src/ff.c **** / source and binary forms, with or without modification, are permitted provided
   9:Middlewares/Third_Party/FatFs/src/ff.c **** / that the following condition is met:
  10:Middlewares/Third_Party/FatFs/src/ff.c **** /
  11:Middlewares/Third_Party/FatFs/src/ff.c **** / 1. Redistributions of source code must retain the above copyright notice,
  12:Middlewares/Third_Party/FatFs/src/ff.c **** /    this condition and the following disclaimer.
  13:Middlewares/Third_Party/FatFs/src/ff.c **** /
  14:Middlewares/Third_Party/FatFs/src/ff.c **** / This software is provided by the copyright holder and contributors "AS IS"
  15:Middlewares/Third_Party/FatFs/src/ff.c **** / and any warranties related to this software are DISCLAIMED.
  16:Middlewares/Third_Party/FatFs/src/ff.c **** / The copyright owner or contributors be NOT LIABLE for any damages caused
  17:Middlewares/Third_Party/FatFs/src/ff.c **** / by use of this software.
  18:Middlewares/Third_Party/FatFs/src/ff.c **** /----------------------------------------------------------------------------*/
  19:Middlewares/Third_Party/FatFs/src/ff.c **** 
  20:Middlewares/Third_Party/FatFs/src/ff.c **** 
  21:Middlewares/Third_Party/FatFs/src/ff.c **** #include "ff.h"			/* Declarations of FatFs API */
  22:Middlewares/Third_Party/FatFs/src/ff.c **** #include "diskio.h"		/* Declarations of device I/O functions */
  23:Middlewares/Third_Party/FatFs/src/ff.c **** 
  24:Middlewares/Third_Party/FatFs/src/ff.c **** 
  25:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------------------------------------------
  26:Middlewares/Third_Party/FatFs/src/ff.c **** 
  27:Middlewares/Third_Party/FatFs/src/ff.c ****    Module Private Definitions
  28:Middlewares/Third_Party/FatFs/src/ff.c **** 
  29:Middlewares/Third_Party/FatFs/src/ff.c **** ---------------------------------------------------------------------------*/
  30:Middlewares/Third_Party/FatFs/src/ff.c **** 
  31:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FATFS != 68300	/* Revision ID */
ARM GAS  /tmp/ccWTW02a.s 			page 2


  32:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong include file (ff.h).
  33:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
  34:Middlewares/Third_Party/FatFs/src/ff.c **** 
  35:Middlewares/Third_Party/FatFs/src/ff.c **** 
  36:Middlewares/Third_Party/FatFs/src/ff.c **** /* DBCS code ranges and SBCS upper conversion tables */
  37:Middlewares/Third_Party/FatFs/src/ff.c **** 
  38:Middlewares/Third_Party/FatFs/src/ff.c **** #if _CODE_PAGE == 932	/* Japanese Shift-JIS */
  39:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0x81	/* DBC 1st byte range 1 start */
  40:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1E	0x9F	/* DBC 1st byte range 1 end */
  41:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF2S	0xE0	/* DBC 1st byte range 2 start */
  42:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF2E	0xFC	/* DBC 1st byte range 2 end */
  43:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1S	0x40	/* DBC 2nd byte range 1 start */
  44:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1E	0x7E	/* DBC 2nd byte range 1 end */
  45:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2S	0x80	/* DBC 2nd byte range 2 start */
  46:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2E	0xFC	/* DBC 2nd byte range 2 end */
  47:Middlewares/Third_Party/FatFs/src/ff.c **** 
  48:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 936	/* Simplified Chinese GBK */
  49:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0x81
  50:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1E	0xFE
  51:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1S	0x40
  52:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1E	0x7E
  53:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2S	0x80
  54:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2E	0xFE
  55:Middlewares/Third_Party/FatFs/src/ff.c **** 
  56:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 949	/* Korean */
  57:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0x81
  58:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1E	0xFE
  59:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1S	0x41
  60:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1E	0x5A
  61:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2S	0x61
  62:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2E	0x7A
  63:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS3S	0x81
  64:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS3E	0xFE
  65:Middlewares/Third_Party/FatFs/src/ff.c **** 
  66:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 950	/* Traditional Chinese Big5 */
  67:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0x81
  68:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1E	0xFE
  69:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1S	0x40
  70:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1E	0x7E
  71:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2S	0xA1
  72:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2E	0xFE
  73:Middlewares/Third_Party/FatFs/src/ff.c **** 
  74:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 437	/* U.S. */
  75:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
  76:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x45,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F, \
  77:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x92,0x92,0x4F,0x99,0x4F,0x55,0x55,0x59,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
  78:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
  79:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
  80:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
  81:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
  82:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
  83:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
  84:Middlewares/Third_Party/FatFs/src/ff.c **** 
  85:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 720	/* Arabic */
  86:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
  87:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
  88:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
ARM GAS  /tmp/ccWTW02a.s 			page 3


  89:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
  90:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
  91:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
  92:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
  93:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
  94:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
  95:Middlewares/Third_Party/FatFs/src/ff.c **** 
  96:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 737	/* Greek */
  97:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
  98:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
  99:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x92,0x92,0x93,0x94,0x95,0x96,0x97,0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87, \
 100:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0xAA,0x92,0x93,0x94,0x95,0x96, \
 101:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 102:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 103:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 104:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x97,0xEA,0xEB,0xEC,0xE4,0xED,0xEE,0xEF,0xF5,0xF0,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 105:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 106:Middlewares/Third_Party/FatFs/src/ff.c **** 
 107:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 771	/* KBL */
 108:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 109:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
 110:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 111:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
 112:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 113:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 114:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDC,0xDE,0xDE, \
 115:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 116:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF0,0xF2,0xF2,0xF4,0xF4,0xF6,0xF6,0xF8,0xF8,0xFA,0xFA,0xFC,0xFC,0xFE,0xFF}
 117:Middlewares/Third_Party/FatFs/src/ff.c **** 
 118:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 775	/* Baltic */
 119:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 120:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x91,0xA0,0x8E,0x95,0x8F,0x80,0xAD,0xED,0x8A,0x8A,0xA1,0x8D,0x8E,0x8F, \
 121:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x92,0x92,0xE2,0x99,0x95,0x96,0x97,0x97,0x99,0x9A,0x9D,0x9C,0x9D,0x9E,0x9F, \
 122:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA1,0xE0,0xA3,0xA3,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 123:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 124:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 125:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB5,0xB6,0xB7,0xB8,0xBD,0xBE,0xC6,0xC7,0xA5,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 126:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE3,0xE8,0xE8,0xEA,0xEA,0xEE,0xED,0xEE,0xEF, \
 127:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 128:Middlewares/Third_Party/FatFs/src/ff.c **** 
 129:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 850	/* Latin 1 */
 130:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 131:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x43,0x55,0x45,0x41,0x41,0x41,0x41,0x43,0x45,0x45,0x45,0x49,0x49,0x49,0x41,0x41, \
 132:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x45,0x92,0x92,0x4F,0x4F,0x4F,0x55,0x55,0x59,0x4F,0x55,0x4F,0x9C,0x4F,0x9E,0x9F, \
 133:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 134:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0x41,0x41,0x41,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 135:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0x41,0x41,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 136:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD1,0xD1,0x45,0x45,0x45,0x49,0x49,0x49,0x49,0xD9,0xDA,0xDB,0xDC,0xDD,0x49,0xDF, \
 137:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x4F,0xE1,0x4F,0x4F,0x4F,0x4F,0xE6,0xE8,0xE8,0x55,0x55,0x55,0x59,0x59,0xEE,0xEF, \
 138:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 139:Middlewares/Third_Party/FatFs/src/ff.c **** 
 140:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 852	/* Latin 2 */
 141:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 142:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xDE,0x8F,0x80,0x9D,0xD3,0x8A,0x8A,0xD7,0x8D,0x8E,0x8F, \
 143:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x91,0xE2,0x99,0x95,0x95,0x97,0x97,0x99,0x9A,0x9B,0x9B,0x9D,0x9E,0xAC, \
 144:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA4,0xA4,0xA6,0xA6,0xA8,0xA8,0xAA,0x8D,0xAC,0xB8,0xAE,0xAF, \
 145:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBD,0xBF, \
ARM GAS  /tmp/ccWTW02a.s 			page 4


 146:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC6,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 147:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD1,0xD1,0xD2,0xD3,0xD2,0xD5,0xD6,0xD7,0xB7,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 148:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE3,0xD5,0xE6,0xE6,0xE8,0xE9,0xE8,0xEB,0xED,0xED,0xDD,0xEF, \
 149:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xEB,0xFC,0xFC,0xFE,0xFF}
 150:Middlewares/Third_Party/FatFs/src/ff.c **** 
 151:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 855	/* Cyrillic */
 152:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 153:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x81,0x81,0x83,0x83,0x85,0x85,0x87,0x87,0x89,0x89,0x8B,0x8B,0x8D,0x8D,0x8F,0x8F, \
 154:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x91,0x91,0x93,0x93,0x95,0x95,0x97,0x97,0x99,0x99,0x9B,0x9B,0x9D,0x9D,0x9F,0x9F, \
 155:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA1,0xA1,0xA3,0xA3,0xA5,0xA5,0xA7,0xA7,0xA9,0xA9,0xAB,0xAB,0xAD,0xAD,0xAE,0xAF, \
 156:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB6,0xB6,0xB8,0xB8,0xB9,0xBA,0xBB,0xBC,0xBE,0xBE,0xBF, \
 157:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 158:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD1,0xD1,0xD3,0xD3,0xD5,0xD5,0xD7,0xD7,0xDD,0xD9,0xDA,0xDB,0xDC,0xDD,0xE0,0xDF, \
 159:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE2,0xE2,0xE4,0xE4,0xE6,0xE6,0xE8,0xE8,0xEA,0xEA,0xEC,0xEC,0xEE,0xEE,0xEF, \
 160:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF2,0xF2,0xF4,0xF4,0xF6,0xF6,0xF8,0xF8,0xFA,0xFA,0xFC,0xFC,0xFD,0xFE,0xFF}
 161:Middlewares/Third_Party/FatFs/src/ff.c **** 
 162:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 857	/* Turkish */
 163:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 164:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0x49,0x8E,0x8F, \
 165:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x92,0x92,0xE2,0x99,0xE3,0xEA,0xEB,0x98,0x99,0x9A,0x9D,0x9C,0x9D,0x9E,0x9E, \
 166:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA6,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 167:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 168:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 169:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0x49,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 170:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xDE,0xED,0xEE,0xEF, \
 171:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 172:Middlewares/Third_Party/FatFs/src/ff.c **** 
 173:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 860	/* Portuguese */
 174:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 175:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0x8F,0x8E,0x91,0x86,0x80,0x89,0x89,0x92,0x8B,0x8C,0x98,0x8E,0x8F, \
 176:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x8C,0x99,0xA9,0x96,0x9D,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 177:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x86,0x8B,0x9F,0x96,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 178:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 179:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 180:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 181:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 182:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 183:Middlewares/Third_Party/FatFs/src/ff.c **** 
 184:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 861	/* Icelandic */
 185:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 186:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x8B,0x8B,0x8D,0x8E,0x8F, \
 187:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x92,0x92,0x4F,0x99,0x8D,0x55,0x97,0x97,0x99,0x9A,0x9D,0x9C,0x9D,0x9E,0x9F, \
 188:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA4,0xA5,0xA6,0xA7,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 189:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 190:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 191:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 192:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 193:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 194:Middlewares/Third_Party/FatFs/src/ff.c **** 
 195:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 862	/* Hebrew */
 196:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 197:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
 198:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 199:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 200:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 201:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 202:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
ARM GAS  /tmp/ccWTW02a.s 			page 5


 203:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 204:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 205:Middlewares/Third_Party/FatFs/src/ff.c **** 
 206:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 863	/* Canadian-French */
 207:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 208:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x43,0x55,0x45,0x41,0x41,0x41,0x86,0x43,0x45,0x45,0x45,0x49,0x49,0x8D,0x41,0x8F, \
 209:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x45,0x45,0x45,0x4F,0x45,0x49,0x55,0x55,0x98,0x4F,0x55,0x9B,0x9C,0x55,0x55,0x9F, \
 210:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA1,0x4F,0x55,0xA4,0xA5,0xA6,0xA7,0x49,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 211:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 212:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 213:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 214:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 215:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 216:Middlewares/Third_Party/FatFs/src/ff.c **** 
 217:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 864	/* Arabic */
 218:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 219:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x45,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F, \
 220:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x92,0x92,0x4F,0x99,0x4F,0x55,0x55,0x59,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 221:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 222:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 223:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 224:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 225:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 226:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 227:Middlewares/Third_Party/FatFs/src/ff.c **** 
 228:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 865	/* Nordic */
 229:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 230:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F, \
 231:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x92,0x92,0x4F,0x99,0x4F,0x55,0x55,0x59,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 232:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 233:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 234:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 235:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 236:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 237:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 238:Middlewares/Third_Party/FatFs/src/ff.c **** 
 239:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 866	/* Russian */
 240:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 241:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
 242:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 243:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
 244:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 245:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 246:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 247:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 248:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF0,0xF2,0xF2,0xF4,0xF4,0xF6,0xF6,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 249:Middlewares/Third_Party/FatFs/src/ff.c **** 
 250:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 869	/* Greek 2 */
 251:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 252:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
 253:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x86,0x9C,0x8D,0x8F,0x90, \
 254:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x91,0x90,0x92,0x95,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 255:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 256:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 257:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xA4,0xA5,0xA6,0xD9,0xDA,0xDB,0xDC,0xA7,0xA8,0xDF, \
 258:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA9,0xAA,0xAC,0xAD,0xB5,0xB6,0xB7,0xB8,0xBD,0xBE,0xC6,0xC7,0xCF,0xCF,0xD0,0xEF, \
 259:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xD1,0xD2,0xD3,0xF5,0xD4,0xF7,0xF8,0xF9,0xD5,0x96,0x95,0x98,0xFE,0xFF}
ARM GAS  /tmp/ccWTW02a.s 			page 6


 260:Middlewares/Third_Party/FatFs/src/ff.c **** 
 261:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 1	/* ASCII (for only non-LFN cfg) */
 262:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
 263:Middlewares/Third_Party/FatFs/src/ff.c **** #error Cannot enable LFN without valid code page.
 264:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 265:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 266:Middlewares/Third_Party/FatFs/src/ff.c **** 
 267:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 268:Middlewares/Third_Party/FatFs/src/ff.c **** #error Unknown code page
 269:Middlewares/Third_Party/FatFs/src/ff.c **** 
 270:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 271:Middlewares/Third_Party/FatFs/src/ff.c **** 
 272:Middlewares/Third_Party/FatFs/src/ff.c **** 
 273:Middlewares/Third_Party/FatFs/src/ff.c **** /* Character code support macros */
 274:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsUpper(c)	(((c)>='A')&&((c)<='Z'))
 275:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsLower(c)	(((c)>='a')&&((c)<='z'))
 276:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDigit(c)	(((c)>='0')&&((c)<='9'))
 277:Middlewares/Third_Party/FatFs/src/ff.c **** 
 278:Middlewares/Third_Party/FatFs/src/ff.c **** #if _DF1S != 0	/* Code page is DBCS */
 279:Middlewares/Third_Party/FatFs/src/ff.c **** 
 280:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _DF2S	/* Two 1st byte areas */
 281:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS1(c)	(((BYTE)(c) >= _DF1S && (BYTE)(c) <= _DF1E) || ((BYTE)(c) >= _DF2S && (BYTE)(c) 
 282:Middlewares/Third_Party/FatFs/src/ff.c **** #else			/* One 1st byte area */
 283:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS1(c)	((BYTE)(c) >= _DF1S && (BYTE)(c) <= _DF1E)
 284:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 285:Middlewares/Third_Party/FatFs/src/ff.c **** 
 286:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _DS3S	/* Three 2nd byte areas */
 287:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS2(c)	(((BYTE)(c) >= _DS1S && (BYTE)(c) <= _DS1E) || ((BYTE)(c) >= _DS2S && (BYTE)(c) 
 288:Middlewares/Third_Party/FatFs/src/ff.c **** #else			/* Two 2nd byte areas */
 289:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS2(c)	(((BYTE)(c) >= _DS1S && (BYTE)(c) <= _DS1E) || ((BYTE)(c) >= _DS2S && (BYTE)(c) 
 290:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 291:Middlewares/Third_Party/FatFs/src/ff.c **** 
 292:Middlewares/Third_Party/FatFs/src/ff.c **** #else			/* Code page is SBCS */
 293:Middlewares/Third_Party/FatFs/src/ff.c **** 
 294:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS1(c)	0
 295:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS2(c)	0
 296:Middlewares/Third_Party/FatFs/src/ff.c **** 
 297:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _DF1S */
 298:Middlewares/Third_Party/FatFs/src/ff.c **** 
 299:Middlewares/Third_Party/FatFs/src/ff.c **** 
 300:Middlewares/Third_Party/FatFs/src/ff.c **** /* Additional file attribute bits for internal use */
 301:Middlewares/Third_Party/FatFs/src/ff.c **** #define	AM_VOL		0x08	/* Volume label */
 302:Middlewares/Third_Party/FatFs/src/ff.c **** #define AM_LFN		0x0F	/* LFN entry */
 303:Middlewares/Third_Party/FatFs/src/ff.c **** #define AM_MASK		0x3F	/* Mask of defined bits */
 304:Middlewares/Third_Party/FatFs/src/ff.c **** 
 305:Middlewares/Third_Party/FatFs/src/ff.c **** 
 306:Middlewares/Third_Party/FatFs/src/ff.c **** /* Additional file access control and file status flags for internal use */
 307:Middlewares/Third_Party/FatFs/src/ff.c **** #define FA_SEEKEND	0x20	/* Seek to end of the file on file open */
 308:Middlewares/Third_Party/FatFs/src/ff.c **** #define FA_MODIFIED	0x40	/* File has been modified */
 309:Middlewares/Third_Party/FatFs/src/ff.c **** #define FA_DIRTY	0x80	/* FIL.buf[] needs to be written-back */
 310:Middlewares/Third_Party/FatFs/src/ff.c **** 
 311:Middlewares/Third_Party/FatFs/src/ff.c **** 
 312:Middlewares/Third_Party/FatFs/src/ff.c **** /* Name status flags in fn[] */
 313:Middlewares/Third_Party/FatFs/src/ff.c **** #define NSFLAG		11		/* Index of the name status byte */
 314:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_LOSS		0x01	/* Out of 8.3 format */
 315:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_LFN		0x02	/* Force to create LFN entry */
 316:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_LAST		0x04	/* Last segment */
ARM GAS  /tmp/ccWTW02a.s 			page 7


 317:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_BODY		0x08	/* Lower case flag (body) */
 318:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_EXT		0x10	/* Lower case flag (ext) */
 319:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_DOT		0x20	/* Dot entry */
 320:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_NOLFN	0x40	/* Do not find LFN */
 321:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_NONAME	0x80	/* Not followed */
 322:Middlewares/Third_Party/FatFs/src/ff.c **** 
 323:Middlewares/Third_Party/FatFs/src/ff.c **** 
 324:Middlewares/Third_Party/FatFs/src/ff.c **** /* Limits and boundaries */
 325:Middlewares/Third_Party/FatFs/src/ff.c **** #define MAX_DIR		0x200000		/* Max size of FAT directory */
 326:Middlewares/Third_Party/FatFs/src/ff.c **** #define MAX_DIR_EX	0x10000000		/* Max size of exFAT directory */
 327:Middlewares/Third_Party/FatFs/src/ff.c **** #define MAX_FAT12	0xFF5			/* Max FAT12 clusters (differs from specs, but correct for real DOS/Windo
 328:Middlewares/Third_Party/FatFs/src/ff.c **** #define	MAX_FAT16	0xFFF5			/* Max FAT16 clusters (differs from specs, but correct for real DOS/Wind
 329:Middlewares/Third_Party/FatFs/src/ff.c **** #define	MAX_FAT32	0x0FFFFFF5		/* Max FAT32 clusters (not specified, practical limit) */
 330:Middlewares/Third_Party/FatFs/src/ff.c **** #define	MAX_EXFAT	0x7FFFFFFD		/* Max exFAT clusters (differs from specs, implementation limit) */
 331:Middlewares/Third_Party/FatFs/src/ff.c **** 
 332:Middlewares/Third_Party/FatFs/src/ff.c **** 
 333:Middlewares/Third_Party/FatFs/src/ff.c **** /* FatFs refers the FAT structure as simple byte array instead of structure member
 334:Middlewares/Third_Party/FatFs/src/ff.c **** / because the C structure is not binary compatible between different platforms */
 335:Middlewares/Third_Party/FatFs/src/ff.c **** 
 336:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_JmpBoot			0		/* x86 jump instruction (3-byte) */
 337:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_OEMName			3		/* OEM name (8-byte) */
 338:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_BytsPerSec		11		/* Sector size [byte] (WORD) */
 339:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_SecPerClus		13		/* Cluster size [sector] (BYTE) */
 340:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_RsvdSecCnt		14		/* Size of reserved area [sector] (WORD) */
 341:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_NumFATs			16		/* Number of FATs (BYTE) */
 342:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_RootEntCnt		17		/* Size of root directory area for FAT12/16 [entry] (WORD) */
 343:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_TotSec16		19		/* Volume size (16-bit) [sector] (WORD) */
 344:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_Media			21		/* Media descriptor byte (BYTE) */
 345:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FATSz16			22		/* FAT size (16-bit) [sector] (WORD) */
 346:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_SecPerTrk		24		/* Track size for int13h [sector] (WORD) */
 347:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_NumHeads		26		/* Number of heads for int13h (WORD) */
 348:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_HiddSec			28		/* Volume offset from top of the drive (DWORD) */
 349:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_TotSec32		32		/* Volume size (32-bit) [sector] (DWORD) */
 350:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_DrvNum			36		/* Physical drive number for int13h (BYTE) */
 351:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_NTres			37		/* Error flag (BYTE) */
 352:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_BootSig			38		/* Extended boot signature (BYTE) */
 353:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_VolID			39		/* Volume serial number (DWORD) */
 354:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_VolLab			43		/* Volume label string (8-byte) */
 355:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_FilSysType		54		/* File system type string (8-byte) */
 356:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_BootCode			62		/* Boot code (448-byte) */
 357:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_55AA				510		/* Signature word (WORD) */
 358:Middlewares/Third_Party/FatFs/src/ff.c **** 
 359:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FATSz32			36		/* FAT32: FAT size [sector] (DWORD) */
 360:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_ExtFlags32		40		/* FAT32: Extended flags (WORD) */
 361:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FSVer32			42		/* FAT32: File system version (WORD) */
 362:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_RootClus32		44		/* FAT32: Root directory cluster (DWORD) */
 363:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FSInfo32		48		/* FAT32: Offset of FSINFO sector (WORD) */
 364:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_BkBootSec32		50		/* FAT32: Offset of backup boot sector (WORD) */
 365:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_DrvNum32			64		/* FAT32: Physical drive number for int13h (BYTE) */
 366:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_NTres32			65		/* FAT32: Error flag (BYTE) */
 367:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_BootSig32		66		/* FAT32: Extended boot signature (BYTE) */
 368:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_VolID32			67		/* FAT32: Volume serial number (DWORD) */
 369:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_VolLab32			71		/* FAT32: Volume label string (8-byte) */
 370:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_FilSysType32		82		/* FAT32: File system type string (8-byte) */
 371:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_BootCode32		90		/* FAT32: Boot code (420-byte) */
 372:Middlewares/Third_Party/FatFs/src/ff.c **** 
 373:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_ZeroedEx		11		/* exFAT: MBZ field (53-byte) */
ARM GAS  /tmp/ccWTW02a.s 			page 8


 374:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_VolOfsEx		64		/* exFAT: Volume offset from top of the drive [sector] (QWORD) */
 375:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_TotSecEx		72		/* exFAT: Volume size [sector] (QWORD) */
 376:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FatOfsEx		80		/* exFAT: FAT offset from top of the volume [sector] (DWORD) */
 377:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FatSzEx			84		/* exFAT: FAT size [sector] (DWORD) */
 378:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_DataOfsEx		88		/* exFAT: Data offset from top of the volume [sector] (DWORD) */
 379:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_NumClusEx		92		/* exFAT: Number of clusters (DWORD) */
 380:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_RootClusEx		96		/* exFAT: Root directory start cluster (DWORD) */
 381:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_VolIDEx			100		/* exFAT: Volume serial number (DWORD) */
 382:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FSVerEx			104		/* exFAT: File system version (WORD) */
 383:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_VolFlagEx		106		/* exFAT: Volume flags (BYTE) */
 384:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_ActFatEx		107		/* exFAT: Active FAT flags (BYTE) */
 385:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_BytsPerSecEx	108		/* exFAT: Log2 of sector size in unit of byte (BYTE) */
 386:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_SecPerClusEx	109		/* exFAT: Log2 of cluster size in unit of sector (BYTE) */
 387:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_NumFATsEx		110		/* exFAT: Number of FATs (BYTE) */
 388:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_DrvNumEx		111		/* exFAT: Physical drive number for int13h (BYTE) */
 389:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_PercInUseEx		112		/* exFAT: Percent in use (BYTE) */
 390:Middlewares/Third_Party/FatFs/src/ff.c **** #define	BPB_RsvdEx			113		/* exFAT: Reserved (7-byte) */
 391:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_BootCodeEx		120		/* exFAT: Boot code (390-byte) */
 392:Middlewares/Third_Party/FatFs/src/ff.c **** 
 393:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_Name			0		/* Short file name (11-byte) */
 394:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_Attr			11		/* Attribute (BYTE) */
 395:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_NTres			12		/* Lower case flag (BYTE) */
 396:Middlewares/Third_Party/FatFs/src/ff.c **** #define DIR_CrtTime10		13		/* Created time sub-second (BYTE) */
 397:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_CrtTime			14		/* Created time (DWORD) */
 398:Middlewares/Third_Party/FatFs/src/ff.c **** #define DIR_LstAccDate		18		/* Last accessed date (WORD) */
 399:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_FstClusHI		20		/* Higher 16-bit of first cluster (WORD) */
 400:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_ModTime			22		/* Modified time (DWORD) */
 401:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_FstClusLO		26		/* Lower 16-bit of first cluster (WORD) */
 402:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_FileSize		28		/* File size (DWORD) */
 403:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_Ord			0		/* LFN: LFN order and LLE flag (BYTE) */
 404:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_Attr			11		/* LFN: LFN attribute (BYTE) */
 405:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_Type			12		/* LFN: Entry type (BYTE) */
 406:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_Chksum			13		/* LFN: Checksum of the SFN (BYTE) */
 407:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_FstClusLO		26		/* LFN: MBZ field (WORD) */
 408:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_Type			0		/* exFAT: Type of exFAT directory entry (BYTE) */
 409:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_NumLabel		1		/* exFAT: Number of volume label characters (BYTE) */
 410:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_Label			2		/* exFAT: Volume label (11-WORD) */
 411:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_CaseSum		4		/* exFAT: Sum of case conversion table (DWORD) */
 412:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_NumSec			1		/* exFAT: Number of secondary entries (BYTE) */
 413:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_SetSum			2		/* exFAT: Sum of the set of directory entries (WORD) */
 414:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_Attr			4		/* exFAT: File attribute (WORD) */
 415:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_CrtTime		8		/* exFAT: Created time (DWORD) */
 416:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_ModTime		12		/* exFAT: Modified time (DWORD) */
 417:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_AccTime		16		/* exFAT: Last accessed time (DWORD) */
 418:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_CrtTime10		20		/* exFAT: Created time subsecond (BYTE) */
 419:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_ModTime10		21		/* exFAT: Modified time subsecond (BYTE) */
 420:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_CrtTZ			22		/* exFAT: Created timezone (BYTE) */
 421:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_ModTZ			23		/* exFAT: Modified timezone (BYTE) */
 422:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_AccTZ			24		/* exFAT: Last accessed timezone (BYTE) */
 423:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_GenFlags		33		/* exFAT: General secondary flags (WORD) */
 424:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_NumName		35		/* exFAT: Number of file name characters (BYTE) */
 425:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_NameHash		36		/* exFAT: Hash of file name (WORD) */
 426:Middlewares/Third_Party/FatFs/src/ff.c **** #define XDIR_ValidFileSize	40		/* exFAT: Valid file size (QWORD) */
 427:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_FstClus		52		/* exFAT: First cluster of the file data (DWORD) */
 428:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_FileSize		56		/* exFAT: File/Directory size (QWORD) */
 429:Middlewares/Third_Party/FatFs/src/ff.c **** 
 430:Middlewares/Third_Party/FatFs/src/ff.c **** #define	SZDIRE				32		/* Size of a directory entry */
ARM GAS  /tmp/ccWTW02a.s 			page 9


 431:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DDEM				0xE5	/* Deleted directory entry mark set to DIR_Name[0] */
 432:Middlewares/Third_Party/FatFs/src/ff.c **** #define	RDDEM				0x05	/* Replacement of the character collides with DDEM */
 433:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LLEF				0x40	/* Last long entry flag in LDIR_Ord */
 434:Middlewares/Third_Party/FatFs/src/ff.c **** 
 435:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FSI_LeadSig			0		/* FAT32 FSI: Leading signature (DWORD) */
 436:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FSI_StrucSig		484		/* FAT32 FSI: Structure signature (DWORD) */
 437:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FSI_Free_Count		488		/* FAT32 FSI: Number of free clusters (DWORD) */
 438:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FSI_Nxt_Free		492		/* FAT32 FSI: Last allocated cluster (DWORD) */
 439:Middlewares/Third_Party/FatFs/src/ff.c **** 
 440:Middlewares/Third_Party/FatFs/src/ff.c **** #define MBR_Table			446		/* MBR: Offset of partition table in the MBR */
 441:Middlewares/Third_Party/FatFs/src/ff.c **** #define	SZ_PTE				16		/* MBR: Size of a partition table entry */
 442:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_Boot			0		/* MBR PTE: Boot indicator */
 443:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_StHead			1		/* MBR PTE: Start head */
 444:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_StSec			2		/* MBR PTE: Start sector */
 445:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_StCyl			3		/* MBR PTE: Start cylinder */
 446:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_System			4		/* MBR PTE: System ID */
 447:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_EdHead			5		/* MBR PTE: End head */
 448:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_EdSec			6		/* MBR PTE: End sector */
 449:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_EdCyl			7		/* MBR PTE: End cylinder */
 450:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_StLba			8		/* MBR PTE: Start in LBA */
 451:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_SizLba			12		/* MBR PTE: Size in LBA */
 452:Middlewares/Third_Party/FatFs/src/ff.c **** 
 453:Middlewares/Third_Party/FatFs/src/ff.c **** 
 454:Middlewares/Third_Party/FatFs/src/ff.c **** /* Post process after fatal error on file operation */
 455:Middlewares/Third_Party/FatFs/src/ff.c **** #define	ABORT(fs, res)		{ fp->err = (BYTE)(res); LEAVE_FF(fs, res); }
 456:Middlewares/Third_Party/FatFs/src/ff.c **** 
 457:Middlewares/Third_Party/FatFs/src/ff.c **** 
 458:Middlewares/Third_Party/FatFs/src/ff.c **** /* Reentrancy related */
 459:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 460:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 1
 461:Middlewares/Third_Party/FatFs/src/ff.c **** #error Static LFN work area cannot be used at thread-safe configuration
 462:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 463:Middlewares/Third_Party/FatFs/src/ff.c **** #define	ENTER_FF(fs)		{ if (!lock_fs(fs)) return FR_TIMEOUT; }
 464:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LEAVE_FF(fs, res)	{ unlock_fs(fs, res); return res; }
 465:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 466:Middlewares/Third_Party/FatFs/src/ff.c **** #define	ENTER_FF(fs)
 467:Middlewares/Third_Party/FatFs/src/ff.c **** #define LEAVE_FF(fs, res)	return res
 468:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 469:Middlewares/Third_Party/FatFs/src/ff.c **** 
 470:Middlewares/Third_Party/FatFs/src/ff.c **** 
 471:Middlewares/Third_Party/FatFs/src/ff.c **** /* Definitions of volume - partition conversion */
 472:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MULTI_PARTITION
 473:Middlewares/Third_Party/FatFs/src/ff.c **** #define LD2PD(vol) VolToPart[vol].pd	/* Get physical drive number */
 474:Middlewares/Third_Party/FatFs/src/ff.c **** #define LD2PT(vol) VolToPart[vol].pt	/* Get partition index */
 475:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 476:Middlewares/Third_Party/FatFs/src/ff.c **** #define LD2PD(vol) (BYTE)(vol)	/* Each logical drive is bound to the same physical drive number */
 477:Middlewares/Third_Party/FatFs/src/ff.c **** #define LD2PT(vol) 0			/* Find first valid partition or in SFD */
 478:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 479:Middlewares/Third_Party/FatFs/src/ff.c **** 
 480:Middlewares/Third_Party/FatFs/src/ff.c **** 
 481:Middlewares/Third_Party/FatFs/src/ff.c **** /* Definitions of sector size */
 482:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_MAX_SS < _MIN_SS) || (_MAX_SS != 512 && _MAX_SS != 1024 && _MAX_SS != 2048 && _MAX_SS != 4096
 483:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong sector size configuration
 484:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 485:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS == _MIN_SS
 486:Middlewares/Third_Party/FatFs/src/ff.c **** #define	SS(fs)	((UINT)_MAX_SS)	/* Fixed sector size */
 487:Middlewares/Third_Party/FatFs/src/ff.c **** #else
ARM GAS  /tmp/ccWTW02a.s 			page 10


 488:Middlewares/Third_Party/FatFs/src/ff.c **** #define	SS(fs)	((fs)->ssize)	/* Variable sector size */
 489:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 490:Middlewares/Third_Party/FatFs/src/ff.c **** 
 491:Middlewares/Third_Party/FatFs/src/ff.c **** 
 492:Middlewares/Third_Party/FatFs/src/ff.c **** /* Timestamp */
 493:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_NORTC == 1
 494:Middlewares/Third_Party/FatFs/src/ff.c **** #if _NORTC_YEAR < 1980 || _NORTC_YEAR > 2107 || _NORTC_MON < 1 || _NORTC_MON > 12 || _NORTC_MDAY < 
 495:Middlewares/Third_Party/FatFs/src/ff.c **** #error Invalid _FS_NORTC settings
 496:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 497:Middlewares/Third_Party/FatFs/src/ff.c **** #define GET_FATTIME()	((DWORD)(_NORTC_YEAR - 1980) << 25 | (DWORD)_NORTC_MON << 21 | (DWORD)_NORTC_
 498:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 499:Middlewares/Third_Party/FatFs/src/ff.c **** #define GET_FATTIME()	get_fattime()
 500:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 501:Middlewares/Third_Party/FatFs/src/ff.c **** 
 502:Middlewares/Third_Party/FatFs/src/ff.c **** 
 503:Middlewares/Third_Party/FatFs/src/ff.c **** /* File lock controls */
 504:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 505:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_READONLY
 506:Middlewares/Third_Party/FatFs/src/ff.c **** #error _FS_LOCK must be 0 at read-only configuration
 507:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 508:Middlewares/Third_Party/FatFs/src/ff.c **** typedef struct {
 509:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;		/* Object ID 1, volume (NULL:blank entry) */
 510:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clu;		/* Object ID 2, containing directory (0:root) */
 511:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ofs;		/* Object ID 3, offset in the directory */
 512:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD ctr;		/* Object open counter, 0:none, 0x01..0xFF:read mode open count, 0x100:write mode */
 513:Middlewares/Third_Party/FatFs/src/ff.c **** } FILESEM;
 514:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 515:Middlewares/Third_Party/FatFs/src/ff.c **** 
 516:Middlewares/Third_Party/FatFs/src/ff.c **** 
 517:Middlewares/Third_Party/FatFs/src/ff.c **** 
 518:Middlewares/Third_Party/FatFs/src/ff.c **** 
 519:Middlewares/Third_Party/FatFs/src/ff.c **** 
 520:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------------------------------------------
 521:Middlewares/Third_Party/FatFs/src/ff.c **** 
 522:Middlewares/Third_Party/FatFs/src/ff.c ****    Module Private Work Area
 523:Middlewares/Third_Party/FatFs/src/ff.c **** 
 524:Middlewares/Third_Party/FatFs/src/ff.c **** ---------------------------------------------------------------------------*/
 525:Middlewares/Third_Party/FatFs/src/ff.c **** 
 526:Middlewares/Third_Party/FatFs/src/ff.c **** /* Remark: Variables defined here without initial value shall be guaranteed
 527:Middlewares/Third_Party/FatFs/src/ff.c **** /  zero/null at start-up. If not, the linker option or start-up routine is
 528:Middlewares/Third_Party/FatFs/src/ff.c **** /  not compliance with C standard. */
 529:Middlewares/Third_Party/FatFs/src/ff.c **** 
 530:Middlewares/Third_Party/FatFs/src/ff.c **** #if _VOLUMES < 1 || _VOLUMES > 10
 531:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong _VOLUMES setting
 532:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 533:Middlewares/Third_Party/FatFs/src/ff.c **** static FATFS *FatFs[_VOLUMES];	/* Pointer to the file system objects (logical drives) */
 534:Middlewares/Third_Party/FatFs/src/ff.c **** static WORD Fsid;				/* File system mount ID */
 535:Middlewares/Third_Party/FatFs/src/ff.c **** 
 536:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0 && _VOLUMES >= 2
 537:Middlewares/Third_Party/FatFs/src/ff.c **** static BYTE CurrVol;			/* Current drive */
 538:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 539:Middlewares/Third_Party/FatFs/src/ff.c **** 
 540:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 541:Middlewares/Third_Party/FatFs/src/ff.c **** static FILESEM Files[_FS_LOCK];	/* Open object lock semaphores */
 542:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 543:Middlewares/Third_Party/FatFs/src/ff.c **** 
 544:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 0		/* Non-LFN configuration */
ARM GAS  /tmp/ccWTW02a.s 			page 11


 545:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEF_NAMBUF
 546:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_NAMBUF(fs)
 547:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_NAMBUF()
 548:Middlewares/Third_Party/FatFs/src/ff.c **** 
 549:Middlewares/Third_Party/FatFs/src/ff.c **** #else					/* LFN configuration */
 550:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_LFN < 12 || _MAX_LFN > 255
 551:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong _MAX_LFN value
 552:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 553:Middlewares/Third_Party/FatFs/src/ff.c **** #define MAXDIRB(nc)	((nc + 44U) / 15 * SZDIRE)
 554:Middlewares/Third_Party/FatFs/src/ff.c **** 
 555:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 1		/* LFN enabled with static working buffer */
 556:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 557:Middlewares/Third_Party/FatFs/src/ff.c **** static BYTE	DirBuf[MAXDIRB(_MAX_LFN)];	/* Directory entry block scratchpad buffer */
 558:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 559:Middlewares/Third_Party/FatFs/src/ff.c **** static WCHAR LfnBuf[_MAX_LFN + 1];	/* LFN enabled with static working buffer */
 560:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEF_NAMBUF
 561:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_NAMBUF(fs)
 562:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_NAMBUF()
 563:Middlewares/Third_Party/FatFs/src/ff.c **** 
 564:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _USE_LFN == 2 	/* LFN enabled with dynamic working buffer on the stack */
 565:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 566:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEF_NAMBUF		WCHAR lbuf[_MAX_LFN+1]; BYTE dbuf[MAXDIRB(_MAX_LFN)];
 567:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_NAMBUF(fs)	{ (fs)->lfnbuf = lbuf; (fs)->dirbuf = dbuf; }
 568:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_NAMBUF()
 569:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 570:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEF_NAMBUF		WCHAR lbuf[_MAX_LFN+1];
 571:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_NAMBUF(fs)	{ (fs)->lfnbuf = lbuf; }
 572:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_NAMBUF()
 573:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 574:Middlewares/Third_Party/FatFs/src/ff.c **** 
 575:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _USE_LFN == 3 	/* LFN enabled with dynamic working buffer on the heap */
 576:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 577:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEF_NAMBUF		WCHAR *lfn;
 578:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_NAMBUF(fs)	{ lfn = ff_memalloc((_MAX_LFN+1)*2 + MAXDIRB(_MAX_LFN)); if (!lfn) LEAVE_FF
 579:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_NAMBUF()	ff_memfree(lfn)
 580:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 581:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEF_NAMBUF		WCHAR *lfn;
 582:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_NAMBUF(fs)	{ lfn = ff_memalloc((_MAX_LFN+1)*2); if (!lfn) LEAVE_FF(fs, FR_NOT_ENOUGH_C
 583:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_NAMBUF()	ff_memfree(lfn)
 584:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 585:Middlewares/Third_Party/FatFs/src/ff.c **** 
 586:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 587:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong _USE_LFN setting
 588:Middlewares/Third_Party/FatFs/src/ff.c **** 
 589:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 590:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* else _USE_LFN == 0 */
 591:Middlewares/Third_Party/FatFs/src/ff.c **** 
 592:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
 593:Middlewares/Third_Party/FatFs/src/ff.c **** static const BYTE ExCvt[] = _EXCVT;	/* Upper conversion table for SBCS extended characters */
 594:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 595:Middlewares/Third_Party/FatFs/src/ff.c **** 
 596:Middlewares/Third_Party/FatFs/src/ff.c **** 
 597:Middlewares/Third_Party/FatFs/src/ff.c **** 
 598:Middlewares/Third_Party/FatFs/src/ff.c **** 
 599:Middlewares/Third_Party/FatFs/src/ff.c **** 
 600:Middlewares/Third_Party/FatFs/src/ff.c **** 
 601:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------------------------------------------
ARM GAS  /tmp/ccWTW02a.s 			page 12


 602:Middlewares/Third_Party/FatFs/src/ff.c **** 
 603:Middlewares/Third_Party/FatFs/src/ff.c ****    Module Private Functions
 604:Middlewares/Third_Party/FatFs/src/ff.c **** 
 605:Middlewares/Third_Party/FatFs/src/ff.c **** ---------------------------------------------------------------------------*/
 606:Middlewares/Third_Party/FatFs/src/ff.c **** 
 607:Middlewares/Third_Party/FatFs/src/ff.c **** 
 608:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 609:Middlewares/Third_Party/FatFs/src/ff.c **** /* Load/Store multi-byte word in the FAT structure                       */
 610:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 611:Middlewares/Third_Party/FatFs/src/ff.c **** 
 612:Middlewares/Third_Party/FatFs/src/ff.c **** static
 613:Middlewares/Third_Party/FatFs/src/ff.c **** WORD ld_word (const BYTE* ptr)	/*	 Load a 2-byte little-endian word */
 614:Middlewares/Third_Party/FatFs/src/ff.c **** {
  28              		.loc 1 614 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
 615:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD rv;
  33              		.loc 1 615 2 view .LVU1
 616:Middlewares/Third_Party/FatFs/src/ff.c **** 
 617:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = ptr[1];
  34              		.loc 1 617 2 view .LVU2
  35              		.loc 1 617 10 is_stmt 0 view .LVU3
  36 0000 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
  37              	.LVL1:
 618:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[0];
  38              		.loc 1 618 2 is_stmt 1 view .LVU4
  39              		.loc 1 618 20 is_stmt 0 view .LVU5
  40 0002 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
  41              	.LVL2:
 619:Middlewares/Third_Party/FatFs/src/ff.c **** 	return rv;
  42              		.loc 1 619 2 is_stmt 1 view .LVU6
 620:Middlewares/Third_Party/FatFs/src/ff.c **** }
  43              		.loc 1 620 1 is_stmt 0 view .LVU7
  44 0004 40EA0220 		orr	r0, r0, r2, lsl #8
  45              	.LVL3:
  46              		.loc 1 620 1 view .LVU8
  47 0008 7047     		bx	lr
  48              		.cfi_endproc
  49              	.LFE141:
  51              		.section	.text.ld_dword,"ax",%progbits
  52              		.align	1
  53              		.syntax unified
  54              		.thumb
  55              		.thumb_func
  56              		.fpu fpv5-d16
  58              	ld_dword:
  59              	.LVL4:
  60              	.LFB142:
 621:Middlewares/Third_Party/FatFs/src/ff.c **** 
 622:Middlewares/Third_Party/FatFs/src/ff.c **** static
 623:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD ld_dword (const BYTE* ptr)	/* Load a 4-byte little-endian word */
 624:Middlewares/Third_Party/FatFs/src/ff.c **** {
  61              		.loc 1 624 1 is_stmt 1 view -0
  62              		.cfi_startproc
  63              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccWTW02a.s 			page 13


  64              		@ frame_needed = 0, uses_anonymous_args = 0
  65              		@ link register save eliminated.
 625:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD rv;
  66              		.loc 1 625 2 view .LVU10
 626:Middlewares/Third_Party/FatFs/src/ff.c **** 
 627:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = ptr[3];
  67              		.loc 1 627 2 view .LVU11
  68              		.loc 1 627 10 is_stmt 0 view .LVU12
  69 0000 C278     		ldrb	r2, [r0, #3]	@ zero_extendqisi2
  70              	.LVL5:
 628:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[2];
  71              		.loc 1 628 2 is_stmt 1 view .LVU13
  72              		.loc 1 628 20 is_stmt 0 view .LVU14
  73 0002 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
  74              		.loc 1 628 5 view .LVU15
  75 0004 43EA0222 		orr	r2, r3, r2, lsl #8
  76              	.LVL6:
 629:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[1];
  77              		.loc 1 629 2 is_stmt 1 view .LVU16
  78              		.loc 1 629 20 is_stmt 0 view .LVU17
  79 0008 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
  80              		.loc 1 629 5 view .LVU18
  81 000a 43EA0223 		orr	r3, r3, r2, lsl #8
  82              	.LVL7:
 630:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[0];
  83              		.loc 1 630 2 is_stmt 1 view .LVU19
  84              		.loc 1 630 20 is_stmt 0 view .LVU20
  85 000e 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
  86              	.LVL8:
 631:Middlewares/Third_Party/FatFs/src/ff.c **** 	return rv;
  87              		.loc 1 631 2 is_stmt 1 view .LVU21
 632:Middlewares/Third_Party/FatFs/src/ff.c **** }
  88              		.loc 1 632 1 is_stmt 0 view .LVU22
  89 0010 40EA0320 		orr	r0, r0, r3, lsl #8
  90              	.LVL9:
  91              		.loc 1 632 1 view .LVU23
  92 0014 7047     		bx	lr
  93              		.cfi_endproc
  94              	.LFE142:
  96              		.section	.text.st_word,"ax",%progbits
  97              		.align	1
  98              		.syntax unified
  99              		.thumb
 100              		.thumb_func
 101              		.fpu fpv5-d16
 103              	st_word:
 104              	.LVL10:
 105              	.LFB143:
 633:Middlewares/Third_Party/FatFs/src/ff.c **** 
 634:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 635:Middlewares/Third_Party/FatFs/src/ff.c **** static
 636:Middlewares/Third_Party/FatFs/src/ff.c **** QWORD ld_qword (const BYTE* ptr)	/* Load an 8-byte little-endian word */
 637:Middlewares/Third_Party/FatFs/src/ff.c **** {
 638:Middlewares/Third_Party/FatFs/src/ff.c **** 	QWORD rv;
 639:Middlewares/Third_Party/FatFs/src/ff.c **** 
 640:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = ptr[7];
 641:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[6];
ARM GAS  /tmp/ccWTW02a.s 			page 14


 642:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[5];
 643:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[4];
 644:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[3];
 645:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[2];
 646:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[1];
 647:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[0];
 648:Middlewares/Third_Party/FatFs/src/ff.c **** 	return rv;
 649:Middlewares/Third_Party/FatFs/src/ff.c **** }
 650:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 651:Middlewares/Third_Party/FatFs/src/ff.c **** 
 652:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 653:Middlewares/Third_Party/FatFs/src/ff.c **** static
 654:Middlewares/Third_Party/FatFs/src/ff.c **** void st_word (BYTE* ptr, WORD val)	/* Store a 2-byte word in little-endian */
 655:Middlewares/Third_Party/FatFs/src/ff.c **** {
 106              		.loc 1 655 1 is_stmt 1 view -0
 107              		.cfi_startproc
 108              		@ args = 0, pretend = 0, frame = 0
 109              		@ frame_needed = 0, uses_anonymous_args = 0
 110              		@ link register save eliminated.
 656:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 111              		.loc 1 656 2 view .LVU25
 112              		.loc 1 656 9 is_stmt 0 view .LVU26
 113 0000 0170     		strb	r1, [r0]
 114              		.loc 1 656 22 is_stmt 1 view .LVU27
 115              	.LVL11:
 657:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val;
 116              		.loc 1 657 2 view .LVU28
 117              		.loc 1 657 11 is_stmt 0 view .LVU29
 118 0002 090A     		lsrs	r1, r1, #8
 119              	.LVL12:
 120              		.loc 1 657 9 view .LVU30
 121 0004 4170     		strb	r1, [r0, #1]
 658:Middlewares/Third_Party/FatFs/src/ff.c **** }
 122              		.loc 1 658 1 view .LVU31
 123 0006 7047     		bx	lr
 124              		.cfi_endproc
 125              	.LFE143:
 127              		.section	.text.st_dword,"ax",%progbits
 128              		.align	1
 129              		.syntax unified
 130              		.thumb
 131              		.thumb_func
 132              		.fpu fpv5-d16
 134              	st_dword:
 135              	.LVL13:
 136              	.LFB144:
 659:Middlewares/Third_Party/FatFs/src/ff.c **** 
 660:Middlewares/Third_Party/FatFs/src/ff.c **** static
 661:Middlewares/Third_Party/FatFs/src/ff.c **** void st_dword (BYTE* ptr, DWORD val)	/* Store a 4-byte word in little-endian */
 662:Middlewares/Third_Party/FatFs/src/ff.c **** {
 137              		.loc 1 662 1 is_stmt 1 view -0
 138              		.cfi_startproc
 139              		@ args = 0, pretend = 0, frame = 0
 140              		@ frame_needed = 0, uses_anonymous_args = 0
 141              		@ link register save eliminated.
 663:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 142              		.loc 1 663 2 view .LVU33
ARM GAS  /tmp/ccWTW02a.s 			page 15


 143              		.loc 1 663 9 is_stmt 0 view .LVU34
 144 0000 0170     		strb	r1, [r0]
 145              		.loc 1 663 22 is_stmt 1 view .LVU35
 146              	.LVL14:
 664:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 147              		.loc 1 664 2 view .LVU36
 148              		.loc 1 664 11 is_stmt 0 view .LVU37
 149 0002 C1F30723 		ubfx	r3, r1, #8, #8
 150              		.loc 1 664 9 view .LVU38
 151 0006 4370     		strb	r3, [r0, #1]
 152              		.loc 1 664 22 is_stmt 1 view .LVU39
 153              	.LVL15:
 665:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 154              		.loc 1 665 2 view .LVU40
 155              		.loc 1 665 11 is_stmt 0 view .LVU41
 156 0008 C1F30743 		ubfx	r3, r1, #16, #8
 157              		.loc 1 665 9 view .LVU42
 158 000c 8370     		strb	r3, [r0, #2]
 159              		.loc 1 665 22 is_stmt 1 view .LVU43
 160              	.LVL16:
 666:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val;
 161              		.loc 1 666 2 view .LVU44
 162              		.loc 1 666 11 is_stmt 0 view .LVU45
 163 000e 090E     		lsrs	r1, r1, #24
 164              	.LVL17:
 165              		.loc 1 666 9 view .LVU46
 166 0010 C170     		strb	r1, [r0, #3]
 667:Middlewares/Third_Party/FatFs/src/ff.c **** }
 167              		.loc 1 667 1 view .LVU47
 168 0012 7047     		bx	lr
 169              		.cfi_endproc
 170              	.LFE144:
 172              		.section	.text.mem_cpy,"ax",%progbits
 173              		.align	1
 174              		.syntax unified
 175              		.thumb
 176              		.thumb_func
 177              		.fpu fpv5-d16
 179              	mem_cpy:
 180              	.LVL18:
 181              	.LFB145:
 668:Middlewares/Third_Party/FatFs/src/ff.c **** 
 669:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 670:Middlewares/Third_Party/FatFs/src/ff.c **** static
 671:Middlewares/Third_Party/FatFs/src/ff.c **** void st_qword (BYTE* ptr, QWORD val)	/* Store an 8-byte word in little-endian */
 672:Middlewares/Third_Party/FatFs/src/ff.c **** {
 673:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 674:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 675:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 676:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 677:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 678:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 679:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 680:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val;
 681:Middlewares/Third_Party/FatFs/src/ff.c **** }
 682:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 683:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* !_FS_READONLY */
ARM GAS  /tmp/ccWTW02a.s 			page 16


 684:Middlewares/Third_Party/FatFs/src/ff.c **** 
 685:Middlewares/Third_Party/FatFs/src/ff.c **** 
 686:Middlewares/Third_Party/FatFs/src/ff.c **** 
 687:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 688:Middlewares/Third_Party/FatFs/src/ff.c **** /* String functions                                                      */
 689:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 690:Middlewares/Third_Party/FatFs/src/ff.c **** 
 691:Middlewares/Third_Party/FatFs/src/ff.c **** /* Copy memory to memory */
 692:Middlewares/Third_Party/FatFs/src/ff.c **** static
 693:Middlewares/Third_Party/FatFs/src/ff.c **** void mem_cpy (void* dst, const void* src, UINT cnt) {
 182              		.loc 1 693 53 is_stmt 1 view -0
 183              		.cfi_startproc
 184              		@ args = 0, pretend = 0, frame = 0
 185              		@ frame_needed = 0, uses_anonymous_args = 0
 186              		@ link register save eliminated.
 187              		.loc 1 693 53 is_stmt 0 view .LVU49
 188 0000 10B4     		push	{r4}
 189              	.LCFI0:
 190              		.cfi_def_cfa_offset 4
 191              		.cfi_offset 4, -4
 694:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *d = (BYTE*)dst;
 192              		.loc 1 694 2 is_stmt 1 view .LVU50
 193              	.LVL19:
 695:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE *s = (const BYTE*)src;
 194              		.loc 1 695 2 view .LVU51
 696:Middlewares/Third_Party/FatFs/src/ff.c **** 
 697:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (cnt) {
 195              		.loc 1 697 2 view .LVU52
 196              		.loc 1 697 5 is_stmt 0 view .LVU53
 197 0002 1446     		mov	r4, r2
 198 0004 2AB1     		cbz	r2, .L5
 199              	.LVL20:
 200              	.L7:
 698:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 201              		.loc 1 698 3 is_stmt 1 discriminator 1 view .LVU54
 699:Middlewares/Third_Party/FatFs/src/ff.c **** 			*d++ = *s++;
 202              		.loc 1 699 4 discriminator 1 view .LVU55
 203              		.loc 1 699 11 is_stmt 0 discriminator 1 view .LVU56
 204 0006 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 205 0008 0131     		adds	r1, r1, #1
 206              	.LVL21:
 207              		.loc 1 699 9 discriminator 1 view .LVU57
 208 000a 0270     		strb	r2, [r0]
 209 000c 0130     		adds	r0, r0, #1
 210              	.LVL22:
 700:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (--cnt);
 211              		.loc 1 700 11 is_stmt 1 discriminator 1 view .LVU58
 212              		.loc 1 700 3 is_stmt 0 discriminator 1 view .LVU59
 213 000e 013C     		subs	r4, r4, #1
 214              	.LVL23:
 215              		.loc 1 700 3 discriminator 1 view .LVU60
 216 0010 F9D1     		bne	.L7
 217              	.LVL24:
 218              	.L5:
 701:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 702:Middlewares/Third_Party/FatFs/src/ff.c **** }
 219              		.loc 1 702 1 view .LVU61
ARM GAS  /tmp/ccWTW02a.s 			page 17


 220 0012 5DF8044B 		ldr	r4, [sp], #4
 221              	.LCFI1:
 222              		.cfi_restore 4
 223              		.cfi_def_cfa_offset 0
 224              	.LVL25:
 225              		.loc 1 702 1 view .LVU62
 226 0016 7047     		bx	lr
 227              		.cfi_endproc
 228              	.LFE145:
 230              		.section	.text.mem_set,"ax",%progbits
 231              		.align	1
 232              		.syntax unified
 233              		.thumb
 234              		.thumb_func
 235              		.fpu fpv5-d16
 237              	mem_set:
 238              	.LFB146:
 703:Middlewares/Third_Party/FatFs/src/ff.c **** 
 704:Middlewares/Third_Party/FatFs/src/ff.c **** /* Fill memory block */
 705:Middlewares/Third_Party/FatFs/src/ff.c **** static
 706:Middlewares/Third_Party/FatFs/src/ff.c **** void mem_set (void* dst, int val, UINT cnt) {
 239              		.loc 1 706 45 is_stmt 1 view -0
 240              		.cfi_startproc
 241              		@ args = 0, pretend = 0, frame = 0
 242              		@ frame_needed = 0, uses_anonymous_args = 0
 243              		@ link register save eliminated.
 244              	.LVL26:
 245              	.L10:
 707:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *d = (BYTE*)dst;
 708:Middlewares/Third_Party/FatFs/src/ff.c **** 
 709:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
 246              		.loc 1 709 2 discriminator 1 view .LVU64
 710:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = (BYTE)val;
 247              		.loc 1 710 3 discriminator 1 view .LVU65
 248              		.loc 1 710 8 is_stmt 0 discriminator 1 view .LVU66
 249 0000 0170     		strb	r1, [r0]
 250 0002 0130     		adds	r0, r0, #1
 711:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (--cnt);
 251              		.loc 1 711 10 is_stmt 1 discriminator 1 view .LVU67
 252              	.LVL27:
 253              		.loc 1 711 2 is_stmt 0 discriminator 1 view .LVU68
 254 0004 013A     		subs	r2, r2, #1
 255              	.LVL28:
 256              		.loc 1 711 2 discriminator 1 view .LVU69
 257 0006 FBD1     		bne	.L10
 712:Middlewares/Third_Party/FatFs/src/ff.c **** }
 258              		.loc 1 712 1 view .LVU70
 259 0008 7047     		bx	lr
 260              		.cfi_endproc
 261              	.LFE146:
 263              		.section	.text.mem_cmp,"ax",%progbits
 264              		.align	1
 265              		.syntax unified
 266              		.thumb
 267              		.thumb_func
 268              		.fpu fpv5-d16
 270              	mem_cmp:
ARM GAS  /tmp/ccWTW02a.s 			page 18


 271              	.LVL29:
 272              	.LFB147:
 713:Middlewares/Third_Party/FatFs/src/ff.c **** 
 714:Middlewares/Third_Party/FatFs/src/ff.c **** /* Compare memory block */
 715:Middlewares/Third_Party/FatFs/src/ff.c **** static
 716:Middlewares/Third_Party/FatFs/src/ff.c **** int mem_cmp (const void* dst, const void* src, UINT cnt) {	/* ZR:same, NZ:different */
 273              		.loc 1 716 58 is_stmt 1 view -0
 274              		.cfi_startproc
 275              		@ args = 0, pretend = 0, frame = 0
 276              		@ frame_needed = 0, uses_anonymous_args = 0
 277              		@ link register save eliminated.
 278              		.loc 1 716 58 is_stmt 0 view .LVU72
 279 0000 10B4     		push	{r4}
 280              	.LCFI2:
 281              		.cfi_def_cfa_offset 4
 282              		.cfi_offset 4, -4
 283 0002 0446     		mov	r4, r0
 717:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE *d = (const BYTE *)dst, *s = (const BYTE *)src;
 284              		.loc 1 717 2 is_stmt 1 view .LVU73
 285              	.LVL30:
 718:Middlewares/Third_Party/FatFs/src/ff.c **** 	int r = 0;
 286              		.loc 1 718 2 view .LVU74
 287              	.L13:
 719:Middlewares/Third_Party/FatFs/src/ff.c **** 
 720:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
 288              		.loc 1 720 2 discriminator 2 view .LVU75
 721:Middlewares/Third_Party/FatFs/src/ff.c **** 		r = *d++ - *s++;
 289              		.loc 1 721 3 discriminator 2 view .LVU76
 290              		.loc 1 721 7 is_stmt 0 discriminator 2 view .LVU77
 291 0004 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 292 0006 0134     		adds	r4, r4, #1
 293              	.LVL31:
 294              		.loc 1 721 14 discriminator 2 view .LVU78
 295 0008 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 296 000a 0131     		adds	r1, r1, #1
 297              	.LVL32:
 298              		.loc 1 721 5 discriminator 2 view .LVU79
 299 000c C01A     		subs	r0, r0, r3
 300              	.LVL33:
 722:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (--cnt && r == 0);
 301              		.loc 1 722 10 is_stmt 1 discriminator 2 view .LVU80
 302              		.loc 1 722 2 is_stmt 0 discriminator 2 view .LVU81
 303 000e 013A     		subs	r2, r2, #1
 304              	.LVL34:
 305              		.loc 1 722 2 discriminator 2 view .LVU82
 306 0010 01D0     		beq	.L11
 307              		.loc 1 722 17 discriminator 1 view .LVU83
 308 0012 0028     		cmp	r0, #0
 309 0014 F6D0     		beq	.L13
 310              	.L11:
 723:Middlewares/Third_Party/FatFs/src/ff.c **** 
 724:Middlewares/Third_Party/FatFs/src/ff.c **** 	return r;
 725:Middlewares/Third_Party/FatFs/src/ff.c **** }
 311              		.loc 1 725 1 view .LVU84
 312 0016 5DF8044B 		ldr	r4, [sp], #4
 313              	.LCFI3:
 314              		.cfi_restore 4
ARM GAS  /tmp/ccWTW02a.s 			page 19


 315              		.cfi_def_cfa_offset 0
 316              	.LVL35:
 317              		.loc 1 725 1 view .LVU85
 318 001a 7047     		bx	lr
 319              		.cfi_endproc
 320              	.LFE147:
 322              		.section	.text.chk_chr,"ax",%progbits
 323              		.align	1
 324              		.syntax unified
 325              		.thumb
 326              		.thumb_func
 327              		.fpu fpv5-d16
 329              	chk_chr:
 330              	.LVL36:
 331              	.LFB148:
 726:Middlewares/Third_Party/FatFs/src/ff.c **** 
 727:Middlewares/Third_Party/FatFs/src/ff.c **** /* Check if chr is contained in the string */
 728:Middlewares/Third_Party/FatFs/src/ff.c **** static
 729:Middlewares/Third_Party/FatFs/src/ff.c **** int chk_chr (const char* str, int chr) {	/* NZ:contained, ZR:not contained */
 332              		.loc 1 729 40 is_stmt 1 view -0
 333              		.cfi_startproc
 334              		@ args = 0, pretend = 0, frame = 0
 335              		@ frame_needed = 0, uses_anonymous_args = 0
 336              		@ link register save eliminated.
 337              		.loc 1 729 40 is_stmt 0 view .LVU87
 338 0000 0346     		mov	r3, r0
 730:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (*str && *str != chr) str++;
 339              		.loc 1 730 2 is_stmt 1 view .LVU88
 340              	.LVL37:
 341              	.L16:
 342              		.loc 1 730 8 discriminator 1 view .LVU89
 343              		.loc 1 730 9 is_stmt 0 discriminator 1 view .LVU90
 344 0002 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 345              		.loc 1 730 8 discriminator 1 view .LVU91
 346 0004 18B1     		cbz	r0, .L17
 347              		.loc 1 730 14 discriminator 2 view .LVU92
 348 0006 8842     		cmp	r0, r1
 349 0008 01D0     		beq	.L17
 350              		.loc 1 730 30 is_stmt 1 discriminator 3 view .LVU93
 351              		.loc 1 730 33 is_stmt 0 discriminator 3 view .LVU94
 352 000a 0133     		adds	r3, r3, #1
 353              	.LVL38:
 354              		.loc 1 730 33 discriminator 3 view .LVU95
 355 000c F9E7     		b	.L16
 356              	.L17:
 731:Middlewares/Third_Party/FatFs/src/ff.c **** 	return *str;
 357              		.loc 1 731 2 is_stmt 1 view .LVU96
 732:Middlewares/Third_Party/FatFs/src/ff.c **** }
 358              		.loc 1 732 1 is_stmt 0 view .LVU97
 359 000e 7047     		bx	lr
 360              		.cfi_endproc
 361              	.LFE148:
 363              		.section	.text.chk_lock,"ax",%progbits
 364              		.align	1
 365              		.syntax unified
 366              		.thumb
 367              		.thumb_func
ARM GAS  /tmp/ccWTW02a.s 			page 20


 368              		.fpu fpv5-d16
 370              	chk_lock:
 371              	.LVL39:
 372              	.LFB149:
 733:Middlewares/Third_Party/FatFs/src/ff.c **** 
 734:Middlewares/Third_Party/FatFs/src/ff.c **** 
 735:Middlewares/Third_Party/FatFs/src/ff.c **** 
 736:Middlewares/Third_Party/FatFs/src/ff.c **** 
 737:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 738:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 739:Middlewares/Third_Party/FatFs/src/ff.c **** /* Request/Release grant to access the volume                            */
 740:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 741:Middlewares/Third_Party/FatFs/src/ff.c **** static
 742:Middlewares/Third_Party/FatFs/src/ff.c **** int lock_fs (
 743:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs		/* File system object */
 744:Middlewares/Third_Party/FatFs/src/ff.c **** )
 745:Middlewares/Third_Party/FatFs/src/ff.c **** {
 746:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (fs && ff_req_grant(fs->sobj)) ? 1 : 0;
 747:Middlewares/Third_Party/FatFs/src/ff.c **** }
 748:Middlewares/Third_Party/FatFs/src/ff.c **** 
 749:Middlewares/Third_Party/FatFs/src/ff.c **** 
 750:Middlewares/Third_Party/FatFs/src/ff.c **** static
 751:Middlewares/Third_Party/FatFs/src/ff.c **** void unlock_fs (
 752:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,		/* File system object */
 753:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res		/* Result code to be returned */
 754:Middlewares/Third_Party/FatFs/src/ff.c **** )
 755:Middlewares/Third_Party/FatFs/src/ff.c **** {
 756:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs && res != FR_NOT_ENABLED && res != FR_INVALID_DRIVE && res != FR_TIMEOUT) {
 757:Middlewares/Third_Party/FatFs/src/ff.c **** 		ff_rel_grant(fs->sobj);
 758:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 759:Middlewares/Third_Party/FatFs/src/ff.c **** }
 760:Middlewares/Third_Party/FatFs/src/ff.c **** 
 761:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 762:Middlewares/Third_Party/FatFs/src/ff.c **** 
 763:Middlewares/Third_Party/FatFs/src/ff.c **** 
 764:Middlewares/Third_Party/FatFs/src/ff.c **** 
 765:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 766:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 767:Middlewares/Third_Party/FatFs/src/ff.c **** /* File lock control functions                                           */
 768:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 769:Middlewares/Third_Party/FatFs/src/ff.c **** 
 770:Middlewares/Third_Party/FatFs/src/ff.c **** static
 771:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT chk_lock (	/* Check if the file can be accessed */
 772:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Directory object pointing the file to be checked */
 773:Middlewares/Third_Party/FatFs/src/ff.c **** 	int acc			/* Desired access type (0:Read, 1:Write, 2:Delete/Rename) */
 774:Middlewares/Third_Party/FatFs/src/ff.c **** )
 775:Middlewares/Third_Party/FatFs/src/ff.c **** {
 373              		.loc 1 775 1 is_stmt 1 view -0
 374              		.cfi_startproc
 375              		@ args = 0, pretend = 0, frame = 0
 376              		@ frame_needed = 0, uses_anonymous_args = 0
 377              		@ link register save eliminated.
 378              		.loc 1 775 1 is_stmt 0 view .LVU99
 379 0000 30B4     		push	{r4, r5}
 380              	.LCFI4:
 381              		.cfi_def_cfa_offset 8
 382              		.cfi_offset 4, -8
ARM GAS  /tmp/ccWTW02a.s 			page 21


 383              		.cfi_offset 5, -4
 776:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, be;
 384              		.loc 1 776 2 is_stmt 1 view .LVU100
 777:Middlewares/Third_Party/FatFs/src/ff.c **** 
 778:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Search file semaphore table */
 779:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = be = 0; i < _FS_LOCK; i++) {
 385              		.loc 1 779 2 view .LVU101
 386              	.LVL40:
 387              		.loc 1 779 14 is_stmt 0 view .LVU102
 388 0002 0025     		movs	r5, #0
 389              		.loc 1 779 9 view .LVU103
 390 0004 2B46     		mov	r3, r5
 391              		.loc 1 779 2 view .LVU104
 392 0006 01E0     		b	.L20
 393              	.LVL41:
 394              	.L27:
 780:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 781:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (Files[i].fs == dp->obj.fs &&	 	/* Check if the object matched with an open object */
 782:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].clu == dp->obj.sclust &&
 783:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].ofs == dp->dptr) break;
 784:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {			/* Blank entry */
 785:Middlewares/Third_Party/FatFs/src/ff.c **** 			be = 1;
 395              		.loc 1 785 7 view .LVU105
 396 0008 0125     		movs	r5, #1
 397              	.LVL42:
 398              	.L21:
 779:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 399              		.loc 1 779 33 is_stmt 1 discriminator 2 view .LVU106
 779:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 400              		.loc 1 779 34 is_stmt 0 discriminator 2 view .LVU107
 401 000a 0133     		adds	r3, r3, #1
 402              	.LVL43:
 403              	.L20:
 779:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 404              		.loc 1 779 19 is_stmt 1 discriminator 1 view .LVU108
 779:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 405              		.loc 1 779 2 is_stmt 0 discriminator 1 view .LVU109
 406 000c 012B     		cmp	r3, #1
 407 000e 15D8     		bhi	.L22
 780:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 408              		.loc 1 780 3 is_stmt 1 view .LVU110
 780:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 409              		.loc 1 780 15 is_stmt 0 view .LVU111
 410 0010 1A01     		lsls	r2, r3, #4
 411 0012 184C     		ldr	r4, .L34
 412 0014 A258     		ldr	r2, [r4, r2]
 780:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 413              		.loc 1 780 6 view .LVU112
 414 0016 002A     		cmp	r2, #0
 415 0018 F6D0     		beq	.L27
 781:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].clu == dp->obj.sclust &&
 416              		.loc 1 781 4 is_stmt 1 view .LVU113
 781:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].clu == dp->obj.sclust &&
 417              		.loc 1 781 30 is_stmt 0 view .LVU114
 418 001a 0468     		ldr	r4, [r0]
 781:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].clu == dp->obj.sclust &&
 419              		.loc 1 781 7 view .LVU115
ARM GAS  /tmp/ccWTW02a.s 			page 22


 420 001c A242     		cmp	r2, r4
 421 001e F4D1     		bne	.L21
 782:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].ofs == dp->dptr) break;
 422              		.loc 1 782 13 discriminator 1 view .LVU116
 423 0020 144A     		ldr	r2, .L34
 424 0022 02EB0312 		add	r2, r2, r3, lsl #4
 425 0026 5468     		ldr	r4, [r2, #4]
 782:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].ofs == dp->dptr) break;
 426              		.loc 1 782 28 discriminator 1 view .LVU117
 427 0028 8268     		ldr	r2, [r0, #8]
 781:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].clu == dp->obj.sclust &&
 428              		.loc 1 781 34 discriminator 1 view .LVU118
 429 002a 9442     		cmp	r4, r2
 430 002c EDD1     		bne	.L21
 783:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {			/* Blank entry */
 431              		.loc 1 783 13 view .LVU119
 432 002e 114A     		ldr	r2, .L34
 433 0030 02EB0312 		add	r2, r2, r3, lsl #4
 434 0034 9468     		ldr	r4, [r2, #8]
 783:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {			/* Blank entry */
 435              		.loc 1 783 23 view .LVU120
 436 0036 4269     		ldr	r2, [r0, #20]
 782:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].ofs == dp->dptr) break;
 437              		.loc 1 782 36 view .LVU121
 438 0038 9442     		cmp	r4, r2
 439 003a E6D1     		bne	.L21
 440              	.L22:
 786:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 787:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 788:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i == _FS_LOCK) {	/* The object is not opened */
 441              		.loc 1 788 2 is_stmt 1 view .LVU122
 442              		.loc 1 788 5 is_stmt 0 view .LVU123
 443 003c 022B     		cmp	r3, #2
 444 003e 0AD0     		beq	.L32
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
 790:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 791:Middlewares/Third_Party/FatFs/src/ff.c **** 
 792:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* The object has been opened. Reject any open against writing file and all write mode open */
 793:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (acc || Files[i].ctr == 0x100) ? FR_LOCKED : FR_OK;
 445              		.loc 1 793 2 is_stmt 1 view .LVU124
 446              		.loc 1 793 52 is_stmt 0 view .LVU125
 447 0040 A9B9     		cbnz	r1, .L29
 448              		.loc 1 793 25 discriminator 2 view .LVU126
 449 0042 0C4A     		ldr	r2, .L34
 450 0044 02EB0313 		add	r3, r2, r3, lsl #4
 451              	.LVL44:
 452              		.loc 1 793 25 discriminator 2 view .LVU127
 453 0048 9B89     		ldrh	r3, [r3, #12]
 454              		.loc 1 793 14 discriminator 2 view .LVU128
 455 004a B3F5807F 		cmp	r3, #256
 456 004e 0CD0     		beq	.L33
 457              		.loc 1 793 52 view .LVU129
 458 0050 0020     		movs	r0, #0
 459              	.LVL45:
 460              	.L26:
 794:Middlewares/Third_Party/FatFs/src/ff.c **** }
 461              		.loc 1 794 1 view .LVU130
ARM GAS  /tmp/ccWTW02a.s 			page 23


 462 0052 30BC     		pop	{r4, r5}
 463              	.LCFI5:
 464              		.cfi_remember_state
 465              		.cfi_restore 5
 466              		.cfi_restore 4
 467              		.cfi_def_cfa_offset 0
 468              	.LVL46:
 469              		.loc 1 794 1 view .LVU131
 470 0054 7047     		bx	lr
 471              	.LVL47:
 472              	.L32:
 473              	.LCFI6:
 474              		.cfi_restore_state
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
 475              		.loc 1 789 3 is_stmt 1 view .LVU132
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
 476              		.loc 1 789 14 is_stmt 0 view .LVU133
 477 0056 0229     		cmp	r1, #2
 478 0058 14BF     		ite	ne
 479 005a 2946     		movne	r1, r5
 480 005c 45F00101 		orreq	r1, r5, #1
 481              	.LVL48:
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
 482              		.loc 1 789 35 view .LVU134
 483 0060 09B1     		cbz	r1, .L28
 484 0062 0020     		movs	r0, #0
 485              	.LVL49:
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
 486              		.loc 1 789 35 view .LVU135
 487 0064 F5E7     		b	.L26
 488              	.LVL50:
 489              	.L28:
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
 490              		.loc 1 789 35 view .LVU136
 491 0066 1220     		movs	r0, #18
 492              	.LVL51:
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
 493              		.loc 1 789 35 view .LVU137
 494 0068 F3E7     		b	.L26
 495              	.LVL52:
 496              	.L33:
 793:Middlewares/Third_Party/FatFs/src/ff.c **** }
 497              		.loc 1 793 52 view .LVU138
 498 006a 1020     		movs	r0, #16
 499              	.LVL53:
 793:Middlewares/Third_Party/FatFs/src/ff.c **** }
 500              		.loc 1 793 52 view .LVU139
 501 006c F1E7     		b	.L26
 502              	.LVL54:
 503              	.L29:
 793:Middlewares/Third_Party/FatFs/src/ff.c **** }
 504              		.loc 1 793 52 view .LVU140
 505 006e 1020     		movs	r0, #16
 506              	.LVL55:
 793:Middlewares/Third_Party/FatFs/src/ff.c **** }
 507              		.loc 1 793 52 view .LVU141
 508 0070 EFE7     		b	.L26
ARM GAS  /tmp/ccWTW02a.s 			page 24


 509              	.L35:
 510 0072 00BF     		.align	2
 511              	.L34:
 512 0074 00000000 		.word	.LANCHOR0
 513              		.cfi_endproc
 514              	.LFE149:
 516              		.section	.text.enq_lock,"ax",%progbits
 517              		.align	1
 518              		.syntax unified
 519              		.thumb
 520              		.thumb_func
 521              		.fpu fpv5-d16
 523              	enq_lock:
 524              	.LFB150:
 795:Middlewares/Third_Party/FatFs/src/ff.c **** 
 796:Middlewares/Third_Party/FatFs/src/ff.c **** 
 797:Middlewares/Third_Party/FatFs/src/ff.c **** static
 798:Middlewares/Third_Party/FatFs/src/ff.c **** int enq_lock (void)	/* Check if an entry is available for a new object */
 799:Middlewares/Third_Party/FatFs/src/ff.c **** {
 525              		.loc 1 799 1 is_stmt 1 view -0
 526              		.cfi_startproc
 527              		@ args = 0, pretend = 0, frame = 0
 528              		@ frame_needed = 0, uses_anonymous_args = 0
 529              		@ link register save eliminated.
 800:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 530              		.loc 1 800 2 view .LVU143
 801:Middlewares/Third_Party/FatFs/src/ff.c **** 
 802:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
 531              		.loc 1 802 2 view .LVU144
 532              	.LVL56:
 533              		.loc 1 802 9 is_stmt 0 view .LVU145
 534 0000 0020     		movs	r0, #0
 535              		.loc 1 802 2 view .LVU146
 536 0002 00E0     		b	.L37
 537              	.LVL57:
 538              	.L39:
 539              		.loc 1 802 48 is_stmt 1 discriminator 4 view .LVU147
 540              		.loc 1 802 43 discriminator 4 view .LVU148
 541              		.loc 1 802 44 is_stmt 0 discriminator 4 view .LVU149
 542 0004 0130     		adds	r0, r0, #1
 543              	.LVL58:
 544              	.L37:
 545              		.loc 1 802 14 is_stmt 1 discriminator 1 view .LVU150
 546              		.loc 1 802 2 is_stmt 0 discriminator 1 view .LVU151
 547 0006 0128     		cmp	r0, #1
 548 0008 04D8     		bhi	.L38
 549              		.loc 1 802 38 discriminator 3 view .LVU152
 550 000a 0301     		lsls	r3, r0, #4
 551 000c 034A     		ldr	r2, .L40
 552 000e D358     		ldr	r3, [r2, r3]
 553              		.loc 1 802 27 discriminator 3 view .LVU153
 554 0010 002B     		cmp	r3, #0
 555 0012 F7D1     		bne	.L39
 556              	.L38:
 803:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (i == _FS_LOCK) ? 0 : 1;
 557              		.loc 1 803 2 is_stmt 1 view .LVU154
 804:Middlewares/Third_Party/FatFs/src/ff.c **** }
ARM GAS  /tmp/ccWTW02a.s 			page 25


 558              		.loc 1 804 1 is_stmt 0 view .LVU155
 559 0014 0238     		subs	r0, r0, #2
 560              	.LVL59:
 561              		.loc 1 804 1 view .LVU156
 562 0016 18BF     		it	ne
 563 0018 0120     		movne	r0, #1
 564              	.LVL60:
 565              		.loc 1 804 1 view .LVU157
 566 001a 7047     		bx	lr
 567              	.L41:
 568              		.align	2
 569              	.L40:
 570 001c 00000000 		.word	.LANCHOR0
 571              		.cfi_endproc
 572              	.LFE150:
 574              		.section	.text.inc_lock,"ax",%progbits
 575              		.align	1
 576              		.syntax unified
 577              		.thumb
 578              		.thumb_func
 579              		.fpu fpv5-d16
 581              	inc_lock:
 582              	.LVL61:
 583              	.LFB151:
 805:Middlewares/Third_Party/FatFs/src/ff.c **** 
 806:Middlewares/Third_Party/FatFs/src/ff.c **** 
 807:Middlewares/Third_Party/FatFs/src/ff.c **** static
 808:Middlewares/Third_Party/FatFs/src/ff.c **** UINT inc_lock (	/* Increment object open counter and returns its index (0:Internal error) */
 809:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,	/* Directory object pointing the file to register or increment */
 810:Middlewares/Third_Party/FatFs/src/ff.c **** 	int acc		/* Desired access (0:Read, 1:Write, 2:Delete/Rename) */
 811:Middlewares/Third_Party/FatFs/src/ff.c **** )
 812:Middlewares/Third_Party/FatFs/src/ff.c **** {
 584              		.loc 1 812 1 is_stmt 1 view -0
 585              		.cfi_startproc
 586              		@ args = 0, pretend = 0, frame = 0
 587              		@ frame_needed = 0, uses_anonymous_args = 0
 588              		@ link register save eliminated.
 589              		.loc 1 812 1 is_stmt 0 view .LVU159
 590 0000 70B4     		push	{r4, r5, r6}
 591              	.LCFI7:
 592              		.cfi_def_cfa_offset 12
 593              		.cfi_offset 4, -12
 594              		.cfi_offset 5, -8
 595              		.cfi_offset 6, -4
 813:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 596              		.loc 1 813 2 is_stmt 1 view .LVU160
 814:Middlewares/Third_Party/FatFs/src/ff.c **** 
 815:Middlewares/Third_Party/FatFs/src/ff.c **** 
 816:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = 0; i < _FS_LOCK; i++) {	/* Find the object */
 597              		.loc 1 816 2 view .LVU161
 598              	.LVL62:
 599              		.loc 1 816 9 is_stmt 0 view .LVU162
 600 0002 0023     		movs	r3, #0
 601              		.loc 1 816 2 view .LVU163
 602 0004 00E0     		b	.L43
 603              	.LVL63:
 604              	.L44:
ARM GAS  /tmp/ccWTW02a.s 			page 26


 605              		.loc 1 816 28 is_stmt 1 discriminator 2 view .LVU164
 606              		.loc 1 816 29 is_stmt 0 discriminator 2 view .LVU165
 607 0006 0133     		adds	r3, r3, #1
 608              	.LVL64:
 609              	.L43:
 610              		.loc 1 816 14 is_stmt 1 discriminator 1 view .LVU166
 611              		.loc 1 816 2 is_stmt 0 discriminator 1 view .LVU167
 612 0008 012B     		cmp	r3, #1
 613 000a 13D8     		bhi	.L45
 817:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == dp->obj.fs &&
 614              		.loc 1 817 3 is_stmt 1 view .LVU168
 615              		.loc 1 817 15 is_stmt 0 view .LVU169
 616 000c 1A01     		lsls	r2, r3, #4
 617 000e 244C     		ldr	r4, .L60
 618 0010 A458     		ldr	r4, [r4, r2]
 619              		.loc 1 817 29 view .LVU170
 620 0012 0268     		ldr	r2, [r0]
 621              		.loc 1 817 6 view .LVU171
 622 0014 9442     		cmp	r4, r2
 623 0016 F6D1     		bne	.L44
 818:Middlewares/Third_Party/FatFs/src/ff.c **** 			Files[i].clu == dp->obj.sclust &&
 624              		.loc 1 818 12 discriminator 1 view .LVU172
 625 0018 214A     		ldr	r2, .L60
 626 001a 02EB0312 		add	r2, r2, r3, lsl #4
 627 001e 5468     		ldr	r4, [r2, #4]
 628              		.loc 1 818 27 discriminator 1 view .LVU173
 629 0020 8268     		ldr	r2, [r0, #8]
 817:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == dp->obj.fs &&
 630              		.loc 1 817 33 discriminator 1 view .LVU174
 631 0022 9442     		cmp	r4, r2
 632 0024 EFD1     		bne	.L44
 819:Middlewares/Third_Party/FatFs/src/ff.c **** 			Files[i].ofs == dp->dptr) break;
 633              		.loc 1 819 12 view .LVU175
 634 0026 1E4A     		ldr	r2, .L60
 635 0028 02EB0312 		add	r2, r2, r3, lsl #4
 636 002c 9468     		ldr	r4, [r2, #8]
 637              		.loc 1 819 22 view .LVU176
 638 002e 4269     		ldr	r2, [r0, #20]
 818:Middlewares/Third_Party/FatFs/src/ff.c **** 			Files[i].clu == dp->obj.sclust &&
 639              		.loc 1 818 35 view .LVU177
 640 0030 9442     		cmp	r4, r2
 641 0032 E8D1     		bne	.L44
 642              	.L45:
 820:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 821:Middlewares/Third_Party/FatFs/src/ff.c **** 
 822:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i == _FS_LOCK) {				/* Not opened. Register it as new. */
 643              		.loc 1 822 2 is_stmt 1 view .LVU178
 644              		.loc 1 822 5 is_stmt 0 view .LVU179
 645 0034 022B     		cmp	r3, #2
 646 0036 13D0     		beq	.L59
 647              	.LVL65:
 648              	.L48:
 823:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
 824:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
 825:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].fs = dp->obj.fs;
 826:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].clu = dp->obj.sclust;
 827:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ofs = dp->dptr;
ARM GAS  /tmp/ccWTW02a.s 			page 27


 828:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = 0;
 829:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 830:Middlewares/Third_Party/FatFs/src/ff.c **** 
 831:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (acc && Files[i].ctr) return 0;	/* Access violation (int err) */
 649              		.loc 1 831 2 is_stmt 1 view .LVU180
 650              		.loc 1 831 5 is_stmt 0 view .LVU181
 651 0038 21B1     		cbz	r1, .L52
 652              		.loc 1 831 21 discriminator 1 view .LVU182
 653 003a 194A     		ldr	r2, .L60
 654 003c 02EB0312 		add	r2, r2, r3, lsl #4
 655 0040 9289     		ldrh	r2, [r2, #12]
 656              		.loc 1 831 10 discriminator 1 view .LVU183
 657 0042 52BB     		cbnz	r2, .L56
 658              	.L52:
 832:Middlewares/Third_Party/FatFs/src/ff.c **** 
 833:Middlewares/Third_Party/FatFs/src/ff.c **** 	Files[i].ctr = acc ? 0x100 : Files[i].ctr + 1;	/* Set semaphore value */
 659              		.loc 1 833 2 is_stmt 1 view .LVU184
 660              		.loc 1 833 15 is_stmt 0 view .LVU185
 661 0044 21BB     		cbnz	r1, .L57
 662              		.loc 1 833 39 discriminator 1 view .LVU186
 663 0046 164A     		ldr	r2, .L60
 664 0048 02EB0312 		add	r2, r2, r3, lsl #4
 665 004c 9189     		ldrh	r1, [r2, #12]
 666              	.LVL66:
 667              		.loc 1 833 15 discriminator 1 view .LVU187
 668 004e 0131     		adds	r1, r1, #1
 669 0050 89B2     		uxth	r1, r1
 670              	.L53:
 671              		.loc 1 833 15 discriminator 4 view .LVU188
 672 0052 134A     		ldr	r2, .L60
 673 0054 02EB0312 		add	r2, r2, r3, lsl #4
 674 0058 9181     		strh	r1, [r2, #12]	@ movhi
 834:Middlewares/Third_Party/FatFs/src/ff.c **** 
 835:Middlewares/Third_Party/FatFs/src/ff.c **** 	return i + 1;
 675              		.loc 1 835 2 is_stmt 1 discriminator 4 view .LVU189
 676              		.loc 1 835 11 is_stmt 0 discriminator 4 view .LVU190
 677 005a 581C     		adds	r0, r3, #1
 678              	.L42:
 836:Middlewares/Third_Party/FatFs/src/ff.c **** }
 679              		.loc 1 836 1 view .LVU191
 680 005c 70BC     		pop	{r4, r5, r6}
 681              	.LCFI8:
 682              		.cfi_remember_state
 683              		.cfi_restore 6
 684              		.cfi_restore 5
 685              		.cfi_restore 4
 686              		.cfi_def_cfa_offset 0
 687 005e 7047     		bx	lr
 688              	.LVL67:
 689              	.L59:
 690              	.LCFI9:
 691              		.cfi_restore_state
 823:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
 692              		.loc 1 823 10 view .LVU192
 693 0060 0023     		movs	r3, #0
 694              	.LVL68:
 695              	.L47:
ARM GAS  /tmp/ccWTW02a.s 			page 28


 823:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
 696              		.loc 1 823 15 is_stmt 1 discriminator 1 view .LVU193
 823:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
 697              		.loc 1 823 3 is_stmt 0 discriminator 1 view .LVU194
 698 0062 012B     		cmp	r3, #1
 699 0064 05D8     		bhi	.L49
 823:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
 700              		.loc 1 823 39 discriminator 3 view .LVU195
 701 0066 1A01     		lsls	r2, r3, #4
 702 0068 0D4C     		ldr	r4, .L60
 703 006a A258     		ldr	r2, [r4, r2]
 823:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
 704              		.loc 1 823 28 discriminator 3 view .LVU196
 705 006c 0AB1     		cbz	r2, .L49
 823:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
 706              		.loc 1 823 49 is_stmt 1 discriminator 4 view .LVU197
 823:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
 707              		.loc 1 823 44 discriminator 4 view .LVU198
 823:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
 708              		.loc 1 823 45 is_stmt 0 discriminator 4 view .LVU199
 709 006e 0133     		adds	r3, r3, #1
 710              	.LVL69:
 823:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
 711              		.loc 1 823 45 discriminator 4 view .LVU200
 712 0070 F7E7     		b	.L47
 713              	.L49:
 824:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].fs = dp->obj.fs;
 714              		.loc 1 824 3 is_stmt 1 view .LVU201
 824:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].fs = dp->obj.fs;
 715              		.loc 1 824 6 is_stmt 0 view .LVU202
 716 0072 022B     		cmp	r3, #2
 717 0074 0FD0     		beq	.L55
 825:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].clu = dp->obj.sclust;
 718              		.loc 1 825 3 is_stmt 1 view .LVU203
 825:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].clu = dp->obj.sclust;
 719              		.loc 1 825 24 is_stmt 0 view .LVU204
 720 0076 0668     		ldr	r6, [r0]
 825:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].clu = dp->obj.sclust;
 721              		.loc 1 825 15 view .LVU205
 722 0078 094D     		ldr	r5, .L60
 723 007a 1C01     		lsls	r4, r3, #4
 724 007c 05EB0312 		add	r2, r5, r3, lsl #4
 725 0080 2E51     		str	r6, [r5, r4]
 826:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ofs = dp->dptr;
 726              		.loc 1 826 3 is_stmt 1 view .LVU206
 826:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ofs = dp->dptr;
 727              		.loc 1 826 25 is_stmt 0 view .LVU207
 728 0082 8468     		ldr	r4, [r0, #8]
 826:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ofs = dp->dptr;
 729              		.loc 1 826 16 view .LVU208
 730 0084 5460     		str	r4, [r2, #4]
 827:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = 0;
 731              		.loc 1 827 3 is_stmt 1 view .LVU209
 827:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = 0;
 732              		.loc 1 827 20 is_stmt 0 view .LVU210
 733 0086 4069     		ldr	r0, [r0, #20]
 734              	.LVL70:
ARM GAS  /tmp/ccWTW02a.s 			page 29


 827:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = 0;
 735              		.loc 1 827 16 view .LVU211
 736 0088 9060     		str	r0, [r2, #8]
 828:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 737              		.loc 1 828 3 is_stmt 1 view .LVU212
 828:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 738              		.loc 1 828 16 is_stmt 0 view .LVU213
 739 008a 0020     		movs	r0, #0
 740 008c 9081     		strh	r0, [r2, #12]	@ movhi
 741 008e D3E7     		b	.L48
 742              	.L57:
 833:Middlewares/Third_Party/FatFs/src/ff.c **** 
 743              		.loc 1 833 15 view .LVU214
 744 0090 4FF48071 		mov	r1, #256
 745              	.LVL71:
 833:Middlewares/Third_Party/FatFs/src/ff.c **** 
 746              		.loc 1 833 15 view .LVU215
 747 0094 DDE7     		b	.L53
 748              	.LVL72:
 749              	.L55:
 824:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].fs = dp->obj.fs;
 750              		.loc 1 824 29 view .LVU216
 751 0096 0020     		movs	r0, #0
 752              	.LVL73:
 824:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].fs = dp->obj.fs;
 753              		.loc 1 824 29 view .LVU217
 754 0098 E0E7     		b	.L42
 755              	.L56:
 831:Middlewares/Third_Party/FatFs/src/ff.c **** 
 756              		.loc 1 831 34 view .LVU218
 757 009a 0020     		movs	r0, #0
 758 009c DEE7     		b	.L42
 759              	.L61:
 760 009e 00BF     		.align	2
 761              	.L60:
 762 00a0 00000000 		.word	.LANCHOR0
 763              		.cfi_endproc
 764              	.LFE151:
 766              		.section	.text.dec_lock,"ax",%progbits
 767              		.align	1
 768              		.syntax unified
 769              		.thumb
 770              		.thumb_func
 771              		.fpu fpv5-d16
 773              	dec_lock:
 774              	.LVL74:
 775              	.LFB152:
 837:Middlewares/Third_Party/FatFs/src/ff.c **** 
 838:Middlewares/Third_Party/FatFs/src/ff.c **** 
 839:Middlewares/Third_Party/FatFs/src/ff.c **** static
 840:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dec_lock (	/* Decrement object open counter */
 841:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i			/* Semaphore index (1..) */
 842:Middlewares/Third_Party/FatFs/src/ff.c **** )
 843:Middlewares/Third_Party/FatFs/src/ff.c **** {
 776              		.loc 1 843 1 is_stmt 1 view -0
 777              		.cfi_startproc
 778              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccWTW02a.s 			page 30


 779              		@ frame_needed = 0, uses_anonymous_args = 0
 780              		@ link register save eliminated.
 844:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD n;
 781              		.loc 1 844 2 view .LVU220
 845:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 782              		.loc 1 845 2 view .LVU221
 846:Middlewares/Third_Party/FatFs/src/ff.c **** 
 847:Middlewares/Third_Party/FatFs/src/ff.c **** 
 848:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (--i < _FS_LOCK) {	/* Shift index number origin from 0 */
 783              		.loc 1 848 2 view .LVU222
 784              		.loc 1 848 5 is_stmt 0 view .LVU223
 785 0000 0138     		subs	r0, r0, #1
 786              	.LVL75:
 787              		.loc 1 848 5 view .LVU224
 788 0002 0128     		cmp	r0, #1
 789 0004 15D8     		bhi	.L65
 849:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = Files[i].ctr;
 790              		.loc 1 849 3 is_stmt 1 view .LVU225
 791              		.loc 1 849 5 is_stmt 0 view .LVU226
 792 0006 0D4B     		ldr	r3, .L68
 793 0008 03EB0013 		add	r3, r3, r0, lsl #4
 794 000c 9B89     		ldrh	r3, [r3, #12]
 795              	.LVL76:
 850:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n == 0x100) n = 0;		/* If write mode open, delete the entry */
 796              		.loc 1 850 3 is_stmt 1 view .LVU227
 797              		.loc 1 850 6 is_stmt 0 view .LVU228
 798 000e B3F5807F 		cmp	r3, #256
 799 0012 03D0     		beq	.L66
 851:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n > 0) n--;				/* Decrement read mode open count */
 800              		.loc 1 851 3 is_stmt 1 view .LVU229
 801              		.loc 1 851 6 is_stmt 0 view .LVU230
 802 0014 1BB1     		cbz	r3, .L64
 803              		.loc 1 851 14 is_stmt 1 discriminator 1 view .LVU231
 804              		.loc 1 851 15 is_stmt 0 discriminator 1 view .LVU232
 805 0016 013B     		subs	r3, r3, #1
 806              	.LVL77:
 807              		.loc 1 851 15 discriminator 1 view .LVU233
 808 0018 9BB2     		uxth	r3, r3
 809              	.LVL78:
 810              		.loc 1 851 15 discriminator 1 view .LVU234
 811 001a 00E0     		b	.L64
 812              	.L66:
 850:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n == 0x100) n = 0;		/* If write mode open, delete the entry */
 813              		.loc 1 850 21 view .LVU235
 814 001c 0023     		movs	r3, #0
 815              	.LVL79:
 816              	.L64:
 852:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = n;
 817              		.loc 1 852 3 is_stmt 1 view .LVU236
 818              		.loc 1 852 16 is_stmt 0 view .LVU237
 819 001e 074A     		ldr	r2, .L68
 820 0020 02EB0012 		add	r2, r2, r0, lsl #4
 821 0024 9381     		strh	r3, [r2, #12]	@ movhi
 853:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n == 0) Files[i].fs = 0;	/* Delete the entry if open count gets zero */
 822              		.loc 1 853 3 is_stmt 1 view .LVU238
 823              		.loc 1 853 6 is_stmt 0 view .LVU239
 824 0026 33B9     		cbnz	r3, .L67
ARM GAS  /tmp/ccWTW02a.s 			page 31


 825              		.loc 1 853 15 is_stmt 1 discriminator 1 view .LVU240
 826              		.loc 1 853 27 is_stmt 0 discriminator 1 view .LVU241
 827 0028 0301     		lsls	r3, r0, #4
 828              	.LVL80:
 829              		.loc 1 853 27 discriminator 1 view .LVU242
 830 002a 0020     		movs	r0, #0
 831              	.LVL81:
 832              		.loc 1 853 27 discriminator 1 view .LVU243
 833 002c 034A     		ldr	r2, .L68
 834              	.LVL82:
 835              		.loc 1 853 27 discriminator 1 view .LVU244
 836 002e D050     		str	r0, [r2, r3]
 837 0030 7047     		bx	lr
 838              	.LVL83:
 839              	.L65:
 854:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_OK;
 855:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 856:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;			/* Invalid index nunber */
 840              		.loc 1 856 7 view .LVU245
 841 0032 0220     		movs	r0, #2
 842              	.LVL84:
 843              		.loc 1 856 7 view .LVU246
 844 0034 7047     		bx	lr
 845              	.LVL85:
 846              	.L67:
 854:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_OK;
 847              		.loc 1 854 7 view .LVU247
 848 0036 0020     		movs	r0, #0
 849              	.LVL86:
 857:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 858:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 850              		.loc 1 858 2 is_stmt 1 view .LVU248
 859:Middlewares/Third_Party/FatFs/src/ff.c **** }
 851              		.loc 1 859 1 is_stmt 0 view .LVU249
 852 0038 7047     		bx	lr
 853              	.L69:
 854 003a 00BF     		.align	2
 855              	.L68:
 856 003c 00000000 		.word	.LANCHOR0
 857              		.cfi_endproc
 858              	.LFE152:
 860              		.section	.text.clear_lock,"ax",%progbits
 861              		.align	1
 862              		.syntax unified
 863              		.thumb
 864              		.thumb_func
 865              		.fpu fpv5-d16
 867              	clear_lock:
 868              	.LVL87:
 869              	.LFB153:
 860:Middlewares/Third_Party/FatFs/src/ff.c **** 
 861:Middlewares/Third_Party/FatFs/src/ff.c **** 
 862:Middlewares/Third_Party/FatFs/src/ff.c **** static
 863:Middlewares/Third_Party/FatFs/src/ff.c **** void clear_lock (	/* Clear lock entries of the volume */
 864:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs
 865:Middlewares/Third_Party/FatFs/src/ff.c **** )
 866:Middlewares/Third_Party/FatFs/src/ff.c **** {
ARM GAS  /tmp/ccWTW02a.s 			page 32


 870              		.loc 1 866 1 is_stmt 1 view -0
 871              		.cfi_startproc
 872              		@ args = 0, pretend = 0, frame = 0
 873              		@ frame_needed = 0, uses_anonymous_args = 0
 874              		@ link register save eliminated.
 867:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 875              		.loc 1 867 2 view .LVU251
 868:Middlewares/Third_Party/FatFs/src/ff.c **** 
 869:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = 0; i < _FS_LOCK; i++) {
 876              		.loc 1 869 2 view .LVU252
 877              		.loc 1 869 9 is_stmt 0 view .LVU253
 878 0000 0023     		movs	r3, #0
 879              		.loc 1 869 2 view .LVU254
 880 0002 03E0     		b	.L75
 881              	.LVL88:
 882              	.L82:
 883              	.LCFI10:
 884              		.cfi_def_cfa_offset 4
 885              		.cfi_offset 4, -4
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 871:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 872:Middlewares/Third_Party/FatFs/src/ff.c **** }
 886              		.loc 1 872 1 view .LVU255
 887 0004 5DF8044B 		ldr	r4, [sp], #4
 888              	.LCFI11:
 889              		.cfi_restore 4
 890              		.cfi_def_cfa_offset 0
 891 0008 7047     		bx	lr
 892              	.L81:
 869:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 893              		.loc 1 869 28 is_stmt 1 view .LVU256
 869:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 894              		.loc 1 869 29 is_stmt 0 view .LVU257
 895 000a 0133     		adds	r3, r3, #1
 896              	.LVL89:
 897              	.L75:
 869:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 898              		.loc 1 869 14 is_stmt 1 view .LVU258
 869:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 899              		.loc 1 869 2 is_stmt 0 view .LVU259
 900 000c 012B     		cmp	r3, #1
 901 000e 11D8     		bhi	.L80
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 902              		.loc 1 870 3 is_stmt 1 view .LVU260
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 903              		.loc 1 870 15 is_stmt 0 view .LVU261
 904 0010 1A01     		lsls	r2, r3, #4
 905 0012 0949     		ldr	r1, .L83
 906 0014 8A58     		ldr	r2, [r1, r2]
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 907              		.loc 1 870 6 view .LVU262
 908 0016 8242     		cmp	r2, r0
 909 0018 F7D1     		bne	.L81
 866:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 910              		.loc 1 866 1 view .LVU263
 911 001a 10B4     		push	{r4}
 912              	.LCFI12:
ARM GAS  /tmp/ccWTW02a.s 			page 33


 913              		.cfi_def_cfa_offset 4
 914              		.cfi_offset 4, -4
 915              	.L76:
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 916              		.loc 1 870 26 is_stmt 1 discriminator 1 view .LVU264
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 917              		.loc 1 870 38 is_stmt 0 discriminator 1 view .LVU265
 918 001c 1A01     		lsls	r2, r3, #4
 919 001e 0024     		movs	r4, #0
 920 0020 8C50     		str	r4, [r1, r2]
 921              	.L72:
 869:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 922              		.loc 1 869 28 is_stmt 1 discriminator 2 view .LVU266
 869:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 923              		.loc 1 869 29 is_stmt 0 discriminator 2 view .LVU267
 924 0022 0133     		adds	r3, r3, #1
 925              	.LVL90:
 869:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 926              		.loc 1 869 14 is_stmt 1 discriminator 2 view .LVU268
 869:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 927              		.loc 1 869 2 is_stmt 0 discriminator 2 view .LVU269
 928 0024 012B     		cmp	r3, #1
 929 0026 EDD8     		bhi	.L82
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 930              		.loc 1 870 3 is_stmt 1 view .LVU270
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 931              		.loc 1 870 15 is_stmt 0 view .LVU271
 932 0028 1A01     		lsls	r2, r3, #4
 933 002a 0349     		ldr	r1, .L83
 934 002c 8A58     		ldr	r2, [r1, r2]
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 935              		.loc 1 870 6 view .LVU272
 936 002e 8242     		cmp	r2, r0
 937 0030 F7D1     		bne	.L72
 938 0032 F3E7     		b	.L76
 939              	.L80:
 940              	.LCFI13:
 941              		.cfi_def_cfa_offset 0
 942              		.cfi_restore 4
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 943              		.loc 1 870 6 view .LVU273
 944 0034 7047     		bx	lr
 945              	.L84:
 946 0036 00BF     		.align	2
 947              	.L83:
 948 0038 00000000 		.word	.LANCHOR0
 949              		.cfi_endproc
 950              	.LFE153:
 952              		.section	.text.clust2sect,"ax",%progbits
 953              		.align	1
 954              		.syntax unified
 955              		.thumb
 956              		.thumb_func
 957              		.fpu fpv5-d16
 959              	clust2sect:
 960              	.LVL91:
 961              	.LFB157:
ARM GAS  /tmp/ccWTW02a.s 			page 34


 873:Middlewares/Third_Party/FatFs/src/ff.c **** 
 874:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_LOCK != 0 */
 875:Middlewares/Third_Party/FatFs/src/ff.c **** 
 876:Middlewares/Third_Party/FatFs/src/ff.c **** 
 877:Middlewares/Third_Party/FatFs/src/ff.c **** 
 878:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 879:Middlewares/Third_Party/FatFs/src/ff.c **** /* Move/Flush disk access window in the file system object               */
 880:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 881:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 882:Middlewares/Third_Party/FatFs/src/ff.c **** static
 883:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT sync_window (	/* Returns FR_OK or FR_DISK_ERROR */
 884:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs			/* File system object */
 885:Middlewares/Third_Party/FatFs/src/ff.c **** )
 886:Middlewares/Third_Party/FatFs/src/ff.c **** {
 887:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD wsect;
 888:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nf;
 889:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 890:Middlewares/Third_Party/FatFs/src/ff.c **** 
 891:Middlewares/Third_Party/FatFs/src/ff.c **** 
 892:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->wflag) {	/* Write back the sector if it is dirty */
 893:Middlewares/Third_Party/FatFs/src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 894:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK) {
 895:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_DISK_ERR;
 896:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 897:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 0;
 898:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (wsect - fs->fatbase < fs->fsize) {		/* Is it in the FAT area? */
 899:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 900:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 902:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 903:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 904:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 905:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 906:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 907:Middlewares/Third_Party/FatFs/src/ff.c **** }
 908:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 909:Middlewares/Third_Party/FatFs/src/ff.c **** 
 910:Middlewares/Third_Party/FatFs/src/ff.c **** 
 911:Middlewares/Third_Party/FatFs/src/ff.c **** static
 912:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT move_window (	/* Returns FR_OK or FR_DISK_ERROR */
 913:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,			/* File system object */
 914:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sector		/* Sector number to make appearance in the fs->win[] */
 915:Middlewares/Third_Party/FatFs/src/ff.c **** )
 916:Middlewares/Third_Party/FatFs/src/ff.c **** {
 917:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 918:Middlewares/Third_Party/FatFs/src/ff.c **** 
 919:Middlewares/Third_Party/FatFs/src/ff.c **** 
 920:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sector != fs->winsect) {	/* Window offset changed? */
 921:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 922:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = sync_window(fs);		/* Write-back changes */
 923:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 924:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {			/* Fill sector window with new data */
 925:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK) {
 926:Middlewares/Third_Party/FatFs/src/ff.c **** 				sector = 0xFFFFFFFF;	/* Invalidate window if data is not reliable */
 927:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_DISK_ERR;
 928:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 929:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->winsect = sector;
ARM GAS  /tmp/ccWTW02a.s 			page 35


 930:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 931:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 932:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 933:Middlewares/Third_Party/FatFs/src/ff.c **** }
 934:Middlewares/Third_Party/FatFs/src/ff.c **** 
 935:Middlewares/Third_Party/FatFs/src/ff.c **** 
 936:Middlewares/Third_Party/FatFs/src/ff.c **** 
 937:Middlewares/Third_Party/FatFs/src/ff.c **** 
 938:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 939:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 940:Middlewares/Third_Party/FatFs/src/ff.c **** /* Synchronize file system and strage device                             */
 941:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 942:Middlewares/Third_Party/FatFs/src/ff.c **** 
 943:Middlewares/Third_Party/FatFs/src/ff.c **** static
 944:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT sync_fs (	/* FR_OK:succeeded, !=0:error */
 945:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs		/* File system object */
 946:Middlewares/Third_Party/FatFs/src/ff.c **** )
 947:Middlewares/Third_Party/FatFs/src/ff.c **** {
 948:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 949:Middlewares/Third_Party/FatFs/src/ff.c **** 
 950:Middlewares/Third_Party/FatFs/src/ff.c **** 
 951:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = sync_window(fs);
 952:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 953:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Update FSInfo sector if needed */
 954:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->fs_type == FS_FAT32 && fs->fsi_flag == 1) {
 955:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Create FSInfo structure */
 956:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(fs->win, 0, SS(fs));
 957:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(fs->win + BS_55AA, 0xAA55);
 958:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_LeadSig, 0x41615252);
 959:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_StrucSig, 0x61417272);
 960:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_Free_Count, fs->free_clst);
 961:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_Nxt_Free, fs->last_clst);
 962:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Write it into the FSInfo sector */
 963:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->winsect = fs->volbase + 1;
 964:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(fs->drv, fs->win, fs->winsect, 1);
 965:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag = 0;
 966:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 967:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Make sure that no pending write process in the physical drive */
 968:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_ioctl(fs->drv, CTRL_SYNC, 0) != RES_OK) res = FR_DISK_ERR;
 969:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 970:Middlewares/Third_Party/FatFs/src/ff.c **** 
 971:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 972:Middlewares/Third_Party/FatFs/src/ff.c **** }
 973:Middlewares/Third_Party/FatFs/src/ff.c **** 
 974:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 975:Middlewares/Third_Party/FatFs/src/ff.c **** 
 976:Middlewares/Third_Party/FatFs/src/ff.c **** 
 977:Middlewares/Third_Party/FatFs/src/ff.c **** 
 978:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 979:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get sector# from cluster#                                             */
 980:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 981:Middlewares/Third_Party/FatFs/src/ff.c **** 
 982:Middlewares/Third_Party/FatFs/src/ff.c **** static
 983:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD clust2sect (	/* !=0:Sector number, 0:Failed (invalid cluster#) */
 984:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,		/* File system object */
 985:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst		/* Cluster# to be converted */
 986:Middlewares/Third_Party/FatFs/src/ff.c **** )
ARM GAS  /tmp/ccWTW02a.s 			page 36


 987:Middlewares/Third_Party/FatFs/src/ff.c **** {
 962              		.loc 1 987 1 is_stmt 1 view -0
 963              		.cfi_startproc
 964              		@ args = 0, pretend = 0, frame = 0
 965              		@ frame_needed = 0, uses_anonymous_args = 0
 966              		@ link register save eliminated.
 988:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst -= 2;
 967              		.loc 1 988 2 view .LVU275
 968              		.loc 1 988 7 is_stmt 0 view .LVU276
 969 0000 0239     		subs	r1, r1, #2
 970              	.LVL92:
 989:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Invalid cluster# */
 971              		.loc 1 989 2 is_stmt 1 view .LVU277
 972              		.loc 1 989 16 is_stmt 0 view .LVU278
 973 0002 4369     		ldr	r3, [r0, #20]
 974              		.loc 1 989 27 view .LVU279
 975 0004 023B     		subs	r3, r3, #2
 976              		.loc 1 989 5 view .LVU280
 977 0006 8B42     		cmp	r3, r1
 978 0008 04D9     		bls	.L87
 990:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 979              		.loc 1 990 2 is_stmt 1 view .LVU281
 980              		.loc 1 990 18 is_stmt 0 view .LVU282
 981 000a 4389     		ldrh	r3, [r0, #10]
 982              		.loc 1 990 30 view .LVU283
 983 000c 806A     		ldr	r0, [r0, #40]
 984              	.LVL93:
 985              		.loc 1 990 26 view .LVU284
 986 000e 01FB0300 		mla	r0, r1, r3, r0
 987 0012 7047     		bx	lr
 988              	.LVL94:
 989              	.L87:
 989:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Invalid cluster# */
 990              		.loc 1 989 39 view .LVU285
 991 0014 0020     		movs	r0, #0
 992              	.LVL95:
 991:Middlewares/Third_Party/FatFs/src/ff.c **** }
 993              		.loc 1 991 1 view .LVU286
 994 0016 7047     		bx	lr
 995              		.cfi_endproc
 996              	.LFE157:
 998              		.section	.text.clmt_clust,"ax",%progbits
 999              		.align	1
 1000              		.syntax unified
 1001              		.thumb
 1002              		.thumb_func
 1003              		.fpu fpv5-d16
 1005              	clmt_clust:
 1006              	.LVL96:
 1007              	.LFB162:
 992:Middlewares/Third_Party/FatFs/src/ff.c **** 
 993:Middlewares/Third_Party/FatFs/src/ff.c **** 
 994:Middlewares/Third_Party/FatFs/src/ff.c **** 
 995:Middlewares/Third_Party/FatFs/src/ff.c **** 
 996:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 997:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT access - Read value of a FAT entry                                */
 998:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  /tmp/ccWTW02a.s 			page 37


 999:Middlewares/Third_Party/FatFs/src/ff.c **** 
1000:Middlewares/Third_Party/FatFs/src/ff.c **** static
1001:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD get_fat (	/* 0xFFFFFFFF:Disk error, 1:Internal error, 2..0x7FFFFFFF:Cluster status */
1002:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID* obj,	/* Corresponding object */
1003:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst	/* Cluster number to get the value */
1004:Middlewares/Third_Party/FatFs/src/ff.c **** )
1005:Middlewares/Third_Party/FatFs/src/ff.c **** {
1006:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT wc, bc;
1007:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD val;
1008:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = obj->fs;
1009:Middlewares/Third_Party/FatFs/src/ff.c **** 
1010:Middlewares/Third_Party/FatFs/src/ff.c **** 
1011:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check if in valid range */
1012:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
1013:Middlewares/Third_Party/FatFs/src/ff.c **** 
1014:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
1015:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 0xFFFFFFFF;	/* Default value falls on disk error */
1016:Middlewares/Third_Party/FatFs/src/ff.c **** 
1017:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (fs->fs_type) {
1018:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :
1019:Middlewares/Third_Party/FatFs/src/ff.c **** 			bc = (UINT)clst; bc += bc / 2;
1020:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = fs->win[bc++ % SS(fs)];
1022:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
1023:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;
1024:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
1025:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
1026:Middlewares/Third_Party/FatFs/src/ff.c **** 
1027:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT16 :
1028:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2))) != FR_OK) break;
1029:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));
1030:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
1031:Middlewares/Third_Party/FatFs/src/ff.c **** 
1032:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT32 :
1033:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4))) != FR_OK) break;
1034:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;
1035:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
1036:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
1037:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_EXFAT :
1038:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (obj->objsize) {
1039:Middlewares/Third_Party/FatFs/src/ff.c **** 				DWORD cofs = clst - obj->sclust;	/* Offset from start cluster */
1040:Middlewares/Third_Party/FatFs/src/ff.c **** 				DWORD clen = (DWORD)((obj->objsize - 1) / SS(fs)) / fs->csize;	/* Number of clusters - 1 */
1041:Middlewares/Third_Party/FatFs/src/ff.c **** 
1042:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (obj->stat == 2) {	/* Is there no valid chain on the FAT? */
1043:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (cofs <= clen) {
1044:Middlewares/Third_Party/FatFs/src/ff.c **** 						val = (cofs == clen) ? 0x7FFFFFFF : clst + 1;	/* Generate the value */
1045:Middlewares/Third_Party/FatFs/src/ff.c **** 						break;
1046:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
1047:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1048:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (obj->stat == 3 && cofs < obj->n_cont) {	/* Is it in the 1st fragment? */
1049:Middlewares/Third_Party/FatFs/src/ff.c **** 					val = clst + 1; 	/* Generate the value */
1050:Middlewares/Third_Party/FatFs/src/ff.c **** 					break;
1051:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1052:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (obj->stat != 2) {	/* Get value from FAT if FAT chain is valid */
1053:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (obj->n_frag != 0) {	/* Is it on the growing edge? */
1054:Middlewares/Third_Party/FatFs/src/ff.c **** 						val = 0x7FFFFFFF;	/* Generate EOC */
1055:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
ARM GAS  /tmp/ccWTW02a.s 			page 38


1056:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4))) != FR_OK) break;
1057:Middlewares/Third_Party/FatFs/src/ff.c **** 						val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x7FFFFFFF;
1058:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
1059:Middlewares/Third_Party/FatFs/src/ff.c **** 					break;
1060:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1061:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1062:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* go to default */
1063:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1064:Middlewares/Third_Party/FatFs/src/ff.c **** 		default:
1065:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = 1;	/* Internal error */
1066:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1067:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1068:Middlewares/Third_Party/FatFs/src/ff.c **** 
1069:Middlewares/Third_Party/FatFs/src/ff.c **** 	return val;
1070:Middlewares/Third_Party/FatFs/src/ff.c **** }
1071:Middlewares/Third_Party/FatFs/src/ff.c **** 
1072:Middlewares/Third_Party/FatFs/src/ff.c **** 
1073:Middlewares/Third_Party/FatFs/src/ff.c **** 
1074:Middlewares/Third_Party/FatFs/src/ff.c **** 
1075:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1076:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1077:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT access - Change value of a FAT entry                              */
1078:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1079:Middlewares/Third_Party/FatFs/src/ff.c **** 
1080:Middlewares/Third_Party/FatFs/src/ff.c **** static
1081:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT put_fat (	/* FR_OK(0):succeeded, !=0:error */
1082:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,		/* Corresponding file system object */
1083:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst,		/* FAT index number (cluster number) to be changed */
1084:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD val		/* New value to be set to the entry */
1085:Middlewares/Third_Party/FatFs/src/ff.c **** )
1086:Middlewares/Third_Party/FatFs/src/ff.c **** {
1087:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bc;
1088:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *p;
1089:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_INT_ERR;
1090:Middlewares/Third_Party/FatFs/src/ff.c **** 
1091:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= 2 && clst < fs->n_fatent) {	/* Check if in valid range */
1092:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (fs->fs_type) {
1093:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :	/* Bitfield items */
1094:Middlewares/Third_Party/FatFs/src/ff.c **** 			bc = (UINT)clst; bc += bc / 2;
1095:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
1096:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
1097:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = fs->win + bc++ % SS(fs);
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
1099:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
1100:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
1101:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
1102:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = fs->win + bc % SS(fs);
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
1104:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
1105:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
1106:Middlewares/Third_Party/FatFs/src/ff.c **** 
1107:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT16 :	/* WORD aligned items */
1108:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)));
1109:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
1110:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(fs->win + clst * 2 % SS(fs), (WORD)val);
1111:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
1112:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
ARM GAS  /tmp/ccWTW02a.s 			page 39


1113:Middlewares/Third_Party/FatFs/src/ff.c **** 
1114:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT32 :	/* DWORD aligned items */
1115:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
1116:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_EXFAT :
1117:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1118:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)));
1119:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
1120:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
1121:Middlewares/Third_Party/FatFs/src/ff.c **** 				val = (val & 0x0FFFFFFF) | (ld_dword(fs->win + clst * 4 % SS(fs)) & 0xF0000000);
1122:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1123:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + clst * 4 % SS(fs), val);
1124:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
1125:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
1126:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1127:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1128:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
1129:Middlewares/Third_Party/FatFs/src/ff.c **** }
1130:Middlewares/Third_Party/FatFs/src/ff.c **** 
1131:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
1132:Middlewares/Third_Party/FatFs/src/ff.c **** 
1133:Middlewares/Third_Party/FatFs/src/ff.c **** 
1134:Middlewares/Third_Party/FatFs/src/ff.c **** 
1135:Middlewares/Third_Party/FatFs/src/ff.c **** 
1136:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT && !_FS_READONLY
1137:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1138:Middlewares/Third_Party/FatFs/src/ff.c **** /* exFAT: Accessing FAT and Allocation Bitmap                            */
1139:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1140:Middlewares/Third_Party/FatFs/src/ff.c **** 
1141:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------*/
1142:Middlewares/Third_Party/FatFs/src/ff.c **** /* Find a contiguous free cluster block */
1143:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------*/
1144:Middlewares/Third_Party/FatFs/src/ff.c **** 
1145:Middlewares/Third_Party/FatFs/src/ff.c **** static
1146:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD find_bitmap (	/* 0:Not found, 2..:Cluster block found, 0xFFFFFFFF:Disk error */
1147:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* File system object */
1148:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst,	/* Cluster number to scan from */
1149:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ncl	/* Number of contiguous clusters to find (1..) */
1150:Middlewares/Third_Party/FatFs/src/ff.c **** )
1151:Middlewares/Third_Party/FatFs/src/ff.c **** {
1152:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE bm, bv;
1153:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
1154:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD val, scl, ctr;
1155:Middlewares/Third_Party/FatFs/src/ff.c **** 
1156:Middlewares/Third_Party/FatFs/src/ff.c **** 
1157:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst -= 2;	/* The first bit in the bitmap corresponds to cluster #2 */
1158:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= fs->n_fatent - 2) clst = 0;
1159:Middlewares/Third_Party/FatFs/src/ff.c **** 	scl = val = clst; ctr = 0;
1160:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
1161:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fs, fs->database + val / 8 / SS(fs)) != FR_OK) return 0xFFFFFFFF;	/* (assuming bi
1162:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = val / 8 % SS(fs); bm = 1 << (val % 8);
1163:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
1164:Middlewares/Third_Party/FatFs/src/ff.c **** 			do {
1165:Middlewares/Third_Party/FatFs/src/ff.c **** 				bv = fs->win[i] & bm; bm <<= 1;		/* Get bit value */
1166:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (++val >= fs->n_fatent - 2) {	/* Next cluster (with wrap-around) */
1167:Middlewares/Third_Party/FatFs/src/ff.c **** 					val = 0; bm = 0; i = SS(fs);
1168:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1169:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!bv) {	/* Is it a free cluster? */
ARM GAS  /tmp/ccWTW02a.s 			page 40


1170:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (++ctr == ncl) return scl + 2;	/* Check if run length is sufficient for required */
1171:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
1172:Middlewares/Third_Party/FatFs/src/ff.c **** 					scl = val; ctr = 0;		/* Encountered a cluster in-use, restart to scan */
1173:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1174:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (val == clst) return 0;	/* All cluster scanned? */
1175:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (bm);
1176:Middlewares/Third_Party/FatFs/src/ff.c **** 			bm = 1;
1177:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (++i < SS(fs));
1178:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1179:Middlewares/Third_Party/FatFs/src/ff.c **** }
1180:Middlewares/Third_Party/FatFs/src/ff.c **** 
1181:Middlewares/Third_Party/FatFs/src/ff.c **** 
1182:Middlewares/Third_Party/FatFs/src/ff.c **** /*----------------------------------------*/
1183:Middlewares/Third_Party/FatFs/src/ff.c **** /* Set/Clear a block of allocation bitmap */
1184:Middlewares/Third_Party/FatFs/src/ff.c **** /*----------------------------------------*/
1185:Middlewares/Third_Party/FatFs/src/ff.c **** 
1186:Middlewares/Third_Party/FatFs/src/ff.c **** static
1187:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT change_bitmap (
1188:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* File system object */
1189:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst,	/* Cluster number to change from */
1190:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ncl,	/* Number of clusters to be changed */
1191:Middlewares/Third_Party/FatFs/src/ff.c **** 	int bv		/* bit value to be set (0 or 1) */
1192:Middlewares/Third_Party/FatFs/src/ff.c **** )
1193:Middlewares/Third_Party/FatFs/src/ff.c **** {
1194:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE bm;
1195:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
1196:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sect;
1197:Middlewares/Third_Party/FatFs/src/ff.c **** 
1198:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst -= 2;	/* The first bit corresponds to cluster #2 */
1199:Middlewares/Third_Party/FatFs/src/ff.c **** 	sect = fs->database + clst / 8 / SS(fs);	/* Sector address (assuming bitmap is located top of the 
1200:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = clst / 8 % SS(fs);						/* Byte offset in the sector */
1201:Middlewares/Third_Party/FatFs/src/ff.c **** 	bm = 1 << (clst % 8);						/* Bit mask in the byte */
1202:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
1203:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fs, sect++) != FR_OK) return FR_DISK_ERR;
1204:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
1205:Middlewares/Third_Party/FatFs/src/ff.c **** 			do {
1206:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (bv == (int)((fs->win[i] & bm) != 0)) return FR_INT_ERR;	/* Is the bit expected value? */
1207:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->win[i] ^= bm;	/* Flip the bit */
1208:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->wflag = 1;
1209:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (--ncl == 0) return FR_OK;	/* All bits processed? */
1210:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (bm <<= 1);		/* Next bit */
1211:Middlewares/Third_Party/FatFs/src/ff.c **** 			bm = 1;
1212:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (++i < SS(fs));		/* Next byte */
1213:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = 0;
1214:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1215:Middlewares/Third_Party/FatFs/src/ff.c **** }
1216:Middlewares/Third_Party/FatFs/src/ff.c **** 
1217:Middlewares/Third_Party/FatFs/src/ff.c **** 
1218:Middlewares/Third_Party/FatFs/src/ff.c **** /*---------------------------------------------*/
1219:Middlewares/Third_Party/FatFs/src/ff.c **** /* Fill the first fragment of the FAT chain    */
1220:Middlewares/Third_Party/FatFs/src/ff.c **** /*---------------------------------------------*/
1221:Middlewares/Third_Party/FatFs/src/ff.c **** 
1222:Middlewares/Third_Party/FatFs/src/ff.c **** static
1223:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT fill_first_frag (
1224:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID* obj	/* Pointer to the corresponding object */
1225:Middlewares/Third_Party/FatFs/src/ff.c **** )
1226:Middlewares/Third_Party/FatFs/src/ff.c **** {
ARM GAS  /tmp/ccWTW02a.s 			page 41


1227:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1228:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cl, n;
1229:Middlewares/Third_Party/FatFs/src/ff.c **** 
1230:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (obj->stat == 3) {	/* Has the object been changed 'fragmented'? */
1231:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (cl = obj->sclust, n = obj->n_cont; n; cl++, n--) {	/* Create cluster chain on the FAT */
1232:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(obj->fs, cl, cl + 1);
1233:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
1234:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1235:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->stat = 0;	/* Change status 'FAT chain is valid' */
1236:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1237:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
1238:Middlewares/Third_Party/FatFs/src/ff.c **** }
1239:Middlewares/Third_Party/FatFs/src/ff.c **** 
1240:Middlewares/Third_Party/FatFs/src/ff.c **** 
1241:Middlewares/Third_Party/FatFs/src/ff.c **** /*---------------------------------------------*/
1242:Middlewares/Third_Party/FatFs/src/ff.c **** /* Fill the last fragment of the FAT chain     */
1243:Middlewares/Third_Party/FatFs/src/ff.c **** /*---------------------------------------------*/
1244:Middlewares/Third_Party/FatFs/src/ff.c **** 
1245:Middlewares/Third_Party/FatFs/src/ff.c **** static
1246:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT fill_last_frag (
1247:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID* obj,	/* Pointer to the corresponding object */
1248:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD lcl,	/* Last cluster of the fragment */
1249:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD term	/* Value to set the last FAT entry */
1250:Middlewares/Third_Party/FatFs/src/ff.c **** )
1251:Middlewares/Third_Party/FatFs/src/ff.c **** {
1252:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1253:Middlewares/Third_Party/FatFs/src/ff.c **** 
1254:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (obj->n_frag > 0) {	/* Create the last chain on the FAT */
1255:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = put_fat(obj->fs, lcl - obj->n_frag + 1, (obj->n_frag > 1) ? lcl - obj->n_frag + 2 : term);
1256:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
1257:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->n_frag--;
1258:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1259:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
1260:Middlewares/Third_Party/FatFs/src/ff.c **** }
1261:Middlewares/Third_Party/FatFs/src/ff.c **** 
1262:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_EXFAT && !_FS_READONLY */
1263:Middlewares/Third_Party/FatFs/src/ff.c **** 
1264:Middlewares/Third_Party/FatFs/src/ff.c **** 
1265:Middlewares/Third_Party/FatFs/src/ff.c **** 
1266:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1267:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1268:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT handling - Remove a cluster chain                                 */
1269:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1270:Middlewares/Third_Party/FatFs/src/ff.c **** static
1271:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT remove_chain (	/* FR_OK(0):succeeded, !=0:error */
1272:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID* obj,			/* Corresponding object */
1273:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst,			/* Cluster to remove a chain from */
1274:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD pclst			/* Previous cluster of clst (0:an entire chain) */
1275:Middlewares/Third_Party/FatFs/src/ff.c **** )
1276:Middlewares/Third_Party/FatFs/src/ff.c **** {
1277:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
1278:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD nxt;
1279:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = obj->fs;
1280:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT || _USE_TRIM
1281:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD scl = clst, ecl = clst;
1282:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1283:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM
ARM GAS  /tmp/ccWTW02a.s 			page 42


1284:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD rt[2];
1285:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1286:Middlewares/Third_Party/FatFs/src/ff.c **** 
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Check if in valid range */
1288:Middlewares/Third_Party/FatFs/src/ff.c **** 
1289:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Mark the previous cluster 'EOC' on the FAT if it exists */
1290:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (pclst && (!_FS_EXFAT || fs->fs_type != FS_EXFAT || obj->stat != 2)) {
1291:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = put_fat(fs, pclst, 0xFFFFFFFF);
1292:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
1293:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1294:Middlewares/Third_Party/FatFs/src/ff.c **** 
1295:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Remove the chain */
1296:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1297:Middlewares/Third_Party/FatFs/src/ff.c **** 		nxt = get_fat(obj, clst);			/* Get cluster status */
1298:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 0) break;				/* Empty cluster? */
1299:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 1) return FR_INT_ERR;	/* Internal error? */
1300:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error? */
1301:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
1302:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, 0);		/* Mark the cluster 'free' on the FAT */
1303:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
1304:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1305:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->free_clst < fs->n_fatent - 2) {	/* Update FSINFO */
1306:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clst++;
1307:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;
1308:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1309:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT || _USE_TRIM
1310:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ecl + 1 == nxt) {	/* Is next cluster contiguous? */
1311:Middlewares/Third_Party/FatFs/src/ff.c **** 			ecl = nxt;
1312:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {				/* End of contiguous cluster block */
1313:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
1314:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
1315:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = change_bitmap(fs, scl, ecl - scl + 1, 0);	/* Mark the cluster block 'free' on the bitmap 
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res != FR_OK) return res;
1317:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1318:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1319:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM
1320:Middlewares/Third_Party/FatFs/src/ff.c **** 			rt[0] = clust2sect(fs, scl);					/* Start sector */
1321:Middlewares/Third_Party/FatFs/src/ff.c **** 			rt[1] = clust2sect(fs, ecl) + fs->csize - 1;	/* End sector */
1322:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_ioctl(fs->drv, CTRL_TRIM, rt);				/* Inform device the block can be erased */
1323:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1324:Middlewares/Third_Party/FatFs/src/ff.c **** 			scl = ecl = nxt;
1325:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1326:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1327:Middlewares/Third_Party/FatFs/src/ff.c **** 		clst = nxt;					/* Next cluster */
1328:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (clst < fs->n_fatent);	/* Repeat while not the last link */
1329:Middlewares/Third_Party/FatFs/src/ff.c **** 
1330:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
1331:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT) {
1332:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (pclst == 0) {	/* Does the object have no chain? */
1333:Middlewares/Third_Party/FatFs/src/ff.c **** 			obj->stat = 0;		/* Change the object status 'initial' */
1334:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
1335:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (obj->stat == 3 && pclst >= obj->sclust && pclst <= obj->sclust + obj->n_cont) {	/* Did the c
1336:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->stat = 2;	/* Change the object status 'contiguous' */
1337:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1338:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1339:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1340:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  /tmp/ccWTW02a.s 			page 43


1341:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
1342:Middlewares/Third_Party/FatFs/src/ff.c **** }
1343:Middlewares/Third_Party/FatFs/src/ff.c **** 
1344:Middlewares/Third_Party/FatFs/src/ff.c **** 
1345:Middlewares/Third_Party/FatFs/src/ff.c **** 
1346:Middlewares/Third_Party/FatFs/src/ff.c **** 
1347:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1348:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT handling - Stretch a chain or Create a new chain                  */
1349:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1350:Middlewares/Third_Party/FatFs/src/ff.c **** static
1351:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD create_chain (	/* 0:No free cluster, 1:Internal error, 0xFFFFFFFF:Disk error, >=2:New cluster
1352:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID* obj,			/* Corresponding object */
1353:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst			/* Cluster# to stretch, 0:Create a new chain */
1354:Middlewares/Third_Party/FatFs/src/ff.c **** )
1355:Middlewares/Third_Party/FatFs/src/ff.c **** {
1356:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cs, ncl, scl;
1357:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1358:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = obj->fs;
1359:Middlewares/Third_Party/FatFs/src/ff.c **** 
1360:Middlewares/Third_Party/FatFs/src/ff.c **** 
1361:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst == 0) {	/* Create a new chain */
1362:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = fs->last_clst;				/* Get suggested cluster to start from */
1363:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (scl == 0 || scl >= fs->n_fatent) scl = 1;
1364:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1365:Middlewares/Third_Party/FatFs/src/ff.c **** 	else {				/* Stretch current chain */
1366:Middlewares/Third_Party/FatFs/src/ff.c **** 		cs = get_fat(obj, clst);			/* Check the cluster status */
1367:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < 2) return 1;				/* Invalid FAT value */
1368:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
1369:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
1370:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = clst;
1371:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1372:Middlewares/Third_Party/FatFs/src/ff.c **** 
1373:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
1374:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
1375:Middlewares/Third_Party/FatFs/src/ff.c **** 		ncl = find_bitmap(fs, scl, 1);				/* Find a free cluster */
1376:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ncl == 0 || ncl == 0xFFFFFFFF) return ncl;	/* No free cluster or hard error? */
1377:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = change_bitmap(fs, ncl, 1, 1);			/* Mark the cluster 'in use' */
1378:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_INT_ERR) return 1;
1379:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_DISK_ERR) return 0xFFFFFFFF;
1380:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (clst == 0) {							/* Is it a new chain? */
1381:Middlewares/Third_Party/FatFs/src/ff.c **** 			obj->stat = 2;							/* Set status 'contiguous' */
1382:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {									/* It is a stretched chain */
1383:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (obj->stat == 2 && ncl != scl + 1) {	/* Is the chain got fragmented? */
1384:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->n_cont = scl - obj->sclust;	/* Set size of the contiguous part */
1385:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->stat = 3;						/* Change status 'just fragmented' */
1386:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1387:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1388:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (obj->stat != 2) {	/* Is the file non-contiguous? */
1389:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == clst + 1) {	/* Is the cluster next to previous one? */
1390:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->n_frag = obj->n_frag ? obj->n_frag + 1 : 2;	/* Increment size of last framgent */
1391:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* New fragment */
1392:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (obj->n_frag == 0) obj->n_frag = 1;
1393:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = fill_last_frag(obj, clst, ncl);	/* Fill last fragment on the FAT and link it to new one *
1394:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) obj->n_frag = 1;
1395:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1396:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1397:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
ARM GAS  /tmp/ccWTW02a.s 			page 44


1398:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1399:Middlewares/Third_Party/FatFs/src/ff.c **** 	{	/* On the FAT12/16/32 volume */
1400:Middlewares/Third_Party/FatFs/src/ff.c **** 		ncl = scl;	/* Start cluster */
1401:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {
1402:Middlewares/Third_Party/FatFs/src/ff.c **** 			ncl++;							/* Next cluster */
1403:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl >= fs->n_fatent) {		/* Check wrap-around */
1404:Middlewares/Third_Party/FatFs/src/ff.c **** 				ncl = 2;
1405:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ncl > scl) return 0;	/* No free cluster */
1406:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1407:Middlewares/Third_Party/FatFs/src/ff.c **** 			cs = get_fat(obj, ncl);			/* Get the cluster status */
1408:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cs == 0) break;				/* Found a free cluster */
1409:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cs == 1 || cs == 0xFFFFFFFF) return cs;	/* An error occurred */
1410:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == scl) return 0;		/* No free cluster */
1411:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1412:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = put_fat(fs, ncl, 0xFFFFFFFF);	/* Mark the new cluster 'EOC' */
1413:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && clst != 0) {
1414:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, ncl);	/* Link it from the previous one if needed */
1415:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1416:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1417:Middlewares/Third_Party/FatFs/src/ff.c **** 
1418:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {			/* Update FSINFO if function succeeded. */
1419:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->last_clst = ncl;
1420:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->free_clst <= fs->n_fatent - 2) fs->free_clst--;
1421:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag |= 1;
1422:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
1423:Middlewares/Third_Party/FatFs/src/ff.c **** 		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;	/* Failed. Generate error status */
1424:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1425:Middlewares/Third_Party/FatFs/src/ff.c **** 
1426:Middlewares/Third_Party/FatFs/src/ff.c **** 	return ncl;		/* Return new cluster number or error status */
1427:Middlewares/Third_Party/FatFs/src/ff.c **** }
1428:Middlewares/Third_Party/FatFs/src/ff.c **** 
1429:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
1430:Middlewares/Third_Party/FatFs/src/ff.c **** 
1431:Middlewares/Third_Party/FatFs/src/ff.c **** 
1432:Middlewares/Third_Party/FatFs/src/ff.c **** 
1433:Middlewares/Third_Party/FatFs/src/ff.c **** 
1434:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
1435:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1436:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT handling - Convert offset into cluster with link map table        */
1437:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1438:Middlewares/Third_Party/FatFs/src/ff.c **** 
1439:Middlewares/Third_Party/FatFs/src/ff.c **** static
1440:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD clmt_clust (	/* <2:Error, >=2:Cluster number */
1441:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,		/* Pointer to the file object */
1442:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t ofs		/* File offset to be converted to cluster# */
1443:Middlewares/Third_Party/FatFs/src/ff.c **** )
1444:Middlewares/Third_Party/FatFs/src/ff.c **** {
 1008              		.loc 1 1444 1 is_stmt 1 view -0
 1009              		.cfi_startproc
 1010              		@ args = 0, pretend = 0, frame = 0
 1011              		@ frame_needed = 0, uses_anonymous_args = 0
 1012              		@ link register save eliminated.
1445:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cl, ncl, *tbl;
 1013              		.loc 1 1445 2 view .LVU288
1446:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = fp->obj.fs;
 1014              		.loc 1 1446 2 view .LVU289
 1015              		.loc 1 1446 9 is_stmt 0 view .LVU290
ARM GAS  /tmp/ccWTW02a.s 			page 45


 1016 0000 0268     		ldr	r2, [r0]
 1017              	.LVL97:
1447:Middlewares/Third_Party/FatFs/src/ff.c **** 
1448:Middlewares/Third_Party/FatFs/src/ff.c **** 
1449:Middlewares/Third_Party/FatFs/src/ff.c **** 	tbl = fp->cltbl + 1;	/* Top of CLMT */
 1018              		.loc 1 1449 2 is_stmt 1 view .LVU291
 1019              		.loc 1 1449 10 is_stmt 0 view .LVU292
 1020 0002 C36A     		ldr	r3, [r0, #44]
 1021              		.loc 1 1449 6 view .LVU293
 1022 0004 0433     		adds	r3, r3, #4
 1023              	.LVL98:
1450:Middlewares/Third_Party/FatFs/src/ff.c **** 	cl = (DWORD)(ofs / SS(fs) / fs->csize);	/* Cluster order from top of the file */
 1024              		.loc 1 1450 2 is_stmt 1 view .LVU294
 1025              		.loc 1 1450 19 is_stmt 0 view .LVU295
 1026 0006 490A     		lsrs	r1, r1, #9
 1027              	.LVL99:
 1028              		.loc 1 1450 32 view .LVU296
 1029 0008 5289     		ldrh	r2, [r2, #10]
 1030              	.LVL100:
 1031              		.loc 1 1450 5 view .LVU297
 1032 000a B1FBF2F1 		udiv	r1, r1, r2
 1033              	.LVL101:
 1034              	.L91:
1451:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
 1035              		.loc 1 1451 2 is_stmt 1 view .LVU298
1452:Middlewares/Third_Party/FatFs/src/ff.c **** 		ncl = *tbl++;			/* Number of cluters in the fragment */
 1036              		.loc 1 1452 3 view .LVU299
 1037              		.loc 1 1452 7 is_stmt 0 view .LVU300
 1038 000e 1868     		ldr	r0, [r3]
 1039              	.LVL102:
1453:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ncl == 0) return 0;	/* End of table? (error) */
 1040              		.loc 1 1453 3 is_stmt 1 view .LVU301
 1041              		.loc 1 1453 6 is_stmt 0 view .LVU302
 1042 0010 30B1     		cbz	r0, .L88
1454:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cl < ncl) break;	/* In this fragment? */
 1043              		.loc 1 1454 3 is_stmt 1 view .LVU303
 1044              		.loc 1 1454 6 is_stmt 0 view .LVU304
 1045 0012 8142     		cmp	r1, r0
 1046 0014 02D3     		bcc	.L90
1455:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl -= ncl; tbl++;		/* Next fragment */
 1047              		.loc 1 1455 3 is_stmt 1 view .LVU305
 1048              		.loc 1 1455 6 is_stmt 0 view .LVU306
 1049 0016 091A     		subs	r1, r1, r0
 1050              	.LVL103:
 1051              		.loc 1 1455 14 is_stmt 1 view .LVU307
 1052              		.loc 1 1455 17 is_stmt 0 view .LVU308
 1053 0018 0833     		adds	r3, r3, #8
 1054              	.LVL104:
1451:Middlewares/Third_Party/FatFs/src/ff.c **** 		ncl = *tbl++;			/* Number of cluters in the fragment */
 1055              		.loc 1 1451 8 is_stmt 1 view .LVU309
1452:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ncl == 0) return 0;	/* End of table? (error) */
 1056              		.loc 1 1452 7 is_stmt 0 view .LVU310
 1057 001a F8E7     		b	.L91
 1058              	.LVL105:
 1059              	.L90:
1456:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1457:Middlewares/Third_Party/FatFs/src/ff.c **** 	return cl + *tbl;	/* Return the cluster number */
ARM GAS  /tmp/ccWTW02a.s 			page 46


 1060              		.loc 1 1457 2 is_stmt 1 view .LVU311
 1061              		.loc 1 1457 14 is_stmt 0 view .LVU312
 1062 001c 5868     		ldr	r0, [r3, #4]
 1063              	.LVL106:
 1064              		.loc 1 1457 12 view .LVU313
 1065 001e 0844     		add	r0, r0, r1
 1066              	.L88:
1458:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1067              		.loc 1 1458 1 view .LVU314
 1068 0020 7047     		bx	lr
 1069              		.cfi_endproc
 1070              	.LFE162:
 1072              		.section	.text.ld_clust,"ax",%progbits
 1073              		.align	1
 1074              		.syntax unified
 1075              		.thumb
 1076              		.thumb_func
 1077              		.fpu fpv5-d16
 1079              	ld_clust:
 1080              	.LVL107:
 1081              	.LFB166:
1459:Middlewares/Third_Party/FatFs/src/ff.c **** 
1460:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _USE_FASTSEEK */
1461:Middlewares/Third_Party/FatFs/src/ff.c **** 
1462:Middlewares/Third_Party/FatFs/src/ff.c **** 
1463:Middlewares/Third_Party/FatFs/src/ff.c **** 
1464:Middlewares/Third_Party/FatFs/src/ff.c **** 
1465:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1466:Middlewares/Third_Party/FatFs/src/ff.c **** /* Directory handling - Set directory index                              */
1467:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1468:Middlewares/Third_Party/FatFs/src/ff.c **** 
1469:Middlewares/Third_Party/FatFs/src/ff.c **** static
1470:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_sdi (	/* FR_OK(0):succeeded, !=0:error */
1471:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to directory object */
1472:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ofs		/* Offset of directory table */
1473:Middlewares/Third_Party/FatFs/src/ff.c **** )
1474:Middlewares/Third_Party/FatFs/src/ff.c **** {
1475:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD csz, clst;
1476:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
1477:Middlewares/Third_Party/FatFs/src/ff.c **** 
1478:Middlewares/Third_Party/FatFs/src/ff.c **** 
1479:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ofs >= (DWORD)((_FS_EXFAT && fs->fs_type == FS_EXFAT) ? MAX_DIR_EX : MAX_DIR) || ofs % SZDIRE)
1480:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INT_ERR;
1481:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1482:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dptr = ofs;				/* Set current offset */
1483:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst = dp->obj.sclust;		/* Table start cluster (0:root) */
1484:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst == 0 && fs->fs_type >= FS_FAT32) {	/* Replace cluster# 0 with root cluster# */
1485:Middlewares/Third_Party/FatFs/src/ff.c **** 		clst = fs->dirbase;
1486:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_EXFAT) dp->obj.stat = 0;	/* exFAT: Root dir has an FAT chain */
1487:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1488:Middlewares/Third_Party/FatFs/src/ff.c **** 
1489:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst == 0) {	/* Static table (root-directory in FAT12/16) */
1490:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs / SZDIRE >= fs->n_rootdir)	return FR_INT_ERR;	/* Is index out of range? */
1491:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect = fs->dirbase;
1492:Middlewares/Third_Party/FatFs/src/ff.c **** 
1493:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {			/* Dynamic table (sub-directory or root-directory in FAT32+) */
1494:Middlewares/Third_Party/FatFs/src/ff.c **** 		csz = (DWORD)fs->csize * SS(fs);	/* Bytes per cluster */
ARM GAS  /tmp/ccWTW02a.s 			page 47


1495:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (ofs >= csz) {				/* Follow cluster chain */
1496:Middlewares/Third_Party/FatFs/src/ff.c **** 			clst = get_fat(&dp->obj, clst);				/* Get next cluster */
1497:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
1498:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Reached to end of table or internal 
1499:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs -= csz;
1500:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1501:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect = clust2sect(fs, clst);
1502:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1503:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->clust = clst;					/* Current cluster# */
1504:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp->sect) return FR_INT_ERR;
1505:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->sect += ofs / SS(fs);			/* Sector# of the directory entry */
1506:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = fs->win + (ofs % SS(fs));	/* Pointer to the entry in the win[] */
1507:Middlewares/Third_Party/FatFs/src/ff.c **** 
1508:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
1509:Middlewares/Third_Party/FatFs/src/ff.c **** }
1510:Middlewares/Third_Party/FatFs/src/ff.c **** 
1511:Middlewares/Third_Party/FatFs/src/ff.c **** 
1512:Middlewares/Third_Party/FatFs/src/ff.c **** 
1513:Middlewares/Third_Party/FatFs/src/ff.c **** 
1514:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1515:Middlewares/Third_Party/FatFs/src/ff.c **** /* Directory handling - Move directory table index next                  */
1516:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1517:Middlewares/Third_Party/FatFs/src/ff.c **** 
1518:Middlewares/Third_Party/FatFs/src/ff.c **** static
1519:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_next (	/* FR_OK(0):succeeded, FR_NO_FILE:End of table, FR_DENIED:Could not stretch */
1520:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to the directory object */
1521:Middlewares/Third_Party/FatFs/src/ff.c **** 	int stretch		/* 0: Do not stretch table, 1: Stretch table if needed */
1522:Middlewares/Third_Party/FatFs/src/ff.c **** )
1523:Middlewares/Third_Party/FatFs/src/ff.c **** {
1524:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ofs, clst;
1525:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
1526:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1527:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n;
1528:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1529:Middlewares/Third_Party/FatFs/src/ff.c **** 
1530:Middlewares/Third_Party/FatFs/src/ff.c **** 	ofs = dp->dptr + SZDIRE;	/* Next entry */
1531:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp->sect || ofs >= (DWORD)((_FS_EXFAT && fs->fs_type == FS_EXFAT) ? MAX_DIR_EX : MAX_DIR)) re
1532:Middlewares/Third_Party/FatFs/src/ff.c **** 
1533:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ofs % SS(fs) == 0) {	/* Sector changed? */
1534:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect++;				/* Next sector */
1535:Middlewares/Third_Party/FatFs/src/ff.c **** 
1536:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!dp->clust) {		/* Static table */
1537:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs / SZDIRE >= fs->n_rootdir) {	/* Report EOT if it reached end of static table */
1538:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = 0; return FR_NO_FILE;
1539:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1540:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1541:Middlewares/Third_Party/FatFs/src/ff.c **** 		else {					/* Dynamic table */
1542:Middlewares/Third_Party/FatFs/src/ff.c **** 			if ((ofs / SS(fs) & (fs->csize - 1)) == 0) {		/* Cluster changed? */
1543:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);			/* Get next cluster */
1544:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst <= 1) return FR_INT_ERR;				/* Internal error */
1545:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;		/* Disk error */
1546:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst >= fs->n_fatent) {						/* Reached end of dynamic table */
1547:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1548:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!stretch) {								/* If no stretch, report EOT */
1549:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->sect = 0; return FR_NO_FILE;
1550:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
1551:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = create_chain(&dp->obj, dp->clust);	/* Allocate a cluster */
ARM GAS  /tmp/ccWTW02a.s 			page 48


1552:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
1553:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) return FR_INT_ERR;			/* Internal error */
1554:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
1555:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Clean-up the stretched table */
1556:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (_FS_EXFAT) dp->obj.stat |= 4;			/* The directory needs to be updated */
1557:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (sync_window(fs) != FR_OK) return FR_DISK_ERR;	/* Flush disk access window */
1558:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(fs->win, 0, SS(fs));				/* Clear window buffer */
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (n = 0, fs->winsect = clust2sect(fs, clst); n < fs->csize; n++, fs->winsect++) {	/* Fill t
1560:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
1561:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (sync_window(fs) != FR_OK) return FR_DISK_ERR;
1562:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
1563:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->winsect -= n;							/* Restore window offset */
1564:Middlewares/Third_Party/FatFs/src/ff.c **** #else
1565:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!stretch) dp->sect = 0;					/* (this line is to suppress compiler warning) */
1566:Middlewares/Third_Party/FatFs/src/ff.c **** 					dp->sect = 0; return FR_NO_FILE;			/* Report EOT */
1567:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1569:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->clust = clst;		/* Initialize data for new cluster */
1570:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = clust2sect(fs, clst);
1571:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1572:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1573:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1574:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dptr = ofs;						/* Current entry */
1575:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = fs->win + ofs % SS(fs);	/* Pointer to the entry in the win[] */
1576:Middlewares/Third_Party/FatFs/src/ff.c **** 
1577:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
1578:Middlewares/Third_Party/FatFs/src/ff.c **** }
1579:Middlewares/Third_Party/FatFs/src/ff.c **** 
1580:Middlewares/Third_Party/FatFs/src/ff.c **** 
1581:Middlewares/Third_Party/FatFs/src/ff.c **** 
1582:Middlewares/Third_Party/FatFs/src/ff.c **** 
1583:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1584:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1585:Middlewares/Third_Party/FatFs/src/ff.c **** /* Directory handling - Reserve a block of directory entries             */
1586:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1587:Middlewares/Third_Party/FatFs/src/ff.c **** 
1588:Middlewares/Third_Party/FatFs/src/ff.c **** static
1589:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_alloc (	/* FR_OK(0):succeeded, !=0:error */
1590:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to the directory object */
1591:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nent		/* Number of contiguous entries to allocate */
1592:Middlewares/Third_Party/FatFs/src/ff.c **** )
1593:Middlewares/Third_Party/FatFs/src/ff.c **** {
1594:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1595:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n;
1596:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
1597:Middlewares/Third_Party/FatFs/src/ff.c **** 
1598:Middlewares/Third_Party/FatFs/src/ff.c **** 
1599:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(dp, 0);
1600:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
1601:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = 0;
1602:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
1603:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, dp->sect);
1604:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
1605:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
1606:Middlewares/Third_Party/FatFs/src/ff.c **** 			if ((fs->fs_type == FS_EXFAT) ? (int)((dp->dir[XDIR_Type] & 0x80) == 0) : (int)(dp->dir[DIR_Name
1607:Middlewares/Third_Party/FatFs/src/ff.c **** #else
1608:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dp->dir[DIR_Name] == DDEM || dp->dir[DIR_Name] == 0) {
ARM GAS  /tmp/ccWTW02a.s 			page 49


1609:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1610:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (++n == nent) break;	/* A block of contiguous free entries is found */
1611:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
1612:Middlewares/Third_Party/FatFs/src/ff.c **** 				n = 0;					/* Not a blank entry. Restart to search */
1613:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1614:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_next(dp, 1);
1615:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (res == FR_OK);	/* Next entry with table stretch enabled */
1616:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1617:Middlewares/Third_Party/FatFs/src/ff.c **** 
1618:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_NO_FILE) res = FR_DENIED;	/* No directory entry to allocate */
1619:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
1620:Middlewares/Third_Party/FatFs/src/ff.c **** }
1621:Middlewares/Third_Party/FatFs/src/ff.c **** 
1622:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* !_FS_READONLY */
1623:Middlewares/Third_Party/FatFs/src/ff.c **** 
1624:Middlewares/Third_Party/FatFs/src/ff.c **** 
1625:Middlewares/Third_Party/FatFs/src/ff.c **** 
1626:Middlewares/Third_Party/FatFs/src/ff.c **** 
1627:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1628:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT: Directory handling - Load/Store start cluster number             */
1629:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1630:Middlewares/Third_Party/FatFs/src/ff.c **** 
1631:Middlewares/Third_Party/FatFs/src/ff.c **** static
1632:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD ld_clust (	/* Returns the top cluster value of the SFN entry */
1633:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,		/* Pointer to the fs object */
1634:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE* dir	/* Pointer to the key entry */
1635:Middlewares/Third_Party/FatFs/src/ff.c **** )
1636:Middlewares/Third_Party/FatFs/src/ff.c **** {
 1082              		.loc 1 1636 1 is_stmt 1 view -0
 1083              		.cfi_startproc
 1084              		@ args = 0, pretend = 0, frame = 0
 1085              		@ frame_needed = 0, uses_anonymous_args = 0
 1086              		.loc 1 1636 1 is_stmt 0 view .LVU316
 1087 0000 70B5     		push	{r4, r5, r6, lr}
 1088              	.LCFI14:
 1089              		.cfi_def_cfa_offset 16
 1090              		.cfi_offset 4, -16
 1091              		.cfi_offset 5, -12
 1092              		.cfi_offset 6, -8
 1093              		.cfi_offset 14, -4
 1094 0002 0646     		mov	r6, r0
 1095 0004 0D46     		mov	r5, r1
1637:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cl;
 1096              		.loc 1 1637 2 is_stmt 1 view .LVU317
1638:Middlewares/Third_Party/FatFs/src/ff.c **** 
1639:Middlewares/Third_Party/FatFs/src/ff.c **** 	cl = ld_word(dir + DIR_FstClusLO);
 1097              		.loc 1 1639 2 view .LVU318
 1098              		.loc 1 1639 7 is_stmt 0 view .LVU319
 1099 0006 01F11A00 		add	r0, r1, #26
 1100              	.LVL108:
 1101              		.loc 1 1639 7 view .LVU320
 1102 000a FFF7FEFF 		bl	ld_word
 1103              	.LVL109:
1640:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32) {
 1104              		.loc 1 1640 2 is_stmt 1 view .LVU321
 1105              		.loc 1 1640 8 is_stmt 0 view .LVU322
 1106 000e 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
ARM GAS  /tmp/ccWTW02a.s 			page 50


 1107              		.loc 1 1640 5 view .LVU323
 1108 0010 032B     		cmp	r3, #3
 1109 0012 00D0     		beq	.L95
 1110              	.LVL110:
 1111              	.L92:
1641:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)ld_word(dir + DIR_FstClusHI) << 16;
1642:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1643:Middlewares/Third_Party/FatFs/src/ff.c **** 
1644:Middlewares/Third_Party/FatFs/src/ff.c **** 	return cl;
1645:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1112              		.loc 1 1645 1 view .LVU324
 1113 0014 70BD     		pop	{r4, r5, r6, pc}
 1114              	.LVL111:
 1115              	.L95:
 1116              		.loc 1 1645 1 view .LVU325
 1117 0016 0446     		mov	r4, r0
1641:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)ld_word(dir + DIR_FstClusHI) << 16;
 1118              		.loc 1 1641 3 is_stmt 1 view .LVU326
1641:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)ld_word(dir + DIR_FstClusHI) << 16;
 1119              		.loc 1 1641 16 is_stmt 0 view .LVU327
 1120 0018 05F11400 		add	r0, r5, #20
 1121              	.LVL112:
1641:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)ld_word(dir + DIR_FstClusHI) << 16;
 1122              		.loc 1 1641 16 view .LVU328
 1123 001c FFF7FEFF 		bl	ld_word
 1124              	.LVL113:
1641:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)ld_word(dir + DIR_FstClusHI) << 16;
 1125              		.loc 1 1641 6 view .LVU329
 1126 0020 44EA0040 		orr	r0, r4, r0, lsl #16
 1127              	.LVL114:
1644:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1128              		.loc 1 1644 2 is_stmt 1 view .LVU330
1644:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1129              		.loc 1 1644 9 is_stmt 0 view .LVU331
 1130 0024 F6E7     		b	.L92
 1131              		.cfi_endproc
 1132              	.LFE166:
 1134              		.section	.text.st_clust,"ax",%progbits
 1135              		.align	1
 1136              		.syntax unified
 1137              		.thumb
 1138              		.thumb_func
 1139              		.fpu fpv5-d16
 1141              	st_clust:
 1142              	.LVL115:
 1143              	.LFB167:
1646:Middlewares/Third_Party/FatFs/src/ff.c **** 
1647:Middlewares/Third_Party/FatFs/src/ff.c **** 
1648:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1649:Middlewares/Third_Party/FatFs/src/ff.c **** static
1650:Middlewares/Third_Party/FatFs/src/ff.c **** void st_clust (
1651:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* Pointer to the fs object */
1652:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dir,	/* Pointer to the key entry */
1653:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cl	/* Value to be set */
1654:Middlewares/Third_Party/FatFs/src/ff.c **** )
1655:Middlewares/Third_Party/FatFs/src/ff.c **** {
 1144              		.loc 1 1655 1 is_stmt 1 view -0
ARM GAS  /tmp/ccWTW02a.s 			page 51


 1145              		.cfi_startproc
 1146              		@ args = 0, pretend = 0, frame = 0
 1147              		@ frame_needed = 0, uses_anonymous_args = 0
 1148              		.loc 1 1655 1 is_stmt 0 view .LVU333
 1149 0000 70B5     		push	{r4, r5, r6, lr}
 1150              	.LCFI15:
 1151              		.cfi_def_cfa_offset 16
 1152              		.cfi_offset 4, -16
 1153              		.cfi_offset 5, -12
 1154              		.cfi_offset 6, -8
 1155              		.cfi_offset 14, -4
 1156 0002 0646     		mov	r6, r0
 1157 0004 0C46     		mov	r4, r1
 1158 0006 1546     		mov	r5, r2
1656:Middlewares/Third_Party/FatFs/src/ff.c **** 	st_word(dir + DIR_FstClusLO, (WORD)cl);
 1159              		.loc 1 1656 2 is_stmt 1 view .LVU334
 1160 0008 91B2     		uxth	r1, r2
 1161              	.LVL116:
 1162              		.loc 1 1656 2 is_stmt 0 view .LVU335
 1163 000a 04F11A00 		add	r0, r4, #26
 1164              	.LVL117:
 1165              		.loc 1 1656 2 view .LVU336
 1166 000e FFF7FEFF 		bl	st_word
 1167              	.LVL118:
1657:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32) {
 1168              		.loc 1 1657 2 is_stmt 1 view .LVU337
 1169              		.loc 1 1657 8 is_stmt 0 view .LVU338
 1170 0012 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 1171              		.loc 1 1657 5 view .LVU339
 1172 0014 032B     		cmp	r3, #3
 1173 0016 00D0     		beq	.L99
 1174              	.L96:
1658:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(dir + DIR_FstClusHI, (WORD)(cl >> 16));
1659:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1660:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1175              		.loc 1 1660 1 view .LVU340
 1176 0018 70BD     		pop	{r4, r5, r6, pc}
 1177              	.LVL119:
 1178              	.L99:
1658:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(dir + DIR_FstClusHI, (WORD)(cl >> 16));
 1179              		.loc 1 1658 3 is_stmt 1 view .LVU341
 1180 001a 290C     		lsrs	r1, r5, #16
 1181 001c 04F11400 		add	r0, r4, #20
 1182 0020 FFF7FEFF 		bl	st_word
 1183              	.LVL120:
 1184              		.loc 1 1660 1 is_stmt 0 view .LVU342
 1185 0024 F8E7     		b	.L96
 1186              		.cfi_endproc
 1187              	.LFE167:
 1189              		.section	.text.get_fileinfo,"ax",%progbits
 1190              		.align	1
 1191              		.syntax unified
 1192              		.thumb
 1193              		.thumb_func
 1194              		.fpu fpv5-d16
 1196              	get_fileinfo:
 1197              	.LVL121:
ARM GAS  /tmp/ccWTW02a.s 			page 52


 1198              	.LFB172:
1661:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1662:Middlewares/Third_Party/FatFs/src/ff.c **** 
1663:Middlewares/Third_Party/FatFs/src/ff.c **** 
1664:Middlewares/Third_Party/FatFs/src/ff.c **** 
1665:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
1666:Middlewares/Third_Party/FatFs/src/ff.c **** /*------------------------------------------------------------------------*/
1667:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT-LFN: LFN handling                                                  */
1668:Middlewares/Third_Party/FatFs/src/ff.c **** /*------------------------------------------------------------------------*/
1669:Middlewares/Third_Party/FatFs/src/ff.c **** static
1670:Middlewares/Third_Party/FatFs/src/ff.c **** const BYTE LfnOfs[] = {1,3,5,7,9,14,16,18,20,22,24,28,30};	/* Offset of LFN characters in the direc
1671:Middlewares/Third_Party/FatFs/src/ff.c **** 
1672:Middlewares/Third_Party/FatFs/src/ff.c **** 
1673:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------------------------*/
1674:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT-LFN: Compare a part of file name with an LFN entry */
1675:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------------------------*/
1676:Middlewares/Third_Party/FatFs/src/ff.c **** static
1677:Middlewares/Third_Party/FatFs/src/ff.c **** int cmp_lfn (				/* 1:matched, 0:not matched */
1678:Middlewares/Third_Party/FatFs/src/ff.c **** 	const WCHAR* lfnbuf,	/* Pointer to the LFN working buffer to be compared */
1679:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dir				/* Pointer to the directory entry containing the part of LFN */
1680:Middlewares/Third_Party/FatFs/src/ff.c **** )
1681:Middlewares/Third_Party/FatFs/src/ff.c **** {
1682:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, s;
1683:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR wc, uc;
1684:Middlewares/Third_Party/FatFs/src/ff.c **** 
1685:Middlewares/Third_Party/FatFs/src/ff.c **** 
1686:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ld_word(dir + LDIR_FstClusLO) != 0) return 0;	/* Check LDIR_FstClusLO */
1687:Middlewares/Third_Party/FatFs/src/ff.c **** 
1688:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = ((dir[LDIR_Ord] & 0x3F) - 1) * 13;	/* Offset in the LFN buffer */
1689:Middlewares/Third_Party/FatFs/src/ff.c **** 
1690:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (wc = 1, s = 0; s < 13; s++) {		/* Process all characters in the entry */
1691:Middlewares/Third_Party/FatFs/src/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
1692:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wc) {
1693:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i >= _MAX_LFN || ff_wtoupper(uc) != ff_wtoupper(lfnbuf[i++])) {	/* Compare it */
1694:Middlewares/Third_Party/FatFs/src/ff.c **** 				return 0;					/* Not matched */
1695:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1696:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = uc;
1697:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
1698:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
1699:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1700:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1701:Middlewares/Third_Party/FatFs/src/ff.c **** 
1702:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((dir[LDIR_Ord] & LLEF) && wc && lfnbuf[i]) return 0;	/* Last segment matched but different len
1703:Middlewares/Third_Party/FatFs/src/ff.c **** 
1704:Middlewares/Third_Party/FatFs/src/ff.c **** 	return 1;		/* The part of LFN matched */
1705:Middlewares/Third_Party/FatFs/src/ff.c **** }
1706:Middlewares/Third_Party/FatFs/src/ff.c **** 
1707:Middlewares/Third_Party/FatFs/src/ff.c **** 
1708:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 1 || _FS_RPATH >= 2 || _USE_LABEL || _FS_EXFAT
1709:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------*/
1710:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT-LFN: Pick a part of file name from an LFN entry */
1711:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------*/
1712:Middlewares/Third_Party/FatFs/src/ff.c **** static
1713:Middlewares/Third_Party/FatFs/src/ff.c **** int pick_lfn (			/* 1:succeeded, 0:buffer overflow or invalid LFN entry */
1714:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR* lfnbuf,		/* Pointer to the LFN working buffer */
1715:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dir			/* Pointer to the LFN entry */
1716:Middlewares/Third_Party/FatFs/src/ff.c **** )
ARM GAS  /tmp/ccWTW02a.s 			page 53


1717:Middlewares/Third_Party/FatFs/src/ff.c **** {
1718:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, s;
1719:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR wc, uc;
1720:Middlewares/Third_Party/FatFs/src/ff.c **** 
1721:Middlewares/Third_Party/FatFs/src/ff.c **** 
1722:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ld_word(dir + LDIR_FstClusLO) != 0) return 0;	/* Check LDIR_FstClusLO is 0 */
1723:Middlewares/Third_Party/FatFs/src/ff.c **** 
1724:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = ((dir[LDIR_Ord] & ~LLEF) - 1) * 13;	/* Offset in the LFN buffer */
1725:Middlewares/Third_Party/FatFs/src/ff.c **** 
1726:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (wc = 1, s = 0; s < 13; s++) {		/* Process all characters in the entry */
1727:Middlewares/Third_Party/FatFs/src/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
1728:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wc) {
1729:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
1730:Middlewares/Third_Party/FatFs/src/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
1731:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
1732:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
1733:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1734:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1735:Middlewares/Third_Party/FatFs/src/ff.c **** 
1736:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (dir[LDIR_Ord] & LLEF) {				/* Put terminator if it is the last LFN part */
1737:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i >= _MAX_LFN) return 0;		/* Buffer overflow? */
1738:Middlewares/Third_Party/FatFs/src/ff.c **** 		lfnbuf[i] = 0;
1739:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1740:Middlewares/Third_Party/FatFs/src/ff.c **** 
1741:Middlewares/Third_Party/FatFs/src/ff.c **** 	return 1;		/* The part of LFN is valid */
1742:Middlewares/Third_Party/FatFs/src/ff.c **** }
1743:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1744:Middlewares/Third_Party/FatFs/src/ff.c **** 
1745:Middlewares/Third_Party/FatFs/src/ff.c **** 
1746:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1747:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------*/
1748:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT-LFN: Create an entry of LFN entries */
1749:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------*/
1750:Middlewares/Third_Party/FatFs/src/ff.c **** static
1751:Middlewares/Third_Party/FatFs/src/ff.c **** void put_lfn (
1752:Middlewares/Third_Party/FatFs/src/ff.c **** 	const WCHAR* lfn,	/* Pointer to the LFN */
1753:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dir,			/* Pointer to the LFN entry to be created */
1754:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE ord,			/* LFN order (1-20) */
1755:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE sum			/* Checksum of the corresponding SFN */
1756:Middlewares/Third_Party/FatFs/src/ff.c **** )
1757:Middlewares/Third_Party/FatFs/src/ff.c **** {
1758:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, s;
1759:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR wc;
1760:Middlewares/Third_Party/FatFs/src/ff.c **** 
1761:Middlewares/Third_Party/FatFs/src/ff.c **** 
1762:Middlewares/Third_Party/FatFs/src/ff.c **** 	dir[LDIR_Chksum] = sum;			/* Set checksum */
1763:Middlewares/Third_Party/FatFs/src/ff.c **** 	dir[LDIR_Attr] = AM_LFN;		/* Set attribute. LFN entry */
1764:Middlewares/Third_Party/FatFs/src/ff.c **** 	dir[LDIR_Type] = 0;
1765:Middlewares/Third_Party/FatFs/src/ff.c **** 	st_word(dir + LDIR_FstClusLO, 0);
1766:Middlewares/Third_Party/FatFs/src/ff.c **** 
1767:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = (ord - 1) * 13;				/* Get offset in the LFN working buffer */
1768:Middlewares/Third_Party/FatFs/src/ff.c **** 	s = wc = 0;
1769:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1770:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wc != 0xFFFF) wc = lfn[i++];	/* Get an effective character */
1771:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(dir + LfnOfs[s], wc);		/* Put it */
1772:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wc == 0) wc = 0xFFFF;		/* Padding characters for left locations */
1773:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (++s < 13);
ARM GAS  /tmp/ccWTW02a.s 			page 54


1774:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (wc == 0xFFFF || !lfn[i]) ord |= LLEF;	/* Last LFN part is the start of LFN sequence */
1775:Middlewares/Third_Party/FatFs/src/ff.c **** 	dir[LDIR_Ord] = ord;			/* Set the LFN order */
1776:Middlewares/Third_Party/FatFs/src/ff.c **** }
1777:Middlewares/Third_Party/FatFs/src/ff.c **** 
1778:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* !_FS_READONLY */
1779:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _USE_LFN != 0 */
1780:Middlewares/Third_Party/FatFs/src/ff.c **** 
1781:Middlewares/Third_Party/FatFs/src/ff.c **** 
1782:Middlewares/Third_Party/FatFs/src/ff.c **** 
1783:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0 && !_FS_READONLY
1784:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1785:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT-LFN: Create a Numbered SFN                                        */
1786:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1787:Middlewares/Third_Party/FatFs/src/ff.c **** 
1788:Middlewares/Third_Party/FatFs/src/ff.c **** static
1789:Middlewares/Third_Party/FatFs/src/ff.c **** void gen_numname (
1790:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dst,			/* Pointer to the buffer to store numbered SFN */
1791:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE* src,	/* Pointer to SFN */
1792:Middlewares/Third_Party/FatFs/src/ff.c **** 	const WCHAR* lfn,	/* Pointer to LFN */
1793:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT seq			/* Sequence number */
1794:Middlewares/Third_Party/FatFs/src/ff.c **** )
1795:Middlewares/Third_Party/FatFs/src/ff.c **** {
1796:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE ns[8], c;
1797:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, j;
1798:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR wc;
1799:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sr;
1800:Middlewares/Third_Party/FatFs/src/ff.c **** 
1801:Middlewares/Third_Party/FatFs/src/ff.c **** 
1802:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_cpy(dst, src, 11);
1803:Middlewares/Third_Party/FatFs/src/ff.c **** 
1804:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (seq > 5) {	/* In case of many collisions, generate a hash number instead of sequential number 
1805:Middlewares/Third_Party/FatFs/src/ff.c **** 		sr = seq;
1806:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (*lfn) {	/* Create a CRC */
1807:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = *lfn++;
1808:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (i = 0; i < 16; i++) {
1809:Middlewares/Third_Party/FatFs/src/ff.c **** 				sr = (sr << 1) + (wc & 1);
1810:Middlewares/Third_Party/FatFs/src/ff.c **** 				wc >>= 1;
1811:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (sr & 0x10000) sr ^= 0x11021;
1812:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1813:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1814:Middlewares/Third_Party/FatFs/src/ff.c **** 		seq = (UINT)sr;
1815:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1816:Middlewares/Third_Party/FatFs/src/ff.c **** 
1817:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* itoa (hexdecimal) */
1818:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = 7;
1819:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1820:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = (BYTE)((seq % 16) + '0');
1821:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c > '9') c += 7;
1822:Middlewares/Third_Party/FatFs/src/ff.c **** 		ns[i--] = c;
1823:Middlewares/Third_Party/FatFs/src/ff.c **** 		seq /= 16;
1824:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (seq);
1825:Middlewares/Third_Party/FatFs/src/ff.c **** 	ns[i] = '~';
1826:Middlewares/Third_Party/FatFs/src/ff.c **** 
1827:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Append the number */
1828:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (j = 0; j < i && dst[j] != ' '; j++) {
1829:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsDBCS1(dst[j])) {
1830:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (j == i - 1) break;
ARM GAS  /tmp/ccWTW02a.s 			page 55


1831:Middlewares/Third_Party/FatFs/src/ff.c **** 			j++;
1832:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1833:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1834:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1835:Middlewares/Third_Party/FatFs/src/ff.c **** 		dst[j++] = (i < 8) ? ns[i++] : ' ';
1836:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (j < 8);
1837:Middlewares/Third_Party/FatFs/src/ff.c **** }
1838:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _USE_LFN != 0 && !_FS_READONLY */
1839:Middlewares/Third_Party/FatFs/src/ff.c **** 
1840:Middlewares/Third_Party/FatFs/src/ff.c **** 
1841:Middlewares/Third_Party/FatFs/src/ff.c **** 
1842:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
1843:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1844:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT-LFN: Calculate checksum of an SFN entry                           */
1845:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1846:Middlewares/Third_Party/FatFs/src/ff.c **** 
1847:Middlewares/Third_Party/FatFs/src/ff.c **** static
1848:Middlewares/Third_Party/FatFs/src/ff.c **** BYTE sum_sfn (
1849:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE* dir		/* Pointer to the SFN entry */
1850:Middlewares/Third_Party/FatFs/src/ff.c **** )
1851:Middlewares/Third_Party/FatFs/src/ff.c **** {
1852:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE sum = 0;
1853:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n = 11;
1854:Middlewares/Third_Party/FatFs/src/ff.c **** 
1855:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1856:Middlewares/Third_Party/FatFs/src/ff.c **** 		sum = (sum >> 1) + (sum << 7) + *dir++;
1857:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (--n);
1858:Middlewares/Third_Party/FatFs/src/ff.c **** 	return sum;
1859:Middlewares/Third_Party/FatFs/src/ff.c **** }
1860:Middlewares/Third_Party/FatFs/src/ff.c **** 
1861:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _USE_LFN != 0 */
1862:Middlewares/Third_Party/FatFs/src/ff.c **** 
1863:Middlewares/Third_Party/FatFs/src/ff.c **** 
1864:Middlewares/Third_Party/FatFs/src/ff.c **** 
1865:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
1866:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1867:Middlewares/Third_Party/FatFs/src/ff.c **** /* exFAT: Checksum                                                       */
1868:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1869:Middlewares/Third_Party/FatFs/src/ff.c **** 
1870:Middlewares/Third_Party/FatFs/src/ff.c **** static
1871:Middlewares/Third_Party/FatFs/src/ff.c **** WORD xdir_sum (			/* Get checksum of the directoly block */
1872:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE* dir		/* Directory entry block to be calculated */
1873:Middlewares/Third_Party/FatFs/src/ff.c **** )
1874:Middlewares/Third_Party/FatFs/src/ff.c **** {
1875:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, szblk;
1876:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD sum;
1877:Middlewares/Third_Party/FatFs/src/ff.c **** 
1878:Middlewares/Third_Party/FatFs/src/ff.c **** 
1879:Middlewares/Third_Party/FatFs/src/ff.c **** 	szblk = (dir[XDIR_NumSec] + 1) * SZDIRE;
1880:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = sum = 0; i < szblk; i++) {
1881:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == XDIR_SetSum) {	/* Skip sum field */
1882:Middlewares/Third_Party/FatFs/src/ff.c **** 			i++;
1883:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
1884:Middlewares/Third_Party/FatFs/src/ff.c **** 			sum = ((sum & 1) ? 0x8000 : 0) + (sum >> 1) + dir[i];
1885:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1886:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1887:Middlewares/Third_Party/FatFs/src/ff.c **** 	return sum;
ARM GAS  /tmp/ccWTW02a.s 			page 56


1888:Middlewares/Third_Party/FatFs/src/ff.c **** }
1889:Middlewares/Third_Party/FatFs/src/ff.c **** 
1890:Middlewares/Third_Party/FatFs/src/ff.c **** 
1891:Middlewares/Third_Party/FatFs/src/ff.c **** 
1892:Middlewares/Third_Party/FatFs/src/ff.c **** static
1893:Middlewares/Third_Party/FatFs/src/ff.c **** WORD xname_sum (		/* Get check sum (to be used as hash) of the name */
1894:Middlewares/Third_Party/FatFs/src/ff.c **** 	const WCHAR* name	/* File name to be calculated */
1895:Middlewares/Third_Party/FatFs/src/ff.c **** )
1896:Middlewares/Third_Party/FatFs/src/ff.c **** {
1897:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR chr;
1898:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD sum = 0;
1899:Middlewares/Third_Party/FatFs/src/ff.c **** 
1900:Middlewares/Third_Party/FatFs/src/ff.c **** 
1901:Middlewares/Third_Party/FatFs/src/ff.c **** 	while ((chr = *name++) != 0) {
1902:Middlewares/Third_Party/FatFs/src/ff.c **** 		chr = ff_wtoupper(chr);		/* File name needs to be ignored case */
1903:Middlewares/Third_Party/FatFs/src/ff.c **** 		sum = ((sum & 1) ? 0x8000 : 0) + (sum >> 1) + (chr & 0xFF);
1904:Middlewares/Third_Party/FatFs/src/ff.c **** 		sum = ((sum & 1) ? 0x8000 : 0) + (sum >> 1) + (chr >> 8);
1905:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1906:Middlewares/Third_Party/FatFs/src/ff.c **** 	return sum;
1907:Middlewares/Third_Party/FatFs/src/ff.c **** }
1908:Middlewares/Third_Party/FatFs/src/ff.c **** 
1909:Middlewares/Third_Party/FatFs/src/ff.c **** 
1910:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _USE_MKFS
1911:Middlewares/Third_Party/FatFs/src/ff.c **** static
1912:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD xsum32 (
1913:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE  dat,	/* Data to be sumed */
1914:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sum	/* Previous value */
1915:Middlewares/Third_Party/FatFs/src/ff.c **** )
1916:Middlewares/Third_Party/FatFs/src/ff.c **** {
1917:Middlewares/Third_Party/FatFs/src/ff.c **** 	sum = ((sum & 1) ? 0x80000000 : 0) + (sum >> 1) + dat;
1918:Middlewares/Third_Party/FatFs/src/ff.c **** 	return sum;
1919:Middlewares/Third_Party/FatFs/src/ff.c **** }
1920:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1921:Middlewares/Third_Party/FatFs/src/ff.c **** 
1922:Middlewares/Third_Party/FatFs/src/ff.c **** 
1923:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 1 || _FS_RPATH >= 2
1924:Middlewares/Third_Party/FatFs/src/ff.c **** /*------------------------------------------------------*/
1925:Middlewares/Third_Party/FatFs/src/ff.c **** /* exFAT: Get object information from a directory block */
1926:Middlewares/Third_Party/FatFs/src/ff.c **** /*------------------------------------------------------*/
1927:Middlewares/Third_Party/FatFs/src/ff.c **** 
1928:Middlewares/Third_Party/FatFs/src/ff.c **** static
1929:Middlewares/Third_Party/FatFs/src/ff.c **** void get_xdir_info (
1930:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dirb,			/* Pointer to the direcotry entry block 85+C0+C1s */
1931:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno		/* Buffer to store the extracted file information */
1932:Middlewares/Third_Party/FatFs/src/ff.c **** )
1933:Middlewares/Third_Party/FatFs/src/ff.c **** {
1934:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT di, si;
1935:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR w;
1936:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
1937:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nc;
1938:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1939:Middlewares/Third_Party/FatFs/src/ff.c **** 
1940:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get file name */
1941:Middlewares/Third_Party/FatFs/src/ff.c **** 	di = 0;
1942:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
1943:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (si = SZDIRE * 2; di < dirb[XDIR_NumName]; si += 2, di++) {
1944:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((si % SZDIRE) == 0) si += 2;		/* Skip entry type field */
ARM GAS  /tmp/ccWTW02a.s 			page 57


1945:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = ld_word(dirb + si);					/* Get a character */
1946:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (di >= _MAX_LFN) { di = 0; break; }	/* Buffer overflow --> inaccessible object name */
1947:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fname[di] = w;						/* Store it */
1948:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1949:Middlewares/Third_Party/FatFs/src/ff.c **** #else
1950:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (si = SZDIRE * 2, nc = 0; nc < dirb[XDIR_NumName]; si += 2, nc++) {
1951:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((si % SZDIRE) == 0) si += 2;		/* Skip entry type field */
1952:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = ff_convert(ld_word(dirb + si), 0);	/* Get a character and Unicode -> OEM */
1953:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_DF1S && w >= 0x100) {				/* Is it a double byte char? (always false at SBCS cfg) */
1954:Middlewares/Third_Party/FatFs/src/ff.c **** 			fno->fname[di++] = (char)(w >> 8);	/* Put 1st byte of the DBC */
1955:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1956:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w == 0 || di >= _MAX_LFN) { di = 0; break; }	/* Invalid char or buffer overflow --> inaccessi
1957:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fname[di++] = (char)w;
1958:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1959:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1960:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (di == 0) fno->fname[di++] = '?';	/* Inaccessible object name? */
1961:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fname[di] = 0;						/* Terminate file name */
1962:Middlewares/Third_Party/FatFs/src/ff.c **** 
1963:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->altname[0] = 0;							/* No SFN */
1964:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fattrib = dirb[XDIR_Attr];					/* Attribute */
1965:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fsize = (fno->fattrib & AM_DIR) ? 0 : ld_qword(dirb + XDIR_FileSize);	/* Size */
1966:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->ftime = ld_word(dirb + XDIR_ModTime + 0);	/* Time */
1967:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fdate = ld_word(dirb + XDIR_ModTime + 2);	/* Date */
1968:Middlewares/Third_Party/FatFs/src/ff.c **** }
1969:Middlewares/Third_Party/FatFs/src/ff.c **** 
1970:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_MINIMIZE <= 1 || _FS_RPATH >= 2 */
1971:Middlewares/Third_Party/FatFs/src/ff.c **** 
1972:Middlewares/Third_Party/FatFs/src/ff.c **** 
1973:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------*/
1974:Middlewares/Third_Party/FatFs/src/ff.c **** /* exFAT: Get a directry entry block */
1975:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------*/
1976:Middlewares/Third_Party/FatFs/src/ff.c **** 
1977:Middlewares/Third_Party/FatFs/src/ff.c **** static
1978:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT load_xdir (	/* FR_INT_ERR: invalid entry block */
1979:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp			/* Pointer to the reading direcotry object pointing the 85 entry */
1980:Middlewares/Third_Party/FatFs/src/ff.c **** )
1981:Middlewares/Third_Party/FatFs/src/ff.c **** {
1982:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1983:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, sz_ent;
1984:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dirb = dp->obj.fs->dirbuf;	/* Pointer to the on-memory direcotry entry block 85+C0+C1s */
1985:Middlewares/Third_Party/FatFs/src/ff.c **** 
1986:Middlewares/Third_Party/FatFs/src/ff.c **** 
1987:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Load 85 entry */
1988:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = move_window(dp->obj.fs, dp->sect);
1989:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) return res;
1990:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (dp->dir[XDIR_Type] != 0x85) return FR_INT_ERR;
1991:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_cpy(dirb + 0, dp->dir, SZDIRE);
1992:Middlewares/Third_Party/FatFs/src/ff.c **** 	sz_ent = (dirb[XDIR_NumSec] + 1) * SZDIRE;
1993:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sz_ent < 3 * SZDIRE || sz_ent > 19 * SZDIRE) return FR_INT_ERR;
1994:Middlewares/Third_Party/FatFs/src/ff.c **** 
1995:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Load C0 entry */
1996:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_next(dp, 0);
1997:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) return res;
1998:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = move_window(dp->obj.fs, dp->sect);
1999:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) return res;
2000:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (dp->dir[XDIR_Type] != 0xC0) return FR_INT_ERR;
2001:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_cpy(dirb + SZDIRE, dp->dir, SZDIRE);
ARM GAS  /tmp/ccWTW02a.s 			page 58


2002:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (MAXDIRB(dirb[XDIR_NumName]) > sz_ent) return FR_INT_ERR;
2003:Middlewares/Third_Party/FatFs/src/ff.c **** 
2004:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Load C1 entries */
2005:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = SZDIRE * 2;	/* C1 offset */
2006:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
2007:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_next(dp, 0);
2008:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
2009:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(dp->obj.fs, dp->sect);
2010:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
2011:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (dp->dir[XDIR_Type] != 0xC1) return FR_INT_ERR;
2012:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i < MAXDIRB(_MAX_LFN)) mem_cpy(dirb + i, dp->dir, SZDIRE);
2013:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while ((i += SZDIRE) < sz_ent);
2014:Middlewares/Third_Party/FatFs/src/ff.c **** 
2015:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Sanity check (do it when accessible object name) */
2016:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i <= MAXDIRB(_MAX_LFN)) {
2017:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (xdir_sum(dirb) != ld_word(dirb + XDIR_SetSum)) return FR_INT_ERR;
2018:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2019:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
2020:Middlewares/Third_Party/FatFs/src/ff.c **** }
2021:Middlewares/Third_Party/FatFs/src/ff.c **** 
2022:Middlewares/Third_Party/FatFs/src/ff.c **** 
2023:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY || _FS_RPATH != 0
2024:Middlewares/Third_Party/FatFs/src/ff.c **** /*------------------------------------------------*/
2025:Middlewares/Third_Party/FatFs/src/ff.c **** /* exFAT: Load the object's directory entry block */
2026:Middlewares/Third_Party/FatFs/src/ff.c **** /*------------------------------------------------*/
2027:Middlewares/Third_Party/FatFs/src/ff.c **** static
2028:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT load_obj_dir (
2029:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Blank directory object to be used to access containing direcotry */
2030:Middlewares/Third_Party/FatFs/src/ff.c **** 	const _FDID* obj	/* Object with its containing directory information */
2031:Middlewares/Third_Party/FatFs/src/ff.c **** )
2032:Middlewares/Third_Party/FatFs/src/ff.c **** {
2033:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2034:Middlewares/Third_Party/FatFs/src/ff.c **** 
2035:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Open object containing directory */
2036:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->obj.fs = obj->fs;
2037:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->obj.sclust = obj->c_scl;
2038:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->obj.stat = (BYTE)obj->c_size;
2039:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->obj.objsize = obj->c_size & 0xFFFFFF00;
2040:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->blk_ofs = obj->c_ofs;
2041:Middlewares/Third_Party/FatFs/src/ff.c **** 
2042:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(dp, dp->blk_ofs);	/* Goto object's entry block */
2043:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
2044:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = load_xdir(dp);		/* Load the object's entry block */
2045:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2046:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
2047:Middlewares/Third_Party/FatFs/src/ff.c **** }
2048:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2049:Middlewares/Third_Party/FatFs/src/ff.c **** 
2050:Middlewares/Third_Party/FatFs/src/ff.c **** 
2051:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
2052:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------*/
2053:Middlewares/Third_Party/FatFs/src/ff.c **** /* exFAT: Store the directory block to the media */
2054:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------*/
2055:Middlewares/Third_Party/FatFs/src/ff.c **** static
2056:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT store_xdir (
2057:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp				/* Pointer to the direcotry object */
2058:Middlewares/Third_Party/FatFs/src/ff.c **** )
ARM GAS  /tmp/ccWTW02a.s 			page 59


2059:Middlewares/Third_Party/FatFs/src/ff.c **** {
2060:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2061:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nent;
2062:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dirb = dp->obj.fs->dirbuf;	/* Pointer to the direcotry entry block 85+C0+C1s */
2063:Middlewares/Third_Party/FatFs/src/ff.c **** 
2064:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create set sum */
2065:Middlewares/Third_Party/FatFs/src/ff.c **** 	st_word(dirb + XDIR_SetSum, xdir_sum(dirb));
2066:Middlewares/Third_Party/FatFs/src/ff.c **** 	nent = dirb[XDIR_NumSec] + 1;
2067:Middlewares/Third_Party/FatFs/src/ff.c **** 
2068:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Store the set of directory to the volume */
2069:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(dp, dp->blk_ofs);
2070:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (res == FR_OK) {
2071:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(dp->obj.fs, dp->sect);
2072:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
2073:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(dp->dir, dirb, SZDIRE);
2074:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->obj.fs->wflag = 1;
2075:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (--nent == 0) break;
2076:Middlewares/Third_Party/FatFs/src/ff.c **** 		dirb += SZDIRE;
2077:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_next(dp, 0);
2078:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2079:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (res == FR_OK || res == FR_DISK_ERR) ? res : FR_INT_ERR;
2080:Middlewares/Third_Party/FatFs/src/ff.c **** }
2081:Middlewares/Third_Party/FatFs/src/ff.c **** 
2082:Middlewares/Third_Party/FatFs/src/ff.c **** 
2083:Middlewares/Third_Party/FatFs/src/ff.c **** 
2084:Middlewares/Third_Party/FatFs/src/ff.c **** /*-------------------------------------------*/
2085:Middlewares/Third_Party/FatFs/src/ff.c **** /* exFAT: Create a new directory enrty block */
2086:Middlewares/Third_Party/FatFs/src/ff.c **** /*-------------------------------------------*/
2087:Middlewares/Third_Party/FatFs/src/ff.c **** 
2088:Middlewares/Third_Party/FatFs/src/ff.c **** static
2089:Middlewares/Third_Party/FatFs/src/ff.c **** void create_xdir (
2090:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dirb,			/* Pointer to the direcotry entry block buffer */
2091:Middlewares/Third_Party/FatFs/src/ff.c **** 	const WCHAR* lfn	/* Pointer to the nul terminated file name */
2092:Middlewares/Third_Party/FatFs/src/ff.c **** )
2093:Middlewares/Third_Party/FatFs/src/ff.c **** {
2094:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
2095:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE nb, nc;
2096:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR chr;
2097:Middlewares/Third_Party/FatFs/src/ff.c **** 
2098:Middlewares/Third_Party/FatFs/src/ff.c **** 
2099:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create 85+C0 entry */
2100:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_set(dirb, 0, 2 * SZDIRE);
2101:Middlewares/Third_Party/FatFs/src/ff.c **** 	dirb[XDIR_Type] = 0x85;
2102:Middlewares/Third_Party/FatFs/src/ff.c **** 	dirb[XDIR_Type + SZDIRE] = 0xC0;
2103:Middlewares/Third_Party/FatFs/src/ff.c **** 
2104:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create C1 entries */
2105:Middlewares/Third_Party/FatFs/src/ff.c **** 	nc = 0; nb = 1; chr = 1; i = SZDIRE * 2;
2106:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
2107:Middlewares/Third_Party/FatFs/src/ff.c **** 		dirb[i++] = 0xC1; dirb[i++] = 0;	/* Entry type C1 */
2108:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {	/* Fill name field */
2109:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (chr && (chr = lfn[nc]) != 0) nc++;	/* Get a character if exist */
2110:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(dirb + i, chr); 		/* Store it */
2111:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while ((i += 2) % SZDIRE != 0);
2112:Middlewares/Third_Party/FatFs/src/ff.c **** 		nb++;
2113:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (lfn[nc]);	/* Fill next entry if any char follows */
2114:Middlewares/Third_Party/FatFs/src/ff.c **** 
2115:Middlewares/Third_Party/FatFs/src/ff.c **** 	dirb[XDIR_NumName] = nc;	/* Set name length */
ARM GAS  /tmp/ccWTW02a.s 			page 60


2116:Middlewares/Third_Party/FatFs/src/ff.c **** 	dirb[XDIR_NumSec] = nb;		/* Set block length */
2117:Middlewares/Third_Party/FatFs/src/ff.c **** 	st_word(dirb + XDIR_NameHash, xname_sum(lfn));	/* Set name hash */
2118:Middlewares/Third_Party/FatFs/src/ff.c **** }
2119:Middlewares/Third_Party/FatFs/src/ff.c **** 
2120:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* !_FS_READONLY */
2121:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_EXFAT */
2122:Middlewares/Third_Party/FatFs/src/ff.c **** 
2123:Middlewares/Third_Party/FatFs/src/ff.c **** 
2124:Middlewares/Third_Party/FatFs/src/ff.c **** 
2125:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 1 || _FS_RPATH >= 2 || _USE_LABEL || _FS_EXFAT
2126:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2127:Middlewares/Third_Party/FatFs/src/ff.c **** /* Read an object from the directory                                     */
2128:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2129:Middlewares/Third_Party/FatFs/src/ff.c **** 
2130:Middlewares/Third_Party/FatFs/src/ff.c **** static
2131:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_read (
2132:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to the directory object */
2133:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol			/* Filtered by 0:file/directory or 1:volume label */
2134:Middlewares/Third_Party/FatFs/src/ff.c **** )
2135:Middlewares/Third_Party/FatFs/src/ff.c **** {
2136:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_NO_FILE;
2137:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
2138:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE a, c;
2139:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
2140:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE ord = 0xFF, sum = 0xFF;
2141:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2142:Middlewares/Third_Party/FatFs/src/ff.c **** 
2143:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (dp->sect) {
2144:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
2145:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
2146:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dp->dir[DIR_Name];	/* Test for the entry type */
2147:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) {
2148:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_NO_FILE; break; /* Reached to end of the directory */
2149:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2150:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
2151:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
2152:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (_USE_LABEL && vol) {
2153:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (c == 0x83) break;	/* Volume label entry? */
2154:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
2155:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (c == 0x85) {		/* Start of the file entry block? */
2156:Middlewares/Third_Party/FatFs/src/ff.c **** 					dp->blk_ofs = dp->dptr;	/* Get location of the block */
2157:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = load_xdir(dp);	/* Load the entry block */
2158:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
2159:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->obj.attr = fs->dirbuf[XDIR_Attr] & AM_MASK;	/* Get attribute */
2160:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2161:Middlewares/Third_Party/FatFs/src/ff.c **** 					break;
2162:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2163:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2164:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else
2165:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2166:Middlewares/Third_Party/FatFs/src/ff.c **** 		{	/* On the FAT12/16/32 volume */
2167:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->obj.attr = a = dp->dir[DIR_Attr] & AM_MASK;	/* Get attribute */
2168:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
2169:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c == DDEM || c == '.' || (int)((a & ~AM_ARC) == AM_VOL) != vol) {	/* An entry without valid 
2170:Middlewares/Third_Party/FatFs/src/ff.c **** 				ord = 0xFF;
2171:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
2172:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (a == AM_LFN) {			/* An LFN entry is found */
ARM GAS  /tmp/ccWTW02a.s 			page 61


2173:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (c & LLEF) {			/* Is it start of an LFN sequence? */
2174:Middlewares/Third_Party/FatFs/src/ff.c **** 						sum = dp->dir[LDIR_Chksum];
2175:Middlewares/Third_Party/FatFs/src/ff.c **** 						c &= (BYTE)~LLEF; ord = c;
2176:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->blk_ofs = dp->dptr;
2177:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2178:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Check LFN validity and capture it */
2179:Middlewares/Third_Party/FatFs/src/ff.c **** 					ord = (c == ord && sum == dp->dir[LDIR_Chksum] && pick_lfn(fs->lfnbuf, dp->dir)) ? ord - 1 : 0
2180:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {					/* An SFN entry is found */
2181:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (ord || sum != sum_sfn(dp->dir)) {	/* Is there a valid LFN? */
2182:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->blk_ofs = 0xFFFFFFFF;			/* It has no LFN. */
2183:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2184:Middlewares/Third_Party/FatFs/src/ff.c **** 					break;
2185:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2186:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2187:Middlewares/Third_Party/FatFs/src/ff.c **** #else		/* Non LFN configuration */
2188:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c != DDEM && c != '.' && a != AM_LFN && (int)((a & ~AM_ARC) == AM_VOL) == vol) {	/* Is it a 
2189:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
2190:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2191:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2192:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2193:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_next(dp, 0);		/* Next entry */
2194:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
2195:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2196:Middlewares/Third_Party/FatFs/src/ff.c **** 
2197:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) dp->sect = 0;		/* Terminate the read operation on error or EOT */
2198:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
2199:Middlewares/Third_Party/FatFs/src/ff.c **** }
2200:Middlewares/Third_Party/FatFs/src/ff.c **** 
2201:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_MINIMIZE <= 1 || _USE_LABEL || _FS_RPATH >= 2 */
2202:Middlewares/Third_Party/FatFs/src/ff.c **** 
2203:Middlewares/Third_Party/FatFs/src/ff.c **** 
2204:Middlewares/Third_Party/FatFs/src/ff.c **** 
2205:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2206:Middlewares/Third_Party/FatFs/src/ff.c **** /* Directory handling - Find an object in the directory                  */
2207:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2208:Middlewares/Third_Party/FatFs/src/ff.c **** 
2209:Middlewares/Third_Party/FatFs/src/ff.c **** static
2210:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_find (	/* FR_OK(0):succeeded, !=0:error */
2211:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp			/* Pointer to the directory object with the file name */
2212:Middlewares/Third_Party/FatFs/src/ff.c **** )
2213:Middlewares/Third_Party/FatFs/src/ff.c **** {
2214:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2215:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
2216:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE c;
2217:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
2218:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE a, ord, sum;
2219:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2220:Middlewares/Third_Party/FatFs/src/ff.c **** 
2221:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(dp, 0);			/* Rewind directory object */
2222:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) return res;
2223:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
2224:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
2225:Middlewares/Third_Party/FatFs/src/ff.c **** 		BYTE nc;
2226:Middlewares/Third_Party/FatFs/src/ff.c **** 		UINT di, ni;
2227:Middlewares/Third_Party/FatFs/src/ff.c **** 		WORD hash = xname_sum(fs->lfnbuf);		/* Hash value of the name to find */
2228:Middlewares/Third_Party/FatFs/src/ff.c **** 
2229:Middlewares/Third_Party/FatFs/src/ff.c **** 		while ((res = dir_read(dp, 0)) == FR_OK) {	/* Read an item */
ARM GAS  /tmp/ccWTW02a.s 			page 62


2230:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_LFN < 255
2231:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->dirbuf[XDIR_NumName] > _MAX_LFN) continue;			/* Skip comparison if inaccessible object n
2232:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2233:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ld_word(fs->dirbuf + XDIR_NameHash) != hash) continue;	/* Skip comparison if hash mismatched
2234:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (nc = fs->dirbuf[XDIR_NumName], di = SZDIRE * 2, ni = 0; nc; nc--, di += 2, ni++) {	/* Compa
2235:Middlewares/Third_Party/FatFs/src/ff.c **** 				if ((di % SZDIRE) == 0) di += 2;
2236:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ff_wtoupper(ld_word(fs->dirbuf + di)) != ff_wtoupper(fs->lfnbuf[ni])) break;
2237:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2238:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (nc == 0 && !fs->lfnbuf[ni]) break;	/* Name matched? */
2239:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2240:Middlewares/Third_Party/FatFs/src/ff.c **** 		return res;
2241:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2242:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2243:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* On the FAT12/16/32 volume */
2244:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
2245:Middlewares/Third_Party/FatFs/src/ff.c **** 	ord = sum = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
2246:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2247:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
2248:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
2249:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
2250:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dp->dir[DIR_Name];
2251:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
2252:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
2253:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->obj.attr = a = dp->dir[DIR_Attr] & AM_MASK;
2254:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == DDEM || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
2255:Middlewares/Third_Party/FatFs/src/ff.c **** 			ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
2256:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
2257:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (a == AM_LFN) {			/* An LFN entry is found */
2258:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_NOLFN)) {
2259:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (c & LLEF) {		/* Is it start of LFN sequence? */
2260:Middlewares/Third_Party/FatFs/src/ff.c **** 						sum = dp->dir[LDIR_Chksum];
2261:Middlewares/Third_Party/FatFs/src/ff.c **** 						c &= (BYTE)~LLEF; ord = c;	/* LFN start order */
2262:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->blk_ofs = dp->dptr;	/* Start offset of LFN */
2263:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2264:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Check validity of the LFN entry and compare it with given name */
2265:Middlewares/Third_Party/FatFs/src/ff.c **** 					ord = (c == ord && sum == dp->dir[LDIR_Chksum] && cmp_lfn(fs->lfnbuf, dp->dir)) ? ord - 1 : 0x
2266:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2267:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* An SFN entry is found */
2268:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!ord && sum == sum_sfn(dp->dir)) break;	/* LFN matched? */
2269:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_LOSS) && !mem_cmp(dp->dir, dp->fn, 11)) break;	/* SFN matched? */
2270:Middlewares/Third_Party/FatFs/src/ff.c **** 				ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
2271:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2272:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2273:Middlewares/Third_Party/FatFs/src/ff.c **** #else		/* Non LFN configuration */
2274:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->obj.attr = dp->dir[DIR_Attr] & AM_MASK;
2275:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(dp->dir[DIR_Attr] & AM_VOL) && !mem_cmp(dp->dir, dp->fn, 11)) break;	/* Is it a valid entry
2276:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2277:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_next(dp, 0);	/* Next entry */
2278:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (res == FR_OK);
2279:Middlewares/Third_Party/FatFs/src/ff.c **** 
2280:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
2281:Middlewares/Third_Party/FatFs/src/ff.c **** }
2282:Middlewares/Third_Party/FatFs/src/ff.c **** 
2283:Middlewares/Third_Party/FatFs/src/ff.c **** 
2284:Middlewares/Third_Party/FatFs/src/ff.c **** 
2285:Middlewares/Third_Party/FatFs/src/ff.c **** 
2286:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
ARM GAS  /tmp/ccWTW02a.s 			page 63


2287:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2288:Middlewares/Third_Party/FatFs/src/ff.c **** /* Register an object to the directory                                   */
2289:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2290:Middlewares/Third_Party/FatFs/src/ff.c **** 
2291:Middlewares/Third_Party/FatFs/src/ff.c **** static
2292:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_register (	/* FR_OK:succeeded, FR_DENIED:no free entry or too many SFN collision, FR_DI
2293:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp				/* Target directory with object name to be created */
2294:Middlewares/Third_Party/FatFs/src/ff.c **** )
2295:Middlewares/Third_Party/FatFs/src/ff.c **** {
2296:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2297:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
2298:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
2299:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n, nlen, nent;
2300:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE sn[12], sum;
2301:Middlewares/Third_Party/FatFs/src/ff.c **** 
2302:Middlewares/Third_Party/FatFs/src/ff.c **** 
2303:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (dp->fn[NSFLAG] & (NS_DOT | NS_NONAME)) return FR_INVALID_NAME;	/* Check name validity */
2304:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (nlen = 0; fs->lfnbuf[nlen]; nlen++) ;	/* Get lfn length */
2305:Middlewares/Third_Party/FatFs/src/ff.c **** 
2306:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
2307:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
2308:Middlewares/Third_Party/FatFs/src/ff.c **** 		DIR dj;
2309:Middlewares/Third_Party/FatFs/src/ff.c **** 
2310:Middlewares/Third_Party/FatFs/src/ff.c **** 		nent = (nlen + 14) / 15 + 2;	/* Number of entries to allocate (85+C0+C1s) */
2311:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_alloc(dp, nent);		/* Allocate entries */
2312:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
2313:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->blk_ofs = dp->dptr - SZDIRE * (nent - 1);	/* Set the allocated entry block offset */
2314:Middlewares/Third_Party/FatFs/src/ff.c **** 
2315:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (dp->obj.sclust != 0 && (dp->obj.stat & 4)) {	/* Has the sub-directory been stretched? */
2316:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->obj.objsize += (DWORD)fs->csize * SS(fs);	/* Increase the directory size by cluster size */
2317:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = fill_first_frag(&dp->obj);				/* Fill first fragment on the FAT if needed */
2318:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
2319:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = fill_last_frag(&dp->obj, dp->clust, 0xFFFFFFFF);	/* Fill last fragment on the FAT if neede
2320:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
2321:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = load_obj_dir(&dj, &dp->obj);				/* Load the object status */
2322:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
2323:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_qword(fs->dirbuf + XDIR_FileSize, dp->obj.objsize);		/* Update the allocation status */
2324:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_qword(fs->dirbuf + XDIR_ValidFileSize, dp->obj.objsize);
2325:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbuf[XDIR_GenFlags] = dp->obj.stat | 1;
2326:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = store_xdir(&dj);							/* Store the object status */
2327:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
2328:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2329:Middlewares/Third_Party/FatFs/src/ff.c **** 
2330:Middlewares/Third_Party/FatFs/src/ff.c **** 		create_xdir(fs->dirbuf, fs->lfnbuf);	/* Create on-memory directory block to be written later */
2331:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_OK;
2332:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2333:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2334:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* On the FAT12/16/32 volume */
2335:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_cpy(sn, dp->fn, 12);
2336:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sn[NSFLAG] & NS_LOSS) {			/* When LFN is out of 8.3 format, generate a numbered name */
2337:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[NSFLAG] = NS_NOLFN;		/* Find only SFN */
2338:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (n = 1; n < 100; n++) {
2339:Middlewares/Third_Party/FatFs/src/ff.c **** 			gen_numname(dp->fn, sn, fs->lfnbuf, n);	/* Generate a numbered name */
2340:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_find(dp);				/* Check if the name collides with existing SFN */
2341:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
2342:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2343:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n == 100) return FR_DENIED;		/* Abort if too many collisions */
ARM GAS  /tmp/ccWTW02a.s 			page 64


2344:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
2345:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[NSFLAG] = sn[NSFLAG];
2346:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2347:Middlewares/Third_Party/FatFs/src/ff.c **** 
2348:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create an SFN with/without LFNs. */
2349:Middlewares/Third_Party/FatFs/src/ff.c **** 	nent = (sn[NSFLAG] & NS_LFN) ? (nlen + 12) / 13 + 1 : 1;	/* Number of entries to allocate */
2350:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_alloc(dp, nent);		/* Allocate entries */
2351:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK && --nent) {	/* Set LFN entry if needed */
2352:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(dp, dp->dptr - nent * SZDIRE);
2353:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
2354:Middlewares/Third_Party/FatFs/src/ff.c **** 			sum = sum_sfn(dp->fn);	/* Checksum value of the SFN tied to the LFN */
2355:Middlewares/Third_Party/FatFs/src/ff.c **** 			do {					/* Store LFN entries in bottom first */
2356:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = move_window(fs, dp->sect);
2357:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res != FR_OK) break;
2358:Middlewares/Third_Party/FatFs/src/ff.c **** 				put_lfn(fs->lfnbuf, dp->dir, (BYTE)nent, sum);
2359:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->wflag = 1;
2360:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_next(dp, 0);	/* Next entry */
2361:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (res == FR_OK && --nent);
2362:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2363:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2364:Middlewares/Third_Party/FatFs/src/ff.c **** 
2365:Middlewares/Third_Party/FatFs/src/ff.c **** #else	/* Non LFN configuration */
2366:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_alloc(dp, 1);		/* Allocate an entry for SFN */
2367:Middlewares/Third_Party/FatFs/src/ff.c **** 
2368:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2369:Middlewares/Third_Party/FatFs/src/ff.c **** 
2370:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Set SFN entry */
2371:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
2372:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
2373:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
2374:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(dp->dir, 0, SZDIRE);	/* Clean the entry */
2375:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(dp->dir + DIR_Name, dp->fn, 11);	/* Put SFN */
2376:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
2377:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->dir[DIR_NTres] = dp->fn[NSFLAG] & (NS_BODY | NS_EXT);	/* Put NT flag */
2378:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2379:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
2380:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2381:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2382:Middlewares/Third_Party/FatFs/src/ff.c **** 
2383:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
2384:Middlewares/Third_Party/FatFs/src/ff.c **** }
2385:Middlewares/Third_Party/FatFs/src/ff.c **** 
2386:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
2387:Middlewares/Third_Party/FatFs/src/ff.c **** 
2388:Middlewares/Third_Party/FatFs/src/ff.c **** 
2389:Middlewares/Third_Party/FatFs/src/ff.c **** 
2390:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE == 0
2391:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2392:Middlewares/Third_Party/FatFs/src/ff.c **** /* Remove an object from the directory                                   */
2393:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2394:Middlewares/Third_Party/FatFs/src/ff.c **** 
2395:Middlewares/Third_Party/FatFs/src/ff.c **** static
2396:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_remove (	/* FR_OK:Succeeded, FR_DISK_ERR:A disk error */
2397:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp				/* Directory object pointing the entry to be removed */
2398:Middlewares/Third_Party/FatFs/src/ff.c **** )
2399:Middlewares/Third_Party/FatFs/src/ff.c **** {
2400:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
ARM GAS  /tmp/ccWTW02a.s 			page 65


2401:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
2402:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
2403:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD last = dp->dptr;
2404:Middlewares/Third_Party/FatFs/src/ff.c **** 
2405:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = (dp->blk_ofs == 0xFFFFFFFF) ? FR_OK : dir_sdi(dp, dp->blk_ofs);	/* Goto top of the entry blo
2406:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
2407:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
2408:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, dp->sect);
2409:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
2410:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Mark an entry 'deleted' */
2411:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (_FS_EXFAT && fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
2412:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->dir[XDIR_Type] &= 0x7F;
2413:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {									/* On the FAT12/16/32 volume */
2414:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->dir[DIR_Name] = DDEM;
2415:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2416:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
2417:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dp->dptr >= last) break;	/* If reached last entry then all entries of the object has been de
2418:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_next(dp, 0);	/* Next entry */
2419:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (res == FR_OK);
2420:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) res = FR_INT_ERR;
2421:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2422:Middlewares/Third_Party/FatFs/src/ff.c **** #else			/* Non LFN configuration */
2423:Middlewares/Third_Party/FatFs/src/ff.c **** 
2424:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = move_window(fs, dp->sect);
2425:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
2426:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->dir[DIR_Name] = DDEM;
2427:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->wflag = 1;
2428:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2429:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2430:Middlewares/Third_Party/FatFs/src/ff.c **** 
2431:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
2432:Middlewares/Third_Party/FatFs/src/ff.c **** }
2433:Middlewares/Third_Party/FatFs/src/ff.c **** 
2434:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY && _FS_MINIMIZE == 0 */
2435:Middlewares/Third_Party/FatFs/src/ff.c **** 
2436:Middlewares/Third_Party/FatFs/src/ff.c **** 
2437:Middlewares/Third_Party/FatFs/src/ff.c **** 
2438:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 1 || _FS_RPATH >= 2
2439:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2440:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get file information from directory entry                             */
2441:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2442:Middlewares/Third_Party/FatFs/src/ff.c **** 
2443:Middlewares/Third_Party/FatFs/src/ff.c **** static
2444:Middlewares/Third_Party/FatFs/src/ff.c **** void get_fileinfo (		/* No return code */
2445:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Pointer to the directory object */
2446:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno	 	/* Pointer to the file information to be filled */
2447:Middlewares/Third_Party/FatFs/src/ff.c **** )
2448:Middlewares/Third_Party/FatFs/src/ff.c **** {
 1199              		.loc 1 2448 1 is_stmt 1 view -0
 1200              		.cfi_startproc
 1201              		@ args = 0, pretend = 0, frame = 0
 1202              		@ frame_needed = 0, uses_anonymous_args = 0
 1203              		.loc 1 2448 1 is_stmt 0 view .LVU344
 1204 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1205              	.LCFI16:
 1206              		.cfi_def_cfa_offset 24
 1207              		.cfi_offset 3, -24
ARM GAS  /tmp/ccWTW02a.s 			page 66


 1208              		.cfi_offset 4, -20
 1209              		.cfi_offset 5, -16
 1210              		.cfi_offset 6, -12
 1211              		.cfi_offset 7, -8
 1212              		.cfi_offset 14, -4
2449:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, j;
 1213              		.loc 1 2449 2 is_stmt 1 view .LVU345
2450:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c;
 1214              		.loc 1 2450 2 view .LVU346
2451:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD tm;
 1215              		.loc 1 2451 2 view .LVU347
2452:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
2453:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR w, lfv;
2454:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
2455:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2456:Middlewares/Third_Party/FatFs/src/ff.c **** 
2457:Middlewares/Third_Party/FatFs/src/ff.c **** 
2458:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fname[0] = 0;		/* Invaidate file info */
 1216              		.loc 1 2458 2 view .LVU348
 1217              		.loc 1 2458 16 is_stmt 0 view .LVU349
 1218 0002 0023     		movs	r3, #0
 1219 0004 4B72     		strb	r3, [r1, #9]
2459:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp->sect) return;	/* Exit if read pointer has reached end of directory */
 1220              		.loc 1 2459 2 is_stmt 1 view .LVU350
 1221              		.loc 1 2459 9 is_stmt 0 view .LVU351
 1222 0006 C369     		ldr	r3, [r0, #28]
 1223              		.loc 1 2459 5 view .LVU352
 1224 0008 63B3     		cbz	r3, .L100
 1225 000a 0746     		mov	r7, r0
 1226 000c 0E46     		mov	r6, r1
2460:Middlewares/Third_Party/FatFs/src/ff.c **** 
2461:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
2462:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
2463:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
2464:Middlewares/Third_Party/FatFs/src/ff.c **** 		get_xdir_info(fs->dirbuf, fno);
2465:Middlewares/Third_Party/FatFs/src/ff.c **** 		return;
2466:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
2467:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2468:Middlewares/Third_Party/FatFs/src/ff.c **** 	{	/* On the FAT12/16/32 volume */
2469:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (dp->blk_ofs != 0xFFFFFFFF) {	/* Get LFN if available */
2470:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = j = 0;
2471:Middlewares/Third_Party/FatFs/src/ff.c **** 			while ((w = fs->lfnbuf[j++]) != 0) {	/* Get an LFN character */
2472:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
2473:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = ff_convert(w, 0);		/* Unicode -> OEM */
2474:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (w == 0) { i = 0; break; }	/* No LFN if it could not be converted */
2475:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (_DF1S && w >= 0x100) {	/* Put 1st byte if it is a DBC (always false at SBCS cfg) */
2476:Middlewares/Third_Party/FatFs/src/ff.c **** 					fno->fname[i++] = (char)(w >> 8);
2477:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2478:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2479:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i >= _MAX_LFN) { i = 0; break; }	/* No LFN if buffer overflow */
2480:Middlewares/Third_Party/FatFs/src/ff.c **** 				fno->fname[i++] = (TCHAR)w;
2481:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2482:Middlewares/Third_Party/FatFs/src/ff.c **** 			fno->fname[i] = 0;	/* Terminate the LFN */
2483:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2484:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2485:Middlewares/Third_Party/FatFs/src/ff.c **** 
2486:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = j = 0;
ARM GAS  /tmp/ccWTW02a.s 			page 67


2487:Middlewares/Third_Party/FatFs/src/ff.c **** 	lfv = fno->fname[i];	/* LFN is exist if non-zero */
2488:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (i < 11) {		/* Copy name body and extension */
2489:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = (TCHAR)dp->dir[i++];
2490:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == ' ') continue;				/* Skip padding spaces */
2491:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == RDDEM) c = (TCHAR)DDEM;	/* Restore replaced DDEM character */
2492:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == 9) {						/* Insert a . if extension is exist */
2493:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!lfv) fno->fname[j] = '.';
2494:Middlewares/Third_Party/FatFs/src/ff.c **** 			fno->altname[j++] = '.';
2495:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2496:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
2497:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsDBCS1(c) && i != 8 && i != 11 && IsDBCS2(dp->dir[i])) {
2498:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = c << 8 | dp->dir[i++];
2499:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2500:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = ff_convert(c, 1);	/* OEM -> Unicode */
2501:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!c) c = '?';
2502:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2503:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->altname[j] = c;
2504:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!lfv) {
2505:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsUpper(c) && (dp->dir[DIR_NTres] & ((i >= 9) ? NS_EXT : NS_BODY))) {
2506:Middlewares/Third_Party/FatFs/src/ff.c **** 				c += 0x20;			/* To lower */
2507:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2508:Middlewares/Third_Party/FatFs/src/ff.c **** 			fno->fname[j] = c;
2509:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2510:Middlewares/Third_Party/FatFs/src/ff.c **** 		j++;
2511:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2512:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!lfv) {
2513:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fname[j] = 0;
2514:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!dp->dir[DIR_NTres]) j = 0;	/* Altname is no longer needed if neither LFN nor case info is ex
2515:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2516:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->altname[j] = 0;	/* Terminate the SFN */
2517:Middlewares/Third_Party/FatFs/src/ff.c **** 
2518:Middlewares/Third_Party/FatFs/src/ff.c **** #else	/* Non-LFN configuration */
2519:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = j = 0;
 1227              		.loc 1 2519 8 view .LVU353
 1228 000e 0022     		movs	r2, #0
 1229              		.loc 1 2519 4 view .LVU354
 1230 0010 1346     		mov	r3, r2
 1231 0012 05E0     		b	.L102
 1232              	.LVL122:
 1233              	.L104:
2520:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (i < 11) {		/* Copy name body and extension */
2521:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = (TCHAR)dp->dir[i++];
2522:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == ' ') continue;				/* Skip padding spaces */
2523:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == RDDEM) c = (TCHAR)DDEM;	/* Restore replaced DDEM character */
2524:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == 9) fno->fname[j++] = '.';	/* Insert a . if extension is exist */
 1234              		.loc 1 2524 3 is_stmt 1 view .LVU355
 1235              		.loc 1 2524 6 is_stmt 0 view .LVU356
 1236 0014 092C     		cmp	r4, #9
 1237 0016 0ED0     		beq	.L109
 1238              	.L105:
2525:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fname[j++] = c;
 1239              		.loc 1 2525 3 is_stmt 1 view .LVU357
 1240              	.LVL123:
 1241              		.loc 1 2525 19 is_stmt 0 view .LVU358
 1242 0018 B118     		adds	r1, r6, r2
 1243 001a 4B72     		strb	r3, [r1, #9]
 1244              		.loc 1 2525 15 view .LVU359
ARM GAS  /tmp/ccWTW02a.s 			page 68


 1245 001c 0132     		adds	r2, r2, #1
 1246              	.LVL124:
 1247              	.L103:
 1248              		.loc 1 2525 15 view .LVU360
 1249 001e 2346     		mov	r3, r4
 1250              	.LVL125:
 1251              	.L102:
2520:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (i < 11) {		/* Copy name body and extension */
 1252              		.loc 1 2520 8 is_stmt 1 view .LVU361
 1253 0020 0A2B     		cmp	r3, #10
 1254 0022 0DD8     		bhi	.L110
2521:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == ' ') continue;				/* Skip padding spaces */
 1255              		.loc 1 2521 3 view .LVU362
2521:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == ' ') continue;				/* Skip padding spaces */
 1256              		.loc 1 2521 16 is_stmt 0 view .LVU363
 1257 0024 3D6A     		ldr	r5, [r7, #32]
2521:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == ' ') continue;				/* Skip padding spaces */
 1258              		.loc 1 2521 23 view .LVU364
 1259 0026 5C1C     		adds	r4, r3, #1
 1260              	.LVL126:
2521:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == ' ') continue;				/* Skip padding spaces */
 1261              		.loc 1 2521 5 view .LVU365
 1262 0028 EB5C     		ldrb	r3, [r5, r3]	@ zero_extendqisi2
 1263              	.LVL127:
2522:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == RDDEM) c = (TCHAR)DDEM;	/* Restore replaced DDEM character */
 1264              		.loc 1 2522 3 is_stmt 1 view .LVU366
2522:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == RDDEM) c = (TCHAR)DDEM;	/* Restore replaced DDEM character */
 1265              		.loc 1 2522 6 is_stmt 0 view .LVU367
 1266 002a 202B     		cmp	r3, #32
 1267 002c F7D0     		beq	.L103
2523:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == 9) fno->fname[j++] = '.';	/* Insert a . if extension is exist */
 1268              		.loc 1 2523 3 is_stmt 1 view .LVU368
2523:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == 9) fno->fname[j++] = '.';	/* Insert a . if extension is exist */
 1269              		.loc 1 2523 6 is_stmt 0 view .LVU369
 1270 002e 052B     		cmp	r3, #5
 1271 0030 F0D1     		bne	.L104
2523:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == 9) fno->fname[j++] = '.';	/* Insert a . if extension is exist */
 1272              		.loc 1 2523 21 view .LVU370
 1273 0032 E523     		movs	r3, #229
 1274              	.LVL128:
2523:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == 9) fno->fname[j++] = '.';	/* Insert a . if extension is exist */
 1275              		.loc 1 2523 21 view .LVU371
 1276 0034 EEE7     		b	.L104
 1277              	.LVL129:
 1278              	.L109:
2524:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fname[j++] = c;
 1279              		.loc 1 2524 15 is_stmt 1 discriminator 1 view .LVU372
2524:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fname[j++] = c;
 1280              		.loc 1 2524 31 is_stmt 0 discriminator 1 view .LVU373
 1281 0036 B118     		adds	r1, r6, r2
 1282 0038 2E20     		movs	r0, #46
 1283 003a 4872     		strb	r0, [r1, #9]
2524:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fname[j++] = c;
 1284              		.loc 1 2524 27 discriminator 1 view .LVU374
 1285 003c 0132     		adds	r2, r2, #1
 1286              	.LVL130:
2524:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fname[j++] = c;
ARM GAS  /tmp/ccWTW02a.s 			page 69


 1287              		.loc 1 2524 27 discriminator 1 view .LVU375
 1288 003e EBE7     		b	.L105
 1289              	.LVL131:
 1290              	.L110:
2526:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2527:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fname[j] = 0;
 1291              		.loc 1 2527 2 is_stmt 1 view .LVU376
 1292              		.loc 1 2527 16 is_stmt 0 view .LVU377
 1293 0040 3244     		add	r2, r2, r6
 1294              	.LVL132:
 1295              		.loc 1 2527 16 view .LVU378
 1296 0042 0023     		movs	r3, #0
 1297              	.LVL133:
 1298              		.loc 1 2527 16 view .LVU379
 1299 0044 5372     		strb	r3, [r2, #9]
2528:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2529:Middlewares/Third_Party/FatFs/src/ff.c **** 
2530:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fattrib = dp->dir[DIR_Attr];				/* Attribute */
 1300              		.loc 1 2530 2 is_stmt 1 view .LVU380
 1301              		.loc 1 2530 19 is_stmt 0 view .LVU381
 1302 0046 3B6A     		ldr	r3, [r7, #32]
 1303              		.loc 1 2530 15 view .LVU382
 1304 0048 DB7A     		ldrb	r3, [r3, #11]	@ zero_extendqisi2
 1305 004a 3372     		strb	r3, [r6, #8]
2531:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fsize = ld_dword(dp->dir + DIR_FileSize);	/* Size */
 1306              		.loc 1 2531 2 is_stmt 1 view .LVU383
 1307              		.loc 1 2531 26 is_stmt 0 view .LVU384
 1308 004c 386A     		ldr	r0, [r7, #32]
 1309              		.loc 1 2531 15 view .LVU385
 1310 004e 1C30     		adds	r0, r0, #28
 1311 0050 FFF7FEFF 		bl	ld_dword
 1312              	.LVL134:
 1313              		.loc 1 2531 13 view .LVU386
 1314 0054 3060     		str	r0, [r6]
2532:Middlewares/Third_Party/FatFs/src/ff.c **** 	tm = ld_dword(dp->dir + DIR_ModTime);			/* Timestamp */
 1315              		.loc 1 2532 2 is_stmt 1 view .LVU387
 1316              		.loc 1 2532 18 is_stmt 0 view .LVU388
 1317 0056 386A     		ldr	r0, [r7, #32]
 1318              		.loc 1 2532 7 view .LVU389
 1319 0058 1630     		adds	r0, r0, #22
 1320 005a FFF7FEFF 		bl	ld_dword
 1321              	.LVL135:
2533:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->ftime = (WORD)tm; fno->fdate = (WORD)(tm >> 16);
 1322              		.loc 1 2533 2 is_stmt 1 view .LVU390
 1323              		.loc 1 2533 13 is_stmt 0 view .LVU391
 1324 005e F080     		strh	r0, [r6, #6]	@ movhi
 1325              		.loc 1 2533 25 is_stmt 1 view .LVU392
 1326              		.loc 1 2533 38 is_stmt 0 view .LVU393
 1327 0060 000C     		lsrs	r0, r0, #16
 1328              	.LVL136:
 1329              		.loc 1 2533 36 view .LVU394
 1330 0062 B080     		strh	r0, [r6, #4]	@ movhi
 1331              	.LVL137:
 1332              	.L100:
2534:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1333              		.loc 1 2534 1 view .LVU395
 1334 0064 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
ARM GAS  /tmp/ccWTW02a.s 			page 70


 1335              		.cfi_endproc
 1336              	.LFE172:
 1338              		.section	.rodata.create_name.str1.4,"aMS",%progbits,1
 1339              		.align	2
 1340              	.LC0:
 1341 0000 222A2B2C 		.ascii	"\"*+,:;<=>?[]|\177\000"
 1341      3A3B3C3D 
 1341      3E3F5B5D 
 1341      7C7F00
 1342              		.section	.text.create_name,"ax",%progbits
 1343              		.align	1
 1344              		.syntax unified
 1345              		.thumb
 1346              		.thumb_func
 1347              		.fpu fpv5-d16
 1349              	create_name:
 1350              	.LVL138:
 1351              	.LFB173:
2535:Middlewares/Third_Party/FatFs/src/ff.c **** 
2536:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_MINIMIZE <= 1 || _FS_RPATH >= 2 */
2537:Middlewares/Third_Party/FatFs/src/ff.c **** 
2538:Middlewares/Third_Party/FatFs/src/ff.c **** 
2539:Middlewares/Third_Party/FatFs/src/ff.c **** 
2540:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FIND && _FS_MINIMIZE <= 1
2541:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2542:Middlewares/Third_Party/FatFs/src/ff.c **** /* Pattern matching                                                      */
2543:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2544:Middlewares/Third_Party/FatFs/src/ff.c **** 
2545:Middlewares/Third_Party/FatFs/src/ff.c **** static
2546:Middlewares/Third_Party/FatFs/src/ff.c **** WCHAR get_achar (		/* Get a character and advances ptr 1 or 2 */
2547:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR** ptr	/* Pointer to pointer to the SBCS/DBCS/Unicode string */
2548:Middlewares/Third_Party/FatFs/src/ff.c **** )
2549:Middlewares/Third_Party/FatFs/src/ff.c **** {
2550:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
2551:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR chr;
2552:Middlewares/Third_Party/FatFs/src/ff.c **** 
2553:Middlewares/Third_Party/FatFs/src/ff.c **** 	chr = (BYTE)*(*ptr)++;					/* Get a byte */
2554:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (IsLower(chr)) chr -= 0x20;			/* To upper ASCII char */
2555:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
2556:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (chr >= 0x80) chr = ExCvt[chr - 0x80];	/* To upper SBCS extended char */
2557:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2558:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (IsDBCS1(chr) && IsDBCS2(**ptr)) {		/* Get DBC 2nd byte if needed */
2559:Middlewares/Third_Party/FatFs/src/ff.c **** 		chr = chr << 8 | (BYTE)*(*ptr)++;
2560:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2561:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2562:Middlewares/Third_Party/FatFs/src/ff.c **** 	return chr;
2563:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2564:Middlewares/Third_Party/FatFs/src/ff.c **** 	return ff_wtoupper(*(*ptr)++);			/* Get a word and to upper */
2565:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2566:Middlewares/Third_Party/FatFs/src/ff.c **** }
2567:Middlewares/Third_Party/FatFs/src/ff.c **** 
2568:Middlewares/Third_Party/FatFs/src/ff.c **** 
2569:Middlewares/Third_Party/FatFs/src/ff.c **** static
2570:Middlewares/Third_Party/FatFs/src/ff.c **** int pattern_matching (	/* 0:not matched, 1:matched */
2571:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* pat,	/* Matching pattern */
2572:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* nam,	/* String to be tested */
2573:Middlewares/Third_Party/FatFs/src/ff.c **** 	int skip,			/* Number of pre-skip chars (number of ?s) */
ARM GAS  /tmp/ccWTW02a.s 			page 71


2574:Middlewares/Third_Party/FatFs/src/ff.c **** 	int inf				/* Infinite search (* specified) */
2575:Middlewares/Third_Party/FatFs/src/ff.c **** )
2576:Middlewares/Third_Party/FatFs/src/ff.c **** {
2577:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *pp, *np;
2578:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR pc, nc;
2579:Middlewares/Third_Party/FatFs/src/ff.c **** 	int nm, nx;
2580:Middlewares/Third_Party/FatFs/src/ff.c **** 
2581:Middlewares/Third_Party/FatFs/src/ff.c **** 
2582:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (skip--) {				/* Pre-skip name chars */
2583:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!get_achar(&nam)) return 0;	/* Branch mismatched if less name chars */
2584:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2585:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!*pat && inf) return 1;		/* (short circuit) */
2586:Middlewares/Third_Party/FatFs/src/ff.c **** 
2587:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
2588:Middlewares/Third_Party/FatFs/src/ff.c **** 		pp = pat; np = nam;			/* Top of pattern and name to match */
2589:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {
2590:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (*pp == '?' || *pp == '*') {	/* Wildcard? */
2591:Middlewares/Third_Party/FatFs/src/ff.c **** 				nm = nx = 0;
2592:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {				/* Analyze the wildcard chars */
2593:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (*pp++ == '?') nm++; else nx = 1;
2594:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (*pp == '?' || *pp == '*');
2595:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (pattern_matching(pp, np, nm, nx)) return 1;	/* Test new branch (recurs upto number of wildc
2596:Middlewares/Third_Party/FatFs/src/ff.c **** 				nc = *np; break;	/* Branch mismatched */
2597:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2598:Middlewares/Third_Party/FatFs/src/ff.c **** 			pc = get_achar(&pp);	/* Get a pattern char */
2599:Middlewares/Third_Party/FatFs/src/ff.c **** 			nc = get_achar(&np);	/* Get a name char */
2600:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (pc != nc) break;	/* Branch mismatched? */
2601:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (pc == 0) return 1;	/* Branch matched? (matched at end of both strings) */
2602:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2603:Middlewares/Third_Party/FatFs/src/ff.c **** 		get_achar(&nam);			/* nam++ */
2604:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (inf && nc);			/* Retry until end of name if infinite search is specified */
2605:Middlewares/Third_Party/FatFs/src/ff.c **** 
2606:Middlewares/Third_Party/FatFs/src/ff.c **** 	return 0;
2607:Middlewares/Third_Party/FatFs/src/ff.c **** }
2608:Middlewares/Third_Party/FatFs/src/ff.c **** 
2609:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_FIND && _FS_MINIMIZE <= 1 */
2610:Middlewares/Third_Party/FatFs/src/ff.c **** 
2611:Middlewares/Third_Party/FatFs/src/ff.c **** 
2612:Middlewares/Third_Party/FatFs/src/ff.c **** 
2613:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2614:Middlewares/Third_Party/FatFs/src/ff.c **** /* Pick a top segment and create the object name in directory form       */
2615:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2616:Middlewares/Third_Party/FatFs/src/ff.c **** 
2617:Middlewares/Third_Party/FatFs/src/ff.c **** static
2618:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT create_name (	/* FR_OK: successful, FR_INVALID_NAME: could not create */
2619:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Pointer to the directory object */
2620:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR** path	/* Pointer to pointer to the segment in the path string */
2621:Middlewares/Third_Party/FatFs/src/ff.c **** )
2622:Middlewares/Third_Party/FatFs/src/ff.c **** {
 1352              		.loc 1 2622 1 is_stmt 1 view -0
 1353              		.cfi_startproc
 1354              		@ args = 0, pretend = 0, frame = 0
 1355              		@ frame_needed = 0, uses_anonymous_args = 0
 1356              		.loc 1 2622 1 is_stmt 0 view .LVU397
 1357 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1358              	.LCFI17:
 1359              		.cfi_def_cfa_offset 40
ARM GAS  /tmp/ccWTW02a.s 			page 72


 1360              		.cfi_offset 3, -40
 1361              		.cfi_offset 4, -36
 1362              		.cfi_offset 5, -32
 1363              		.cfi_offset 6, -28
 1364              		.cfi_offset 7, -24
 1365              		.cfi_offset 8, -20
 1366              		.cfi_offset 9, -16
 1367              		.cfi_offset 10, -12
 1368              		.cfi_offset 11, -8
 1369              		.cfi_offset 14, -4
 1370 0004 8146     		mov	r9, r0
 1371 0006 8A46     		mov	r10, r1
2623:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
2624:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE b, cf;
2625:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR w, *lfn;
2626:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, ni, si, di;
2627:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *p;
2628:Middlewares/Third_Party/FatFs/src/ff.c **** 
2629:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create LFN in Unicode */
2630:Middlewares/Third_Party/FatFs/src/ff.c **** 	p = *path; lfn = dp->obj.fs->lfnbuf; si = di = 0;
2631:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
2632:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = p[si++];					/* Get a character */
2633:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w < ' ') break;				/* Break if end of the path name */
2634:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w == '/' || w == '\\') {	/* Break if a separator is found */
2635:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (p[si] == '/' || p[si] == '\\') si++;	/* Skip duplicated separator if exist */
2636:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
2637:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2638:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (di >= _MAX_LFN) return FR_INVALID_NAME;	/* Reject too long name */
2639:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
2640:Middlewares/Third_Party/FatFs/src/ff.c **** 		w &= 0xFF;
2641:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsDBCS1(w)) {				/* Check if it is a DBC 1st byte (always false on SBCS cfg) */
2642:Middlewares/Third_Party/FatFs/src/ff.c **** 			b = (BYTE)p[si++];			/* Get 2nd byte */
2643:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = (w << 8) + b;			/* Create a DBC */
2644:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!IsDBCS2(b)) return FR_INVALID_NAME;	/* Reject invalid sequence */
2645:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2646:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = ff_convert(w, 1);			/* Convert ANSI/OEM to Unicode */
2647:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!w) return FR_INVALID_NAME;	/* Reject invalid code */
2648:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2649:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w < 0x80 && chk_chr("\"*:<>\?|\x7F", w)) return FR_INVALID_NAME;	/* Reject illegal characters
2650:Middlewares/Third_Party/FatFs/src/ff.c **** 		lfn[di++] = w;					/* Store the Unicode character */
2651:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2652:Middlewares/Third_Party/FatFs/src/ff.c **** 	*path = &p[si];						/* Return pointer to the next segment */
2653:Middlewares/Third_Party/FatFs/src/ff.c **** 	cf = (w < ' ') ? NS_LAST : 0;		/* Set last segment flag if end of the path */
2654:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
2655:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((di == 1 && lfn[di - 1] == '.') ||
2656:Middlewares/Third_Party/FatFs/src/ff.c **** 		(di == 2 && lfn[di - 1] == '.' && lfn[di - 2] == '.')) {	/* Is this segment a dot name? */
2657:Middlewares/Third_Party/FatFs/src/ff.c **** 		lfn[di] = 0;
2658:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < 11; i++)		/* Create dot name for SFN entry */
2659:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->fn[i] = (i < di) ? '.' : ' ';
2660:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[i] = cf | NS_DOT;		/* This is a dot entry */
2661:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_OK;
2662:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2663:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2664:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (di) {						/* Snip off trailing spaces and dots if exist */
2665:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = lfn[di - 1];
2666:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w != ' ' && w != '.') break;
2667:Middlewares/Third_Party/FatFs/src/ff.c **** 		di--;
ARM GAS  /tmp/ccWTW02a.s 			page 73


2668:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2669:Middlewares/Third_Party/FatFs/src/ff.c **** 	lfn[di] = 0;						/* LFN is created */
2670:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (di == 0) return FR_INVALID_NAME;	/* Reject nul name */
2671:Middlewares/Third_Party/FatFs/src/ff.c **** 
2672:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create SFN in directory form */
2673:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_set(dp->fn, ' ', 11);
2674:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (si = 0; lfn[si] == ' ' || lfn[si] == '.'; si++) ;	/* Strip leading spaces and dots */
2675:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (si) cf |= NS_LOSS | NS_LFN;
2676:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (di && lfn[di - 1] != '.') di--;	/* Find extension (di<=si: no extension) */
2677:Middlewares/Third_Party/FatFs/src/ff.c **** 
2678:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = b = 0; ni = 8;
2679:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
2680:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = lfn[si++];					/* Get an LFN character */
2681:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!w) break;					/* Break on end of the LFN */
2682:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w == ' ' || (w == '.' && si != di)) {	/* Remove spaces and dots */
2683:Middlewares/Third_Party/FatFs/src/ff.c **** 			cf |= NS_LOSS | NS_LFN; continue;
2684:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2685:Middlewares/Third_Party/FatFs/src/ff.c **** 
2686:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i >= ni || si == di) {		/* Extension or end of SFN */
2687:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ni == 11) {				/* Long extension */
2688:Middlewares/Third_Party/FatFs/src/ff.c **** 				cf |= NS_LOSS | NS_LFN; break;
2689:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2690:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (si != di) cf |= NS_LOSS | NS_LFN;	/* Out of 8.3 format */
2691:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (si > di) break;			/* No extension */
2692:Middlewares/Third_Party/FatFs/src/ff.c **** 			si = di; i = 8; ni = 11;	/* Enter extension section */
2693:Middlewares/Third_Party/FatFs/src/ff.c **** 			b <<= 2; continue;
2694:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2695:Middlewares/Third_Party/FatFs/src/ff.c **** 
2696:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w >= 0x80) {				/* Non ASCII character */
2697:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
2698:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = ff_convert(w, 0);		/* Unicode -> OEM code */
2699:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (w) w = ExCvt[w - 0x80];	/* Convert extended character to upper (SBCS) */
2700:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2701:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = ff_convert(ff_wtoupper(w), 0);	/* Upper converted Unicode -> OEM code */
2702:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2703:Middlewares/Third_Party/FatFs/src/ff.c **** 			cf |= NS_LFN;				/* Force create LFN entry */
2704:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2705:Middlewares/Third_Party/FatFs/src/ff.c **** 
2706:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_DF1S && w >= 0x100) {		/* Is this DBC? (always false at SBCS cfg) */
2707:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i >= ni - 1) {
2708:Middlewares/Third_Party/FatFs/src/ff.c **** 				cf |= NS_LOSS | NS_LFN; i = ni; continue;
2709:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2710:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->fn[i++] = (BYTE)(w >> 8);
2711:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {						/* SBC */
2712:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!w || chk_chr("+,;=[]", w)) {	/* Replace illegal characters for SFN */
2713:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
2714:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
2715:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (IsUpper(w)) {		/* ASCII large capital */
2716:Middlewares/Third_Party/FatFs/src/ff.c **** 					b |= 2;
2717:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
2718:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (IsLower(w)) {	/* ASCII small capital */
2719:Middlewares/Third_Party/FatFs/src/ff.c **** 						b |= 1; w -= 0x20;
2720:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2721:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2722:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2723:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2724:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[i++] = (BYTE)w;
ARM GAS  /tmp/ccWTW02a.s 			page 74


2725:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2726:Middlewares/Third_Party/FatFs/src/ff.c **** 
2727:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (dp->fn[0] == DDEM) dp->fn[0] = RDDEM;	/* If the first character collides with DDEM, replace it
2728:Middlewares/Third_Party/FatFs/src/ff.c **** 
2729:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ni == 8) b <<= 2;
2730:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03) cf |= NS_LFN;	/* Create LFN entry when there are com
2731:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(cf & NS_LFN)) {						/* When LFN is in 8.3 format without extended character, NT flags are c
2732:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((b & 0x03) == 0x01) cf |= NS_EXT;	/* NT flag (Extension has only small capital) */
2733:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((b & 0x0C) == 0x04) cf |= NS_BODY;	/* NT flag (Filename has only small capital) */
2734:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2735:Middlewares/Third_Party/FatFs/src/ff.c **** 
2736:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->fn[NSFLAG] = cf;	/* SFN is created */
2737:Middlewares/Third_Party/FatFs/src/ff.c **** 
2738:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
2739:Middlewares/Third_Party/FatFs/src/ff.c **** 
2740:Middlewares/Third_Party/FatFs/src/ff.c **** 
2741:Middlewares/Third_Party/FatFs/src/ff.c **** #else	/* _USE_LFN != 0 : Non-LFN configuration */
2742:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE c, d, *sfn;
 1372              		.loc 1 2742 2 is_stmt 1 view .LVU398
2743:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT ni, si, i;
 1373              		.loc 1 2743 2 view .LVU399
2744:Middlewares/Third_Party/FatFs/src/ff.c **** 	const char *p;
 1374              		.loc 1 2744 2 view .LVU400
2745:Middlewares/Third_Party/FatFs/src/ff.c **** 
2746:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create file name in directory form */
2747:Middlewares/Third_Party/FatFs/src/ff.c **** 	p = *path; sfn = dp->fn;
 1375              		.loc 1 2747 2 view .LVU401
 1376              		.loc 1 2747 4 is_stmt 0 view .LVU402
 1377 0008 D1F80080 		ldr	r8, [r1]
 1378              	.LVL139:
 1379              		.loc 1 2747 13 is_stmt 1 view .LVU403
 1380              		.loc 1 2747 17 is_stmt 0 view .LVU404
 1381 000c 00F1240B 		add	fp, r0, #36
 1382              	.LVL140:
2748:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_set(sfn, ' ', 11);
 1383              		.loc 1 2748 2 is_stmt 1 view .LVU405
 1384 0010 0B22     		movs	r2, #11
 1385 0012 2021     		movs	r1, #32
 1386              	.LVL141:
 1387              		.loc 1 2748 2 is_stmt 0 view .LVU406
 1388 0014 5846     		mov	r0, fp
 1389              	.LVL142:
 1390              		.loc 1 2748 2 view .LVU407
 1391 0016 FFF7FEFF 		bl	mem_set
 1392              	.LVL143:
2749:Middlewares/Third_Party/FatFs/src/ff.c **** 	si = i = 0; ni = 8;
 1393              		.loc 1 2749 2 is_stmt 1 view .LVU408
 1394              		.loc 1 2749 14 view .LVU409
 1395              		.loc 1 2749 9 is_stmt 0 view .LVU410
 1396 001a 0025     		movs	r5, #0
 1397              		.loc 1 2749 5 view .LVU411
 1398 001c 2B46     		mov	r3, r5
 1399              		.loc 1 2749 17 view .LVU412
 1400 001e 0827     		movs	r7, #8
 1401 0020 29E0     		b	.L112
 1402              	.LVL144:
 1403              	.L116:
ARM GAS  /tmp/ccWTW02a.s 			page 75


2750:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
2751:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (p[si] == '.') { /* Is this a dot entry? */
2752:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {
2753:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = (BYTE)p[si++];
2754:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c != '.' || si >= 3) break;
2755:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
2756:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2757:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c != '/' && c != '\\' && c > ' ') return FR_INVALID_NAME;
2758:Middlewares/Third_Party/FatFs/src/ff.c **** 		*path = p + si;								/* Return pointer to the next segment */
2759:Middlewares/Third_Party/FatFs/src/ff.c **** 		sfn[NSFLAG] = (c <= ' ') ? NS_LAST | NS_DOT : NS_DOT;	/* Set last segment flag if end of the path
2760:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_OK;
2761:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2762:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2763:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
2764:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = (BYTE)p[si++];
2765:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c <= ' ') break; 			/* Break if end of the path name */
2766:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '/' || c == '\\') {	/* Break if a separator is found */
2767:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (p[si] == '/' || p[si] == '\\') si++;	/* Skip duplicated separator if exist */
 1404              		.loc 1 2767 42 is_stmt 1 discriminator 2 view .LVU413
 1405              		.loc 1 2767 44 is_stmt 0 discriminator 2 view .LVU414
 1406 0022 0136     		adds	r6, r6, #1
 1407              	.LVL145:
 1408              	.L114:
 1409              		.loc 1 2767 10 is_stmt 1 discriminator 1 view .LVU415
 1410              		.loc 1 2767 12 is_stmt 0 discriminator 1 view .LVU416
 1411 0024 18F80630 		ldrb	r3, [r8, r6]	@ zero_extendqisi2
 1412              		.loc 1 2767 10 discriminator 1 view .LVU417
 1413 0028 5C2B     		cmp	r3, #92
 1414 002a 18BF     		it	ne
 1415 002c 2F2B     		cmpne	r3, #47
 1416 002e F8D0     		beq	.L116
 1417              	.L113:
2768:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
2769:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2770:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '.' || i >= ni) {		/* End of body or over size? */
2771:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ni == 11 || c != '.') return FR_INVALID_NAME;	/* Over size or invalid dot */
2772:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = 8; ni = 11;				/* Goto extension */
2773:Middlewares/Third_Party/FatFs/src/ff.c **** 			continue;
2774:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2775:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c >= 0x80) {				/* Extended character? */
2776:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
2777:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = ExCvt[c - 0x80];		/* To upper extended characters (SBCS cfg) */
2778:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2779:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_DF1S
2780:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_INVALID_NAME;		/* Reject extended characters (ASCII only cfg) */
2781:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2782:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2783:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2784:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsDBCS1(c)) {				/* Check if it is a DBC 1st byte (always false at SBCS cfg.) */
2785:Middlewares/Third_Party/FatFs/src/ff.c **** 			d = (BYTE)p[si++];			/* Get 2nd byte */
2786:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!IsDBCS2(d) || i >= ni - 1) return FR_INVALID_NAME;	/* Reject invalid DBC */
2787:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
2788:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = d;
2789:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {						/* SBC */
2790:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (chk_chr("\"*+,:;<=>\?[]|\x7F", c)) return FR_INVALID_NAME;	/* Reject illegal chrs for SFN */
2791:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsLower(c)) c -= 0x20;	/* To upper */
2792:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
ARM GAS  /tmp/ccWTW02a.s 			page 76


2793:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2794:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2795:Middlewares/Third_Party/FatFs/src/ff.c **** 	*path = p + si;						/* Return pointer to the next segment */
 1418              		.loc 1 2795 2 is_stmt 1 view .LVU418
 1419              		.loc 1 2795 12 is_stmt 0 view .LVU419
 1420 0030 4644     		add	r6, r6, r8
 1421              	.LVL146:
 1422              		.loc 1 2795 8 view .LVU420
 1423 0032 CAF80060 		str	r6, [r10]
2796:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i == 0) return FR_INVALID_NAME;	/* Reject nul string */
 1424              		.loc 1 2796 2 is_stmt 1 view .LVU421
 1425              		.loc 1 2796 5 is_stmt 0 view .LVU422
 1426 0036 002D     		cmp	r5, #0
 1427 0038 45D0     		beq	.L126
2797:Middlewares/Third_Party/FatFs/src/ff.c **** 
2798:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sfn[0] == DDEM) sfn[0] = RDDEM;	/* If the first character collides with DDEM, replace it with 
 1428              		.loc 1 2798 2 is_stmt 1 view .LVU423
 1429              		.loc 1 2798 9 is_stmt 0 view .LVU424
 1430 003a 99F82430 		ldrb	r3, [r9, #36]	@ zero_extendqisi2
 1431              		.loc 1 2798 5 view .LVU425
 1432 003e E52B     		cmp	r3, #229
 1433 0040 36D0     		beq	.L130
 1434              	.L122:
2799:Middlewares/Third_Party/FatFs/src/ff.c **** 	sfn[NSFLAG] = (c <= ' ') ? NS_LAST : 0;		/* Set last segment flag if end of the path */
 1435              		.loc 1 2799 2 is_stmt 1 view .LVU426
 1436              		.loc 1 2799 14 is_stmt 0 view .LVU427
 1437 0042 202C     		cmp	r4, #32
 1438 0044 38D8     		bhi	.L127
 1439 0046 0423     		movs	r3, #4
 1440              	.L123:
 1441              		.loc 1 2799 14 discriminator 4 view .LVU428
 1442 0048 89F82F30 		strb	r3, [r9, #47]
2800:Middlewares/Third_Party/FatFs/src/ff.c **** 
2801:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
 1443              		.loc 1 2801 2 is_stmt 1 discriminator 4 view .LVU429
 1444              		.loc 1 2801 9 is_stmt 0 discriminator 4 view .LVU430
 1445 004c 0020     		movs	r0, #0
 1446 004e 36E0     		b	.L118
 1447              	.LVL147:
 1448              	.L117:
2775:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
 1449              		.loc 1 2775 3 is_stmt 1 view .LVU431
2775:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
 1450              		.loc 1 2775 6 is_stmt 0 view .LVU432
 1451 0050 14F0800F 		tst	r4, #128
 1452 0054 28D1     		bne	.L131
 1453              	.L120:
2784:Middlewares/Third_Party/FatFs/src/ff.c **** 			d = (BYTE)p[si++];			/* Get 2nd byte */
 1454              		.loc 1 2784 3 is_stmt 1 view .LVU433
2790:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsLower(c)) c -= 0x20;	/* To upper */
 1455              		.loc 1 2790 4 view .LVU434
2790:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsLower(c)) c -= 0x20;	/* To upper */
 1456              		.loc 1 2790 8 is_stmt 0 view .LVU435
 1457 0056 2146     		mov	r1, r4
 1458 0058 1C48     		ldr	r0, .L132
 1459 005a FFF7FEFF 		bl	chk_chr
 1460              	.LVL148:
ARM GAS  /tmp/ccWTW02a.s 			page 77


2790:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsLower(c)) c -= 0x20;	/* To upper */
 1461              		.loc 1 2790 7 view .LVU436
 1462 005e 80BB     		cbnz	r0, .L125
2791:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
 1463              		.loc 1 2791 4 is_stmt 1 view .LVU437
2791:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
 1464              		.loc 1 2791 8 is_stmt 0 view .LVU438
 1465 0060 A4F16103 		sub	r3, r4, #97
 1466 0064 DBB2     		uxtb	r3, r3
2791:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
 1467              		.loc 1 2791 7 view .LVU439
 1468 0066 192B     		cmp	r3, #25
 1469 0068 01D8     		bhi	.L121
2791:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
 1470              		.loc 1 2791 20 is_stmt 1 discriminator 1 view .LVU440
2791:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
 1471              		.loc 1 2791 22 is_stmt 0 discriminator 1 view .LVU441
 1472 006a 203C     		subs	r4, r4, #32
 1473              	.LVL149:
2791:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
 1474              		.loc 1 2791 22 discriminator 1 view .LVU442
 1475 006c E4B2     		uxtb	r4, r4
 1476              	.LVL150:
 1477              	.L121:
2792:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1478              		.loc 1 2792 4 is_stmt 1 view .LVU443
2792:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1479              		.loc 1 2792 13 is_stmt 0 view .LVU444
 1480 006e 0BF80540 		strb	r4, [fp, r5]
2792:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1481              		.loc 1 2792 9 view .LVU445
 1482 0072 0135     		adds	r5, r5, #1
 1483              	.LVL151:
 1484              	.L119:
2772:Middlewares/Third_Party/FatFs/src/ff.c **** 			continue;
 1485              		.loc 1 2772 14 view .LVU446
 1486 0074 3346     		mov	r3, r6
 1487              	.LVL152:
 1488              	.L112:
2763:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = (BYTE)p[si++];
 1489              		.loc 1 2763 2 is_stmt 1 view .LVU447
2764:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c <= ' ') break; 			/* Break if end of the path name */
 1490              		.loc 1 2764 3 view .LVU448
2764:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c <= ' ') break; 			/* Break if end of the path name */
 1491              		.loc 1 2764 17 is_stmt 0 view .LVU449
 1492 0076 5E1C     		adds	r6, r3, #1
 1493              	.LVL153:
2764:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c <= ' ') break; 			/* Break if end of the path name */
 1494              		.loc 1 2764 5 view .LVU450
 1495 0078 18F80340 		ldrb	r4, [r8, r3]	@ zero_extendqisi2
 1496              	.LVL154:
2765:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '/' || c == '\\') {	/* Break if a separator is found */
 1497              		.loc 1 2765 3 is_stmt 1 view .LVU451
2765:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '/' || c == '\\') {	/* Break if a separator is found */
 1498              		.loc 1 2765 6 is_stmt 0 view .LVU452
 1499 007c 202C     		cmp	r4, #32
 1500 007e D7D9     		bls	.L113
ARM GAS  /tmp/ccWTW02a.s 			page 78


2766:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (p[si] == '/' || p[si] == '\\') si++;	/* Skip duplicated separator if exist */
 1501              		.loc 1 2766 3 is_stmt 1 view .LVU453
2766:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (p[si] == '/' || p[si] == '\\') si++;	/* Skip duplicated separator if exist */
 1502              		.loc 1 2766 6 is_stmt 0 view .LVU454
 1503 0080 5C2C     		cmp	r4, #92
 1504 0082 18BF     		it	ne
 1505 0084 2F2C     		cmpne	r4, #47
 1506 0086 CDD0     		beq	.L114
2770:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ni == 11 || c != '.') return FR_INVALID_NAME;	/* Over size or invalid dot */
 1507              		.loc 1 2770 3 is_stmt 1 view .LVU455
2770:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ni == 11 || c != '.') return FR_INVALID_NAME;	/* Over size or invalid dot */
 1508              		.loc 1 2770 6 is_stmt 0 view .LVU456
 1509 0088 2E2C     		cmp	r4, #46
 1510 008a 18BF     		it	ne
 1511 008c AF42     		cmpne	r7, r5
 1512 008e DFD8     		bhi	.L117
2771:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = 8; ni = 11;				/* Goto extension */
 1513              		.loc 1 2771 4 is_stmt 1 view .LVU457
2771:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = 8; ni = 11;				/* Goto extension */
 1514              		.loc 1 2771 22 is_stmt 0 view .LVU458
 1515 0090 2E3C     		subs	r4, r4, #46
 1516              	.LVL155:
2771:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = 8; ni = 11;				/* Goto extension */
 1517              		.loc 1 2771 22 view .LVU459
 1518 0092 18BF     		it	ne
 1519 0094 0124     		movne	r4, #1
 1520              	.LVL156:
2771:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = 8; ni = 11;				/* Goto extension */
 1521              		.loc 1 2771 17 view .LVU460
 1522 0096 0B2F     		cmp	r7, #11
 1523 0098 14BF     		ite	ne
 1524 009a 2746     		movne	r7, r4
 1525 009c 44F00107 		orreq	r7, r4, #1
 1526              	.LVL157:
2771:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = 8; ni = 11;				/* Goto extension */
 1527              		.loc 1 2771 7 view .LVU461
 1528 00a0 67B9     		cbnz	r7, .L124
2772:Middlewares/Third_Party/FatFs/src/ff.c **** 			continue;
 1529              		.loc 1 2772 6 view .LVU462
 1530 00a2 0825     		movs	r5, #8
 1531              	.LVL158:
2772:Middlewares/Third_Party/FatFs/src/ff.c **** 			continue;
 1532              		.loc 1 2772 14 view .LVU463
 1533 00a4 0B27     		movs	r7, #11
 1534 00a6 E5E7     		b	.L119
 1535              	.LVL159:
 1536              	.L131:
2777:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 1537              		.loc 1 2777 4 is_stmt 1 view .LVU464
2777:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 1538              		.loc 1 2777 16 is_stmt 0 view .LVU465
 1539 00a8 803C     		subs	r4, r4, #128
 1540              	.LVL160:
2777:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 1541              		.loc 1 2777 6 view .LVU466
 1542 00aa 094B     		ldr	r3, .L132+4
 1543 00ac 1C5D     		ldrb	r4, [r3, r4]	@ zero_extendqisi2
ARM GAS  /tmp/ccWTW02a.s 			page 79


 1544              	.LVL161:
2777:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 1545              		.loc 1 2777 6 view .LVU467
 1546 00ae D2E7     		b	.L120
 1547              	.LVL162:
 1548              	.L130:
2798:Middlewares/Third_Party/FatFs/src/ff.c **** 	sfn[NSFLAG] = (c <= ' ') ? NS_LAST : 0;		/* Set last segment flag if end of the path */
 1549              		.loc 1 2798 22 is_stmt 1 discriminator 1 view .LVU468
2798:Middlewares/Third_Party/FatFs/src/ff.c **** 	sfn[NSFLAG] = (c <= ' ') ? NS_LAST : 0;		/* Set last segment flag if end of the path */
 1550              		.loc 1 2798 29 is_stmt 0 discriminator 1 view .LVU469
 1551 00b0 0523     		movs	r3, #5
 1552 00b2 89F82430 		strb	r3, [r9, #36]
 1553 00b6 C4E7     		b	.L122
 1554              	.L127:
2799:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1555              		.loc 1 2799 14 view .LVU470
 1556 00b8 0023     		movs	r3, #0
 1557 00ba C5E7     		b	.L123
 1558              	.LVL163:
 1559              	.L124:
2771:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = 8; ni = 11;				/* Goto extension */
 1560              		.loc 1 2771 37 view .LVU471
 1561 00bc 0620     		movs	r0, #6
 1562              	.LVL164:
 1563              	.L118:
2802:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_LFN != 0 */
2803:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1564              		.loc 1 2803 1 view .LVU472
 1565 00be BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1566              	.LVL165:
 1567              	.L125:
2790:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsLower(c)) c -= 0x20;	/* To upper */
 1568              		.loc 1 2790 50 view .LVU473
 1569 00c2 0620     		movs	r0, #6
 1570 00c4 FBE7     		b	.L118
 1571              	.LVL166:
 1572              	.L126:
2796:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1573              		.loc 1 2796 21 view .LVU474
 1574 00c6 0620     		movs	r0, #6
 1575 00c8 F9E7     		b	.L118
 1576              	.L133:
 1577 00ca 00BF     		.align	2
 1578              	.L132:
 1579 00cc 00000000 		.word	.LC0
 1580 00d0 00000000 		.word	.LANCHOR1
 1581              		.cfi_endproc
 1582              	.LFE173:
 1584              		.section	.text.get_ldnumber,"ax",%progbits
 1585              		.align	1
 1586              		.syntax unified
 1587              		.thumb
 1588              		.thumb_func
 1589              		.fpu fpv5-d16
 1591              	get_ldnumber:
 1592              	.LVL167:
 1593              	.LFB175:
ARM GAS  /tmp/ccWTW02a.s 			page 80


2804:Middlewares/Third_Party/FatFs/src/ff.c **** 
2805:Middlewares/Third_Party/FatFs/src/ff.c **** 
2806:Middlewares/Third_Party/FatFs/src/ff.c **** 
2807:Middlewares/Third_Party/FatFs/src/ff.c **** 
2808:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2809:Middlewares/Third_Party/FatFs/src/ff.c **** /* Follow a file path                                                    */
2810:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2811:Middlewares/Third_Party/FatFs/src/ff.c **** 
2812:Middlewares/Third_Party/FatFs/src/ff.c **** static
2813:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT follow_path (	/* FR_OK(0): successful, !=0: error code */
2814:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Directory object to return last directory and found object */
2815:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path	/* Full-path string to find a file or directory */
2816:Middlewares/Third_Party/FatFs/src/ff.c **** )
2817:Middlewares/Third_Party/FatFs/src/ff.c **** {
2818:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2819:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE ns;
2820:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID *obj = &dp->obj;
2821:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = obj->fs;
2822:Middlewares/Third_Party/FatFs/src/ff.c **** 
2823:Middlewares/Third_Party/FatFs/src/ff.c **** 
2824:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
2825:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (*path != '/' && *path != '\\') {	/* Without heading separator */
2826:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->sclust = fs->cdir;				/* Start from current directory */
2827:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
2828:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2829:Middlewares/Third_Party/FatFs/src/ff.c **** 	{										/* With heading separator */
2830:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (*path == '/' || *path == '\\') path++;	/* Strip heading separator */
2831:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->sclust = 0;					/* Start from root directory */
2832:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2833:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
2834:Middlewares/Third_Party/FatFs/src/ff.c **** 	obj->n_frag = 0;	/* Invalidate last fragment counter of the object */
2835:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
2836:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT && obj->sclust) {	/* Retrieve the sub-directory status if needed */
2837:Middlewares/Third_Party/FatFs/src/ff.c **** 		DIR dj;
2838:Middlewares/Third_Party/FatFs/src/ff.c **** 
2839:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->c_scl = fs->cdc_scl;
2840:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->c_size = fs->cdc_size;
2841:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->c_ofs = fs->cdc_ofs;
2842:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = load_obj_dir(&dj, obj);
2843:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
2844:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->objsize = ld_dword(fs->dirbuf + XDIR_FileSize);
2845:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->stat = fs->dirbuf[XDIR_GenFlags] & 2;
2846:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2847:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2848:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2849:Middlewares/Third_Party/FatFs/src/ff.c **** 
2850:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((UINT)*path < ' ') {				/* Null path name is the origin directory itself */
2851:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[NSFLAG] = NS_NONAME;
2852:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(dp, 0);
2853:Middlewares/Third_Party/FatFs/src/ff.c **** 
2854:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {								/* Follow path */
2855:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {
2856:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = create_name(dp, &path);	/* Get a segment name of the path */
2857:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
2858:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_find(dp);				/* Find an object with the segment name */
2859:Middlewares/Third_Party/FatFs/src/ff.c **** 			ns = dp->fn[NSFLAG];
2860:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
ARM GAS  /tmp/ccWTW02a.s 			page 81


2861:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) {	/* Object is not found */
2862:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, stay there */
2863:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!(ns & NS_LAST)) continue;	/* Continue to follow if not last segment */
2864:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->fn[NSFLAG] = NS_NONAME;
2865:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_OK;
2866:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {							/* Could not find the object */
2867:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!(ns & NS_LAST)) res = FR_NO_PATH;	/* Adjust error code if not last segment */
2868:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2869:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2870:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
2871:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2872:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ns & NS_LAST) break;			/* Last segment matched. Function completed. */
2873:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Get into the sub-directory */
2874:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(obj->attr & AM_DIR)) {		/* It is not a sub-directory and cannot follow */
2875:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NO_PATH; break;
2876:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2877:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
2878:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_EXFAT) {		/* Save containing directory information for next dir */
2879:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->c_scl = obj->sclust;
2880:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->c_size = ((DWORD)obj->objsize & 0xFFFFFF00) | obj->stat;
2881:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->c_ofs = dp->blk_ofs;
2882:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->sclust = ld_dword(fs->dirbuf + XDIR_FstClus);	/* Open next directory */
2883:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->stat = fs->dirbuf[XDIR_GenFlags] & 2;
2884:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->objsize = ld_qword(fs->dirbuf + XDIR_FileSize);
2885:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else
2886:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2887:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
2888:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->sclust = ld_clust(fs, fs->win + dp->dptr % SS(fs));	/* Open next directory */
2889:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2890:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2891:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2892:Middlewares/Third_Party/FatFs/src/ff.c **** 
2893:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
2894:Middlewares/Third_Party/FatFs/src/ff.c **** }
2895:Middlewares/Third_Party/FatFs/src/ff.c **** 
2896:Middlewares/Third_Party/FatFs/src/ff.c **** 
2897:Middlewares/Third_Party/FatFs/src/ff.c **** 
2898:Middlewares/Third_Party/FatFs/src/ff.c **** 
2899:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2900:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get logical drive number from path name                               */
2901:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2902:Middlewares/Third_Party/FatFs/src/ff.c **** 
2903:Middlewares/Third_Party/FatFs/src/ff.c **** static
2904:Middlewares/Third_Party/FatFs/src/ff.c **** int get_ldnumber (		/* Returns logical drive number (-1:invalid drive) */
2905:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR** path	/* Pointer to pointer to the path name */
2906:Middlewares/Third_Party/FatFs/src/ff.c **** )
2907:Middlewares/Third_Party/FatFs/src/ff.c **** {
 1594              		.loc 1 2907 1 is_stmt 1 view -0
 1595              		.cfi_startproc
 1596              		@ args = 0, pretend = 0, frame = 0
 1597              		@ frame_needed = 0, uses_anonymous_args = 0
 1598              		@ link register save eliminated.
 1599              		.loc 1 2907 1 is_stmt 0 view .LVU476
 1600 0000 0146     		mov	r1, r0
2908:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *tp, *tt;
 1601              		.loc 1 2908 2 is_stmt 1 view .LVU477
2909:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
ARM GAS  /tmp/ccWTW02a.s 			page 82


 1602              		.loc 1 2909 2 view .LVU478
2910:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol = -1;
 1603              		.loc 1 2910 2 view .LVU479
 1604              	.LVL168:
2911:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STR_VOLUME_ID		/* Find string drive id */
2912:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const char* const volid[] = {_VOLUME_STRS};
2913:Middlewares/Third_Party/FatFs/src/ff.c **** 	const char *sp;
2914:Middlewares/Third_Party/FatFs/src/ff.c **** 	char c;
2915:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR tc;
2916:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2917:Middlewares/Third_Party/FatFs/src/ff.c **** 
2918:Middlewares/Third_Party/FatFs/src/ff.c **** 
2919:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (*path) {	/* If the pointer is not a null */
 1605              		.loc 1 2919 2 view .LVU480
 1606              		.loc 1 2919 6 is_stmt 0 view .LVU481
 1607 0002 0068     		ldr	r0, [r0]
 1608              	.LVL169:
 1609              		.loc 1 2919 5 view .LVU482
 1610 0004 08B1     		cbz	r0, .L143
2920:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (tt = *path; (UINT)*tt >= (_USE_LFN ? ' ' : '!') && *tt != ':'; tt++) ;	/* Find ':' in the pa
 1611              		.loc 1 2920 11 view .LVU483
 1612 0006 0246     		mov	r2, r0
 1613 0008 03E0     		b	.L135
 1614              	.L143:
2910:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol = -1;
 1615              		.loc 1 2910 6 view .LVU484
 1616 000a 4FF0FF30 		mov	r0, #-1
 1617 000e 7047     		bx	lr
 1618              	.LVL170:
 1619              	.L137:
 1620              		.loc 1 2920 77 is_stmt 1 discriminator 3 view .LVU485
 1621              		.loc 1 2920 71 discriminator 3 view .LVU486
 1622              		.loc 1 2920 73 is_stmt 0 discriminator 3 view .LVU487
 1623 0010 0132     		adds	r2, r2, #1
 1624              	.LVL171:
 1625              	.L135:
 1626              		.loc 1 2920 20 is_stmt 1 discriminator 1 view .LVU488
 1627              		.loc 1 2920 26 is_stmt 0 discriminator 1 view .LVU489
 1628 0012 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1629              		.loc 1 2920 3 discriminator 1 view .LVU490
 1630 0014 3A2B     		cmp	r3, #58
 1631 0016 18BF     		it	ne
 1632 0018 202B     		cmpne	r3, #32
 1633 001a F9D8     		bhi	.L137
2921:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (*tt == ':') {	/* If a ':' is exist in the path name */
 1634              		.loc 1 2921 3 is_stmt 1 view .LVU491
 1635              		.loc 1 2921 6 is_stmt 0 view .LVU492
 1636 001c 3A2B     		cmp	r3, #58
 1637 001e 01D0     		beq	.L144
2922:Middlewares/Third_Party/FatFs/src/ff.c **** 			tp = *path;
2923:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = *tp++ - '0';
2924:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
2925:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
2926:Middlewares/Third_Party/FatFs/src/ff.c **** 					vol = (int)i;
2927:Middlewares/Third_Party/FatFs/src/ff.c **** 					*path = ++tt;
2928:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2929:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
ARM GAS  /tmp/ccWTW02a.s 			page 83


2930:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STR_VOLUME_ID
2931:Middlewares/Third_Party/FatFs/src/ff.c **** 			 else {	/* No numeric drive number, find string drive id */
2932:Middlewares/Third_Party/FatFs/src/ff.c **** 				i = 0; tt++;
2933:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
2934:Middlewares/Third_Party/FatFs/src/ff.c **** 					sp = volid[i]; tp = *path;
2935:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {	/* Compare a string drive id with path name */
2936:Middlewares/Third_Party/FatFs/src/ff.c **** 						c = *sp++; tc = *tp++;
2937:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (IsLower(tc)) tc -= 0x20;
2938:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (c && (TCHAR)c == tc);
2939:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while ((c || tp != tt) && ++i < _VOLUMES);	/* Repeat for each id until pattern match */
2940:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
2941:Middlewares/Third_Party/FatFs/src/ff.c **** 					vol = (int)i;
2942:Middlewares/Third_Party/FatFs/src/ff.c **** 					*path = tt;
2943:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2944:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2945:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2946:Middlewares/Third_Party/FatFs/src/ff.c **** 			return vol;
2947:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2948:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0 && _VOLUMES >= 2
2949:Middlewares/Third_Party/FatFs/src/ff.c **** 		vol = CurrVol;	/* Current drive */
2950:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2951:Middlewares/Third_Party/FatFs/src/ff.c **** 		vol = 0;		/* Drive 0 */
 1638              		.loc 1 2951 7 view .LVU493
 1639 0020 0020     		movs	r0, #0
 1640              	.LVL172:
2952:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2953:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2954:Middlewares/Third_Party/FatFs/src/ff.c **** 	return vol;
2955:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1641              		.loc 1 2955 1 view .LVU494
 1642 0022 7047     		bx	lr
 1643              	.LVL173:
 1644              	.L144:
2922:Middlewares/Third_Party/FatFs/src/ff.c **** 			tp = *path;
 1645              		.loc 1 2922 4 is_stmt 1 view .LVU495
2923:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
 1646              		.loc 1 2923 4 view .LVU496
2923:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
 1647              		.loc 1 2923 11 is_stmt 0 view .LVU497
 1648 0024 0346     		mov	r3, r0
 1649              	.LVL174:
2923:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
 1650              		.loc 1 2923 8 view .LVU498
 1651 0026 13F8010B 		ldrb	r0, [r3], #1	@ zero_extendqisi2
 1652              	.LVL175:
2923:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
 1653              		.loc 1 2923 14 view .LVU499
 1654 002a 3038     		subs	r0, r0, #48
 1655              	.LVL176:
2924:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
 1656              		.loc 1 2924 4 is_stmt 1 view .LVU500
2924:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
 1657              		.loc 1 2924 7 is_stmt 0 view .LVU501
 1658 002c 0928     		cmp	r0, #9
 1659 002e 98BF     		it	ls
 1660 0030 9A42     		cmpls	r2, r3
 1661 0032 03D1     		bne	.L141
ARM GAS  /tmp/ccWTW02a.s 			page 84


2925:Middlewares/Third_Party/FatFs/src/ff.c **** 					vol = (int)i;
 1662              		.loc 1 2925 5 is_stmt 1 view .LVU502
2925:Middlewares/Third_Party/FatFs/src/ff.c **** 					vol = (int)i;
 1663              		.loc 1 2925 8 is_stmt 0 view .LVU503
 1664 0034 28B9     		cbnz	r0, .L142
2926:Middlewares/Third_Party/FatFs/src/ff.c **** 					*path = ++tt;
 1665              		.loc 1 2926 6 is_stmt 1 view .LVU504
 1666              	.LVL177:
2927:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 1667              		.loc 1 2927 6 view .LVU505
2927:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 1668              		.loc 1 2927 12 is_stmt 0 view .LVU506
 1669 0036 0132     		adds	r2, r2, #1
 1670              	.LVL178:
2927:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 1671              		.loc 1 2927 12 view .LVU507
 1672 0038 0A60     		str	r2, [r1]
 1673 003a 7047     		bx	lr
 1674              	.LVL179:
 1675              	.L141:
2910:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STR_VOLUME_ID		/* Find string drive id */
 1676              		.loc 1 2910 6 view .LVU508
 1677 003c 4FF0FF30 		mov	r0, #-1
 1678              	.LVL180:
2910:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STR_VOLUME_ID		/* Find string drive id */
 1679              		.loc 1 2910 6 view .LVU509
 1680 0040 7047     		bx	lr
 1681              	.LVL181:
 1682              	.L142:
2910:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STR_VOLUME_ID		/* Find string drive id */
 1683              		.loc 1 2910 6 view .LVU510
 1684 0042 4FF0FF30 		mov	r0, #-1
 1685              	.LVL182:
2946:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1686              		.loc 1 2946 4 is_stmt 1 view .LVU511
2946:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1687              		.loc 1 2946 11 is_stmt 0 view .LVU512
 1688 0046 7047     		bx	lr
 1689              		.cfi_endproc
 1690              	.LFE175:
 1692              		.section	.text.putc_init,"ax",%progbits
 1693              		.align	1
 1694              		.syntax unified
 1695              		.thumb
 1696              		.thumb_func
 1697              		.fpu fpv5-d16
 1699              	putc_init:
 1700              	.LVL183:
 1701              	.LFB199:
2956:Middlewares/Third_Party/FatFs/src/ff.c **** 
2957:Middlewares/Third_Party/FatFs/src/ff.c **** 
2958:Middlewares/Third_Party/FatFs/src/ff.c **** 
2959:Middlewares/Third_Party/FatFs/src/ff.c **** 
2960:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2961:Middlewares/Third_Party/FatFs/src/ff.c **** /* Load a sector and check if it is an FAT boot sector                   */
2962:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2963:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  /tmp/ccWTW02a.s 			page 85


2964:Middlewares/Third_Party/FatFs/src/ff.c **** static
2965:Middlewares/Third_Party/FatFs/src/ff.c **** BYTE check_fs (	/* 0:FAT, 1:exFAT, 2:Valid BS but not FAT, 3:Not a BS, 4:Disk error */
2966:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* File system object */
2967:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sect	/* Sector# (lba) to load and check if it is an FAT-VBR or not */
2968:Middlewares/Third_Party/FatFs/src/ff.c **** )
2969:Middlewares/Third_Party/FatFs/src/ff.c **** {
2970:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->wflag = 0; fs->winsect = 0xFFFFFFFF;		/* Invaidate window */
2971:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (move_window(fs, sect) != FR_OK) return 4;	/* Load boot record */
2972:Middlewares/Third_Party/FatFs/src/ff.c **** 
2973:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ld_word(fs->win + BS_55AA) != 0xAA55) return 3;	/* Check boot record signature (always placed 
2974:Middlewares/Third_Party/FatFs/src/ff.c **** 
2975:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->win[BS_JmpBoot] == 0xE9 || (fs->win[BS_JmpBoot] == 0xEB && fs->win[BS_JmpBoot + 2] == 0x90
2976:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((ld_dword(fs->win + BS_FilSysType) & 0xFFFFFF) == 0x544146) return 0;	/* Check "FAT" string *
2977:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ld_dword(fs->win + BS_FilSysType32) == 0x33544146) return 0;			/* Check "FAT3" string */
2978:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2979:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
2980:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!mem_cmp(fs->win + BS_JmpBoot, "\xEB\x76\x90" "EXFAT   ", 11)) return 1;
2981:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2982:Middlewares/Third_Party/FatFs/src/ff.c **** 	return 2;
2983:Middlewares/Third_Party/FatFs/src/ff.c **** }
2984:Middlewares/Third_Party/FatFs/src/ff.c **** 
2985:Middlewares/Third_Party/FatFs/src/ff.c **** 
2986:Middlewares/Third_Party/FatFs/src/ff.c **** 
2987:Middlewares/Third_Party/FatFs/src/ff.c **** 
2988:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2989:Middlewares/Third_Party/FatFs/src/ff.c **** /* Find logical drive and check if the volume is mounted                 */
2990:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2991:Middlewares/Third_Party/FatFs/src/ff.c **** 
2992:Middlewares/Third_Party/FatFs/src/ff.c **** static
2993:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT find_volume (	/* FR_OK(0): successful, !=0: any error occurred */
2994:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR** path,	/* Pointer to pointer to the path name (drive number) */
2995:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS** rfs,		/* Pointer to pointer to the found file system object */
2996:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE mode			/* !=0: Check write protection for write access */
2997:Middlewares/Third_Party/FatFs/src/ff.c **** )
2998:Middlewares/Third_Party/FatFs/src/ff.c **** {
2999:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE fmt, *pt;
3000:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
3001:Middlewares/Third_Party/FatFs/src/ff.c **** 	DSTATUS stat;
3002:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD bsect, fasize, tsect, sysect, nclst, szbfat, br[4];
3003:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD nrsv;
3004:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3005:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
3006:Middlewares/Third_Party/FatFs/src/ff.c **** 
3007:Middlewares/Third_Party/FatFs/src/ff.c **** 
3008:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3009:Middlewares/Third_Party/FatFs/src/ff.c **** 	*rfs = 0;
3010:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(path);
3011:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
3012:Middlewares/Third_Party/FatFs/src/ff.c **** 
3013:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Check if the file system object is valid or not */
3014:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs = FatFs[vol];					/* Get pointer to the file system object */
3015:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
3016:Middlewares/Third_Party/FatFs/src/ff.c **** 
3017:Middlewares/Third_Party/FatFs/src/ff.c **** 	ENTER_FF(fs);						/* Lock the volume */
3018:Middlewares/Third_Party/FatFs/src/ff.c **** 	*rfs = fs;							/* Return pointer to the file system object */
3019:Middlewares/Third_Party/FatFs/src/ff.c **** 
3020:Middlewares/Third_Party/FatFs/src/ff.c **** 	mode &= (BYTE)~FA_READ;				/* Desired access mode, write access or not */
ARM GAS  /tmp/ccWTW02a.s 			page 86


3021:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type) {					/* If the volume has been mounted */
3022:Middlewares/Third_Party/FatFs/src/ff.c **** 		stat = disk_status(fs->drv);
3023:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
3024:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!_FS_READONLY && mode && (stat & STA_PROTECT)) {	/* Check write protection if needed */
3025:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_WRITE_PROTECTED;
3026:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3027:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_OK;				/* The file system object is valid */
3028:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3029:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3030:Middlewares/Third_Party/FatFs/src/ff.c **** 
3031:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* The file system object is not valid. */
3032:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Following code attempts to mount the volume. (analyze BPB and initialize the fs object) */
3033:Middlewares/Third_Party/FatFs/src/ff.c **** 
3034:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fs_type = 0;					/* Clear the file system object */
3035:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
3036:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize the physical drive */
3037:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) { 			/* Check if the initialization succeeded */
3038:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
3039:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3040:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!_FS_READONLY && mode && (stat & STA_PROTECT)) { /* Check disk write protection if needed */
3041:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_WRITE_PROTECTED;
3042:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3043:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS					/* Get sector size (multiple sector size cfg only) */
3044:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(fs->drv, GET_SECTOR_SIZE, &SS(fs)) != RES_OK) return FR_DISK_ERR;
3045:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (SS(fs) > _MAX_SS || SS(fs) < _MIN_SS || (SS(fs) & (SS(fs) - 1))) return FR_DISK_ERR;
3046:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3047:Middlewares/Third_Party/FatFs/src/ff.c **** 
3048:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Find an FAT partition on the drive. Supports only generic partitioning rules, FDISK and SFD. */
3049:Middlewares/Third_Party/FatFs/src/ff.c **** 	bsect = 0;
3050:Middlewares/Third_Party/FatFs/src/ff.c **** 	fmt = check_fs(fs, bsect);			/* Load sector 0 and check if it is an FAT-VBR as SFD */
3051:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == 2 || (fmt < 2 && LD2PT(vol) != 0)) {	/* Not an FAT-VBR or forced partition number */
3052:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < 4; i++) {		/* Get partition offset */
3053:Middlewares/Third_Party/FatFs/src/ff.c **** 			pt = fs->win + (MBR_Table + i * SZ_PTE);
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 			br[i] = pt[PTE_System] ? ld_dword(pt + PTE_StLba) : 0;
3055:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3056:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = LD2PT(vol);					/* Partition number: 0:auto, 1-4:forced */
3057:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i) i--;
3058:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {							/* Find an FAT volume */
3059:Middlewares/Third_Party/FatFs/src/ff.c **** 			bsect = br[i];
3060:Middlewares/Third_Party/FatFs/src/ff.c **** 			fmt = bsect ? check_fs(fs, bsect) : 3;	/* Check the partition */
3061:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (LD2PT(vol) == 0 && fmt >= 2 && ++i < 4);
3062:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3063:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == 4) return FR_DISK_ERR;		/* An error occured in the disk I/O layer */
3064:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt >= 2) return FR_NO_FILESYSTEM;	/* No FAT volume is found */
3065:Middlewares/Third_Party/FatFs/src/ff.c **** 
3066:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* An FAT volume is found (bsect). Following code initializes the file system object */
3067:Middlewares/Third_Party/FatFs/src/ff.c **** 
3068:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3069:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == 1) {
3070:Middlewares/Third_Party/FatFs/src/ff.c **** 		QWORD maxlba;
3071:Middlewares/Third_Party/FatFs/src/ff.c **** 
3072:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = BPB_ZeroedEx; i < BPB_ZeroedEx + 53 && fs->win[i] == 0; i++) ;	/* Check zero filler */
3073:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i < BPB_ZeroedEx + 53) return FR_NO_FILESYSTEM;
3074:Middlewares/Third_Party/FatFs/src/ff.c **** 
3075:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ld_word(fs->win + BPB_FSVerEx) != 0x100) return FR_NO_FILESYSTEM;	/* Check exFAT revision (Mu
3076:Middlewares/Third_Party/FatFs/src/ff.c **** 
3077:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (1 << fs->win[BPB_BytsPerSecEx] != SS(fs)) {	/* (BPB_BytsPerSecEx must be equal to the physica
ARM GAS  /tmp/ccWTW02a.s 			page 87


3078:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_NO_FILESYSTEM;
3079:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3080:Middlewares/Third_Party/FatFs/src/ff.c **** 
3081:Middlewares/Third_Party/FatFs/src/ff.c **** 		maxlba = ld_qword(fs->win + BPB_TotSecEx) + bsect;	/* Last LBA + 1 of the volume */
3082:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (maxlba >= 0x100000000) return FR_NO_FILESYSTEM;	/* (It cannot be handled in 32-bit LBA) */
3083:Middlewares/Third_Party/FatFs/src/ff.c **** 
3084:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsize = ld_dword(fs->win + BPB_FatSzEx);	/* Number of sectors per FAT */
3085:Middlewares/Third_Party/FatFs/src/ff.c **** 
3086:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->n_fats = fs->win[BPB_NumFATsEx];			/* Number of FATs */
3087:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_fats != 1) return FR_NO_FILESYSTEM;	/* (Supports only 1 FAT) */
3088:Middlewares/Third_Party/FatFs/src/ff.c **** 
3089:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->csize = 1 << fs->win[BPB_SecPerClusEx];		/* Cluster size */
3090:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->csize == 0)	return FR_NO_FILESYSTEM;	/* (Must be 1..32768) */
3091:Middlewares/Third_Party/FatFs/src/ff.c **** 
3092:Middlewares/Third_Party/FatFs/src/ff.c **** 		nclst = ld_dword(fs->win + BPB_NumClusEx);		/* Number of clusters */
3093:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst > MAX_EXFAT) return FR_NO_FILESYSTEM;	/* (Too many clusters) */
3094:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->n_fatent = nclst + 2;
3095:Middlewares/Third_Party/FatFs/src/ff.c **** 
3096:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Boundaries and Limits */
3097:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->volbase = bsect;
3098:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->database = bsect + ld_dword(fs->win + BPB_DataOfsEx);
3099:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fatbase = bsect + ld_dword(fs->win + BPB_FatOfsEx);
3100:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (maxlba < (QWORD)fs->database + nclst * fs->csize) return FR_NO_FILESYSTEM;	/* (Volume size mu
3101:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->dirbase = ld_dword(fs->win + BPB_RootClusEx);
3102:Middlewares/Third_Party/FatFs/src/ff.c **** 
3103:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Check if bitmap location is in assumption (at the first cluster) */
3104:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fs, clust2sect(fs, fs->dirbase)) != FR_OK) return FR_DISK_ERR;
3105:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < SS(fs); i += SZDIRE) {
3106:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->win[i] == 0x81 && ld_dword(fs->win + i + 20) == 2) break;	/* 81 entry with cluster #2? *
3107:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3108:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == SS(fs)) return FR_NO_FILESYSTEM;
3109:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3110:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->last_clst = fs->free_clst = 0xFFFFFFFF;		/* Initialize cluster allocation information */
3111:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3112:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_EXFAT;			/* FAT sub-type */
3113:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
3114:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_EXFAT */
3115:Middlewares/Third_Party/FatFs/src/ff.c **** 	{
3116:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ld_word(fs->win + BPB_BytsPerSec) != SS(fs)) return FR_NO_FILESYSTEM;	/* (BPB_BytsPerSec must
3117:Middlewares/Third_Party/FatFs/src/ff.c **** 
3118:Middlewares/Third_Party/FatFs/src/ff.c **** 		fasize = ld_word(fs->win + BPB_FATSz16);		/* Number of sectors per FAT */
3119:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fasize == 0) fasize = ld_dword(fs->win + BPB_FATSz32);
3120:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsize = fasize;
3121:Middlewares/Third_Party/FatFs/src/ff.c **** 
3122:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->n_fats = fs->win[BPB_NumFATs];				/* Number of FATs */
3123:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_fats != 1 && fs->n_fats != 2) return FR_NO_FILESYSTEM;	/* (Must be 1 or 2) */
3124:Middlewares/Third_Party/FatFs/src/ff.c **** 		fasize *= fs->n_fats;							/* Number of sectors for FAT area */
3125:Middlewares/Third_Party/FatFs/src/ff.c **** 
3126:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->csize = fs->win[BPB_SecPerClus];			/* Cluster size */
3127:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->csize == 0 || (fs->csize & (fs->csize - 1))) return FR_NO_FILESYSTEM;	/* (Must be power o
3128:Middlewares/Third_Party/FatFs/src/ff.c **** 
3129:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->n_rootdir = ld_word(fs->win + BPB_RootEntCnt);	/* Number of root directory entries */
3130:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_rootdir % (SS(fs) / SZDIRE)) return FR_NO_FILESYSTEM;	/* (Must be sector aligned) */
3131:Middlewares/Third_Party/FatFs/src/ff.c **** 
3132:Middlewares/Third_Party/FatFs/src/ff.c **** 		tsect = ld_word(fs->win + BPB_TotSec16);		/* Number of sectors on the volume */
3133:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (tsect == 0) tsect = ld_dword(fs->win + BPB_TotSec32);
3134:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  /tmp/ccWTW02a.s 			page 88


3135:Middlewares/Third_Party/FatFs/src/ff.c **** 		nrsv = ld_word(fs->win + BPB_RsvdSecCnt);		/* Number of reserved sectors */
3136:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nrsv == 0) return FR_NO_FILESYSTEM;			/* (Must not be 0) */
3137:Middlewares/Third_Party/FatFs/src/ff.c **** 
3138:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Determine the FAT sub type */
3139:Middlewares/Third_Party/FatFs/src/ff.c **** 		sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZDIRE);	/* RSV + FAT + DIR */
3140:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (tsect < sysect) return FR_NO_FILESYSTEM;	/* (Invalid volume size) */
3141:Middlewares/Third_Party/FatFs/src/ff.c **** 		nclst = (tsect - sysect) / fs->csize;			/* Number of clusters */
3142:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst == 0) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
3143:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_FAT32;
3144:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst <= MAX_FAT16) fmt = FS_FAT16;
3145:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst <= MAX_FAT12) fmt = FS_FAT12;
3146:Middlewares/Third_Party/FatFs/src/ff.c **** 
3147:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Boundaries and Limits */
3148:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->n_fatent = nclst + 2;						/* Number of FAT entries */
3149:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->volbase = bsect;							/* Volume start sector */
3150:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fatbase = bsect + nrsv; 					/* FAT start sector */
3151:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->database = bsect + sysect;					/* Data start sector */
3152:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32) {
3153:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ld_word(fs->win + BPB_FSVer32) != 0) return FR_NO_FILESYSTEM;	/* (Must be FAT32 revision 0.0
3154:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->n_rootdir) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
3155:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbase = ld_dword(fs->win + BPB_RootClus32);	/* Root directory start cluster */
3156:Middlewares/Third_Party/FatFs/src/ff.c **** 			szbfat = fs->n_fatent * 4;					/* (Needed FAT size) */
3157:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
3158:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->n_rootdir == 0)	return FR_NO_FILESYSTEM;/* (BPB_RootEntCnt must not be 0) */
3159:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbase = fs->fatbase + fasize;			/* Root directory start sector */
3160:Middlewares/Third_Party/FatFs/src/ff.c **** 			szbfat = (fmt == FS_FAT16) ?				/* (Needed FAT size) */
3161:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
3162:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3163:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->fsize < (szbfat + (SS(fs) - 1)) / SS(fs)) return FR_NO_FILESYSTEM;	/* (BPB_FATSz must not
3164:Middlewares/Third_Party/FatFs/src/ff.c **** 
3165:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3166:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Get FSINFO if available */
3167:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->last_clst = fs->free_clst = 0xFFFFFFFF;		/* Initialize cluster allocation information */
3168:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag = 0x80;
3169:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 3) != 3
3170:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32				/* Enable FSINFO only if FAT32 and BPB_FSInfo32 == 1 */
3171:Middlewares/Third_Party/FatFs/src/ff.c **** 			&& ld_word(fs->win + BPB_FSInfo32) == 1
3172:Middlewares/Third_Party/FatFs/src/ff.c **** 			&& move_window(fs, bsect + 1) == FR_OK)
3173:Middlewares/Third_Party/FatFs/src/ff.c **** 		{
3174:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag = 0;
3175:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ld_word(fs->win + BS_55AA) == 0xAA55	/* Load FSINFO data if available */
3176:Middlewares/Third_Party/FatFs/src/ff.c **** 				&& ld_dword(fs->win + FSI_LeadSig) == 0x41615252
3177:Middlewares/Third_Party/FatFs/src/ff.c **** 				&& ld_dword(fs->win + FSI_StrucSig) == 0x61417272)
3178:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
3179:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 1) == 0
3180:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->free_clst = ld_dword(fs->win + FSI_Free_Count);
3181:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3182:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 2) == 0
3183:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->last_clst = ld_dword(fs->win + FSI_Nxt_Free);
3184:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3185:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3186:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3187:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* (_FS_NOFSINFO & 3) != 3 */
3188:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* !_FS_READONLY */
3189:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3190:Middlewares/Third_Party/FatFs/src/ff.c **** 
3191:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fs_type = fmt;		/* FAT sub-type */
ARM GAS  /tmp/ccWTW02a.s 			page 89


3192:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
3193:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 1
3194:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->lfnbuf = LfnBuf;	/* Static LFN working buffer */
3195:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3196:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->dirbuf = DirBuf;	/* Static directory block scratchpad buuffer */
3197:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3198:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3199:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
3200:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->cdir = 0;			/* Initialize current directory */
3201:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3202:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0			/* Clear file lock semaphores */
3203:Middlewares/Third_Party/FatFs/src/ff.c **** 	clear_lock(fs);
3204:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3205:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
3206:Middlewares/Third_Party/FatFs/src/ff.c **** }
3207:Middlewares/Third_Party/FatFs/src/ff.c **** 
3208:Middlewares/Third_Party/FatFs/src/ff.c **** 
3209:Middlewares/Third_Party/FatFs/src/ff.c **** 
3210:Middlewares/Third_Party/FatFs/src/ff.c **** 
3211:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3212:Middlewares/Third_Party/FatFs/src/ff.c **** /* Check if the file/directory object is valid or not                    */
3213:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3214:Middlewares/Third_Party/FatFs/src/ff.c **** 
3215:Middlewares/Third_Party/FatFs/src/ff.c **** static
3216:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT validate (	/* Returns FR_OK or FR_INVALID_OBJECT */
3217:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID* obj,		/* Pointer to the _OBJ, the 1st member in the FIL/DIR object, to check validity */
3218:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS** fs		/* Pointer to pointer to the owner file system object to return */
3219:Middlewares/Third_Party/FatFs/src/ff.c **** )
3220:Middlewares/Third_Party/FatFs/src/ff.c **** {
3221:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_INVALID_OBJECT;
3222:Middlewares/Third_Party/FatFs/src/ff.c **** 
3223:Middlewares/Third_Party/FatFs/src/ff.c **** 
3224:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (obj && obj->fs && obj->fs->fs_type && obj->id == obj->fs->id) {	/* Test if the object is valid
3225:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
3226:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (lock_fs(obj->fs)) {	/* Obtain the filesystem object */
3227:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(disk_status(obj->fs->drv) & STA_NOINIT)) { /* Test if the phsical drive is kept initialize
3228:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_OK;
3229:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
3230:Middlewares/Third_Party/FatFs/src/ff.c **** 				unlock_fs(obj->fs, FR_OK);
3231:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3232:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
3233:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_TIMEOUT;
3234:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3235:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3236:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(disk_status(obj->fs->drv) & STA_NOINIT)) { /* Test if the phsical drive is kept initialized
3237:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
3238:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3239:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3240:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	*fs = (res == FR_OK) ? obj->fs : 0;	/* Corresponding filesystem object */
3242:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
3243:Middlewares/Third_Party/FatFs/src/ff.c **** }
3244:Middlewares/Third_Party/FatFs/src/ff.c **** 
3245:Middlewares/Third_Party/FatFs/src/ff.c **** 
3246:Middlewares/Third_Party/FatFs/src/ff.c **** 
3247:Middlewares/Third_Party/FatFs/src/ff.c **** 
3248:Middlewares/Third_Party/FatFs/src/ff.c **** /*---------------------------------------------------------------------------
ARM GAS  /tmp/ccWTW02a.s 			page 90


3249:Middlewares/Third_Party/FatFs/src/ff.c **** 
3250:Middlewares/Third_Party/FatFs/src/ff.c ****    Public Functions (FatFs API)
3251:Middlewares/Third_Party/FatFs/src/ff.c **** 
3252:Middlewares/Third_Party/FatFs/src/ff.c **** ----------------------------------------------------------------------------*/
3253:Middlewares/Third_Party/FatFs/src/ff.c **** 
3254:Middlewares/Third_Party/FatFs/src/ff.c **** 
3255:Middlewares/Third_Party/FatFs/src/ff.c **** 
3256:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3257:Middlewares/Third_Party/FatFs/src/ff.c **** /* Mount/Unmount a Logical Drive                                         */
3258:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3259:Middlewares/Third_Party/FatFs/src/ff.c **** 
3260:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_mount (
3261:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,			/* Pointer to the file system object (NULL:unmount)*/
3262:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Logical drive number to be mounted/unmounted */
3263:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE opt			/* Mode option 0:Do not mount (delayed mount), 1:Mount immediately */
3264:Middlewares/Third_Party/FatFs/src/ff.c **** )
3265:Middlewares/Third_Party/FatFs/src/ff.c **** {
3266:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *cfs;
3267:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
3268:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3269:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *rp = path;
3270:Middlewares/Third_Party/FatFs/src/ff.c **** 
3271:Middlewares/Third_Party/FatFs/src/ff.c **** 
3272:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3273:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(&rp);
3274:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
3275:Middlewares/Third_Party/FatFs/src/ff.c **** 	cfs = FatFs[vol];					/* Pointer to fs object */
3276:Middlewares/Third_Party/FatFs/src/ff.c **** 
3277:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (cfs) {
3278:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
3279:Middlewares/Third_Party/FatFs/src/ff.c **** 		clear_lock(cfs);
3280:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3281:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT						/* Discard sync object of the current volume */
3282:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!ff_del_syncobj(cfs->sobj)) return FR_INT_ERR;
3283:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3284:Middlewares/Third_Party/FatFs/src/ff.c **** 		cfs->fs_type = 0;				/* Clear old fs object */
3285:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3286:Middlewares/Third_Party/FatFs/src/ff.c **** 
3287:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs) {
3288:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fs_type = 0;				/* Clear new fs object */
3289:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT						/* Create sync object for the new volume */
3290:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!ff_cre_syncobj((BYTE)vol, &fs->sobj)) return FR_INT_ERR;
3291:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3292:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3293:Middlewares/Third_Party/FatFs/src/ff.c **** 	FatFs[vol] = fs;					/* Register new fs object */
3294:Middlewares/Third_Party/FatFs/src/ff.c **** 
3295:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs || opt != 1) return FR_OK;	/* Do not mount now, it will be mounted later */
3296:Middlewares/Third_Party/FatFs/src/ff.c **** 
3297:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, 0);	/* Force mounted the volume */
3298:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
3299:Middlewares/Third_Party/FatFs/src/ff.c **** }
3300:Middlewares/Third_Party/FatFs/src/ff.c **** 
3301:Middlewares/Third_Party/FatFs/src/ff.c **** 
3302:Middlewares/Third_Party/FatFs/src/ff.c **** 
3303:Middlewares/Third_Party/FatFs/src/ff.c **** 
3304:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3305:Middlewares/Third_Party/FatFs/src/ff.c **** /* Open or Create a File                                                 */
ARM GAS  /tmp/ccWTW02a.s 			page 91


3306:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3307:Middlewares/Third_Party/FatFs/src/ff.c **** 
3308:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_open (
3309:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,			/* Pointer to the blank file object */
3310:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Pointer to the file name */
3311:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE mode			/* Access mode and file open mode flags */
3312:Middlewares/Third_Party/FatFs/src/ff.c **** )
3313:Middlewares/Third_Party/FatFs/src/ff.c **** {
3314:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3315:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3316:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3317:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3318:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dw, cl, bcs, clst, sc;
3319:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t ofs;
3320:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3321:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
3322:Middlewares/Third_Party/FatFs/src/ff.c **** 
3323:Middlewares/Third_Party/FatFs/src/ff.c **** 
3324:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fp) return FR_INVALID_OBJECT;
3325:Middlewares/Third_Party/FatFs/src/ff.c **** 
3326:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
3327:Middlewares/Third_Party/FatFs/src/ff.c **** 	mode &= _FS_READONLY ? FA_READ : FA_READ | FA_WRITE | FA_CREATE_ALWAYS | FA_CREATE_NEW | FA_OPEN_A
3328:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, mode);
3329:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3330:Middlewares/Third_Party/FatFs/src/ff.c **** 		dj.obj.fs = fs;
3331:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
3332:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
3333:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY	/* R/W configuration */
3334:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3335:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* Origin directory itself? */
3336:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
3337:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3338:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
3339:Middlewares/Third_Party/FatFs/src/ff.c **** 			else {
3340:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = chk_lock(&dj, (mode & ~FA_READ) ? 1 : 0);
3341:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3342:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3343:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3344:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Create or Open a file */
3345:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (mode & (FA_CREATE_ALWAYS | FA_OPEN_ALWAYS | FA_CREATE_NEW)) {
3346:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {					/* No file, create new */
3347:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) {		/* There is no file to open, create a new entry */
3348:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
3349:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = enq_lock() ? dir_register(&dj) : FR_TOO_MANY_OPEN_FILES;
3350:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3351:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_register(&dj);
3352:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3353:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3354:Middlewares/Third_Party/FatFs/src/ff.c **** 				mode |= FA_CREATE_ALWAYS;		/* File is created */
3355:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3356:Middlewares/Third_Party/FatFs/src/ff.c **** 			else {								/* Any object is already existing */
3357:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.obj.attr & (AM_RDO | AM_DIR)) {	/* Cannot overwrite it (R/O or DIR) */
3358:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;
3359:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
3360:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (mode & FA_CREATE_NEW) res = FR_EXIST;	/* Cannot create as new file */
3361:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3362:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
ARM GAS  /tmp/ccWTW02a.s 			page 92


3363:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK && (mode & FA_CREATE_ALWAYS)) {	/* Truncate it if overwrite mode */
3364:Middlewares/Third_Party/FatFs/src/ff.c **** 				dw = GET_FATTIME();
3365:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3366:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->fs_type == FS_EXFAT) {
3367:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Get current allocation info */
3368:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.fs = fs;
3369:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = ld_dword(fs->dirbuf + XDIR_FstClus);
3370:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.objsize = ld_qword(fs->dirbuf + XDIR_FileSize);
3371:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.stat = fs->dirbuf[XDIR_GenFlags] & 2;
3372:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.n_frag = 0;
3373:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Initialize directory entry block */
3374:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(fs->dirbuf + XDIR_CrtTime, dw);	/* Set created time */
3375:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->dirbuf[XDIR_CrtTime10] = 0;
3376:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(fs->dirbuf + XDIR_ModTime, dw);	/* Set modified time */
3377:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->dirbuf[XDIR_ModTime10] = 0;
3378:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->dirbuf[XDIR_Attr] = AM_ARC;				/* Reset attribute */
3379:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(fs->dirbuf + XDIR_FstClus, 0);		/* Reset file allocation info */
3380:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_qword(fs->dirbuf + XDIR_FileSize, 0);
3381:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_qword(fs->dirbuf + XDIR_ValidFileSize, 0);
3382:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->dirbuf[XDIR_GenFlags] = 1;
3383:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = store_xdir(&dj);
3384:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK && fp->obj.sclust) {		/* Remove the cluster chain if exist */
3385:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = remove_chain(&fp->obj, fp->obj.sclust, 0);
3386:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->last_clst = fp->obj.sclust - 1;		/* Reuse the cluster hole */
3387:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3388:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else
3389:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3390:Middlewares/Third_Party/FatFs/src/ff.c **** 				{
3391:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Clean directory info */
3392:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dj.dir + DIR_CrtTime, dw);	/* Set created time */
3393:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dj.dir + DIR_ModTime, dw);	/* Set modified time */
3394:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.dir[DIR_Attr] = AM_ARC;			/* Reset attribute */
3395:Middlewares/Third_Party/FatFs/src/ff.c **** 					cl = ld_clust(fs, dj.dir);			/* Get cluster chain */
3396:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dj.dir, 0);			/* Reset file allocation info */
3397:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dj.dir + DIR_FileSize, 0);
3398:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
3399:Middlewares/Third_Party/FatFs/src/ff.c **** 
3400:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (cl) {							/* Remove the cluster chain if exist */
3401:Middlewares/Third_Party/FatFs/src/ff.c **** 						dw = fs->winsect;
3402:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = remove_chain(&dj.obj, cl, 0);
3403:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
3404:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = move_window(fs, dw);
3405:Middlewares/Third_Party/FatFs/src/ff.c **** 							fs->last_clst = cl - 1;		/* Reuse the cluster hole */
3406:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
3407:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3408:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3409:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3410:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3411:Middlewares/Third_Party/FatFs/src/ff.c **** 		else {	/* Open an existing file */
3412:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {					/* Following succeeded */
3413:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.obj.attr & AM_DIR) {		/* It is a directory */
3414:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_FILE;
3415:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
3416:Middlewares/Third_Party/FatFs/src/ff.c **** 					if ((mode & FA_WRITE) && (dj.obj.attr & AM_RDO)) { /* R/O violation */
3417:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_DENIED;
3418:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3419:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
ARM GAS  /tmp/ccWTW02a.s 			page 93


3420:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3421:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3422:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3423:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (mode & FA_CREATE_ALWAYS)		/* Set file change flag if created or overwritten */
3424:Middlewares/Third_Party/FatFs/src/ff.c **** 				mode |= FA_MODIFIED;
3425:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_sect = fs->winsect;			/* Pointer to the directory entry */
3426:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_ptr = dj.dir;
3427:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
3428:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.lockid = inc_lock(&dj, (mode & ~FA_READ) ? 1 : 0);
3429:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!fp->obj.lockid) res = FR_INT_ERR;
3430:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3431:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3432:Middlewares/Third_Party/FatFs/src/ff.c **** #else		/* R/O configuration */
3433:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3434:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* Origin directory itself? */
3435:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
3436:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
3437:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.obj.attr & AM_DIR) {		/* It is a directory */
3438:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_FILE;
3439:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3440:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3441:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3442:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3443:Middlewares/Third_Party/FatFs/src/ff.c **** 
3444:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3445:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3446:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
3447:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.c_scl = dj.obj.sclust;							/* Get containing directory info */
3448:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.c_size = ((DWORD)dj.obj.objsize & 0xFFFFFF00) | dj.obj.stat;
3449:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.c_ofs = dj.blk_ofs;
3450:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.sclust = ld_dword(fs->dirbuf + XDIR_FstClus);	/* Get object allocation info */
3451:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.objsize = ld_qword(fs->dirbuf + XDIR_FileSize);
3452:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.stat = fs->dirbuf[XDIR_GenFlags] & 2;
3453:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else
3454:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3455:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
3456:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.sclust = ld_clust(fs, dj.dir);					/* Get object allocation info */
3457:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.objsize = ld_dword(dj.dir + DIR_FileSize);
3458:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3459:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
3460:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->cltbl = 0;			/* Disable fast seek mode */
3461:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3462:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.fs = fs;	 	/* Validate the file object */
3463:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.id = fs->id;
3464:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag = mode;		/* Set file access mode */
3465:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->err = 0;			/* Clear error flag */
3466:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->sect = 0;			/* Invalidate current data sector */
3467:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = 0;			/* Set file pointer top of the file */
3468:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3469:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
3470:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(fp->buf, 0, _MAX_SS);	/* Clear sector buffer */
3471:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3472:Middlewares/Third_Party/FatFs/src/ff.c **** 			if ((mode & FA_SEEKEND) && fp->obj.objsize > 0) {	/* Seek to end of file if FA_OPEN_APPEND is sp
3473:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = fp->obj.objsize;			/* Offset to seek */
3474:Middlewares/Third_Party/FatFs/src/ff.c **** 				bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size in byte */
3475:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->obj.sclust;				/* Follow the cluster chain */
3476:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (ofs = fp->obj.objsize; res == FR_OK && ofs > bcs; ofs -= bcs) {
ARM GAS  /tmp/ccWTW02a.s 			page 94


3477:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = get_fat(&fp->obj, clst);
3478:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1) res = FR_INT_ERR;
3479:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) res = FR_DISK_ERR;
3480:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3481:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;
3482:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && ofs % SS(fs)) {	/* Fill sector buffer if not on the sector boundary */
3483:Middlewares/Third_Party/FatFs/src/ff.c **** 					if ((sc = clust2sect(fs, clst)) == 0) {
3484:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_INT_ERR;
3485:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
3486:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->sect = sc + (DWORD)(ofs / SS(fs));
3487:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
3488:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (disk_read(fs->drv, fp->buf, fp->sect, 1) != RES_OK) res = FR_DISK_ERR;
3489:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3490:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3491:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3492:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3493:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3494:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3495:Middlewares/Third_Party/FatFs/src/ff.c **** 
3496:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
3497:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3498:Middlewares/Third_Party/FatFs/src/ff.c **** 
3499:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) fp->obj.fs = 0;	/* Invalidate file object on error */
3500:Middlewares/Third_Party/FatFs/src/ff.c **** 
3501:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
3502:Middlewares/Third_Party/FatFs/src/ff.c **** }
3503:Middlewares/Third_Party/FatFs/src/ff.c **** 
3504:Middlewares/Third_Party/FatFs/src/ff.c **** 
3505:Middlewares/Third_Party/FatFs/src/ff.c **** 
3506:Middlewares/Third_Party/FatFs/src/ff.c **** 
3507:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3508:Middlewares/Third_Party/FatFs/src/ff.c **** /* Read File                                                             */
3509:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3510:Middlewares/Third_Party/FatFs/src/ff.c **** 
3511:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_read (
3512:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp, 	/* Pointer to the file object */
3513:Middlewares/Third_Party/FatFs/src/ff.c **** 	void* buff,	/* Pointer to data buffer */
3514:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT btr,	/* Number of bytes to read */
3515:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT* br	/* Pointer to number of bytes read */
3516:Middlewares/Third_Party/FatFs/src/ff.c **** )
3517:Middlewares/Third_Party/FatFs/src/ff.c **** {
3518:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3519:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3520:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, sect;
3521:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t remain;
3522:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT rcnt, cc, csect;
3523:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *rbuff = (BYTE*)buff;
3524:Middlewares/Third_Party/FatFs/src/ff.c **** 
3525:Middlewares/Third_Party/FatFs/src/ff.c **** 
3526:Middlewares/Third_Party/FatFs/src/ff.c **** 	*br = 0;	/* Clear read byte counter */
3527:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);				/* Check validity of the file object */
3528:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
3529:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
3530:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
3531:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
3532:Middlewares/Third_Party/FatFs/src/ff.c **** 
3533:Middlewares/Third_Party/FatFs/src/ff.c **** 	for ( ;  btr;								/* Repeat until all data read */
ARM GAS  /tmp/ccWTW02a.s 			page 95


3534:Middlewares/Third_Party/FatFs/src/ff.c **** 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
3535:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
3536:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
3537:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (csect == 0) {					/* On the cluster boundary? */
3538:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
3539:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->obj.sclust;		/* Follow cluster chain from the origin */
3540:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {						/* Middle or end of the file */
3541:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
3542:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fp->cltbl) {
3543:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
3544:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
3545:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3546:Middlewares/Third_Party/FatFs/src/ff.c **** 					{
3547:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = get_fat(&fp->obj, fp->clust);	/* Follow cluster chain on the FAT */
3548:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3549:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3550:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst < 2) ABORT(fs, FR_INT_ERR);
3551:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
3552:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
3553:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3554:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect = clust2sect(fs, fp->clust);	/* Get current sector */
3555:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!sect) ABORT(fs, FR_INT_ERR);
3556:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
3557:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btr / SS(fs);					/* When remaining bytes >= sector size, */
3558:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cc) {							/* Read maximum contiguous sectors directly */
3559:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
3560:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
3561:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3562:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_read(fs->drv, rbuff, sect, cc) != RES_OK) ABORT(fs, FR_DISK_ERR);
3563:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
3564:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
3565:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->wflag && fs->winsect - sect < cc) {
3566:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fs->winsect - sect) * SS(fs)), fs->win, SS(fs));
3567:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3568:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3569:Middlewares/Third_Party/FatFs/src/ff.c **** 				if ((fp->flag & FA_DIRTY) && fp->sect - sect < cc) {
3570:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
3571:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3572:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3573:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3574:Middlewares/Third_Party/FatFs/src/ff.c **** 				rcnt = SS(fs) * cc;				/* Number of bytes transferred */
3575:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
3576:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3577:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
3578:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->sect != sect) {			/* Load data sector if not in cache */
3579:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3580:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->flag & FA_DIRTY) {		/* Write-back dirty sector cache */
3581:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
3582:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
3583:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3584:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3585:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_read(fs->drv, fp->buf, sect, 1) != RES_OK)	ABORT(fs, FR_DISK_ERR);	/* Fill sector cach
3586:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3587:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3588:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->sect = sect;
3589:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3590:Middlewares/Third_Party/FatFs/src/ff.c **** 		rcnt = SS(fs) - (UINT)fp->fptr % SS(fs);	/* Number of bytes left in the sector */
ARM GAS  /tmp/ccWTW02a.s 			page 96


3591:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
3592:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
3593:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fs, fp->sect) != FR_OK) ABORT(fs, FR_DISK_ERR);	/* Move sector window */
3594:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(rbuff, fs->win + fp->fptr % SS(fs), rcnt);	/* Extract partial sector */
3595:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3596:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(rbuff, fp->buf + fp->fptr % SS(fs), rcnt);	/* Extract partial sector */
3597:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3598:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3599:Middlewares/Third_Party/FatFs/src/ff.c **** 
3600:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, FR_OK);
3601:Middlewares/Third_Party/FatFs/src/ff.c **** }
3602:Middlewares/Third_Party/FatFs/src/ff.c **** 
3603:Middlewares/Third_Party/FatFs/src/ff.c **** 
3604:Middlewares/Third_Party/FatFs/src/ff.c **** 
3605:Middlewares/Third_Party/FatFs/src/ff.c **** 
3606:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3607:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3608:Middlewares/Third_Party/FatFs/src/ff.c **** /* Write File                                                            */
3609:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3610:Middlewares/Third_Party/FatFs/src/ff.c **** 
3611:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_write (
3612:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,			/* Pointer to the file object */
3613:Middlewares/Third_Party/FatFs/src/ff.c **** 	const void* buff,	/* Pointer to the data to be written */
3614:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT btw,			/* Number of bytes to write */
3615:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT* bw			/* Pointer to number of bytes written */
3616:Middlewares/Third_Party/FatFs/src/ff.c **** )
3617:Middlewares/Third_Party/FatFs/src/ff.c **** {
3618:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3619:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3620:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, sect;
3621:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT wcnt, cc, csect;
3622:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE *wbuff = (const BYTE*)buff;
3623:Middlewares/Third_Party/FatFs/src/ff.c **** 
3624:Middlewares/Third_Party/FatFs/src/ff.c **** 
3625:Middlewares/Third_Party/FatFs/src/ff.c **** 	*bw = 0;	/* Clear write byte counter */
3626:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);			/* Check validity of the file object */
3627:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
3628:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
3629:Middlewares/Third_Party/FatFs/src/ff.c **** 
3630:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Check fptr wrap-around (file size cannot reach 4GiB on FATxx) */
3631:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((!_FS_EXFAT || fs->fs_type != FS_EXFAT) && (DWORD)(fp->fptr + btw) < (DWORD)fp->fptr) {
3632:Middlewares/Third_Party/FatFs/src/ff.c **** 		btw = (UINT)(0xFFFFFFFF - (DWORD)fp->fptr);
3633:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3634:Middlewares/Third_Party/FatFs/src/ff.c **** 
3635:Middlewares/Third_Party/FatFs/src/ff.c **** 	for ( ;  btw;							/* Repeat until all data written */
3636:Middlewares/Third_Party/FatFs/src/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, fp->obj.objsize = (fp->fptr > fp->obj.objsize) ? fp->fptr : fp->
3637:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
3638:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
3639:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (csect == 0) {				/* On the cluster boundary? */
3640:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
3641:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->obj.sclust;	/* Follow from the origin */
3642:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0) {		/* If no cluster is allocated, */
3643:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(&fp->obj, 0);	/* create a new cluster chain */
3644:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3645:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {					/* On the middle or end of the file */
3646:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
3647:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fp->cltbl) {
ARM GAS  /tmp/ccWTW02a.s 			page 97


3648:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
3649:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
3650:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3651:Middlewares/Third_Party/FatFs/src/ff.c **** 					{
3652:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(&fp->obj, fp->clust);	/* Follow or stretch cluster chain on the FAT */
3653:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3654:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3655:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
3656:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 1) ABORT(fs, FR_INT_ERR);
3657:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
3658:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
3659:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->obj.sclust == 0) fp->obj.sclust = clst;	/* Set start cluster if the first write */
3660:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3661:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
3662:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->winsect == fp->sect && sync_window(fs) != FR_OK) ABORT(fs, FR_DISK_ERR);	/* Write-back s
3663:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3664:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->flag & FA_DIRTY) {		/* Write-back sector cache */
3665:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
3666:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
3667:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3668:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3669:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect = clust2sect(fs, fp->clust);	/* Get current sector */
3670:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!sect) ABORT(fs, FR_INT_ERR);
3671:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
3672:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btw / SS(fs);				/* When remaining bytes >= sector size, */
3673:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cc) {						/* Write maximum contiguous sectors directly */
3674:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
3675:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
3676:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3677:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, wbuff, sect, cc) != RES_OK) ABORT(fs, FR_DISK_ERR);
3678:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
3679:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
3680:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->winsect - sect < cc) {	/* Refill sector cache if it gets invalidated by the direct writ
3681:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(fs->win, wbuff + ((fs->winsect - sect) * SS(fs)), SS(fs));
3682:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 0;
3683:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3684:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3685:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->sect - sect < cc) { /* Refill sector cache if it gets invalidated by the direct write *
3686:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(fp->buf, wbuff + ((fp->sect - sect) * SS(fs)), SS(fs));
3687:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
3688:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3689:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3690:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3691:Middlewares/Third_Party/FatFs/src/ff.c **** 				wcnt = SS(fs) * cc;		/* Number of bytes transferred */
3692:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
3693:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3694:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
3695:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->fptr >= fp->obj.objsize) {	/* Avoid silly cache filling on the growing edge */
3696:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (sync_window(fs) != FR_OK) ABORT(fs, FR_DISK_ERR);
3697:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->winsect = sect;
3698:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3699:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3700:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->sect != sect && 		/* Fill sector cache with file data */
3701:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr < fp->obj.objsize &&
3702:Middlewares/Third_Party/FatFs/src/ff.c **** 				disk_read(fs->drv, fp->buf, sect, 1) != RES_OK) {
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fs, FR_DISK_ERR);
3704:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
ARM GAS  /tmp/ccWTW02a.s 			page 98


3705:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3706:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->sect = sect;
3707:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3708:Middlewares/Third_Party/FatFs/src/ff.c **** 		wcnt = SS(fs) - (UINT)fp->fptr % SS(fs);	/* Number of bytes left in the sector */
3709:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
3710:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
3711:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fs, fp->sect) != FR_OK) ABORT(fs, FR_DISK_ERR);	/* Move sector window */
3712:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(fs->win + fp->fptr % SS(fs), wbuff, wcnt);	/* Fit data to the sector */
3713:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->wflag = 1;
3714:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3715:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(fp->buf + fp->fptr % SS(fs), wbuff, wcnt);	/* Fit data to the sector */
3716:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->flag |= FA_DIRTY;
3717:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3718:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3719:Middlewares/Third_Party/FatFs/src/ff.c **** 
3720:Middlewares/Third_Party/FatFs/src/ff.c **** 	fp->flag |= FA_MODIFIED;				/* Set file change flag */
3721:Middlewares/Third_Party/FatFs/src/ff.c **** 
3722:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, FR_OK);
3723:Middlewares/Third_Party/FatFs/src/ff.c **** }
3724:Middlewares/Third_Party/FatFs/src/ff.c **** 
3725:Middlewares/Third_Party/FatFs/src/ff.c **** 
3726:Middlewares/Third_Party/FatFs/src/ff.c **** 
3727:Middlewares/Third_Party/FatFs/src/ff.c **** 
3728:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3729:Middlewares/Third_Party/FatFs/src/ff.c **** /* Synchronize the File                                                  */
3730:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3731:Middlewares/Third_Party/FatFs/src/ff.c **** 
3732:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_sync (
3733:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp		/* Pointer to the file object */
3734:Middlewares/Third_Party/FatFs/src/ff.c **** )
3735:Middlewares/Third_Party/FatFs/src/ff.c **** {
3736:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3737:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3738:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD tm;
3739:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir;
3740:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3741:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3742:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
3743:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3744:Middlewares/Third_Party/FatFs/src/ff.c **** 
3745:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);	/* Check validity of the file object */
3746:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3747:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->flag & FA_MODIFIED) {	/* Is there any change to the file? */
3748:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
3749:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->flag & FA_DIRTY) {	/* Write-back cached data if needed */
3750:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) LEAVE_FF(fs, FR_DISK_ERR);
3751:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
3752:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3753:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3754:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Update the directory entry */
3755:Middlewares/Third_Party/FatFs/src/ff.c **** 			tm = GET_FATTIME();				/* Modified time */
3756:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3757:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
3758:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = fill_first_frag(&fp->obj);	/* Fill first fragment on the FAT if needed */
3759:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
3760:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = fill_last_frag(&fp->obj, fp->clust, 0xFFFFFFFF);	/* Fill last fragment on the FAT if nee
3761:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
ARM GAS  /tmp/ccWTW02a.s 			page 99


3762:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
3763:Middlewares/Third_Party/FatFs/src/ff.c **** 					INIT_NAMBUF(fs);
3764:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = load_obj_dir(&dj, &fp->obj);	/* Load directory entry block */
3765:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
3766:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->dirbuf[XDIR_Attr] |= AM_ARC;				/* Set archive bit */
3767:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->dirbuf[XDIR_GenFlags] = fp->obj.stat | 1;	/* Update file allocation info */
3768:Middlewares/Third_Party/FatFs/src/ff.c **** 						st_dword(fs->dirbuf + XDIR_FstClus, fp->obj.sclust);
3769:Middlewares/Third_Party/FatFs/src/ff.c **** 						st_qword(fs->dirbuf + XDIR_FileSize, fp->obj.objsize);
3770:Middlewares/Third_Party/FatFs/src/ff.c **** 						st_qword(fs->dirbuf + XDIR_ValidFileSize, fp->obj.objsize);
3771:Middlewares/Third_Party/FatFs/src/ff.c **** 						st_dword(fs->dirbuf + XDIR_ModTime, tm);		/* Update modified time */
3772:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->dirbuf[XDIR_ModTime10] = 0;
3773:Middlewares/Third_Party/FatFs/src/ff.c **** 						st_dword(fs->dirbuf + XDIR_AccTime, 0);
3774:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = store_xdir(&dj);	/* Restore it to the directory */
3775:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
3776:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = sync_fs(fs);
3777:Middlewares/Third_Party/FatFs/src/ff.c **** 							fp->flag &= (BYTE)~FA_MODIFIED;
3778:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
3779:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3780:Middlewares/Third_Party/FatFs/src/ff.c **** 					FREE_NAMBUF();
3781:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3782:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else
3783:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3784:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
3785:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = move_window(fs, fp->dir_sect);
3786:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
3787:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir = fp->dir_ptr;
3788:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Attr] |= AM_ARC;						/* Set archive bit */
3789:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fp->obj.fs, dir, fp->obj.sclust);		/* Update file allocation info  */
3790:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_FileSize, (DWORD)fp->obj.objsize);	/* Update file size */
3791:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_ModTime, tm);				/* Update modified time */
3792:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_word(dir + DIR_LstAccDate, 0);
3793:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
3794:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_fs(fs);					/* Restore it to the directory */
3795:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_MODIFIED;
3796:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3797:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3798:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3799:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3800:Middlewares/Third_Party/FatFs/src/ff.c **** 
3801:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
3802:Middlewares/Third_Party/FatFs/src/ff.c **** }
3803:Middlewares/Third_Party/FatFs/src/ff.c **** 
3804:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
3805:Middlewares/Third_Party/FatFs/src/ff.c **** 
3806:Middlewares/Third_Party/FatFs/src/ff.c **** 
3807:Middlewares/Third_Party/FatFs/src/ff.c **** 
3808:Middlewares/Third_Party/FatFs/src/ff.c **** 
3809:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3810:Middlewares/Third_Party/FatFs/src/ff.c **** /* Close File                                                            */
3811:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3812:Middlewares/Third_Party/FatFs/src/ff.c **** 
3813:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_close (
3814:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp		/* Pointer to the file object to be closed */
3815:Middlewares/Third_Party/FatFs/src/ff.c **** )
3816:Middlewares/Third_Party/FatFs/src/ff.c **** {
3817:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3818:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
ARM GAS  /tmp/ccWTW02a.s 			page 100


3819:Middlewares/Third_Party/FatFs/src/ff.c **** 
3820:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3821:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = f_sync(fp);					/* Flush cached data */
3822:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK)
3823:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3824:Middlewares/Third_Party/FatFs/src/ff.c **** 	{
3825:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = validate(&fp->obj, &fs);	/* Lock volume */
3826:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3827:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
3828:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dec_lock(fp->obj.lockid);	/* Decrement file open counter */
3829:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK)
3830:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3831:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
3832:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.fs = 0;			/* Invalidate file object */
3833:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3834:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
3835:Middlewares/Third_Party/FatFs/src/ff.c **** 			unlock_fs(fs, FR_OK);		/* Unlock volume */
3836:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3837:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3838:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3839:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
3840:Middlewares/Third_Party/FatFs/src/ff.c **** }
3841:Middlewares/Third_Party/FatFs/src/ff.c **** 
3842:Middlewares/Third_Party/FatFs/src/ff.c **** 
3843:Middlewares/Third_Party/FatFs/src/ff.c **** 
3844:Middlewares/Third_Party/FatFs/src/ff.c **** 
3845:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH >= 1
3846:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3847:Middlewares/Third_Party/FatFs/src/ff.c **** /* Change Current Directory or Current Drive, Get Current Directory      */
3848:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3849:Middlewares/Third_Party/FatFs/src/ff.c **** 
3850:Middlewares/Third_Party/FatFs/src/ff.c **** #if _VOLUMES >= 2
3851:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_chdrive (
3852:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path		/* Drive number */
3853:Middlewares/Third_Party/FatFs/src/ff.c **** )
3854:Middlewares/Third_Party/FatFs/src/ff.c **** {
3855:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
3856:Middlewares/Third_Party/FatFs/src/ff.c **** 
3857:Middlewares/Third_Party/FatFs/src/ff.c **** 
3858:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3859:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(&path);
3860:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
3861:Middlewares/Third_Party/FatFs/src/ff.c **** 
3862:Middlewares/Third_Party/FatFs/src/ff.c **** 	CurrVol = (BYTE)vol;	/* Set it as current volume */
3863:Middlewares/Third_Party/FatFs/src/ff.c **** 
3864:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
3865:Middlewares/Third_Party/FatFs/src/ff.c **** }
3866:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3867:Middlewares/Third_Party/FatFs/src/ff.c **** 
3868:Middlewares/Third_Party/FatFs/src/ff.c **** 
3869:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_chdir (
3870:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path	/* Pointer to the directory path */
3871:Middlewares/Third_Party/FatFs/src/ff.c **** )
3872:Middlewares/Third_Party/FatFs/src/ff.c **** {
3873:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3874:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3875:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
ARM GAS  /tmp/ccWTW02a.s 			page 101


3876:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
3877:Middlewares/Third_Party/FatFs/src/ff.c **** 
3878:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
3879:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, 0);
3880:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3881:Middlewares/Third_Party/FatFs/src/ff.c **** 		dj.obj.fs = fs;
3882:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
3883:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the path */
3884:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {					/* Follow completed */
3885:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {
3886:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->cdir = dj.obj.sclust;	/* It is the start directory itself */
3887:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3888:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->fs_type == FS_EXFAT) {
3889:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->cdc_scl = dj.obj.c_scl;
3890:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->cdc_size = dj.obj.c_size;
3891:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->cdc_ofs = dj.obj.c_ofs;
3892:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3893:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3894:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
3895:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.obj.attr & AM_DIR) {	/* It is a sub-directory */
3896:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3897:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fs->fs_type == FS_EXFAT) {
3898:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->cdir = ld_dword(fs->dirbuf + XDIR_FstClus);		/* Sub-directory cluster */
3899:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->cdc_scl = dj.obj.sclust;						/* Save containing directory information */
3900:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->cdc_size = ((DWORD)dj.obj.objsize & 0xFFFFFF00) | dj.obj.stat;
3901:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->cdc_ofs = dj.blk_ofs;
3902:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
3903:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3904:Middlewares/Third_Party/FatFs/src/ff.c **** 					{
3905:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->cdir = ld_clust(fs, dj.dir);					/* Sub-directory cluster */
3906:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3907:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
3908:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_PATH;		/* Reached but a file */
3909:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3910:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3911:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3912:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
3913:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
3914:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3915:Middlewares/Third_Party/FatFs/src/ff.c **** 
3916:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
3917:Middlewares/Third_Party/FatFs/src/ff.c **** }
3918:Middlewares/Third_Party/FatFs/src/ff.c **** 
3919:Middlewares/Third_Party/FatFs/src/ff.c **** 
3920:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH >= 2
3921:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_getcwd (
3922:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR* buff,	/* Pointer to the directory path */
3923:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT len		/* Size of path */
3924:Middlewares/Third_Party/FatFs/src/ff.c **** )
3925:Middlewares/Third_Party/FatFs/src/ff.c **** {
3926:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3927:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3928:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3929:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, n;
3930:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ccl;
3931:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR *tp;
3932:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO fno;
ARM GAS  /tmp/ccWTW02a.s 			page 102


3933:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
3934:Middlewares/Third_Party/FatFs/src/ff.c **** 
3935:Middlewares/Third_Party/FatFs/src/ff.c **** 
3936:Middlewares/Third_Party/FatFs/src/ff.c **** 	*buff = 0;
3937:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
3938:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume((const TCHAR**)&buff, &fs, 0);	/* Get current volume */
3939:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3940:Middlewares/Third_Party/FatFs/src/ff.c **** 		dj.obj.fs = fs;
3941:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
3942:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = len;			/* Bottom of buffer (directory stack base) */
3943:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {	/* (Cannot do getcwd on exFAT and returns root path)
3944:Middlewares/Third_Party/FatFs/src/ff.c **** 			dj.obj.sclust = fs->cdir;				/* Start to follow upper directory from current directory */
3945:Middlewares/Third_Party/FatFs/src/ff.c **** 			while ((ccl = dj.obj.sclust) != 0) {	/* Repeat while current directory is a sub-directory */
3946:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_sdi(&dj, 1 * SZDIRE);	/* Get parent directory */
3947:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res != FR_OK) break;
3948:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = move_window(fs, dj.sect);
3949:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res != FR_OK) break;
3950:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.obj.sclust = ld_clust(fs, dj.dir);	/* Goto parent directory */
3951:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_sdi(&dj, 0);
3952:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res != FR_OK) break;
3953:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {							/* Find the entry links to the child directory */
3954:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_read(&dj, 0);
3955:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res != FR_OK) break;
3956:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (ccl == ld_clust(fs, dj.dir)) break;	/* Found the entry */
3957:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_next(&dj, 0);
3958:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (res == FR_OK);
3959:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) res = FR_INT_ERR;/* It cannot be 'not found'. */
3960:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res != FR_OK) break;
3961:Middlewares/Third_Party/FatFs/src/ff.c **** 				get_fileinfo(&dj, &fno);		/* Get the directory name and push it to the buffer */
3962:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (n = 0; fno.fname[n]; n++) ;
3963:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i < n + 3) {
3964:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NOT_ENOUGH_CORE; break;
3965:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3966:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (n) buff[--i] = fno.fname[--n];
3967:Middlewares/Third_Party/FatFs/src/ff.c **** 				buff[--i] = '/';
3968:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3969:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3970:Middlewares/Third_Party/FatFs/src/ff.c **** 		tp = buff;
3971:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3972:Middlewares/Third_Party/FatFs/src/ff.c **** #if _VOLUMES >= 2
3973:Middlewares/Third_Party/FatFs/src/ff.c **** 			*tp++ = '0' + CurrVol;			/* Put drive number */
3974:Middlewares/Third_Party/FatFs/src/ff.c **** 			*tp++ = ':';
3975:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3976:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i == len) {					/* Root-directory */
3977:Middlewares/Third_Party/FatFs/src/ff.c **** 				*tp++ = '/';
3978:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {						/* Sub-directroy */
3979:Middlewares/Third_Party/FatFs/src/ff.c **** 				do		/* Add stacked path str */
3980:Middlewares/Third_Party/FatFs/src/ff.c **** 					*tp++ = buff[i++];
3981:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (i < len);
3982:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3983:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3984:Middlewares/Third_Party/FatFs/src/ff.c **** 		*tp = 0;
3985:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
3986:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3987:Middlewares/Third_Party/FatFs/src/ff.c **** 
3988:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
3989:Middlewares/Third_Party/FatFs/src/ff.c **** }
ARM GAS  /tmp/ccWTW02a.s 			page 103


3990:Middlewares/Third_Party/FatFs/src/ff.c **** 
3991:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_RPATH >= 2 */
3992:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_RPATH >= 1 */
3993:Middlewares/Third_Party/FatFs/src/ff.c **** 
3994:Middlewares/Third_Party/FatFs/src/ff.c **** 
3995:Middlewares/Third_Party/FatFs/src/ff.c **** 
3996:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
3997:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3998:Middlewares/Third_Party/FatFs/src/ff.c **** /* Seek File R/W Pointer                                                 */
3999:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4000:Middlewares/Third_Party/FatFs/src/ff.c **** 
4001:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_lseek (
4002:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,		/* Pointer to the file object */
4003:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t ofs		/* File pointer from top of file */
4004:Middlewares/Third_Party/FatFs/src/ff.c **** )
4005:Middlewares/Third_Party/FatFs/src/ff.c **** {
4006:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4007:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4008:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, bcs, nsect;
4009:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t ifptr;
4010:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
4011:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cl, pcl, ncl, tcl, dsc, tlen, ulen, *tbl;
4012:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4013:Middlewares/Third_Party/FatFs/src/ff.c **** 
4014:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);		/* Check validity of the file object */
4015:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) res = (FRESULT)fp->err;
4016:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT && !_FS_READONLY
4017:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK && fs->fs_type == FS_EXFAT) {
4018:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = fill_last_frag(&fp->obj, fp->clust, 0xFFFFFFFF);	/* Fill last fragment on the FAT if needed
4019:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4020:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4021:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fs, res);
4022:Middlewares/Third_Party/FatFs/src/ff.c **** 
4023:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
4024:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->cltbl) {	/* Fast seek */
4025:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs == CREATE_LINKMAP) {	/* Create CLMT */
4026:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl = fp->cltbl;
4027:Middlewares/Third_Party/FatFs/src/ff.c **** 			tlen = *tbl++; ulen = 2;	/* Given table size and required table size */
4028:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->obj.sclust;		/* Origin of the chain */
4029:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cl) {
4030:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
4031:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Get a fragment */
4032:Middlewares/Third_Party/FatFs/src/ff.c **** 					tcl = cl; ncl = 0; ulen += 2;	/* Top, length and used items */
4033:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
4034:Middlewares/Third_Party/FatFs/src/ff.c **** 						pcl = cl; ncl++;
4035:Middlewares/Third_Party/FatFs/src/ff.c **** 						cl = get_fat(&fp->obj, cl);
4036:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl <= 1) ABORT(fs, FR_INT_ERR);
4037:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
4038:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
4039:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
4040:Middlewares/Third_Party/FatFs/src/ff.c **** 						*tbl++ = ncl; *tbl++ = tcl;
4041:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4042:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (cl < fs->n_fatent);	/* Repeat until end of chain */
4043:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4044:Middlewares/Third_Party/FatFs/src/ff.c **** 			*fp->cltbl = ulen;	/* Number of items used */
4045:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ulen <= tlen) {
4046:Middlewares/Third_Party/FatFs/src/ff.c **** 				*tbl = 0;		/* Terminate table */
ARM GAS  /tmp/ccWTW02a.s 			page 104


4047:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
4048:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NOT_ENOUGH_CORE;	/* Given table size is smaller than required */
4049:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4050:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {						/* Fast seek */
4051:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs > fp->obj.objsize) ofs = fp->obj.objsize;	/* Clip offset at the file size */
4052:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = ofs;				/* Set file pointer */
4053:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs) {
4054:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clmt_clust(fp, ofs - 1);
4055:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(fs, fp->clust);
4056:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!dsc) ABORT(fs, FR_INT_ERR);
4057:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (DWORD)((ofs - 1) / SS(fs)) & (fs->csize - 1);
4058:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr % SS(fs) && dsc != fp->sect) {	/* Refill sector cache if needed */
4059:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
4060:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
4061:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fp->flag & FA_DIRTY) {		/* Write-back dirty sector cache */
4062:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
4063:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
4064:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4065:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4066:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (disk_read(fs->drv, fp->buf, dsc, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);	/* Load current sec
4067:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4068:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->sect = dsc;
4069:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4070:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4071:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4072:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
4073:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4074:Middlewares/Third_Party/FatFs/src/ff.c **** 
4075:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Normal Seek */
4076:Middlewares/Third_Party/FatFs/src/ff.c **** 	{
4077:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4078:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->fs_type != FS_EXFAT && ofs >= 0x100000000) ofs = 0xFFFFFFFF;	/* Clip at 4GiB-1 if at FATx
4079:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4080:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs > fp->obj.objsize && (_FS_READONLY || !(fp->flag & FA_WRITE))) {	/* In read-only mode, cl
4081:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs = fp->obj.objsize;
4082:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4083:Middlewares/Third_Party/FatFs/src/ff.c **** 		ifptr = fp->fptr;
4084:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->fptr = nsect = 0;
4085:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs) {
4086:Middlewares/Third_Party/FatFs/src/ff.c **** 			bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size (byte) */
4087:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ifptr > 0 &&
4088:Middlewares/Third_Party/FatFs/src/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
4089:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = (ifptr - 1) & ~(FSIZE_t)(bcs - 1);	/* start from the current cluster */
4090:Middlewares/Third_Party/FatFs/src/ff.c **** 				ofs -= fp->fptr;
4091:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->clust;
4092:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {									/* When seek to back cluster, */
4093:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->obj.sclust;					/* start from the first cluster */
4094:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
4095:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0) {						/* If no cluster chain, create a new chain */
4096:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = create_chain(&fp->obj, 0);
4097:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) ABORT(fs, FR_INT_ERR);
4098:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
4099:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = clst;
4100:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4101:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4102:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;
4103:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
ARM GAS  /tmp/ccWTW02a.s 			page 105


4104:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst != 0) {
4105:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
4106:Middlewares/Third_Party/FatFs/src/ff.c **** 					ofs -= bcs; fp->fptr += bcs;
4107:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
4108:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fp->flag & FA_WRITE) {			/* Check if in write mode or not */
4109:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (_FS_EXFAT && fp->fptr > fp->obj.objsize) {	/* No FAT chain object needs correct objsize t
4110:Middlewares/Third_Party/FatFs/src/ff.c **** 							fp->obj.objsize = fp->fptr;
4111:Middlewares/Third_Party/FatFs/src/ff.c **** 							fp->flag |= FA_MODIFIED;
4112:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4113:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(&fp->obj, clst);	/* Follow chain with forceed stretch */
4114:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (clst == 0) {				/* Clip file size in case of disk full */
4115:Middlewares/Third_Party/FatFs/src/ff.c **** 							ofs = 0; break;
4116:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4117:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
4118:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4119:Middlewares/Third_Party/FatFs/src/ff.c **** 					{
4120:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = get_fat(&fp->obj, clst);	/* Follow cluster chain if not in write mode */
4121:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4122:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
4124:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
4125:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4126:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr += ofs;
4127:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ofs % SS(fs)) {
4128:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect = clust2sect(fs, clst);	/* Current sector */
4129:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!nsect) ABORT(fs, FR_INT_ERR);
4130:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
4131:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4132:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4133:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4134:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!_FS_READONLY && fp->fptr > fp->obj.objsize) {		/* Set file change flag if the file size is e
4135:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.objsize = fp->fptr;
4136:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag |= FA_MODIFIED;
4137:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4138:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) && nsect != fp->sect) {	/* Fill sector cache if needed */
4139:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
4140:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
4141:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->flag & FA_DIRTY) {			/* Write-back dirty sector cache */
4142:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
4143:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
4144:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4145:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4146:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_read(fs->drv, fp->buf, nsect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);	/* Fill sector cach
4147:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4148:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->sect = nsect;
4149:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4150:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4151:Middlewares/Third_Party/FatFs/src/ff.c **** 
4152:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4153:Middlewares/Third_Party/FatFs/src/ff.c **** }
4154:Middlewares/Third_Party/FatFs/src/ff.c **** 
4155:Middlewares/Third_Party/FatFs/src/ff.c **** 
4156:Middlewares/Third_Party/FatFs/src/ff.c **** 
4157:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 1
4158:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4159:Middlewares/Third_Party/FatFs/src/ff.c **** /* Create a Directory Object                                             */
4160:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  /tmp/ccWTW02a.s 			page 106


4161:Middlewares/Third_Party/FatFs/src/ff.c **** 
4162:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_opendir (
4163:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Pointer to directory object to create */
4164:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path	/* Pointer to the directory path */
4165:Middlewares/Third_Party/FatFs/src/ff.c **** )
4166:Middlewares/Third_Party/FatFs/src/ff.c **** {
4167:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4168:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4169:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID *obj;
4170:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4171:Middlewares/Third_Party/FatFs/src/ff.c **** 
4172:Middlewares/Third_Party/FatFs/src/ff.c **** 
4173:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp) return FR_INVALID_OBJECT;
4174:Middlewares/Third_Party/FatFs/src/ff.c **** 
4175:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
4176:Middlewares/Third_Party/FatFs/src/ff.c **** 	obj = &dp->obj;
4177:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, 0);
4178:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4179:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->fs = fs;
4180:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
4181:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
4182:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
4183:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(dp->fn[NSFLAG] & NS_NONAME)) {	/* It is not the origin directory itself */
4184:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (obj->attr & AM_DIR) {		/* This object is a sub-directory */
4185:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4186:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fs->fs_type == FS_EXFAT) {
4187:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->c_scl = obj->sclust;							/* Get containing directory inforamation */
4188:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->c_size = ((DWORD)obj->objsize & 0xFFFFFF00) | obj->stat;
4189:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->c_ofs = dp->blk_ofs;
4190:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->sclust = ld_dword(fs->dirbuf + XDIR_FstClus);	/* Get object allocation info */
4191:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->objsize = ld_qword(fs->dirbuf + XDIR_FileSize);
4192:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->stat = fs->dirbuf[XDIR_GenFlags] & 2;
4193:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
4194:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4195:Middlewares/Third_Party/FatFs/src/ff.c **** 					{
4196:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->sclust = ld_clust(fs, dp->dir);	/* Get object allocation info */
4197:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4198:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {						/* This object is a file */
4199:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_PATH;
4200:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4201:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4202:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
4203:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->id = fs->id;
4204:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
4205:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
4206:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
4207:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (obj->sclust) {
4208:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->lockid = inc_lock(dp, 0);	/* Lock the sub directory */
4209:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!obj->lockid) res = FR_TOO_MANY_OPEN_FILES;
4210:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
4211:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->lockid = 0;	/* Root directory need not to be locked */
4212:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4213:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4214:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4215:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4216:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4217:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
ARM GAS  /tmp/ccWTW02a.s 			page 107


4218:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
4219:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4220:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) obj->fs = 0;		/* Invalidate the directory object if function faild */
4221:Middlewares/Third_Party/FatFs/src/ff.c **** 
4222:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4223:Middlewares/Third_Party/FatFs/src/ff.c **** }
4224:Middlewares/Third_Party/FatFs/src/ff.c **** 
4225:Middlewares/Third_Party/FatFs/src/ff.c **** 
4226:Middlewares/Third_Party/FatFs/src/ff.c **** 
4227:Middlewares/Third_Party/FatFs/src/ff.c **** 
4228:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4229:Middlewares/Third_Party/FatFs/src/ff.c **** /* Close Directory                                                       */
4230:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4231:Middlewares/Third_Party/FatFs/src/ff.c **** 
4232:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_closedir (
4233:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR *dp		/* Pointer to the directory object to be closed */
4234:Middlewares/Third_Party/FatFs/src/ff.c **** )
4235:Middlewares/Third_Party/FatFs/src/ff.c **** {
4236:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4237:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4238:Middlewares/Third_Party/FatFs/src/ff.c **** 
4239:Middlewares/Third_Party/FatFs/src/ff.c **** 
4240:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&dp->obj, &fs);			/* Check validity of the file object */
4241:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4242:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
4243:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (dp->obj.lockid) {				/* Decrement sub-directory open counter */
4244:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dec_lock(dp->obj.lockid);
4245:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4246:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK)
4247:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4248:Middlewares/Third_Party/FatFs/src/ff.c **** 		{
4249:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->obj.fs = 0;			/* Invalidate directory object */
4250:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4251:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
4252:Middlewares/Third_Party/FatFs/src/ff.c **** 		unlock_fs(fs, FR_OK);		/* Unlock volume */
4253:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4254:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4255:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
4256:Middlewares/Third_Party/FatFs/src/ff.c **** }
4257:Middlewares/Third_Party/FatFs/src/ff.c **** 
4258:Middlewares/Third_Party/FatFs/src/ff.c **** 
4259:Middlewares/Third_Party/FatFs/src/ff.c **** 
4260:Middlewares/Third_Party/FatFs/src/ff.c **** 
4261:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4262:Middlewares/Third_Party/FatFs/src/ff.c **** /* Read Directory Entries in Sequence                                    */
4263:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4264:Middlewares/Third_Party/FatFs/src/ff.c **** 
4265:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_readdir (
4266:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Pointer to the open directory object */
4267:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno		/* Pointer to file information to return */
4268:Middlewares/Third_Party/FatFs/src/ff.c **** )
4269:Middlewares/Third_Party/FatFs/src/ff.c **** {
4270:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4271:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4272:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4273:Middlewares/Third_Party/FatFs/src/ff.c **** 
4274:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  /tmp/ccWTW02a.s 			page 108


4275:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&dp->obj, &fs);	/* Check validity of the directory object */
4276:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4277:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!fno) {
4278:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_sdi(dp, 0);			/* Rewind the directory object */
4279:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
4280:Middlewares/Third_Party/FatFs/src/ff.c **** 			INIT_NAMBUF(fs);
4281:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_read(dp, 0);			/* Read an item */
4282:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory */
4283:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {				/* A valid entry is found */
4284:Middlewares/Third_Party/FatFs/src/ff.c **** 				get_fileinfo(dp, fno);		/* Get the object information */
4285:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_next(dp, 0);		/* Increment index for next */
4286:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory now */
4287:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4288:Middlewares/Third_Party/FatFs/src/ff.c **** 			FREE_NAMBUF();
4289:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4290:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4291:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4292:Middlewares/Third_Party/FatFs/src/ff.c **** }
4293:Middlewares/Third_Party/FatFs/src/ff.c **** 
4294:Middlewares/Third_Party/FatFs/src/ff.c **** 
4295:Middlewares/Third_Party/FatFs/src/ff.c **** 
4296:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FIND
4297:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4298:Middlewares/Third_Party/FatFs/src/ff.c **** /* Find Next File                                                        */
4299:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4300:Middlewares/Third_Party/FatFs/src/ff.c **** 
4301:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_findnext (
4302:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to the open directory object */
4303:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno	/* Pointer to the file information structure */
4304:Middlewares/Third_Party/FatFs/src/ff.c **** )
4305:Middlewares/Third_Party/FatFs/src/ff.c **** {
4306:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4307:Middlewares/Third_Party/FatFs/src/ff.c **** 
4308:Middlewares/Third_Party/FatFs/src/ff.c **** 
4309:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
4310:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = f_readdir(dp, fno);		/* Get a directory item */
4311:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK || !fno || !fno->fname[0]) break;	/* Terminate if any error or end of directory 
4312:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (pattern_matching(dp->pat, fno->fname, 0, 0)) break;		/* Test for the file name */
4313:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0 && _USE_FIND == 2
4314:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (pattern_matching(dp->pat, fno->altname, 0, 0)) break;	/* Test for alternative name if exist *
4315:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4316:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4317:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
4318:Middlewares/Third_Party/FatFs/src/ff.c **** }
4319:Middlewares/Third_Party/FatFs/src/ff.c **** 
4320:Middlewares/Third_Party/FatFs/src/ff.c **** 
4321:Middlewares/Third_Party/FatFs/src/ff.c **** 
4322:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4323:Middlewares/Third_Party/FatFs/src/ff.c **** /* Find First File                                                       */
4324:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4325:Middlewares/Third_Party/FatFs/src/ff.c **** 
4326:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_findfirst (
4327:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,				/* Pointer to the blank directory object */
4328:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno,			/* Pointer to the file information structure */
4329:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,		/* Pointer to the directory to open */
4330:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* pattern	/* Pointer to the matching pattern */
4331:Middlewares/Third_Party/FatFs/src/ff.c **** )
ARM GAS  /tmp/ccWTW02a.s 			page 109


4332:Middlewares/Third_Party/FatFs/src/ff.c **** {
4333:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4334:Middlewares/Third_Party/FatFs/src/ff.c **** 
4335:Middlewares/Third_Party/FatFs/src/ff.c **** 
4336:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->pat = pattern;		/* Save pointer to pattern string */
4337:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = f_opendir(dp, path);		/* Open the target directory */
4338:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4339:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = f_findnext(dp, fno);	/* Find the first item */
4340:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4341:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
4342:Middlewares/Third_Party/FatFs/src/ff.c **** }
4343:Middlewares/Third_Party/FatFs/src/ff.c **** 
4344:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _USE_FIND */
4345:Middlewares/Third_Party/FatFs/src/ff.c **** 
4346:Middlewares/Third_Party/FatFs/src/ff.c **** 
4347:Middlewares/Third_Party/FatFs/src/ff.c **** 
4348:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE == 0
4349:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4350:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get File Status                                                       */
4351:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4352:Middlewares/Third_Party/FatFs/src/ff.c **** 
4353:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_stat (
4354:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Pointer to the file path */
4355:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno		/* Pointer to file information to return */
4356:Middlewares/Third_Party/FatFs/src/ff.c **** )
4357:Middlewares/Third_Party/FatFs/src/ff.c **** {
4358:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4359:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
4360:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4361:Middlewares/Third_Party/FatFs/src/ff.c **** 
4362:Middlewares/Third_Party/FatFs/src/ff.c **** 
4363:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
4364:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &dj.obj.fs, 0);
4365:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4366:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(dj.obj.fs);
4367:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
4368:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
4369:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* It is origin directory */
4370:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
4371:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {							/* Found an object */
4372:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fno) get_fileinfo(&dj, fno);
4373:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4374:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4375:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
4376:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4377:Middlewares/Third_Party/FatFs/src/ff.c **** 
4378:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dj.obj.fs, res);
4379:Middlewares/Third_Party/FatFs/src/ff.c **** }
4380:Middlewares/Third_Party/FatFs/src/ff.c **** 
4381:Middlewares/Third_Party/FatFs/src/ff.c **** 
4382:Middlewares/Third_Party/FatFs/src/ff.c **** 
4383:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
4384:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4385:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get Number of Free Clusters                                           */
4386:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4387:Middlewares/Third_Party/FatFs/src/ff.c **** 
4388:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_getfree (
ARM GAS  /tmp/ccWTW02a.s 			page 110


4389:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Path name of the logical drive number */
4390:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD* nclst,		/* Pointer to a variable to return number of free clusters */
4391:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS** fatfs		/* Pointer to return pointer to corresponding file system object */
4392:Middlewares/Third_Party/FatFs/src/ff.c **** )
4393:Middlewares/Third_Party/FatFs/src/ff.c **** {
4394:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4395:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4396:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD nfree, clst, sect, stat;
4397:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
4398:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *p;
4399:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID obj;
4400:Middlewares/Third_Party/FatFs/src/ff.c **** 
4401:Middlewares/Third_Party/FatFs/src/ff.c **** 
4402:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
4403:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, 0);
4404:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4405:Middlewares/Third_Party/FatFs/src/ff.c **** 		*fatfs = fs;				/* Return ptr to the fs object */
4406:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* If free_clst is valid, return it without full cluster scan */
4407:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->free_clst <= fs->n_fatent - 2) {
4408:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = fs->free_clst;
4409:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
4410:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Get number of free clusters */
4411:Middlewares/Third_Party/FatFs/src/ff.c **** 			nfree = 0;
4412:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_FAT12) {	/* FAT12: Sector unalighed FAT entries */
4413:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = 2; obj.fs = fs;
4414:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
4415:Middlewares/Third_Party/FatFs/src/ff.c **** 					stat = get_fat(&obj, clst);
4416:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
4417:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
4418:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0) nfree++;
4419:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (++clst < fs->n_fatent);
4420:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
4421:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4422:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->fs_type == FS_EXFAT) {	/* exFAT: Scan bitmap table */
4423:Middlewares/Third_Party/FatFs/src/ff.c **** 					BYTE bm;
4424:Middlewares/Third_Party/FatFs/src/ff.c **** 					UINT b;
4425:Middlewares/Third_Party/FatFs/src/ff.c **** 
4426:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fs->n_fatent - 2;
4427:Middlewares/Third_Party/FatFs/src/ff.c **** 					sect = fs->database;
4428:Middlewares/Third_Party/FatFs/src/ff.c **** 					i = 0;
4429:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
4430:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (i == 0 && (res = move_window(fs, sect++)) != FR_OK) break;
4431:Middlewares/Third_Party/FatFs/src/ff.c **** 						for (b = 8, bm = fs->win[i]; b && clst; b--, clst--) {
4432:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (!(bm & 1)) nfree++;
4433:Middlewares/Third_Party/FatFs/src/ff.c **** 							bm >>= 1;
4434:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4435:Middlewares/Third_Party/FatFs/src/ff.c **** 						i = (i + 1) % SS(fs);
4436:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (clst);
4437:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else
4438:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4439:Middlewares/Third_Party/FatFs/src/ff.c **** 				{	/* FAT16/32: Sector alighed FAT entries */
4440:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fs->n_fatent; sect = fs->fatbase;
4441:Middlewares/Third_Party/FatFs/src/ff.c **** 					i = 0; p = 0;
4442:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
4443:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (i == 0) {
4444:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = move_window(fs, sect++);
4445:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res != FR_OK) break;
ARM GAS  /tmp/ccWTW02a.s 			page 111


4446:Middlewares/Third_Party/FatFs/src/ff.c **** 							p = fs->win;
4447:Middlewares/Third_Party/FatFs/src/ff.c **** 							i = SS(fs);
4448:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4449:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (fs->fs_type == FS_FAT16) {
4450:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (ld_word(p) == 0) nfree++;
4451:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 2; i -= 2;
4452:Middlewares/Third_Party/FatFs/src/ff.c **** 						} else {
4453:Middlewares/Third_Party/FatFs/src/ff.c **** 							if ((ld_dword(p) & 0x0FFFFFFF) == 0) nfree++;
4454:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 4; i -= 4;
4455:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4456:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (--clst);
4457:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4458:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4459:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = nfree;			/* Return the free clusters */
4460:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clst = nfree;	/* Now free_clst is valid */
4461:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;		/* FSInfo is to be updated */
4462:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4463:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4464:Middlewares/Third_Party/FatFs/src/ff.c **** 
4465:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4466:Middlewares/Third_Party/FatFs/src/ff.c **** }
4467:Middlewares/Third_Party/FatFs/src/ff.c **** 
4468:Middlewares/Third_Party/FatFs/src/ff.c **** 
4469:Middlewares/Third_Party/FatFs/src/ff.c **** 
4470:Middlewares/Third_Party/FatFs/src/ff.c **** 
4471:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4472:Middlewares/Third_Party/FatFs/src/ff.c **** /* Truncate File                                                         */
4473:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4474:Middlewares/Third_Party/FatFs/src/ff.c **** 
4475:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_truncate (
4476:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp		/* Pointer to the file object */
4477:Middlewares/Third_Party/FatFs/src/ff.c **** )
4478:Middlewares/Third_Party/FatFs/src/ff.c **** {
4479:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4480:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4481:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ncl;
4482:Middlewares/Third_Party/FatFs/src/ff.c **** 
4483:Middlewares/Third_Party/FatFs/src/ff.c **** 
4484:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);	/* Check validity of the file object */
4485:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
4486:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
4487:Middlewares/Third_Party/FatFs/src/ff.c **** 
4488:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->fptr < fp->obj.objsize) {	/* Process when fptr is not on the eof */
4489:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
4490:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = remove_chain(&fp->obj, fp->obj.sclust, 0);
4491:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.sclust = 0;
4492:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {				/* When truncate a part of the file, remove remaining clusters */
4493:Middlewares/Third_Party/FatFs/src/ff.c **** 			ncl = get_fat(&fp->obj, fp->clust);
4494:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
4495:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == 0xFFFFFFFF) res = FR_DISK_ERR;
4496:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == 1) res = FR_INT_ERR;
4497:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK && ncl < fs->n_fatent) {
4498:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = remove_chain(&fp->obj, ncl, fp->clust);
4499:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4500:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4501:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->obj.objsize = fp->fptr;	/* Set file size to current R/W point */
4502:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->flag |= FA_MODIFIED;
ARM GAS  /tmp/ccWTW02a.s 			page 112


4503:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
4504:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && (fp->flag & FA_DIRTY)) {
4505:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) {
4506:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_DISK_ERR;
4507:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
4508:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
4509:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4510:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4511:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4512:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) ABORT(fs, res);
4513:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4514:Middlewares/Third_Party/FatFs/src/ff.c **** 
4515:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4516:Middlewares/Third_Party/FatFs/src/ff.c **** }
4517:Middlewares/Third_Party/FatFs/src/ff.c **** 
4518:Middlewares/Third_Party/FatFs/src/ff.c **** 
4519:Middlewares/Third_Party/FatFs/src/ff.c **** 
4520:Middlewares/Third_Party/FatFs/src/ff.c **** 
4521:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4522:Middlewares/Third_Party/FatFs/src/ff.c **** /* Delete a File/Directory                                               */
4523:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4524:Middlewares/Third_Party/FatFs/src/ff.c **** 
4525:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_unlink (
4526:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path		/* Pointer to the file or directory path */
4527:Middlewares/Third_Party/FatFs/src/ff.c **** )
4528:Middlewares/Third_Party/FatFs/src/ff.c **** {
4529:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4530:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj, sdj;
4531:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dclst = 0;
4532:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4533:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4534:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID obj;
4535:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4536:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4537:Middlewares/Third_Party/FatFs/src/ff.c **** 
4538:Middlewares/Third_Party/FatFs/src/ff.c **** 
4539:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
4540:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, FA_WRITE);
4541:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
4542:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4543:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
4544:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
4545:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT)) {
4546:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;			/* Cannot remove dot entry */
4547:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4548:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
4549:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) res = chk_lock(&dj, 2);	/* Check if it is an open object */
4550:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4551:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {					/* The object is accessible */
4552:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {
4553:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
4554:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
4555:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.obj.attr & AM_RDO) {
4556:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
4557:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4558:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4559:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
ARM GAS  /tmp/ccWTW02a.s 			page 113


4560:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4561:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj.fs = fs;
4562:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->fs_type == FS_EXFAT) {
4563:Middlewares/Third_Party/FatFs/src/ff.c **** 					obj.sclust = dclst = ld_dword(fs->dirbuf + XDIR_FstClus);
4564:Middlewares/Third_Party/FatFs/src/ff.c **** 					obj.objsize = ld_qword(fs->dirbuf + XDIR_FileSize);
4565:Middlewares/Third_Party/FatFs/src/ff.c **** 					obj.stat = fs->dirbuf[XDIR_GenFlags] & 2;
4566:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else
4567:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4568:Middlewares/Third_Party/FatFs/src/ff.c **** 				{
4569:Middlewares/Third_Party/FatFs/src/ff.c **** 					dclst = ld_clust(fs, dj.dir);
4570:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4571:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.obj.attr & AM_DIR) {			/* Is it a sub-directory? */
4572:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
4573:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (dclst == fs->cdir) {		 		/* Is it the current directory? */
4574:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_DENIED;
4575:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
4576:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4577:Middlewares/Third_Party/FatFs/src/ff.c **** 					{
4578:Middlewares/Third_Party/FatFs/src/ff.c **** 						sdj.obj.fs = fs;						/* Open the sub-directory */
4579:Middlewares/Third_Party/FatFs/src/ff.c **** 						sdj.obj.sclust = dclst;
4580:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4581:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (fs->fs_type == FS_EXFAT) {
4582:Middlewares/Third_Party/FatFs/src/ff.c **** 							sdj.obj.objsize = obj.objsize;
4583:Middlewares/Third_Party/FatFs/src/ff.c **** 							sdj.obj.stat = obj.stat;
4584:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4585:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4586:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = dir_sdi(&sdj, 0);
4587:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
4588:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = dir_read(&sdj, 0);			/* Read an item */
4589:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? */
4590:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? */
4591:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4592:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4593:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4594:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4595:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
4596:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_remove(&dj);			/* Remove the directory entry */
4597:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && dclst) {	/* Remove the cluster chain if exist */
4598:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4599:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = remove_chain(&obj, dclst, 0);
4600:Middlewares/Third_Party/FatFs/src/ff.c **** #else
4601:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = remove_chain(&dj.obj, dclst, 0);
4602:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4603:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4604:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) res = sync_fs(fs);
4605:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4606:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4607:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
4608:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4609:Middlewares/Third_Party/FatFs/src/ff.c **** 
4610:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4611:Middlewares/Third_Party/FatFs/src/ff.c **** }
4612:Middlewares/Third_Party/FatFs/src/ff.c **** 
4613:Middlewares/Third_Party/FatFs/src/ff.c **** 
4614:Middlewares/Third_Party/FatFs/src/ff.c **** 
4615:Middlewares/Third_Party/FatFs/src/ff.c **** 
4616:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  /tmp/ccWTW02a.s 			page 114


4617:Middlewares/Third_Party/FatFs/src/ff.c **** /* Create a Directory                                                    */
4618:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4619:Middlewares/Third_Party/FatFs/src/ff.c **** 
4620:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_mkdir (
4621:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path		/* Pointer to the directory path */
4622:Middlewares/Third_Party/FatFs/src/ff.c **** )
4623:Middlewares/Third_Party/FatFs/src/ff.c **** {
4624:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4625:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
4626:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4627:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir;
4628:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n;
4629:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dsc, dcl, pcl, tm;
4630:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4631:Middlewares/Third_Party/FatFs/src/ff.c **** 
4632:Middlewares/Third_Party/FatFs/src/ff.c **** 
4633:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
4634:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, FA_WRITE);
4635:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
4636:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4637:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
4638:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
4639:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
4640:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT)) {
4641:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;
4642:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4643:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) {				/* Can create a new directory */
4644:Middlewares/Third_Party/FatFs/src/ff.c **** 			dcl = create_chain(&dj.obj, 0);		/* Allocate a cluster for the new directory table */
4645:Middlewares/Third_Party/FatFs/src/ff.c **** 			dj.obj.objsize = (DWORD)fs->csize * SS(fs);
4646:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
4647:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0) res = FR_DENIED;		/* No space to allocate a new cluster */
4648:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;
4649:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
4650:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) res = sync_window(fs);	/* Flush FAT */
4651:Middlewares/Third_Party/FatFs/src/ff.c **** 			tm = GET_FATTIME();
4652:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {					/* Initialize the new directory table */
4653:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(fs, dcl);
4654:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir = fs->win;
4655:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(dir, 0, SS(fs));
4656:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
4657:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(dir + DIR_Name, ' ', 11);	/* Create "." entry */
4658:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Name] = '.';
4659:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Attr] = AM_DIR;
4660:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_ModTime, tm);
4661:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir, dcl);
4662:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(dir + SZDIRE, dir, SZDIRE); 	/* Create ".." entry */
4663:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[SZDIRE + 1] = '.'; pcl = dj.obj.sclust;
4664:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fs->fs_type == FS_FAT32 && pcl == fs->dirbase) pcl = 0;
4665:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir + SZDIRE, pcl);
4666:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4667:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (n = fs->csize; n; n--) {	/* Write dot entries and clear following sectors */
4668:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->winsect = dsc++;
4669:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
4670:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_window(fs);
4671:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res != FR_OK) break;
4672:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(dir, 0, SS(fs));
4673:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
ARM GAS  /tmp/ccWTW02a.s 			page 115


4674:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4675:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
4676:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_register(&dj);	/* Register the object to the directoy */
4677:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4678:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
4679:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4680:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->fs_type == FS_EXFAT) {	/* Initialize directory entry block */
4681:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(fs->dirbuf + XDIR_ModTime, tm);	/* Created time */
4682:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(fs->dirbuf + XDIR_FstClus, dcl);	/* Table start cluster */
4683:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(fs->dirbuf + XDIR_FileSize, (DWORD)dj.obj.objsize);	/* File size needs to be valid */
4684:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(fs->dirbuf + XDIR_ValidFileSize, (DWORD)dj.obj.objsize);
4685:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->dirbuf[XDIR_GenFlags] = 3;				/* Initialize the object flag (contiguous) */
4686:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->dirbuf[XDIR_Attr] = AM_DIR;				/* Attribute */
4687:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = store_xdir(&dj);
4688:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else
4689:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4690:Middlewares/Third_Party/FatFs/src/ff.c **** 				{
4691:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir = dj.dir;
4692:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_ModTime, tm);	/* Created time */
4693:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir, dcl);				/* Table start cluster */
4694:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Attr] = AM_DIR;				/* Attribute */
4695:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
4696:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4697:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
4698:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_fs(fs);
4699:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4700:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
4701:Middlewares/Third_Party/FatFs/src/ff.c **** 				remove_chain(&dj.obj, dcl, 0);		/* Could not register, remove cluster chain */
4702:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4703:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4704:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
4705:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4706:Middlewares/Third_Party/FatFs/src/ff.c **** 
4707:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4708:Middlewares/Third_Party/FatFs/src/ff.c **** }
4709:Middlewares/Third_Party/FatFs/src/ff.c **** 
4710:Middlewares/Third_Party/FatFs/src/ff.c **** 
4711:Middlewares/Third_Party/FatFs/src/ff.c **** 
4712:Middlewares/Third_Party/FatFs/src/ff.c **** 
4713:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4714:Middlewares/Third_Party/FatFs/src/ff.c **** /* Rename a File/Directory                                               */
4715:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4716:Middlewares/Third_Party/FatFs/src/ff.c **** 
4717:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_rename (
4718:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path_old,	/* Pointer to the object name to be renamed */
4719:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path_new	/* Pointer to the new name */
4720:Middlewares/Third_Party/FatFs/src/ff.c **** )
4721:Middlewares/Third_Party/FatFs/src/ff.c **** {
4722:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4723:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR djo, djn;
4724:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4725:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE buf[_FS_EXFAT ? SZDIRE * 2 : 24], *dir;
4726:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dw;
4727:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4728:Middlewares/Third_Party/FatFs/src/ff.c **** 
4729:Middlewares/Third_Party/FatFs/src/ff.c **** 
4730:Middlewares/Third_Party/FatFs/src/ff.c **** 	get_ldnumber(&path_new);						/* Snip drive number of new name off */
ARM GAS  /tmp/ccWTW02a.s 			page 116


4731:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path_old, &fs, FA_WRITE);	/* Get logical drive of the old object */
4732:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4733:Middlewares/Third_Party/FatFs/src/ff.c **** 		djo.obj.fs = fs;
4734:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
4735:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
4736:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && (djo.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check vali
4737:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
4738:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
4739:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = chk_lock(&djo, 2);
4740:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4741:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4742:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {						/* Object to be renamed is found */
4743:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4744:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_EXFAT) {	/* At exFAT */
4745:Middlewares/Third_Party/FatFs/src/ff.c **** 				BYTE nf, nn;
4746:Middlewares/Third_Party/FatFs/src/ff.c **** 				WORD nh;
4747:Middlewares/Third_Party/FatFs/src/ff.c **** 
4748:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(buf, fs->dirbuf, SZDIRE * 2);	/* Save 85+C0 entry of old object */
4749:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(&djn, &djo, sizeof djo);
4750:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = follow_path(&djn, path_new);		/* Make sure if new object name is not in use */
4751:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {						/* Is new name already in use by any other object? */
4752:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = (djn.obj.sclust == djo.obj.sclust && djn.dptr == djo.dptr) ? FR_NO_FILE : FR_EXIST;
4753:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4754:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) { 				/* It is a valid path and no name collision */
4755:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
4756:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
4757:Middlewares/Third_Party/FatFs/src/ff.c **** 						nf = fs->dirbuf[XDIR_NumSec]; nn = fs->dirbuf[XDIR_NumName];
4758:Middlewares/Third_Party/FatFs/src/ff.c **** 						nh = ld_word(fs->dirbuf + XDIR_NameHash);
4759:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_cpy(fs->dirbuf, buf, SZDIRE * 2);
4760:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->dirbuf[XDIR_NumSec] = nf; fs->dirbuf[XDIR_NumName] = nn;
4761:Middlewares/Third_Party/FatFs/src/ff.c **** 						st_word(fs->dirbuf + XDIR_NameHash, nh);
4762:Middlewares/Third_Party/FatFs/src/ff.c **** /* Start of critical section where an interruption can cause a cross-link */
4763:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = store_xdir(&djn);
4764:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4765:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4766:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else
4767:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4768:Middlewares/Third_Party/FatFs/src/ff.c **** 			{	/* At FAT12/FAT16/FAT32 */
4769:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(buf, djo.dir + DIR_Attr, 21);	/* Save information about the object except name */
4770:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
4771:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = follow_path(&djn, path_new);		/* Make sure if new object name is not in use */
4772:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {						/* Is new name already in use by any other object? */
4773:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = (djn.obj.sclust == djo.obj.sclust && djn.dptr == djo.dptr) ? FR_NO_FILE : FR_EXIST;
4774:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4775:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) { 				/* It is a valid path and no name collision */
4776:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
4777:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
4778:Middlewares/Third_Party/FatFs/src/ff.c **** 						dir = djn.dir;					/* Copy information about object except name */
4779:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_cpy(dir + 13, buf + 2, 19);
4780:Middlewares/Third_Party/FatFs/src/ff.c **** 						dir[DIR_Attr] = buf[0] | AM_ARC;
4781:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
4782:Middlewares/Third_Party/FatFs/src/ff.c **** 						if ((dir[DIR_Attr] & AM_DIR) && djo.obj.sclust != djn.obj.sclust) {	/* Update .. entry in the
4783:Middlewares/Third_Party/FatFs/src/ff.c **** 							dw = clust2sect(fs, ld_clust(fs, dir));
4784:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (!dw) {
4785:Middlewares/Third_Party/FatFs/src/ff.c **** 								res = FR_INT_ERR;
4786:Middlewares/Third_Party/FatFs/src/ff.c **** 							} else {
4787:Middlewares/Third_Party/FatFs/src/ff.c **** /* Start of critical section where an interruption can cause a cross-link */
ARM GAS  /tmp/ccWTW02a.s 			page 117


4788:Middlewares/Third_Party/FatFs/src/ff.c **** 								res = move_window(fs, dw);
4789:Middlewares/Third_Party/FatFs/src/ff.c **** 								dir = fs->win + SZDIRE * 1;	/* Ptr to .. entry */
4790:Middlewares/Third_Party/FatFs/src/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
4791:Middlewares/Third_Party/FatFs/src/ff.c **** 									st_clust(fs, dir, djn.obj.sclust);
4792:Middlewares/Third_Party/FatFs/src/ff.c **** 									fs->wflag = 1;
4793:Middlewares/Third_Party/FatFs/src/ff.c **** 								}
4794:Middlewares/Third_Party/FatFs/src/ff.c **** 							}
4795:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4796:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4797:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4798:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4799:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
4800:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_remove(&djo);		/* Remove old entry */
4801:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
4802:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_fs(fs);
4803:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4804:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4805:Middlewares/Third_Party/FatFs/src/ff.c **** /* End of the critical section */
4806:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4807:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
4808:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4809:Middlewares/Third_Party/FatFs/src/ff.c **** 
4810:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4811:Middlewares/Third_Party/FatFs/src/ff.c **** }
4812:Middlewares/Third_Party/FatFs/src/ff.c **** 
4813:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
4814:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_MINIMIZE == 0 */
4815:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_MINIMIZE <= 1 */
4816:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_MINIMIZE <= 2 */
4817:Middlewares/Third_Party/FatFs/src/ff.c **** 
4818:Middlewares/Third_Party/FatFs/src/ff.c **** 
4819:Middlewares/Third_Party/FatFs/src/ff.c **** 
4820:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_CHMOD && !_FS_READONLY
4821:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4822:Middlewares/Third_Party/FatFs/src/ff.c **** /* Change Attribute                                                      */
4823:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4824:Middlewares/Third_Party/FatFs/src/ff.c **** 
4825:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_chmod (
4826:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Pointer to the file path */
4827:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE attr,			/* Attribute bits */
4828:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE mask			/* Attribute mask to change */
4829:Middlewares/Third_Party/FatFs/src/ff.c **** )
4830:Middlewares/Third_Party/FatFs/src/ff.c **** {
4831:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4832:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
4833:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4834:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4835:Middlewares/Third_Party/FatFs/src/ff.c **** 
4836:Middlewares/Third_Party/FatFs/src/ff.c **** 
4837:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, FA_WRITE);	/* Get logical drive */
4838:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
4839:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4840:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
4841:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
4842:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && (dj.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check objec
4843:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
4844:Middlewares/Third_Party/FatFs/src/ff.c **** 			mask &= AM_RDO|AM_HID|AM_SYS|AM_ARC;	/* Valid attribute mask */
ARM GAS  /tmp/ccWTW02a.s 			page 118


4845:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4846:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
4847:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->dirbuf[XDIR_Attr] = (attr & mask) | (fs->dirbuf[XDIR_Attr] & (BYTE)~mask);	/* Apply attribu
4848:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = store_xdir(&dj);
4849:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else
4850:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4851:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
4852:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.dir[DIR_Attr] = (attr & mask) | (dj.dir[DIR_Attr] & (BYTE)~mask);	/* Apply attribute change 
4853:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->wflag = 1;
4854:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4855:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
4856:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(fs);
4857:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4858:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4859:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
4860:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4861:Middlewares/Third_Party/FatFs/src/ff.c **** 
4862:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4863:Middlewares/Third_Party/FatFs/src/ff.c **** }
4864:Middlewares/Third_Party/FatFs/src/ff.c **** 
4865:Middlewares/Third_Party/FatFs/src/ff.c **** 
4866:Middlewares/Third_Party/FatFs/src/ff.c **** 
4867:Middlewares/Third_Party/FatFs/src/ff.c **** 
4868:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4869:Middlewares/Third_Party/FatFs/src/ff.c **** /* Change Timestamp                                                      */
4870:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4871:Middlewares/Third_Party/FatFs/src/ff.c **** 
4872:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_utime (
4873:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Pointer to the file/directory name */
4874:Middlewares/Third_Party/FatFs/src/ff.c **** 	const FILINFO* fno	/* Pointer to the time stamp to be set */
4875:Middlewares/Third_Party/FatFs/src/ff.c **** )
4876:Middlewares/Third_Party/FatFs/src/ff.c **** {
4877:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4878:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
4879:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4880:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4881:Middlewares/Third_Party/FatFs/src/ff.c **** 
4882:Middlewares/Third_Party/FatFs/src/ff.c **** 
4883:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, FA_WRITE);	/* Get logical drive */
4884:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
4885:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4886:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
4887:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
4888:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && (dj.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check objec
4889:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
4890:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4891:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
4892:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(fs->dirbuf + XDIR_ModTime, (DWORD)fno->fdate << 16 | fno->ftime);
4893:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = store_xdir(&dj);
4894:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else
4895:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4896:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
4897:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(dj.dir + DIR_ModTime, (DWORD)fno->fdate << 16 | fno->ftime);
4898:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->wflag = 1;
4899:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4900:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
4901:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(fs);
ARM GAS  /tmp/ccWTW02a.s 			page 119


4902:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4903:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4904:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
4905:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4906:Middlewares/Third_Party/FatFs/src/ff.c **** 
4907:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4908:Middlewares/Third_Party/FatFs/src/ff.c **** }
4909:Middlewares/Third_Party/FatFs/src/ff.c **** 
4910:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _USE_CHMOD && !_FS_READONLY */
4911:Middlewares/Third_Party/FatFs/src/ff.c **** 
4912:Middlewares/Third_Party/FatFs/src/ff.c **** 
4913:Middlewares/Third_Party/FatFs/src/ff.c **** 
4914:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LABEL
4915:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4916:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get Volume Label                                                      */
4917:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4918:Middlewares/Third_Party/FatFs/src/ff.c **** 
4919:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_getlabel (
4920:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Path name of the logical drive number */
4921:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR* label,		/* Pointer to a buffer to return the volume label */
4922:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD* vsn			/* Pointer to a variable to return the volume serial number */
4923:Middlewares/Third_Party/FatFs/src/ff.c **** )
4924:Middlewares/Third_Party/FatFs/src/ff.c **** {
4925:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4926:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
4927:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4928:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT si, di;
4929:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE || _FS_EXFAT
4930:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR w;
4931:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4932:Middlewares/Third_Party/FatFs/src/ff.c **** 
4933:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
4934:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, 0);
4935:Middlewares/Third_Party/FatFs/src/ff.c **** 
4936:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get volume label */
4937:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK && label) {
4938:Middlewares/Third_Party/FatFs/src/ff.c **** 		dj.obj.fs = fs; dj.obj.sclust = 0;	/* Open root directory */
4939:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(&dj, 0);
4940:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
4941:Middlewares/Third_Party/FatFs/src/ff.c **** 		 	res = dir_read(&dj, 1);			/* Find a volume label entry */
4942:Middlewares/Third_Party/FatFs/src/ff.c **** 		 	if (res == FR_OK) {
4943:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4944:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->fs_type == FS_EXFAT) {
4945:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (si = di = 0; si < dj.dir[XDIR_NumLabel]; si++) {	/* Extract volume label from 83 entry */
4946:Middlewares/Third_Party/FatFs/src/ff.c **** 						w = ld_word(dj.dir + XDIR_Label + si * 2);
4947:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
4948:Middlewares/Third_Party/FatFs/src/ff.c **** 						label[di++] = w;
4949:Middlewares/Third_Party/FatFs/src/ff.c **** #else
4950:Middlewares/Third_Party/FatFs/src/ff.c **** 						w = ff_convert(w, 0);	/* Unicode -> OEM */
4951:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (w == 0) w = '?';	/* Replace wrong character */
4952:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (_DF1S && w >= 0x100) label[di++] = (char)(w >> 8);
4953:Middlewares/Third_Party/FatFs/src/ff.c **** 						label[di++] = (char)w;
4954:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4955:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4956:Middlewares/Third_Party/FatFs/src/ff.c **** 					label[di] = 0;
4957:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else
4958:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  /tmp/ccWTW02a.s 			page 120


4959:Middlewares/Third_Party/FatFs/src/ff.c **** 				{
4960:Middlewares/Third_Party/FatFs/src/ff.c **** 					si = di = 0;		/* Extract volume label from AM_VOL entry with code comversion */
4961:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
4962:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
4963:Middlewares/Third_Party/FatFs/src/ff.c **** 						w = (si < 11) ? dj.dir[si++] : ' ';
4964:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (IsDBCS1(w) && si < 11 && IsDBCS2(dj.dir[si])) {
4965:Middlewares/Third_Party/FatFs/src/ff.c **** 							w = w << 8 | dj.dir[si++];
4966:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4967:Middlewares/Third_Party/FatFs/src/ff.c **** 						label[di++] = ff_convert(w, 1);	/* OEM -> Unicode */
4968:Middlewares/Third_Party/FatFs/src/ff.c **** #else
4969:Middlewares/Third_Party/FatFs/src/ff.c **** 						label[di++] = dj.dir[si++];
4970:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4971:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (di < 11);
4972:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {				/* Truncate trailing spaces */
4973:Middlewares/Third_Party/FatFs/src/ff.c **** 						label[di] = 0;
4974:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (di == 0) break;
4975:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (label[--di] == ' ');
4976:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4977:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4978:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4979:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) {	/* No label entry and return nul string */
4980:Middlewares/Third_Party/FatFs/src/ff.c **** 			label[0] = 0;
4981:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
4982:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4983:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4984:Middlewares/Third_Party/FatFs/src/ff.c **** 
4985:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get volume serial number */
4986:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK && vsn) {
4987:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, fs->volbase);
4988:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
4989:Middlewares/Third_Party/FatFs/src/ff.c **** 			switch (fs->fs_type) {
4990:Middlewares/Third_Party/FatFs/src/ff.c **** 			case FS_EXFAT:
4991:Middlewares/Third_Party/FatFs/src/ff.c **** 				di = BPB_VolIDEx; break;
4992:Middlewares/Third_Party/FatFs/src/ff.c **** 
4993:Middlewares/Third_Party/FatFs/src/ff.c **** 			case FS_FAT32:
4994:Middlewares/Third_Party/FatFs/src/ff.c **** 				di = BS_VolID32; break;
4995:Middlewares/Third_Party/FatFs/src/ff.c **** 
4996:Middlewares/Third_Party/FatFs/src/ff.c **** 			default:
4997:Middlewares/Third_Party/FatFs/src/ff.c **** 				di = BS_VolID;
4998:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4999:Middlewares/Third_Party/FatFs/src/ff.c **** 			*vsn = ld_dword(fs->win + di);
5000:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5001:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5002:Middlewares/Third_Party/FatFs/src/ff.c **** 
5003:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
5004:Middlewares/Third_Party/FatFs/src/ff.c **** }
5005:Middlewares/Third_Party/FatFs/src/ff.c **** 
5006:Middlewares/Third_Party/FatFs/src/ff.c **** 
5007:Middlewares/Third_Party/FatFs/src/ff.c **** 
5008:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
5009:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5010:Middlewares/Third_Party/FatFs/src/ff.c **** /* Set Volume Label                                                      */
5011:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5012:Middlewares/Third_Party/FatFs/src/ff.c **** 
5013:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_setlabel (
5014:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* label	/* Pointer to the volume label to set */
5015:Middlewares/Third_Party/FatFs/src/ff.c **** )
ARM GAS  /tmp/ccWTW02a.s 			page 121


5016:Middlewares/Third_Party/FatFs/src/ff.c **** {
5017:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
5018:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
5019:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
5020:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE dirvn[22];
5021:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, j, slen;
5022:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR w;
5023:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const char badchr[] = "\"*+,.:;<=>\?[]|\x7F";
5024:Middlewares/Third_Party/FatFs/src/ff.c **** 
5025:Middlewares/Third_Party/FatFs/src/ff.c **** 
5026:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
5027:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&label, &fs, FA_WRITE);
5028:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fs, res);
5029:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
5030:Middlewares/Third_Party/FatFs/src/ff.c **** 
5031:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get length of given volume label */
5032:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (slen = 0; (UINT)label[slen] >= ' '; slen++) ;	/* Get name length */
5033:Middlewares/Third_Party/FatFs/src/ff.c **** 
5034:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
5035:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
5036:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = j = 0; i < slen; ) {	/* Create volume label in directory form */
5037:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = label[i++];
5038:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
5039:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsDBCS1(w)) {
5040:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = (i < slen && IsDBCS2(label[i])) ? w << 8 | (BYTE)label[i++] : 0;
5041:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5042:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = ff_convert(w, 1);
5043:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5044:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (w == 0 || chk_chr(badchr, w) || j == 22) {	/* Check validity check validity of the volume la
5045:Middlewares/Third_Party/FatFs/src/ff.c **** 				LEAVE_FF(fs, FR_INVALID_NAME);
5046:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5047:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(dirvn + j, w); j += 2;
5048:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5049:Middlewares/Third_Party/FatFs/src/ff.c **** 		slen = j;
5050:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
5051:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5052:Middlewares/Third_Party/FatFs/src/ff.c **** 	{	/* On the FAT12/16/32 volume */
5053:Middlewares/Third_Party/FatFs/src/ff.c **** 		for ( ; slen && label[slen - 1] == ' '; slen--) ;	/* Remove trailing spaces */
5054:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (slen) {		/* Is there a volume label to be set? */
5055:Middlewares/Third_Party/FatFs/src/ff.c **** 			dirvn[0] = 0; i = j = 0;	/* Create volume label in directory form */
5056:Middlewares/Third_Party/FatFs/src/ff.c **** 			do {
5057:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
5058:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = ff_convert(ff_wtoupper(label[i++]), 0);
5059:Middlewares/Third_Party/FatFs/src/ff.c **** #else
5060:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = (BYTE)label[i++];
5061:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (IsDBCS1(w)) {
5062:Middlewares/Third_Party/FatFs/src/ff.c **** 					w = (j < 10 && i < slen && IsDBCS2(label[i])) ? w << 8 | (BYTE)label[i++] : 0;
5063:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5064:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
5065:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = ff_convert(ff_wtoupper(ff_convert(w, 1)), 0);
5066:Middlewares/Third_Party/FatFs/src/ff.c **** #else
5067:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (IsLower(w)) w -= 0x20;			/* To upper ASCII characters */
5068:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
5069:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (w >= 0x80) w = ExCvt[w - 0x80];	/* To upper extended characters (SBCS cfg) */
5070:Middlewares/Third_Party/FatFs/src/ff.c **** #else
5071:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!_DF1S && w >= 0x80) w = 0;		/* Reject extended characters (ASCII cfg) */
5072:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  /tmp/ccWTW02a.s 			page 122


5073:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5074:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5075:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (w == 0 || chk_chr(badchr, w) || j >= (UINT)((w >= 0x100) ? 10 : 11)) {	/* Reject invalid ch
5076:Middlewares/Third_Party/FatFs/src/ff.c **** 					LEAVE_FF(fs, FR_INVALID_NAME);
5077:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5078:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (w >= 0x100) dirvn[j++] = (BYTE)(w >> 8);
5079:Middlewares/Third_Party/FatFs/src/ff.c **** 				dirvn[j++] = (BYTE)w;
5080:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (i < slen);
5081:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (j < 11) dirvn[j++] = ' ';	/* Fill remaining name field */
5082:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dirvn[0] == DDEM) LEAVE_FF(fs, FR_INVALID_NAME);	/* Reject illegal name (heading DDEM) */
5083:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5084:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5085:Middlewares/Third_Party/FatFs/src/ff.c **** 
5086:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Set volume label */
5087:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.sclust = 0;		/* Open root directory */
5088:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(&dj, 0);
5089:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
5090:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_read(&dj, 1);	/* Get volume label entry */
5091:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
5092:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (_FS_EXFAT && fs->fs_type == FS_EXFAT) {
5093:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.dir[XDIR_NumLabel] = (BYTE)(slen / 2);	/* Change the volume label */
5094:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(dj.dir + XDIR_Label, dirvn, slen);
5095:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
5096:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (slen) {
5097:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(dj.dir, dirvn, 11);	/* Change the volume label */
5098:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
5099:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.dir[DIR_Name] = DDEM;	/* Remove the volume label */
5100:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5101:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5102:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
5103:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = sync_fs(fs);
5104:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {			/* No volume label entry is found or error */
5105:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) {
5106:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_OK;
5107:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (slen) {	/* Create a volume label entry */
5108:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_alloc(&dj, 1);	/* Allocate an entry */
5109:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
5110:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_set(dj.dir, 0, SZDIRE);	/* Clear the entry */
5111:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (_FS_EXFAT && fs->fs_type == FS_EXFAT) {
5112:Middlewares/Third_Party/FatFs/src/ff.c **** 							dj.dir[XDIR_Type] = 0x83;		/* Create 83 entry */
5113:Middlewares/Third_Party/FatFs/src/ff.c **** 							dj.dir[XDIR_NumLabel] = (BYTE)(slen / 2);
5114:Middlewares/Third_Party/FatFs/src/ff.c **** 							mem_cpy(dj.dir + XDIR_Label, dirvn, slen);
5115:Middlewares/Third_Party/FatFs/src/ff.c **** 						} else {
5116:Middlewares/Third_Party/FatFs/src/ff.c **** 							dj.dir[DIR_Attr] = AM_VOL;		/* Create volume label entry */
5117:Middlewares/Third_Party/FatFs/src/ff.c **** 							mem_cpy(dj.dir, dirvn, 11);
5118:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
5119:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
5120:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = sync_fs(fs);
5121:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
5122:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5123:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5124:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5125:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5126:Middlewares/Third_Party/FatFs/src/ff.c **** 
5127:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
5128:Middlewares/Third_Party/FatFs/src/ff.c **** }
5129:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  /tmp/ccWTW02a.s 			page 123


5130:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
5131:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_LABEL */
5132:Middlewares/Third_Party/FatFs/src/ff.c **** 
5133:Middlewares/Third_Party/FatFs/src/ff.c **** 
5134:Middlewares/Third_Party/FatFs/src/ff.c **** 
5135:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_EXPAND && !_FS_READONLY
5136:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5137:Middlewares/Third_Party/FatFs/src/ff.c **** /* Allocate a Contiguous Blocks to the File                              */
5138:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5139:Middlewares/Third_Party/FatFs/src/ff.c **** 
5140:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_expand (
5141:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,		/* Pointer to the file object */
5142:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t fsz,	/* File size to be expanded to */
5143:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE opt		/* Operation mode 0:Find and prepare or 1:Find and allocate */
5144:Middlewares/Third_Party/FatFs/src/ff.c **** )
5145:Middlewares/Third_Party/FatFs/src/ff.c **** {
5146:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
5147:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
5148:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD n, clst, stcl, scl, ncl, tcl, lclst;
5149:Middlewares/Third_Party/FatFs/src/ff.c **** 
5150:Middlewares/Third_Party/FatFs/src/ff.c **** 
5151:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);		/* Check validity of the file object */
5152:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
5153:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fsz == 0 || fp->obj.objsize != 0 || !(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);
5154:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
5155:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type != FS_EXFAT && fsz >= 0x100000000) LEAVE_FF(fs, FR_DENIED);	/* Check if in size li
5156:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5157:Middlewares/Third_Party/FatFs/src/ff.c **** 	n = (DWORD)fs->csize * SS(fs);	/* Cluster size */
5158:Middlewares/Third_Party/FatFs/src/ff.c **** 	tcl = (DWORD)(fsz / n) + ((fsz & (n - 1)) ? 1 : 0);	/* Number of clusters required */
5159:Middlewares/Third_Party/FatFs/src/ff.c **** 	stcl = fs->last_clst; lclst = 0;
5160:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stcl < 2 || stcl >= fs->n_fatent) stcl = 2;
5161:Middlewares/Third_Party/FatFs/src/ff.c **** 
5162:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
5163:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT) {
5164:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = find_bitmap(fs, stcl, tcl);			/* Find a contiguous cluster block */
5165:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (scl == 0) res = FR_DENIED;				/* No contiguous cluster block was found */
5166:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (scl == 0xFFFFFFFF) res = FR_DISK_ERR;
5167:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {	/* A contiguous free area is found */
5168:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (opt) {		/* Allocate it now */
5169:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = change_bitmap(fs, scl, tcl, 1);	/* Mark the cluster block 'in use' */
5170:Middlewares/Third_Party/FatFs/src/ff.c **** 				lclst = scl + tcl - 1;
5171:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {		/* Set it as suggested point for next allocation */
5172:Middlewares/Third_Party/FatFs/src/ff.c **** 				lclst = scl - 1;
5173:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5174:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5175:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
5176:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5177:Middlewares/Third_Party/FatFs/src/ff.c **** 	{
5178:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = clst = stcl; ncl = 0;
5179:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {	/* Find a contiguous cluster block */
5180:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = get_fat(&fp->obj, clst);
5181:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (++clst >= fs->n_fatent) clst = 2;
5182:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (n == 1) { res = FR_INT_ERR; break; }
5183:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (n == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
5184:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (n == 0) {	/* Is it a free cluster? */
5185:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (++ncl == tcl) break;	/* Break if a contiguous cluster block is found */
5186:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
ARM GAS  /tmp/ccWTW02a.s 			page 124


5187:Middlewares/Third_Party/FatFs/src/ff.c **** 				scl = clst; ncl = 0;		/* Not a free cluster */
5188:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5189:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst == stcl) { res = FR_DENIED; break; }	/* No contiguous cluster? */
5190:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5191:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {	/* A contiguous free area is found */
5192:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (opt) {		/* Allocate it now */
5193:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (clst = scl, n = tcl; n; clst++, n--) {	/* Create a cluster chain on the FAT */
5194:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = put_fat(fs, clst, (n == 1) ? 0xFFFFFFFF : clst + 1);
5195:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res != FR_OK) break;
5196:Middlewares/Third_Party/FatFs/src/ff.c **** 					lclst = clst;
5197:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5198:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {		/* Set it as suggested point for next allocation */
5199:Middlewares/Third_Party/FatFs/src/ff.c **** 				lclst = scl - 1;
5200:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5201:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5202:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5203:Middlewares/Third_Party/FatFs/src/ff.c **** 
5204:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
5205:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->last_clst = lclst;		/* Set suggested start cluster to start next */
5206:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (opt) {	/* Is it allocated now? */
5207:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.sclust = scl;		/* Update object allocation information */
5208:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.objsize = fsz;
5209:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (_FS_EXFAT) fp->obj.stat = 2;	/* Set status 'contiguous chain' */
5210:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag |= FA_MODIFIED;
5211:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->free_clst <= fs->n_fatent - 2) {	/* Update FSINFO */
5212:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->free_clst -= tcl;
5213:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->fsi_flag |= 1;
5214:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5215:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5216:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5217:Middlewares/Third_Party/FatFs/src/ff.c **** 
5218:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
5219:Middlewares/Third_Party/FatFs/src/ff.c **** }
5220:Middlewares/Third_Party/FatFs/src/ff.c **** 
5221:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_EXPAND && !_FS_READONLY */
5222:Middlewares/Third_Party/FatFs/src/ff.c **** 
5223:Middlewares/Third_Party/FatFs/src/ff.c **** 
5224:Middlewares/Third_Party/FatFs/src/ff.c **** 
5225:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FORWARD
5226:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5227:Middlewares/Third_Party/FatFs/src/ff.c **** /* Forward data to the stream directly                                   */
5228:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5229:Middlewares/Third_Party/FatFs/src/ff.c **** 
5230:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_forward (
5231:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp, 						/* Pointer to the file object */
5232:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT (*func)(const BYTE*,UINT),	/* Pointer to the streaming function */
5233:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT btf,						/* Number of bytes to forward */
5234:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT* bf						/* Pointer to number of bytes forwarded */
5235:Middlewares/Third_Party/FatFs/src/ff.c **** )
5236:Middlewares/Third_Party/FatFs/src/ff.c **** {
5237:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
5238:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
5239:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, sect;
5240:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t remain;
5241:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT rcnt, csect;
5242:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dbuf;
5243:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  /tmp/ccWTW02a.s 			page 125


5244:Middlewares/Third_Party/FatFs/src/ff.c **** 
5245:Middlewares/Third_Party/FatFs/src/ff.c **** 	*bf = 0;	/* Clear transfer byte counter */
5246:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);		/* Check validity of the file object */
5247:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
5248:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
5249:Middlewares/Third_Party/FatFs/src/ff.c **** 
5250:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
5251:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (btf > remain) btf = (UINT)remain;			/* Truncate btf by remaining bytes */
5252:Middlewares/Third_Party/FatFs/src/ff.c **** 
5253:Middlewares/Third_Party/FatFs/src/ff.c **** 	for ( ;  btf && (*func)(0, 0);					/* Repeat until all data transferred or stream goes busy */
5254:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->fptr += rcnt, *bf += rcnt, btf -= rcnt) {
5255:Middlewares/Third_Party/FatFs/src/ff.c **** 		csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
5256:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {				/* On the sector boundary? */
5257:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (csect == 0) {						/* On the cluster boundary? */
5258:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = (fp->fptr == 0) ?			/* On the top of the file? */
5259:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust : get_fat(&fp->obj, fp->clust);
5260:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst <= 1) ABORT(fs, FR_INT_ERR);
5261:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
5262:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;					/* Update current cluster */
5263:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5264:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5265:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = clust2sect(fs, fp->clust);			/* Get current data sector */
5266:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!sect) ABORT(fs, FR_INT_ERR);
5267:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect += csect;
5268:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
5269:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fs, sect) != FR_OK) ABORT(fs, FR_DISK_ERR);	/* Move sector window to the file dat
5270:Middlewares/Third_Party/FatFs/src/ff.c **** 		dbuf = fs->win;
5271:Middlewares/Third_Party/FatFs/src/ff.c **** #else
5272:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->sect != sect) {		/* Fill sector cache with file data */
5273:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
5274:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->flag & FA_DIRTY) {		/* Write-back dirty sector cache */
5275:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
5276:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
5277:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5278:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5279:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_read(fs->drv, fp->buf, sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
5280:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5281:Middlewares/Third_Party/FatFs/src/ff.c **** 		dbuf = fp->buf;
5282:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5283:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->sect = sect;
5284:Middlewares/Third_Party/FatFs/src/ff.c **** 		rcnt = SS(fs) - (UINT)fp->fptr % SS(fs);	/* Number of bytes left in the sector */
5285:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rcnt > btf) rcnt = btf;					/* Clip it by btr if needed */
5286:Middlewares/Third_Party/FatFs/src/ff.c **** 		rcnt = (*func)(dbuf + ((UINT)fp->fptr % SS(fs)), rcnt);	/* Forward the file data */
5287:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!rcnt) ABORT(fs, FR_INT_ERR);
5288:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5289:Middlewares/Third_Party/FatFs/src/ff.c **** 
5290:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, FR_OK);
5291:Middlewares/Third_Party/FatFs/src/ff.c **** }
5292:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_FORWARD */
5293:Middlewares/Third_Party/FatFs/src/ff.c **** 
5294:Middlewares/Third_Party/FatFs/src/ff.c **** 
5295:Middlewares/Third_Party/FatFs/src/ff.c **** 
5296:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_MKFS && !_FS_READONLY
5297:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5298:Middlewares/Third_Party/FatFs/src/ff.c **** /* Create an FAT/exFAT volume                                            */
5299:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5300:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  /tmp/ccWTW02a.s 			page 126


5301:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_mkfs (
5302:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Logical drive number */
5303:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE opt,			/* Format option */
5304:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD au,			/* Size of allocation unit (cluster) [byte] */
5305:Middlewares/Third_Party/FatFs/src/ff.c **** 	void* work,			/* Pointer to working buffer */
5306:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT len			/* Size of working buffer */
5307:Middlewares/Third_Party/FatFs/src/ff.c **** )
5308:Middlewares/Third_Party/FatFs/src/ff.c **** {
5309:Middlewares/Third_Party/FatFs/src/ff.c **** 	const UINT n_fats = 1;		/* Number of FATs for FAT12/16/32 volume (1 or 2) */
5310:Middlewares/Third_Party/FatFs/src/ff.c **** 	const UINT n_rootdir = 512;	/* Number of root directory entries for FAT12/16 volume */
5311:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const WORD cst[] = {1, 4, 16, 64, 256, 512, 0};	/* Cluster size boundary for FAT12/16 volum
5312:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const WORD cst32[] = {1, 2, 4, 8, 16, 32, 0};	/* Cluster size boundary for FAT32 volume (12
5313:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE fmt, sys, *buf, *pte, pdrv, part;
5314:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD ss;
5315:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD szb_buf, sz_buf, sz_blk, n_clst, pau, sect, nsect, n;
5316:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD b_vol, b_fat, b_data;				/* Base LBA for volume, fat, data */
5317:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sz_vol, sz_rsv, sz_fat, sz_dir;	/* Size for volume, fat, dir, data */
5318:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
5319:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
5320:Middlewares/Third_Party/FatFs/src/ff.c **** 	DSTATUS stat;
5321:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM || _FS_EXFAT
5322:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD tbl[3];
5323:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5324:Middlewares/Third_Party/FatFs/src/ff.c **** 
5325:Middlewares/Third_Party/FatFs/src/ff.c **** 
5326:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Check mounted drive and clear work area */
5327:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(&path);					/* Get target logical drive */
5328:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
5329:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (FatFs[vol]) FatFs[vol]->fs_type = 0;	/* Clear the volume */
5330:Middlewares/Third_Party/FatFs/src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
5331:Middlewares/Third_Party/FatFs/src/ff.c **** 	part = LD2PT(vol);	/* Partition (0:create as new, 1-4:get from partition table) */
5332:Middlewares/Third_Party/FatFs/src/ff.c **** 
5333:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Check physical drive status */
5334:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(pdrv);
5335:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
5336:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
5337:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, GET_BLOCK_SIZE, &sz_blk) != RES_OK || !sz_blk || sz_blk > 32768 || (sz_blk & 
5338:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
5339:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, GET_SECTOR_SIZE, &ss) != RES_OK) return FR_DISK_ERR;
5340:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ss > _MAX_SS || ss < _MIN_SS || (ss & (ss - 1))) return FR_DISK_ERR;
5341:Middlewares/Third_Party/FatFs/src/ff.c **** #else
5342:Middlewares/Third_Party/FatFs/src/ff.c **** 	ss = _MAX_SS;
5343:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5344:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((au != 0 && au < ss) || au > 0x1000000 || (au & (au - 1))) return FR_INVALID_PARAMETER;	/* Che
5345:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
5346:Middlewares/Third_Party/FatFs/src/ff.c **** 
5347:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get working buffer */
5348:Middlewares/Third_Party/FatFs/src/ff.c **** 	buf = (BYTE*)work;		/* Working buffer */
5349:Middlewares/Third_Party/FatFs/src/ff.c **** 	sz_buf = len / ss;		/* Size of working buffer (sector) */
5350:Middlewares/Third_Party/FatFs/src/ff.c **** 	szb_buf = sz_buf * ss;	/* Size of working buffer (byte) */
5351:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!szb_buf) return FR_MKFS_ABORTED;
5352:Middlewares/Third_Party/FatFs/src/ff.c **** 
5353:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Determine where the volume to be located (b_vol, sz_vol) */
5354:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (_MULTI_PARTITION && part != 0) {
5355:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Get partition information from partition table in the MBR */
5356:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_read(pdrv, buf, 0, 1) != RES_OK) return FR_DISK_ERR;	/* Load MBR */
5357:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ld_word(buf + BS_55AA) != 0xAA55) return FR_MKFS_ABORTED;	/* Check if MBR is valid */
ARM GAS  /tmp/ccWTW02a.s 			page 127


5358:Middlewares/Third_Party/FatFs/src/ff.c **** 		pte = buf + (MBR_Table + (part - 1) * SZ_PTE);
5359:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!pte[PTE_System]) return FR_MKFS_ABORTED;	/* No partition? */
5360:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_vol = ld_dword(pte + PTE_StLba);		/* Get volume start sector */
5361:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_vol = ld_dword(pte + PTE_SizLba);	/* Get volume size */
5362:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
5363:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Create a single-partition in this function */
5364:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_ioctl(pdrv, GET_SECTOR_COUNT, &sz_vol) != RES_OK) return FR_DISK_ERR;
5365:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_vol = (opt & FM_SFD) ? 0 : 63;		/* Volume start sector */
5366:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < b_vol) return FR_MKFS_ABORTED;
5367:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_vol -= b_vol;						/* Volume size */
5368:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5369:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sz_vol < 128) return FR_MKFS_ABORTED;	/* Check if volume size is >=128s */
5370:Middlewares/Third_Party/FatFs/src/ff.c **** 
5371:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Pre-determine the FAT type */
5372:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
5373:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_EXFAT && (opt & FM_EXFAT)) {	/* exFAT possible? */
5374:Middlewares/Third_Party/FatFs/src/ff.c **** 			if ((opt & FM_ANY) == FM_EXFAT || sz_vol >= 0x4000000 || au > 128) {	/* exFAT only, vol >= 64Ms 
5375:Middlewares/Third_Party/FatFs/src/ff.c **** 				fmt = FS_EXFAT; break;
5376:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5377:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5378:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (au > 128) return FR_INVALID_PARAMETER;	/* Too large au for FAT/FAT32 */
5379:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (opt & FM_FAT32) {	/* FAT32 possible? */
5380:Middlewares/Third_Party/FatFs/src/ff.c **** 			if ((opt & FM_ANY) == FM_FAT32 || !(opt & FM_FAT)) {	/* FAT32 only or no-FAT? */
5381:Middlewares/Third_Party/FatFs/src/ff.c **** 				fmt = FS_FAT32; break;
5382:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5383:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5384:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(opt & FM_FAT)) return FR_INVALID_PARAMETER;	/* no-FAT? */
5385:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_FAT16;
5386:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (0);
5387:Middlewares/Third_Party/FatFs/src/ff.c **** 
5388:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
5389:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_EXFAT) {	/* Create an exFAT volume */
5390:Middlewares/Third_Party/FatFs/src/ff.c **** 		DWORD szb_bit, szb_case, sum, nb, cl;
5391:Middlewares/Third_Party/FatFs/src/ff.c **** 		WCHAR ch, si;
5392:Middlewares/Third_Party/FatFs/src/ff.c **** 		UINT j, st;
5393:Middlewares/Third_Party/FatFs/src/ff.c **** 		BYTE b;
5394:Middlewares/Third_Party/FatFs/src/ff.c **** 
5395:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < 0x1000) return FR_MKFS_ABORTED;	/* Too small volume? */
5396:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM
5397:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[0] = b_vol; tbl[1] = b_vol + sz_vol - 1;	/* Inform the device the volume area may be erased *
5398:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_ioctl(pdrv, CTRL_TRIM, tbl);
5399:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5400:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Determine FAT location, data location and number of clusters */
5401:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!au) {	/* au auto-selection */
5402:Middlewares/Third_Party/FatFs/src/ff.c **** 			au = 8;
5403:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (sz_vol >= 0x80000) au = 64;		/* >= 512Ks */
5404:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (sz_vol >= 0x4000000) au = 256;	/* >= 64Ms */
5405:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5406:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_fat = b_vol + 32;										/* FAT start at offset 32 */
5407:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_fat = ((sz_vol / au + 2) * 4 + ss - 1) / ss;			/* Number of FAT sectors */
5408:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_data = (b_fat + sz_fat + sz_blk - 1) & ~(sz_blk - 1);	/* Align data area to the erase block bou
5409:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (b_data >= sz_vol / 2) return FR_MKFS_ABORTED;		/* Too small volume? */
5410:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_clst = (sz_vol - (b_data - b_vol)) / au;				/* Number of clusters */
5411:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n_clst <16) return FR_MKFS_ABORTED;					/* Too few clusters? */
5412:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n_clst > MAX_EXFAT) return FR_MKFS_ABORTED;			/* Too many clusters? */
5413:Middlewares/Third_Party/FatFs/src/ff.c **** 
5414:Middlewares/Third_Party/FatFs/src/ff.c **** 		szb_bit = (n_clst + 7) / 8;						/* Size of allocation bitmap */
ARM GAS  /tmp/ccWTW02a.s 			page 128


5415:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[0] = (szb_bit + au * ss - 1) / (au * ss);	/* Number of allocation bitmap clusters */
5416:Middlewares/Third_Party/FatFs/src/ff.c **** 
5417:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Create a compressed up-case table */
5418:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = b_data + au * tbl[0];	/* Table start sector */
5419:Middlewares/Third_Party/FatFs/src/ff.c **** 		sum = 0;						/* Table checksum to be stored in the 82 entry */
5420:Middlewares/Third_Party/FatFs/src/ff.c **** 		st = si = i = j = szb_case = 0;
5421:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
5422:Middlewares/Third_Party/FatFs/src/ff.c **** 			switch (st) {
5423:Middlewares/Third_Party/FatFs/src/ff.c **** 			case 0:
5424:Middlewares/Third_Party/FatFs/src/ff.c **** 				ch = ff_wtoupper(si);	/* Get an up-case char */
5425:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ch != si) {
5426:Middlewares/Third_Party/FatFs/src/ff.c **** 					si++; break;		/* Store the up-case char if exist */
5427:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5428:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (j = 1; (WCHAR)(si + j) && (WCHAR)(si + j) == ff_wtoupper((WCHAR)(si + j)); j++) ;	/* Get r
5429:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (j >= 128) {
5430:Middlewares/Third_Party/FatFs/src/ff.c **** 					ch = 0xFFFF; st = 2; break;	/* Compress the no-case block if run is >= 128 */
5431:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5432:Middlewares/Third_Party/FatFs/src/ff.c **** 				st = 1;			/* Do not compress short run */
5433:Middlewares/Third_Party/FatFs/src/ff.c **** 				/* go to next case */
5434:Middlewares/Third_Party/FatFs/src/ff.c **** 			case 1:
5435:Middlewares/Third_Party/FatFs/src/ff.c **** 				ch = si++;		/* Fill the short run */
5436:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (--j == 0) st = 0;
5437:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
5438:Middlewares/Third_Party/FatFs/src/ff.c **** 
5439:Middlewares/Third_Party/FatFs/src/ff.c **** 			default:
5440:Middlewares/Third_Party/FatFs/src/ff.c **** 				ch = (WCHAR)j; si += j;	/* Number of chars to skip */
5441:Middlewares/Third_Party/FatFs/src/ff.c **** 				st = 0;
5442:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5443:Middlewares/Third_Party/FatFs/src/ff.c **** 			sum = xsum32(buf[i + 0] = (BYTE)ch, sum);		/* Put it into the write buffer */
5444:Middlewares/Third_Party/FatFs/src/ff.c **** 			sum = xsum32(buf[i + 1] = (BYTE)(ch >> 8), sum);
5445:Middlewares/Third_Party/FatFs/src/ff.c **** 			i += 2; szb_case += 2;
5446:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!si || i == szb_buf) {		/* Write buffered data when buffer full or end of process */
5447:Middlewares/Third_Party/FatFs/src/ff.c **** 				n = (i + ss - 1) / ss;
5448:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(pdrv, buf, sect, n) != RES_OK) return FR_DISK_ERR;
5449:Middlewares/Third_Party/FatFs/src/ff.c **** 				sect += n; i = 0;
5450:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5451:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (si);
5452:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[1] = (szb_case + au * ss - 1) / (au * ss);	/* Number of up-case table clusters */
5453:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[2] = 1;										/* Number of root dir clusters */
5454:Middlewares/Third_Party/FatFs/src/ff.c **** 
5455:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Initialize the allocation bitmap */
5456:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = b_data; nsect = (szb_bit + ss - 1) / ss;	/* Start of bitmap and number of sectors */
5457:Middlewares/Third_Party/FatFs/src/ff.c **** 		nb = tbl[0] + tbl[1] + tbl[2];					/* Number of clusters in-use by system */
5458:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
5459:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, szb_buf);
5460:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (i = 0; nb >= 8 && i < szb_buf; buf[i++] = 0xFF, nb -= 8) ;
5461:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (b = 1; nb && i < szb_buf; buf[i] |= b, b <<= 1, nb--) ;
5462:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (nsect > sz_buf) ? sz_buf : nsect;		/* Write the buffered data */
5463:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, sect, n) != RES_OK) return FR_DISK_ERR;
5464:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += n; nsect -= n;
5465:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (nsect);
5466:Middlewares/Third_Party/FatFs/src/ff.c **** 
5467:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Initialize the FAT */
5468:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = b_fat; nsect = sz_fat;	/* Start of FAT and number of FAT sectors */
5469:Middlewares/Third_Party/FatFs/src/ff.c **** 		j = nb = cl = 0;
5470:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
5471:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, szb_buf); i = 0;	/* Clear work area and reset write index */
ARM GAS  /tmp/ccWTW02a.s 			page 129


5472:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cl == 0) {	/* Set entry 0 and 1 */
5473:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + i, 0xFFFFFFF8); i += 4; cl++;
5474:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + i, 0xFFFFFFFF); i += 4; cl++;
5475:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5476:Middlewares/Third_Party/FatFs/src/ff.c **** 			do {			/* Create chains of bitmap, up-case and root dir */
5477:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (nb && i < szb_buf) {			/* Create a chain */
5478:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(buf + i, (nb > 1) ? cl + 1 : 0xFFFFFFFF);
5479:Middlewares/Third_Party/FatFs/src/ff.c **** 					i += 4; cl++; nb--;
5480:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5481:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!nb && j < 3) nb = tbl[j++];	/* Next chain */
5482:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (nb && i < szb_buf);
5483:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (nsect > sz_buf) ? sz_buf : nsect;	/* Write the buffered data */
5484:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, sect, n) != RES_OK) return FR_DISK_ERR;
5485:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += n; nsect -= n;
5486:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (nsect);
5487:Middlewares/Third_Party/FatFs/src/ff.c **** 
5488:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Initialize the root directory */
5489:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_set(buf, 0, szb_buf);
5490:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[SZDIRE * 0 + 0] = 0x83;		/* 83 entry (volume label) */
5491:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[SZDIRE * 1 + 0] = 0x81;		/* 81 entry (allocation bitmap) */
5492:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(buf + SZDIRE * 1 + 20, 2);
5493:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(buf + SZDIRE * 1 + 24, szb_bit);
5494:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[SZDIRE * 2 + 0] = 0x82;		/* 82 entry (up-case table) */
5495:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(buf + SZDIRE * 2 + 4, sum);
5496:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(buf + SZDIRE * 2 + 20, 2 + tbl[0]);
5497:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(buf + SZDIRE * 2 + 24, szb_case);
5498:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = b_data + au * (tbl[0] + tbl[1]);	nsect = au;	/* Start of the root directory and number of 
5499:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {	/* Fill root directory sectors */
5500:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (nsect > sz_buf) ? sz_buf : nsect;
5501:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, sect, n) != RES_OK) return FR_DISK_ERR;
5502:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
5503:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += n; nsect -= n;
5504:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (nsect);
5505:Middlewares/Third_Party/FatFs/src/ff.c **** 
5506:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Create two set of the exFAT VBR blocks */
5507:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = b_vol;
5508:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (n = 0; n < 2; n++) {
5509:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Main record (+0) */
5510:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
5511:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(buf + BS_JmpBoot, "\xEB\x76\x90" "EXFAT   ", 11);	/* Boot jump code (x86), OEM name */
5512:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_VolOfsEx, b_vol);					/* Volume offset in the physical drive [sector] */
5513:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_TotSecEx, sz_vol);					/* Volume size [sector] */
5514:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_FatOfsEx, b_fat - b_vol);			/* FAT offset [sector] */
5515:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_FatSzEx, sz_fat);					/* FAT size [sector] */
5516:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_DataOfsEx, b_data - b_vol);			/* Data offset [sector] */
5517:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_NumClusEx, n_clst);					/* Number of clusters */
5518:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_RootClusEx, 2 + tbl[0] + tbl[1]);	/* Root dir cluster # */
5519:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_VolIDEx, GET_FATTIME());				/* VSN */
5520:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_FSVerEx, 0x100);						/* File system version (1.00) */
5521:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (buf[BPB_BytsPerSecEx] = 0, i = ss; i >>= 1; buf[BPB_BytsPerSecEx]++) ;	/* Log2 of sector si
5522:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (buf[BPB_SecPerClusEx] = 0, i = au; i >>= 1; buf[BPB_SecPerClusEx]++) ;	/* Log2 of cluster s
5523:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BPB_NumFATsEx] = 1;					/* Number of FATs */
5524:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BPB_DrvNumEx] = 0x80;				/* Drive number (for int13) */
5525:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BS_BootCodeEx, 0xFEEB);	/* Boot code (x86) */
5526:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BS_55AA, 0xAA55);			/* Signature (placed here regardless of sector size) */
5527:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (i = sum = 0; i < ss; i++) {		/* VBR checksum */
5528:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i != BPB_VolFlagEx && i != BPB_VolFlagEx + 1 && i != BPB_PercInUseEx) sum = xsum32(buf[i], 
ARM GAS  /tmp/ccWTW02a.s 			page 130


5529:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5530:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, sect++, 1) != RES_OK) return FR_DISK_ERR;
5531:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Extended bootstrap record (+1..+8) */
5532:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
5533:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + ss - 2, 0xAA55);	/* Signature (placed at end of sector) */
5534:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (j = 1; j < 9; j++) {
5535:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (i = 0; i < ss; sum = xsum32(buf[i++], sum)) ;	/* VBR checksum */
5536:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(pdrv, buf, sect++, 1) != RES_OK) return FR_DISK_ERR;
5537:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5538:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* OEM/Reserved record (+9..+10) */
5539:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
5540:Middlewares/Third_Party/FatFs/src/ff.c **** 			for ( ; j < 11; j++) {
5541:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (i = 0; i < ss; sum = xsum32(buf[i++], sum)) ;	/* VBR checksum */
5542:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(pdrv, buf, sect++, 1) != RES_OK) return FR_DISK_ERR;
5543:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5544:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Sum record (+11) */
5545:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (i = 0; i < ss; i += 4) st_dword(buf + i, sum);		/* Fill with checksum value */
5546:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, sect++, 1) != RES_OK) return FR_DISK_ERR;
5547:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5548:Middlewares/Third_Party/FatFs/src/ff.c **** 
5549:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
5550:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_EXFAT */
5551:Middlewares/Third_Party/FatFs/src/ff.c **** 	{	/* Create an FAT12/16/32 volume */
5552:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
5553:Middlewares/Third_Party/FatFs/src/ff.c **** 			pau = au;
5554:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Pre-determine number of clusters and FAT sub-type */
5555:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {	/* FAT32 volume */
5556:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!pau) {	/* au auto-selection */
5557:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = sz_vol / 0x20000;	/* Volume size in unit of 128KS */
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (i = 0, pau = 1; cst32[i] && cst32[i] <= n; i++, pau <<= 1) ;	/* Get from table */
5559:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5560:Middlewares/Third_Party/FatFs/src/ff.c **** 				n_clst = sz_vol / pau;	/* Number of clusters */
5561:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_fat = (n_clst * 4 + 8 + ss - 1) / ss;	/* FAT size [sector] */
5562:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv = 32;	/* Number of reserved sectors */
5563:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_dir = 0;		/* No static directory */
5564:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst <= MAX_FAT16 || n_clst > MAX_FAT32) return FR_MKFS_ABORTED;
5565:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* FAT12/16 volume */
5566:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!pau) {	/* au auto-selection */
5567:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = sz_vol / 0x1000;	/* Volume size in unit of 4KS */
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (i = 0, pau = 1; cst[i] && cst[i] <= n; i++, pau <<= 1) ;	/* Get from table */
5569:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5570:Middlewares/Third_Party/FatFs/src/ff.c **** 				n_clst = sz_vol / pau;
5571:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst > MAX_FAT12) {
5572:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = n_clst * 2 + 4;		/* FAT size [byte] */
5573:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
5574:Middlewares/Third_Party/FatFs/src/ff.c **** 					fmt = FS_FAT12;
5575:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = (n_clst * 3 + 1) / 2 + 3;	/* FAT size [byte] */
5576:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5577:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_fat = (n + ss - 1) / ss;		/* FAT size [sector] */
5578:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv = 1;						/* Number of reserved sectors */
5579:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_dir = (DWORD)n_rootdir * SZDIRE / ss;	/* Rootdir size [sector] */
5580:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5581:Middlewares/Third_Party/FatFs/src/ff.c **** 			b_fat = b_vol + sz_rsv;						/* FAT base */
5582:Middlewares/Third_Party/FatFs/src/ff.c **** 			b_data = b_fat + sz_fat * n_fats + sz_dir;	/* Data base */
5583:Middlewares/Third_Party/FatFs/src/ff.c **** 
5584:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Align data base to erase block boundary (for flash memory media) */
5585:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = ((b_data + sz_blk - 1) & ~(sz_blk - 1)) - b_data;	/* Next nearest erase block from current d
ARM GAS  /tmp/ccWTW02a.s 			page 131


5586:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {		/* FAT32: Move FAT base */
5587:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv += n; b_fat += n;
5588:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* FAT12/16: Expand FAT size */
5589:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_fat += n / n_fats;
5590:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5591:Middlewares/Third_Party/FatFs/src/ff.c **** 
5592:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Determine number of clusters and final check of validity of the FAT sub-type */
5593:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (sz_vol < b_data + pau * 16 - b_vol) return FR_MKFS_ABORTED;	/* Too small volume */
5594:Middlewares/Third_Party/FatFs/src/ff.c **** 			n_clst = (sz_vol - sz_rsv - sz_fat * n_fats - sz_dir) / pau;
5595:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
5596:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst <= MAX_FAT16) {	/* Too few clusters for FAT32 */
5597:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (au = pau / 2) != 0) continue;	/* Adjust cluster size and retry */
5598:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
5599:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5600:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5601:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT16) {
5602:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst > MAX_FAT16) {	/* Too many clusters for FAT16 */
5603:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (pau * 2) <= 64) {
5604:Middlewares/Third_Party/FatFs/src/ff.c **** 						au = pau * 2; continue;		/* Adjust cluster size and retry */
5605:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
5606:Middlewares/Third_Party/FatFs/src/ff.c **** 					if ((opt & FM_FAT32)) {
5607:Middlewares/Third_Party/FatFs/src/ff.c **** 						fmt = FS_FAT32; continue;	/* Switch type to FAT32 and retry */
5608:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
5609:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (au = pau * 2) <= 128) continue;	/* Adjust cluster size and retry */
5610:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
5611:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5612:Middlewares/Third_Party/FatFs/src/ff.c **** 				if  (n_clst <= MAX_FAT12) {	/* Too few clusters for FAT16 */
5613:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (au = pau * 2) <= 128) continue;	/* Adjust cluster size and retry */
5614:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
5615:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5616:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5617:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT12 && n_clst > MAX_FAT12) return FR_MKFS_ABORTED;	/* Too many clusters for FAT1
5618:Middlewares/Third_Party/FatFs/src/ff.c **** 
5619:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Ok, it is the valid cluster configuration */
5620:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
5621:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (1);
5622:Middlewares/Third_Party/FatFs/src/ff.c **** 
5623:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM
5624:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[0] = b_vol; tbl[1] = b_vol + sz_vol - 1;	/* Inform the device the volume area can be erased *
5625:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_ioctl(pdrv, CTRL_TRIM, tbl);
5626:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5627:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Create FAT VBR */
5628:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_set(buf, 0, ss);
5629:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(buf + BS_JmpBoot, "\xEB\xFE\x90" "MSDOS5.0", 11);/* Boot jump code (x86), OEM name */
5630:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_BytsPerSec, ss);				/* Sector size [byte] */
5631:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[BPB_SecPerClus] = (BYTE)pau;				/* Cluster size [sector] */
5632:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_RsvdSecCnt, (WORD)sz_rsv);	/* Size of reserved area */
5633:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[BPB_NumFATs] = (BYTE)n_fats;				/* Number of FATs */
5634:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_RootEntCnt, (WORD)((fmt == FS_FAT32) ? 0 : n_rootdir));	/* Number of root direc
5635:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < 0x10000) {
5636:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_TotSec16, (WORD)sz_vol);	/* Volume size in 16-bit LBA */
5637:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
5638:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_TotSec32, sz_vol);		/* Volume size in 32-bit LBA */
5639:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5640:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[BPB_Media] = 0xF8;							/* Media descriptor byte */
5641:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_SecPerTrk, 63);				/* Number of sectors per track (for int13) */
5642:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_NumHeads, 255);				/* Number of heads (for int13) */
ARM GAS  /tmp/ccWTW02a.s 			page 132


5643:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(buf + BPB_HiddSec, b_vol);				/* Volume offset in the physical drive [sector] */
5644:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32) {
5645:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BS_VolID32, GET_FATTIME());	/* VSN */
5646:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_FATSz32, sz_fat);		/* FAT size [sector] */
5647:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_RootClus32, 2);			/* Root directory cluster # (2) */
5648:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_FSInfo32, 1);				/* Offset of FSINFO sector (VBR + 1) */
5649:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_BkBootSec32, 6);			/* Offset of backup VBR (VBR + 6) */
5650:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_DrvNum32] = 0x80;					/* Drive number (for int13) */
5651:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_BootSig32] = 0x29;					/* Extended boot signature */
5652:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(buf + BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
5653:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
5654:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BS_VolID, GET_FATTIME());	/* VSN */
5655:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_FATSz16, (WORD)sz_fat);	/* FAT size [sector] */
5656:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_DrvNum] = 0x80;						/* Drive number (for int13) */
5657:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_BootSig] = 0x29;						/* Extended boot signature */
5658:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(buf + BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
5659:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5660:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BS_55AA, 0xAA55);					/* Signature (offset is fixed here regardless of sector size)
5661:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(pdrv, buf, b_vol, 1) != RES_OK) return FR_DISK_ERR;	/* Write it to the VBR sector 
5662:Middlewares/Third_Party/FatFs/src/ff.c **** 
5663:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Create FSINFO record if needed */
5664:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32) {
5665:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(pdrv, buf, b_vol + 6, 1);		/* Write backup VBR (VBR + 6) */
5666:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
5667:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_LeadSig, 0x41615252);
5668:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_StrucSig, 0x61417272);
5669:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
5670:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_Nxt_Free, 2);			/* Last allocated cluster# */
5671:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BS_55AA, 0xAA55);
5672:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(pdrv, buf, b_vol + 7, 1);		/* Write backup FSINFO (VBR + 7) */
5673:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(pdrv, buf, b_vol + 1, 1);		/* Write original FSINFO (VBR + 1) */
5674:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5675:Middlewares/Third_Party/FatFs/src/ff.c **** 
5676:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Initialize FAT area */
5677:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_set(buf, 0, (UINT)szb_buf);
5678:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = b_fat;		/* FAT start sector */
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < n_fats; i++) {			/* Initialize FATs each */
5680:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
5681:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + 0, 0xFFFFFFF8);	/* Entry 0 */
5682:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + 4, 0xFFFFFFFF);	/* Entry 1 */
5683:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + 8, 0x0FFFFFFF);	/* Entry 2 (root directory) */
5684:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
5685:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + 0, (fmt == FS_FAT12) ? 0xFFFFF8 : 0xFFFFFFF8);	/* Entry 0 and 1 */
5686:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5687:Middlewares/Third_Party/FatFs/src/ff.c **** 			nsect = sz_fat;		/* Number of FAT sectors */
5688:Middlewares/Third_Party/FatFs/src/ff.c **** 			do {	/* Fill FAT sectors */
5689:Middlewares/Third_Party/FatFs/src/ff.c **** 				n = (nsect > sz_buf) ? sz_buf : nsect;
5690:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(pdrv, buf, sect, (UINT)n) != RES_OK) return FR_DISK_ERR;
5691:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(buf, 0, ss);
5692:Middlewares/Third_Party/FatFs/src/ff.c **** 				sect += n; nsect -= n;
5693:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (nsect);
5694:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5695:Middlewares/Third_Party/FatFs/src/ff.c **** 
5696:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Initialize root directory (fill with zero) */
5697:Middlewares/Third_Party/FatFs/src/ff.c **** 		nsect = (fmt == FS_FAT32) ? pau : sz_dir;	/* Number of root directory sectors */
5698:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
5699:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (nsect > sz_buf) ? sz_buf : nsect;
ARM GAS  /tmp/ccWTW02a.s 			page 133


5700:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, sect, (UINT)n) != RES_OK) return FR_DISK_ERR;
5701:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += n; nsect -= n;
5702:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (nsect);
5703:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5704:Middlewares/Third_Party/FatFs/src/ff.c **** 
5705:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Determine system ID in the partition table */
5706:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (_FS_EXFAT && fmt == FS_EXFAT) {
5707:Middlewares/Third_Party/FatFs/src/ff.c **** 		sys = 0x07;			/* HPFS/NTFS/exFAT */
5708:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
5709:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32) {
5710:Middlewares/Third_Party/FatFs/src/ff.c **** 			sys = 0x0C;		/* FAT32X */
5711:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
5712:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (sz_vol >= 0x10000) {
5713:Middlewares/Third_Party/FatFs/src/ff.c **** 				sys = 0x06;	/* FAT12/16 (>=64KS) */
5714:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
5715:Middlewares/Third_Party/FatFs/src/ff.c **** 				sys = (fmt == FS_FAT16) ? 0x04 : 0x01;	/* FAT16 (<64KS) : FAT12 (<64KS) */
5716:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5717:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5718:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5719:Middlewares/Third_Party/FatFs/src/ff.c **** 
5720:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Update partition information */
5721:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (_MULTI_PARTITION && part != 0) {	/* Created in the existing partition */
5722:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Update system ID in the partition table */
5723:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_read(pdrv, buf, 0, 1) != RES_OK) return FR_DISK_ERR;	/* Read the MBR */
5724:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[MBR_Table + (part - 1) * SZ_PTE + PTE_System] = sys;		/* Set system ID */
5725:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(pdrv, buf, 0, 1) != RES_OK) return FR_DISK_ERR;	/* Write it back to the MBR */
5726:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {								/* Created as a new single partition */
5727:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(opt & FM_SFD)) {	/* Create partition table if in FDISK format */
5728:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
5729:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BS_55AA, 0xAA55);		/* MBR signature */
5730:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte = buf + MBR_Table;				/* Create partition table for single partition in the drive */
5731:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_Boot] = 0;					/* Boot indicator */
5732:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StHead] = 1;				/* Start head */
5733:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StSec] = 1;					/* Start sector */
5734:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StCyl] = 0;					/* Start cylinder */
5735:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_System] = sys;				/* System type */
5736:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (b_vol + sz_vol) / (63 * 255);	/* (End CHS may be invalid) */
5737:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdHead] = 254;				/* End head */
5738:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdSec] = (BYTE)(n >> 2 | 63);	/* End sector */
5739:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdCyl] = (BYTE)n;			/* End cylinder */
5740:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(pte + PTE_StLba, b_vol);	/* Start offset in LBA */
5741:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(pte + PTE_SizLba, sz_vol);	/* Size in sectors */
5742:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, 0, 1) != RES_OK) return FR_DISK_ERR;	/* Write it to the MBR */
5743:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5744:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5745:Middlewares/Third_Party/FatFs/src/ff.c **** 
5746:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, CTRL_SYNC, 0) != RES_OK) return FR_DISK_ERR;
5747:Middlewares/Third_Party/FatFs/src/ff.c **** 
5748:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
5749:Middlewares/Third_Party/FatFs/src/ff.c **** }
5750:Middlewares/Third_Party/FatFs/src/ff.c **** 
5751:Middlewares/Third_Party/FatFs/src/ff.c **** 
5752:Middlewares/Third_Party/FatFs/src/ff.c **** 
5753:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MULTI_PARTITION
5754:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5755:Middlewares/Third_Party/FatFs/src/ff.c **** /* Create partition table on the physical drive                          */
5756:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  /tmp/ccWTW02a.s 			page 134


5757:Middlewares/Third_Party/FatFs/src/ff.c **** 
5758:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_fdisk (
5759:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE pdrv,			/* Physical drive number */
5760:Middlewares/Third_Party/FatFs/src/ff.c **** 	const DWORD* szt,	/* Pointer to the size table for each partitions */
5761:Middlewares/Third_Party/FatFs/src/ff.c **** 	void* work			/* Pointer to the working buffer */
5762:Middlewares/Third_Party/FatFs/src/ff.c **** )
5763:Middlewares/Third_Party/FatFs/src/ff.c **** {
5764:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, n, sz_cyl, tot_cyl, b_cyl, e_cyl, p_cyl;
5765:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE s_hd, e_hd, *p, *buf = (BYTE*)work;
5766:Middlewares/Third_Party/FatFs/src/ff.c **** 	DSTATUS stat;
5767:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sz_disk, sz_part, s_part;
5768:Middlewares/Third_Party/FatFs/src/ff.c **** 
5769:Middlewares/Third_Party/FatFs/src/ff.c **** 
5770:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(pdrv);
5771:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
5772:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
5773:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, GET_SECTOR_COUNT, &sz_disk)) return FR_DISK_ERR;
5774:Middlewares/Third_Party/FatFs/src/ff.c **** 
5775:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Determine the CHS without any consideration of the drive geometry */
5776:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (n = 16; n < 256 && sz_disk / n / 63 > 1024; n *= 2) ;
5777:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n == 256) n--;
5778:Middlewares/Third_Party/FatFs/src/ff.c **** 	e_hd = n - 1;
5779:Middlewares/Third_Party/FatFs/src/ff.c **** 	sz_cyl = 63 * n;
5780:Middlewares/Third_Party/FatFs/src/ff.c **** 	tot_cyl = sz_disk / sz_cyl;
5781:Middlewares/Third_Party/FatFs/src/ff.c **** 
5782:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create partition table */
5783:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_set(buf, 0, _MAX_SS);
5784:Middlewares/Third_Party/FatFs/src/ff.c **** 	p = buf + MBR_Table; b_cyl = 0;
5785:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = 0; i < 4; i++, p += SZ_PTE) {
5786:Middlewares/Third_Party/FatFs/src/ff.c **** 		p_cyl = (szt[i] <= 100U) ? (DWORD)tot_cyl * szt[i] / 100 : szt[i] / sz_cyl;	/* Number of cylinder
5787:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!p_cyl) continue;
5788:Middlewares/Third_Party/FatFs/src/ff.c **** 		s_part = (DWORD)sz_cyl * b_cyl;
5789:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_part = (DWORD)sz_cyl * p_cyl;
5790:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == 0) {	/* Exclude first track of cylinder 0 */
5791:Middlewares/Third_Party/FatFs/src/ff.c **** 			s_hd = 1;
5792:Middlewares/Third_Party/FatFs/src/ff.c **** 			s_part += 63; sz_part -= 63;
5793:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
5794:Middlewares/Third_Party/FatFs/src/ff.c **** 			s_hd = 0;
5795:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5796:Middlewares/Third_Party/FatFs/src/ff.c **** 		e_cyl = b_cyl + p_cyl - 1;	/* End cylinder */
5797:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (e_cyl >= tot_cyl) return FR_INVALID_PARAMETER;
5798:Middlewares/Third_Party/FatFs/src/ff.c **** 
5799:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Set partition table */
5800:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[1] = s_hd;						/* Start head */
5801:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[2] = (BYTE)((b_cyl >> 2) + 1);	/* Start sector */
5802:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[3] = (BYTE)b_cyl;					/* Start cylinder */
5803:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[4] = 0x07;						/* System type (temporary setting) */
5804:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[5] = e_hd;						/* End head */
5805:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[6] = (BYTE)((e_cyl >> 2) + 63);	/* End sector */
5806:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[7] = (BYTE)e_cyl;					/* End cylinder */
5807:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(p + 8, s_part);			/* Start sector in LBA */
5808:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(p + 12, sz_part);			/* Number of sectors */
5809:Middlewares/Third_Party/FatFs/src/ff.c **** 
5810:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Next partition */
5811:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_cyl += p_cyl;
5812:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5813:Middlewares/Third_Party/FatFs/src/ff.c **** 	st_word(p, 0xAA55);
ARM GAS  /tmp/ccWTW02a.s 			page 135


5814:Middlewares/Third_Party/FatFs/src/ff.c **** 
5815:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Write it to the MBR */
5816:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (disk_write(pdrv, buf, 0, 1) != RES_OK || disk_ioctl(pdrv, CTRL_SYNC, 0) != RES_OK) ? FR_DI
5817:Middlewares/Third_Party/FatFs/src/ff.c **** }
5818:Middlewares/Third_Party/FatFs/src/ff.c **** 
5819:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _MULTI_PARTITION */
5820:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_MKFS && !_FS_READONLY */
5821:Middlewares/Third_Party/FatFs/src/ff.c **** 
5822:Middlewares/Third_Party/FatFs/src/ff.c **** 
5823:Middlewares/Third_Party/FatFs/src/ff.c **** 
5824:Middlewares/Third_Party/FatFs/src/ff.c **** 
5825:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_STRFUNC
5826:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5827:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get a string from the file                                            */
5828:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5829:Middlewares/Third_Party/FatFs/src/ff.c **** 
5830:Middlewares/Third_Party/FatFs/src/ff.c **** TCHAR* f_gets (
5831:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR* buff,	/* Pointer to the string buffer to read */
5832:Middlewares/Third_Party/FatFs/src/ff.c **** 	int len,		/* Size of string buffer (characters) */
5833:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp			/* Pointer to the file object */
5834:Middlewares/Third_Party/FatFs/src/ff.c **** )
5835:Middlewares/Third_Party/FatFs/src/ff.c **** {
5836:Middlewares/Third_Party/FatFs/src/ff.c **** 	int n = 0;
5837:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c, *p = buff;
5838:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE s[2];
5839:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT rc;
5840:Middlewares/Third_Party/FatFs/src/ff.c **** 
5841:Middlewares/Third_Party/FatFs/src/ff.c **** 
5842:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (n < len - 1) {	/* Read characters until buffer gets filled */
5843:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
5844:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STRF_ENCODE == 3		/* Read a character in UTF-8 */
5845:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 1, &rc);
5846:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 1) break;
5847:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
5848:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c >= 0x80) {
5849:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c < 0xC0) continue;	/* Skip stray trailer */
5850:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c < 0xE0) {			/* Two-byte sequence (0x80-0x7FF) */
5851:Middlewares/Third_Party/FatFs/src/ff.c **** 				f_read(fp, s, 1, &rc);
5852:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (rc != 1) break;
5853:Middlewares/Third_Party/FatFs/src/ff.c **** 				c = (c & 0x1F) << 6 | (s[0] & 0x3F);
5854:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (c < 0x80) c = '?';	/* Reject invalid code range */
5855:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
5856:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (c < 0xF0) {		/* Three-byte sequence (0x800-0xFFFF) */
5857:Middlewares/Third_Party/FatFs/src/ff.c **** 					f_read(fp, s, 2, &rc);
5858:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (rc != 2) break;
5859:Middlewares/Third_Party/FatFs/src/ff.c **** 					c = c << 12 | (s[0] & 0x3F) << 6 | (s[1] & 0x3F);
5860:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (c < 0x800) c = '?';	/* Reject invalid code range */
5861:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {			/* Reject four-byte sequence */
5862:Middlewares/Third_Party/FatFs/src/ff.c **** 					c = '?';
5863:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5864:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5865:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5866:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _STRF_ENCODE == 2		/* Read a character in UTF-16BE */
5867:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 2, &rc);
5868:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 2) break;
5869:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[1] + (s[0] << 8);
5870:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _STRF_ENCODE == 1		/* Read a character in UTF-16LE */
ARM GAS  /tmp/ccWTW02a.s 			page 136


5871:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 2, &rc);
5872:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 2) break;
5873:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0] + (s[1] << 8);
5874:Middlewares/Third_Party/FatFs/src/ff.c **** #else						/* Read a character in ANSI/OEM */
5875:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 1, &rc);
5876:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 1) break;
5877:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
5878:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsDBCS1(c)) {
5879:Middlewares/Third_Party/FatFs/src/ff.c **** 			f_read(fp, s, 1, &rc);
5880:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (rc != 1) break;
5881:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = (c << 8) + s[0];
5882:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5883:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = ff_convert(c, 1);	/* OEM -> Unicode */
5884:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!c) c = '?';
5885:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5886:Middlewares/Third_Party/FatFs/src/ff.c **** #else						/* Read a character without conversion */
5887:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 1, &rc);
5888:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 1) break;
5889:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
5890:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5891:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_USE_STRFUNC == 2 && c == '\r') continue;	/* Strip '\r' */
5892:Middlewares/Third_Party/FatFs/src/ff.c **** 		*p++ = c;
5893:Middlewares/Third_Party/FatFs/src/ff.c **** 		n++;
5894:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '\n') break;		/* Break on EOL */
5895:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5896:Middlewares/Third_Party/FatFs/src/ff.c **** 	*p = 0;
5897:Middlewares/Third_Party/FatFs/src/ff.c **** 	return n ? buff : 0;			/* When no data read (eof or error), return with error. */
5898:Middlewares/Third_Party/FatFs/src/ff.c **** }
5899:Middlewares/Third_Party/FatFs/src/ff.c **** 
5900:Middlewares/Third_Party/FatFs/src/ff.c **** 
5901:Middlewares/Third_Party/FatFs/src/ff.c **** 
5902:Middlewares/Third_Party/FatFs/src/ff.c **** 
5903:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
5904:Middlewares/Third_Party/FatFs/src/ff.c **** #include <stdarg.h>
5905:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5906:Middlewares/Third_Party/FatFs/src/ff.c **** /* Put a character to the file                                           */
5907:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5908:Middlewares/Third_Party/FatFs/src/ff.c **** 
5909:Middlewares/Third_Party/FatFs/src/ff.c **** typedef struct {
5910:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL *fp;		/* Ptr to the writing file */
5911:Middlewares/Third_Party/FatFs/src/ff.c **** 	int idx, nchr;	/* Write index of buf[] (-1:error), number of chars written */
5912:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE buf[64];	/* Write buffer */
5913:Middlewares/Third_Party/FatFs/src/ff.c **** } putbuff;
5914:Middlewares/Third_Party/FatFs/src/ff.c **** 
5915:Middlewares/Third_Party/FatFs/src/ff.c **** 
5916:Middlewares/Third_Party/FatFs/src/ff.c **** static
5917:Middlewares/Third_Party/FatFs/src/ff.c **** void putc_bfd (		/* Buffered write with code conversion */
5918:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff* pb,
5919:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c
5920:Middlewares/Third_Party/FatFs/src/ff.c **** )
5921:Middlewares/Third_Party/FatFs/src/ff.c **** {
5922:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bw;
5923:Middlewares/Third_Party/FatFs/src/ff.c **** 	int i;
5924:Middlewares/Third_Party/FatFs/src/ff.c **** 
5925:Middlewares/Third_Party/FatFs/src/ff.c **** 
5926:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (_USE_STRFUNC == 2 && c == '\n') {	 /* LF -> CRLF conversion */
5927:Middlewares/Third_Party/FatFs/src/ff.c **** 		putc_bfd(pb, '\r');
ARM GAS  /tmp/ccWTW02a.s 			page 137


5928:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5929:Middlewares/Third_Party/FatFs/src/ff.c **** 
5930:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = pb->idx;		/* Write index of pb->buf[] */
5931:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i < 0) return;
5932:Middlewares/Third_Party/FatFs/src/ff.c **** 
5933:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
5934:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STRF_ENCODE == 3			/* Write a character in UTF-8 */
5935:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (c < 0x80) {				/* 7-bit */
5936:Middlewares/Third_Party/FatFs/src/ff.c **** 		pb->buf[i++] = (BYTE)c;
5937:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
5938:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c < 0x800) {		/* 11-bit */
5939:Middlewares/Third_Party/FatFs/src/ff.c **** 			pb->buf[i++] = (BYTE)(0xC0 | c >> 6);
5940:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {				/* 16-bit */
5941:Middlewares/Third_Party/FatFs/src/ff.c **** 			pb->buf[i++] = (BYTE)(0xE0 | c >> 12);
5942:Middlewares/Third_Party/FatFs/src/ff.c **** 			pb->buf[i++] = (BYTE)(0x80 | (c >> 6 & 0x3F));
5943:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5944:Middlewares/Third_Party/FatFs/src/ff.c **** 		pb->buf[i++] = (BYTE)(0x80 | (c & 0x3F));
5945:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5946:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _STRF_ENCODE == 2			/* Write a character in UTF-16BE */
5947:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)(c >> 8);
5948:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)c;
5949:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _STRF_ENCODE == 1			/* Write a character in UTF-16LE */
5950:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)c;
5951:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)(c >> 8);
5952:Middlewares/Third_Party/FatFs/src/ff.c **** #else							/* Write a character in ANSI/OEM */
5953:Middlewares/Third_Party/FatFs/src/ff.c **** 	c = ff_convert(c, 0);	/* Unicode -> OEM */
5954:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!c) c = '?';
5955:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (c >= 0x100)
5956:Middlewares/Third_Party/FatFs/src/ff.c **** 		pb->buf[i++] = (BYTE)(c >> 8);
5957:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)c;
5958:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5959:Middlewares/Third_Party/FatFs/src/ff.c **** #else							/* Write a character without conversion */
5960:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)c;
5961:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5962:Middlewares/Third_Party/FatFs/src/ff.c **** 
5963:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i >= (int)(sizeof pb->buf) - 3) {	/* Write buffered characters to the file */
5964:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_write(pb->fp, pb->buf, (UINT)i, &bw);
5965:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = (bw == (UINT)i) ? 0 : -1;
5966:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5967:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->idx = i;
5968:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->nchr++;
5969:Middlewares/Third_Party/FatFs/src/ff.c **** }
5970:Middlewares/Third_Party/FatFs/src/ff.c **** 
5971:Middlewares/Third_Party/FatFs/src/ff.c **** 
5972:Middlewares/Third_Party/FatFs/src/ff.c **** static
5973:Middlewares/Third_Party/FatFs/src/ff.c **** int putc_flush (		/* Flush left characters in the buffer */
5974:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff* pb
5975:Middlewares/Third_Party/FatFs/src/ff.c **** )
5976:Middlewares/Third_Party/FatFs/src/ff.c **** {
5977:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nw;
5978:Middlewares/Third_Party/FatFs/src/ff.c **** 
5979:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (   pb->idx >= 0	/* Flush buffered characters to the file */
5980:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& f_write(pb->fp, pb->buf, (UINT)pb->idx, &nw) == FR_OK
5981:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& (UINT)pb->idx == nw) return pb->nchr;
5982:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
5983:Middlewares/Third_Party/FatFs/src/ff.c **** }
5984:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  /tmp/ccWTW02a.s 			page 138


5985:Middlewares/Third_Party/FatFs/src/ff.c **** 
5986:Middlewares/Third_Party/FatFs/src/ff.c **** static
5987:Middlewares/Third_Party/FatFs/src/ff.c **** void putc_init (		/* Initialize write buffer */
5988:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff* pb,
5989:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp
5990:Middlewares/Third_Party/FatFs/src/ff.c **** )
5991:Middlewares/Third_Party/FatFs/src/ff.c **** {
 1702              		.loc 1 5991 1 is_stmt 1 view -0
 1703              		.cfi_startproc
 1704              		@ args = 0, pretend = 0, frame = 0
 1705              		@ frame_needed = 0, uses_anonymous_args = 0
 1706              		@ link register save eliminated.
5992:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->fp = fp;
 1707              		.loc 1 5992 2 view .LVU514
 1708              		.loc 1 5992 9 is_stmt 0 view .LVU515
 1709 0000 0160     		str	r1, [r0]
5993:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->nchr = pb->idx = 0;
 1710              		.loc 1 5993 2 is_stmt 1 view .LVU516
 1711              		.loc 1 5993 21 is_stmt 0 view .LVU517
 1712 0002 0023     		movs	r3, #0
 1713 0004 4360     		str	r3, [r0, #4]
 1714              		.loc 1 5993 11 view .LVU518
 1715 0006 8360     		str	r3, [r0, #8]
5994:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1716              		.loc 1 5994 1 view .LVU519
 1717 0008 7047     		bx	lr
 1718              		.cfi_endproc
 1719              	.LFE199:
 1721              		.section	.text.validate,"ax",%progbits
 1722              		.align	1
 1723              		.syntax unified
 1724              		.thumb
 1725              		.thumb_func
 1726              		.fpu fpv5-d16
 1728              	validate:
 1729              	.LVL184:
 1730              	.LFB178:
3220:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_INVALID_OBJECT;
 1731              		.loc 1 3220 1 is_stmt 1 view -0
 1732              		.cfi_startproc
 1733              		@ args = 0, pretend = 0, frame = 0
 1734              		@ frame_needed = 0, uses_anonymous_args = 0
3220:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_INVALID_OBJECT;
 1735              		.loc 1 3220 1 is_stmt 0 view .LVU521
 1736 0000 38B5     		push	{r3, r4, r5, lr}
 1737              	.LCFI18:
 1738              		.cfi_def_cfa_offset 16
 1739              		.cfi_offset 3, -16
 1740              		.cfi_offset 4, -12
 1741              		.cfi_offset 5, -8
 1742              		.cfi_offset 14, -4
 1743 0002 0D46     		mov	r5, r1
3221:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1744              		.loc 1 3221 2 is_stmt 1 view .LVU522
 1745              	.LVL185:
3224:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 1746              		.loc 1 3224 2 view .LVU523
ARM GAS  /tmp/ccWTW02a.s 			page 139


3224:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 1747              		.loc 1 3224 5 is_stmt 0 view .LVU524
 1748 0004 0446     		mov	r4, r0
 1749 0006 98B1     		cbz	r0, .L148
3224:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 1750              		.loc 1 3224 16 discriminator 1 view .LVU525
 1751 0008 0368     		ldr	r3, [r0]
3224:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 1752              		.loc 1 3224 10 discriminator 1 view .LVU526
 1753 000a 9BB1     		cbz	r3, .L149
3224:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 1754              		.loc 1 3224 31 discriminator 2 view .LVU527
 1755 000c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
3224:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 1756              		.loc 1 3224 21 discriminator 2 view .LVU528
 1757 000e A2B1     		cbz	r2, .L150
3224:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 1758              		.loc 1 3224 47 discriminator 3 view .LVU529
 1759 0010 8188     		ldrh	r1, [r0, #4]
 1760              	.LVL186:
3224:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 1761              		.loc 1 3224 62 discriminator 3 view .LVU530
 1762 0012 DA88     		ldrh	r2, [r3, #6]
3224:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 1763              		.loc 1 3224 41 discriminator 3 view .LVU531
 1764 0014 9142     		cmp	r1, r2
 1765 0016 03D0     		beq	.L154
3221:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1766              		.loc 1 3221 10 view .LVU532
 1767 0018 0920     		movs	r0, #9
 1768              	.LVL187:
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 1769              		.loc 1 3241 33 view .LVU533
 1770 001a 0024     		movs	r4, #0
 1771              	.LVL188:
 1772              	.L147:
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 1773              		.loc 1 3241 6 discriminator 4 view .LVU534
 1774 001c 2C60     		str	r4, [r5]
3242:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1775              		.loc 1 3242 2 is_stmt 1 discriminator 4 view .LVU535
3243:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1776              		.loc 1 3243 1 is_stmt 0 discriminator 4 view .LVU536
 1777 001e 38BD     		pop	{r3, r4, r5, pc}
 1778              	.LVL189:
 1779              	.L154:
3236:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
 1780              		.loc 1 3236 3 is_stmt 1 view .LVU537
3236:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
 1781              		.loc 1 3236 9 is_stmt 0 view .LVU538
 1782 0020 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 1783              	.LVL190:
3236:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
 1784              		.loc 1 3236 9 view .LVU539
 1785 0022 FFF7FEFF 		bl	disk_status
 1786              	.LVL191:
3236:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
ARM GAS  /tmp/ccWTW02a.s 			page 140


 1787              		.loc 1 3236 6 view .LVU540
 1788 0026 10F00100 		ands	r0, r0, #1
 1789 002a 09D1     		bne	.L152
3237:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1790              		.loc 1 3237 4 is_stmt 1 view .LVU541
 1791              	.LVL192:
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 1792              		.loc 1 3241 2 view .LVU542
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 1793              		.loc 1 3241 33 is_stmt 0 view .LVU543
 1794 002c 2468     		ldr	r4, [r4]
 1795              	.LVL193:
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 1796              		.loc 1 3241 33 view .LVU544
 1797 002e F5E7     		b	.L147
 1798              	.LVL194:
 1799              	.L148:
3221:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1800              		.loc 1 3221 10 view .LVU545
 1801 0030 0920     		movs	r0, #9
 1802              	.LVL195:
3221:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1803              		.loc 1 3221 10 view .LVU546
 1804 0032 F3E7     		b	.L147
 1805              	.LVL196:
 1806              	.L149:
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 1807              		.loc 1 3241 33 view .LVU547
 1808 0034 1C46     		mov	r4, r3
3221:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1809              		.loc 1 3221 10 view .LVU548
 1810 0036 0920     		movs	r0, #9
 1811              	.LVL197:
3221:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1812              		.loc 1 3221 10 view .LVU549
 1813 0038 F0E7     		b	.L147
 1814              	.LVL198:
 1815              	.L150:
3221:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1816              		.loc 1 3221 10 view .LVU550
 1817 003a 0920     		movs	r0, #9
 1818              	.LVL199:
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 1819              		.loc 1 3241 33 view .LVU551
 1820 003c 0024     		movs	r4, #0
 1821              	.LVL200:
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 1822              		.loc 1 3241 33 view .LVU552
 1823 003e EDE7     		b	.L147
 1824              	.LVL201:
 1825              	.L152:
3221:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1826              		.loc 1 3221 10 view .LVU553
 1827 0040 0920     		movs	r0, #9
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 1828              		.loc 1 3241 33 view .LVU554
 1829 0042 0024     		movs	r4, #0
ARM GAS  /tmp/ccWTW02a.s 			page 141


 1830              	.LVL202:
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 1831              		.loc 1 3241 33 view .LVU555
 1832 0044 EAE7     		b	.L147
 1833              		.cfi_endproc
 1834              	.LFE178:
 1836              		.section	.text.sync_window,"ax",%progbits
 1837              		.align	1
 1838              		.syntax unified
 1839              		.thumb
 1840              		.thumb_func
 1841              		.fpu fpv5-d16
 1843              	sync_window:
 1844              	.LVL203:
 1845              	.LFB154:
 886:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD wsect;
 1846              		.loc 1 886 1 is_stmt 1 view -0
 1847              		.cfi_startproc
 1848              		@ args = 0, pretend = 0, frame = 0
 1849              		@ frame_needed = 0, uses_anonymous_args = 0
 886:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD wsect;
 1850              		.loc 1 886 1 is_stmt 0 view .LVU557
 1851 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1852              	.LCFI19:
 1853              		.cfi_def_cfa_offset 24
 1854              		.cfi_offset 4, -24
 1855              		.cfi_offset 5, -20
 1856              		.cfi_offset 6, -16
 1857              		.cfi_offset 7, -12
 1858              		.cfi_offset 8, -8
 1859              		.cfi_offset 14, -4
 887:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nf;
 1860              		.loc 1 887 2 is_stmt 1 view .LVU558
 888:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 1861              		.loc 1 888 2 view .LVU559
 889:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1862              		.loc 1 889 2 view .LVU560
 1863              	.LVL204:
 892:Middlewares/Third_Party/FatFs/src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 1864              		.loc 1 892 2 view .LVU561
 892:Middlewares/Third_Party/FatFs/src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 1865              		.loc 1 892 8 is_stmt 0 view .LVU562
 1866 0004 C578     		ldrb	r5, [r0, #3]	@ zero_extendqisi2
 892:Middlewares/Third_Party/FatFs/src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 1867              		.loc 1 892 5 view .LVU563
 1868 0006 15B9     		cbnz	r5, .L161
 1869              	.LVL205:
 1870              	.L156:
 906:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1871              		.loc 1 906 2 is_stmt 1 view .LVU564
 907:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 1872              		.loc 1 907 1 is_stmt 0 view .LVU565
 1873 0008 2846     		mov	r0, r5
 1874 000a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1875              	.LVL206:
 1876              	.L161:
 907:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  /tmp/ccWTW02a.s 			page 142


 1877              		.loc 1 907 1 view .LVU566
 1878 000e 0446     		mov	r4, r0
 893:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK) {
 1879              		.loc 1 893 3 is_stmt 1 view .LVU567
 893:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK) {
 1880              		.loc 1 893 9 is_stmt 0 view .LVU568
 1881 0010 C76A     		ldr	r7, [r0, #44]
 1882              	.LVL207:
 894:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_DISK_ERR;
 1883              		.loc 1 894 3 is_stmt 1 view .LVU569
 894:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_DISK_ERR;
 1884              		.loc 1 894 29 is_stmt 0 view .LVU570
 1885 0012 00F13008 		add	r8, r0, #48
 894:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_DISK_ERR;
 1886              		.loc 1 894 7 view .LVU571
 1887 0016 0123     		movs	r3, #1
 1888 0018 3A46     		mov	r2, r7
 1889 001a 4146     		mov	r1, r8
 1890 001c 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 1891              	.LVL208:
 894:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_DISK_ERR;
 1892              		.loc 1 894 7 view .LVU572
 1893 001e FFF7FEFF 		bl	disk_write
 1894              	.LVL209:
 894:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_DISK_ERR;
 1895              		.loc 1 894 6 view .LVU573
 1896 0022 0546     		mov	r5, r0
 1897 0024 98B9     		cbnz	r0, .L159
 897:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (wsect - fs->fatbase < fs->fsize) {		/* Is it in the FAT area? */
 1898              		.loc 1 897 4 is_stmt 1 view .LVU574
 897:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (wsect - fs->fatbase < fs->fsize) {		/* Is it in the FAT area? */
 1899              		.loc 1 897 14 is_stmt 0 view .LVU575
 1900 0026 0023     		movs	r3, #0
 1901 0028 E370     		strb	r3, [r4, #3]
 898:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 1902              		.loc 1 898 4 is_stmt 1 view .LVU576
 898:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 1903              		.loc 1 898 18 is_stmt 0 view .LVU577
 1904 002a 236A     		ldr	r3, [r4, #32]
 898:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 1905              		.loc 1 898 14 view .LVU578
 1906 002c FB1A     		subs	r3, r7, r3
 898:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 1907              		.loc 1 898 32 view .LVU579
 1908 002e A269     		ldr	r2, [r4, #24]
 898:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 1909              		.loc 1 898 7 view .LVU580
 1910 0030 9342     		cmp	r3, r2
 1911 0032 E9D2     		bcs	.L156
 899:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 1912              		.loc 1 899 5 is_stmt 1 view .LVU581
 899:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 1913              		.loc 1 899 17 is_stmt 0 view .LVU582
 1914 0034 A678     		ldrb	r6, [r4, #2]	@ zero_extendqisi2
 1915              	.LVL210:
 1916              	.L157:
 899:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
ARM GAS  /tmp/ccWTW02a.s 			page 143


 1917              		.loc 1 899 27 is_stmt 1 discriminator 1 view .LVU583
 899:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 1918              		.loc 1 899 5 is_stmt 0 discriminator 1 view .LVU584
 1919 0036 012E     		cmp	r6, #1
 1920 0038 E6D9     		bls	.L156
 900:Middlewares/Third_Party/FatFs/src/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 1921              		.loc 1 900 6 is_stmt 1 discriminator 3 view .LVU585
 900:Middlewares/Third_Party/FatFs/src/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 1922              		.loc 1 900 17 is_stmt 0 discriminator 3 view .LVU586
 1923 003a A369     		ldr	r3, [r4, #24]
 900:Middlewares/Third_Party/FatFs/src/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 1924              		.loc 1 900 12 discriminator 3 view .LVU587
 1925 003c 1F44     		add	r7, r7, r3
 1926              	.LVL211:
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 1927              		.loc 1 901 6 is_stmt 1 discriminator 3 view .LVU588
 1928 003e 0123     		movs	r3, #1
 1929 0040 3A46     		mov	r2, r7
 1930 0042 4146     		mov	r1, r8
 1931 0044 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1932 0046 FFF7FEFF 		bl	disk_write
 1933              	.LVL212:
 899:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 1934              		.loc 1 899 36 discriminator 3 view .LVU589
 899:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 1935              		.loc 1 899 38 is_stmt 0 discriminator 3 view .LVU590
 1936 004a 013E     		subs	r6, r6, #1
 1937              	.LVL213:
 899:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 1938              		.loc 1 899 38 discriminator 3 view .LVU591
 1939 004c F3E7     		b	.L157
 1940              	.LVL214:
 1941              	.L159:
 895:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 1942              		.loc 1 895 8 view .LVU592
 1943 004e 0125     		movs	r5, #1
 1944 0050 DAE7     		b	.L156
 1945              		.cfi_endproc
 1946              	.LFE154:
 1948              		.section	.text.move_window,"ax",%progbits
 1949              		.align	1
 1950              		.syntax unified
 1951              		.thumb
 1952              		.thumb_func
 1953              		.fpu fpv5-d16
 1955              	move_window:
 1956              	.LVL215:
 1957              	.LFB155:
 916:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 1958              		.loc 1 916 1 is_stmt 1 view -0
 1959              		.cfi_startproc
 1960              		@ args = 0, pretend = 0, frame = 0
 1961              		@ frame_needed = 0, uses_anonymous_args = 0
 916:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 1962              		.loc 1 916 1 is_stmt 0 view .LVU594
 1963 0000 70B5     		push	{r4, r5, r6, lr}
 1964              	.LCFI20:
ARM GAS  /tmp/ccWTW02a.s 			page 144


 1965              		.cfi_def_cfa_offset 16
 1966              		.cfi_offset 4, -16
 1967              		.cfi_offset 5, -12
 1968              		.cfi_offset 6, -8
 1969              		.cfi_offset 14, -4
 917:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1970              		.loc 1 917 2 is_stmt 1 view .LVU595
 1971              	.LVL216:
 920:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 1972              		.loc 1 920 2 view .LVU596
 920:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 1973              		.loc 1 920 18 is_stmt 0 view .LVU597
 1974 0002 C36A     		ldr	r3, [r0, #44]
 920:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 1975              		.loc 1 920 5 view .LVU598
 1976 0004 8B42     		cmp	r3, r1
 1977 0006 02D1     		bne	.L168
 917:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1978              		.loc 1 917 10 view .LVU599
 1979 0008 0026     		movs	r6, #0
 1980              	.LVL217:
 1981              	.L163:
 932:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1982              		.loc 1 932 2 is_stmt 1 view .LVU600
 933:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1983              		.loc 1 933 1 is_stmt 0 view .LVU601
 1984 000a 3046     		mov	r0, r6
 1985 000c 70BD     		pop	{r4, r5, r6, pc}
 1986              	.LVL218:
 1987              	.L168:
 933:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1988              		.loc 1 933 1 view .LVU602
 1989 000e 0446     		mov	r4, r0
 1990 0010 0D46     		mov	r5, r1
 922:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 1991              		.loc 1 922 3 is_stmt 1 view .LVU603
 922:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 1992              		.loc 1 922 9 is_stmt 0 view .LVU604
 1993 0012 FFF7FEFF 		bl	sync_window
 1994              	.LVL219:
 924:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK) {
 1995              		.loc 1 924 3 is_stmt 1 view .LVU605
 924:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK) {
 1996              		.loc 1 924 6 is_stmt 0 view .LVU606
 1997 0016 0646     		mov	r6, r0
 1998 0018 0028     		cmp	r0, #0
 1999 001a F6D1     		bne	.L163
 925:Middlewares/Third_Party/FatFs/src/ff.c **** 				sector = 0xFFFFFFFF;	/* Invalidate window if data is not reliable */
 2000              		.loc 1 925 4 is_stmt 1 view .LVU607
 925:Middlewares/Third_Party/FatFs/src/ff.c **** 				sector = 0xFFFFFFFF;	/* Invalidate window if data is not reliable */
 2001              		.loc 1 925 8 is_stmt 0 view .LVU608
 2002 001c 0123     		movs	r3, #1
 2003 001e 2A46     		mov	r2, r5
 2004 0020 04F13001 		add	r1, r4, #48
 2005 0024 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 2006              	.LVL220:
 925:Middlewares/Third_Party/FatFs/src/ff.c **** 				sector = 0xFFFFFFFF;	/* Invalidate window if data is not reliable */
ARM GAS  /tmp/ccWTW02a.s 			page 145


 2007              		.loc 1 925 8 view .LVU609
 2008 0026 FFF7FEFF 		bl	disk_read
 2009              	.LVL221:
 925:Middlewares/Third_Party/FatFs/src/ff.c **** 				sector = 0xFFFFFFFF;	/* Invalidate window if data is not reliable */
 2010              		.loc 1 925 7 view .LVU610
 2011 002a 10B1     		cbz	r0, .L164
 927:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 2012              		.loc 1 927 9 view .LVU611
 2013 002c 0126     		movs	r6, #1
 926:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_DISK_ERR;
 2014              		.loc 1 926 12 view .LVU612
 2015 002e 4FF0FF35 		mov	r5, #-1
 2016              	.LVL222:
 2017              	.L164:
 929:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2018              		.loc 1 929 4 is_stmt 1 view .LVU613
 929:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2019              		.loc 1 929 16 is_stmt 0 view .LVU614
 2020 0032 E562     		str	r5, [r4, #44]
 2021 0034 E9E7     		b	.L163
 2022              		.cfi_endproc
 2023              	.LFE155:
 2025              		.section	.text.check_fs,"ax",%progbits
 2026              		.align	1
 2027              		.syntax unified
 2028              		.thumb
 2029              		.thumb_func
 2030              		.fpu fpv5-d16
 2032              	check_fs:
 2033              	.LVL223:
 2034              	.LFB176:
2969:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->wflag = 0; fs->winsect = 0xFFFFFFFF;		/* Invaidate window */
 2035              		.loc 1 2969 1 is_stmt 1 view -0
 2036              		.cfi_startproc
 2037              		@ args = 0, pretend = 0, frame = 0
 2038              		@ frame_needed = 0, uses_anonymous_args = 0
2969:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->wflag = 0; fs->winsect = 0xFFFFFFFF;		/* Invaidate window */
 2039              		.loc 1 2969 1 is_stmt 0 view .LVU616
 2040 0000 38B5     		push	{r3, r4, r5, lr}
 2041              	.LCFI21:
 2042              		.cfi_def_cfa_offset 16
 2043              		.cfi_offset 3, -16
 2044              		.cfi_offset 4, -12
 2045              		.cfi_offset 5, -8
 2046              		.cfi_offset 14, -4
 2047 0002 0446     		mov	r4, r0
2970:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (move_window(fs, sect) != FR_OK) return 4;	/* Load boot record */
 2048              		.loc 1 2970 2 is_stmt 1 view .LVU617
2970:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (move_window(fs, sect) != FR_OK) return 4;	/* Load boot record */
 2049              		.loc 1 2970 12 is_stmt 0 view .LVU618
 2050 0004 0023     		movs	r3, #0
 2051 0006 C370     		strb	r3, [r0, #3]
2970:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (move_window(fs, sect) != FR_OK) return 4;	/* Load boot record */
 2052              		.loc 1 2970 17 is_stmt 1 view .LVU619
2970:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (move_window(fs, sect) != FR_OK) return 4;	/* Load boot record */
 2053              		.loc 1 2970 29 is_stmt 0 view .LVU620
 2054 0008 4FF0FF33 		mov	r3, #-1
ARM GAS  /tmp/ccWTW02a.s 			page 146


 2055 000c C362     		str	r3, [r0, #44]
2971:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2056              		.loc 1 2971 2 is_stmt 1 view .LVU621
2971:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2057              		.loc 1 2971 6 is_stmt 0 view .LVU622
 2058 000e FFF7FEFF 		bl	move_window
 2059              	.LVL224:
2971:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2060              		.loc 1 2971 5 view .LVU623
 2061 0012 30BB     		cbnz	r0, .L172
 2062 0014 0546     		mov	r5, r0
2973:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2063              		.loc 1 2973 2 is_stmt 1 view .LVU624
2973:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2064              		.loc 1 2973 6 is_stmt 0 view .LVU625
 2065 0016 04F22E20 		addw	r0, r4, #558
 2066 001a FFF7FEFF 		bl	ld_word
 2067              	.LVL225:
2973:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2068              		.loc 1 2973 5 view .LVU626
 2069 001e 4AF65523 		movw	r3, #43605
 2070 0022 9842     		cmp	r0, r3
 2071 0024 1FD1     		bne	.L173
2975:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((ld_dword(fs->win + BS_FilSysType) & 0xFFFFFF) == 0x544146) return 0;	/* Check "FAT" string *
 2072              		.loc 1 2975 2 is_stmt 1 view .LVU627
2975:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((ld_dword(fs->win + BS_FilSysType) & 0xFFFFFF) == 0x544146) return 0;	/* Check "FAT" string *
 2073              		.loc 1 2975 13 is_stmt 0 view .LVU628
 2074 0026 94F83030 		ldrb	r3, [r4, #48]	@ zero_extendqisi2
2975:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((ld_dword(fs->win + BS_FilSysType) & 0xFFFFFF) == 0x544146) return 0;	/* Check "FAT" string *
 2075              		.loc 1 2975 5 view .LVU629
 2076 002a E92B     		cmp	r3, #233
 2077 002c 07D0     		beq	.L171
2975:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((ld_dword(fs->win + BS_FilSysType) & 0xFFFFFF) == 0x544146) return 0;	/* Check "FAT" string *
 2078              		.loc 1 2975 66 discriminator 1 view .LVU630
 2079 002e 236B     		ldr	r3, [r4, #48]
 2080 0030 03F0FF13 		and	r3, r3, #16711935
2975:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((ld_dword(fs->win + BS_FilSysType) & 0xFFFFFF) == 0x544146) return 0;	/* Check "FAT" string *
 2081              		.loc 1 2975 34 discriminator 1 view .LVU631
 2082 0034 0D4A     		ldr	r2, .L176
 2083 0036 9342     		cmp	r3, r2
 2084 0038 01D0     		beq	.L171
2982:Middlewares/Third_Party/FatFs/src/ff.c **** }
 2085              		.loc 1 2982 9 view .LVU632
 2086 003a 0225     		movs	r5, #2
 2087 003c 14E0     		b	.L170
 2088              	.L171:
2976:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ld_dword(fs->win + BS_FilSysType32) == 0x33544146) return 0;			/* Check "FAT3" string */
 2089              		.loc 1 2976 3 is_stmt 1 view .LVU633
2976:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ld_dword(fs->win + BS_FilSysType32) == 0x33544146) return 0;			/* Check "FAT3" string */
 2090              		.loc 1 2976 8 is_stmt 0 view .LVU634
 2091 003e 04F16600 		add	r0, r4, #102
 2092 0042 FFF7FEFF 		bl	ld_dword
 2093              	.LVL226:
2976:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ld_dword(fs->win + BS_FilSysType32) == 0x33544146) return 0;			/* Check "FAT3" string */
 2094              		.loc 1 2976 42 view .LVU635
 2095 0046 20F07F40 		bic	r0, r0, #-16777216
2976:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ld_dword(fs->win + BS_FilSysType32) == 0x33544146) return 0;			/* Check "FAT3" string */
ARM GAS  /tmp/ccWTW02a.s 			page 147


 2096              		.loc 1 2976 6 view .LVU636
 2097 004a 094B     		ldr	r3, .L176+4
 2098 004c 9842     		cmp	r0, r3
 2099 004e 0BD0     		beq	.L170
2977:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2100              		.loc 1 2977 3 is_stmt 1 view .LVU637
2977:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2101              		.loc 1 2977 7 is_stmt 0 view .LVU638
 2102 0050 04F18200 		add	r0, r4, #130
 2103 0054 FFF7FEFF 		bl	ld_dword
 2104              	.LVL227:
2977:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2105              		.loc 1 2977 6 view .LVU639
 2106 0058 064B     		ldr	r3, .L176+8
 2107 005a 9842     		cmp	r0, r3
 2108 005c 04D0     		beq	.L170
2982:Middlewares/Third_Party/FatFs/src/ff.c **** }
 2109              		.loc 1 2982 9 view .LVU640
 2110 005e 0225     		movs	r5, #2
 2111 0060 02E0     		b	.L170
 2112              	.L172:
2971:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2113              		.loc 1 2971 45 view .LVU641
 2114 0062 0425     		movs	r5, #4
 2115 0064 00E0     		b	.L170
 2116              	.L173:
2973:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2117              		.loc 1 2973 51 view .LVU642
 2118 0066 0325     		movs	r5, #3
 2119              	.L170:
2983:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2120              		.loc 1 2983 1 view .LVU643
 2121 0068 2846     		mov	r0, r5
 2122 006a 38BD     		pop	{r3, r4, r5, pc}
 2123              	.LVL228:
 2124              	.L177:
2983:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2125              		.loc 1 2983 1 view .LVU644
 2126              		.align	2
 2127              	.L176:
 2128 006c EB009000 		.word	9437419
 2129 0070 46415400 		.word	5521734
 2130 0074 46415433 		.word	861159750
 2131              		.cfi_endproc
 2132              	.LFE176:
 2134              		.section	.text.find_volume,"ax",%progbits
 2135              		.align	1
 2136              		.syntax unified
 2137              		.thumb
 2138              		.thumb_func
 2139              		.fpu fpv5-d16
 2141              	find_volume:
 2142              	.LVL229:
 2143              	.LFB177:
2998:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE fmt, *pt;
 2144              		.loc 1 2998 1 is_stmt 1 view -0
 2145              		.cfi_startproc
ARM GAS  /tmp/ccWTW02a.s 			page 148


 2146              		@ args = 0, pretend = 0, frame = 16
 2147              		@ frame_needed = 0, uses_anonymous_args = 0
2998:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE fmt, *pt;
 2148              		.loc 1 2998 1 is_stmt 0 view .LVU646
 2149 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2150              	.LCFI22:
 2151              		.cfi_def_cfa_offset 36
 2152              		.cfi_offset 4, -36
 2153              		.cfi_offset 5, -32
 2154              		.cfi_offset 6, -28
 2155              		.cfi_offset 7, -24
 2156              		.cfi_offset 8, -20
 2157              		.cfi_offset 9, -16
 2158              		.cfi_offset 10, -12
 2159              		.cfi_offset 11, -8
 2160              		.cfi_offset 14, -4
 2161 0004 85B0     		sub	sp, sp, #20
 2162              	.LCFI23:
 2163              		.cfi_def_cfa_offset 56
 2164 0006 0D46     		mov	r5, r1
 2165 0008 1646     		mov	r6, r2
2999:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
 2166              		.loc 1 2999 2 is_stmt 1 view .LVU647
3000:Middlewares/Third_Party/FatFs/src/ff.c **** 	DSTATUS stat;
 2167              		.loc 1 3000 2 view .LVU648
3001:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD bsect, fasize, tsect, sysect, nclst, szbfat, br[4];
 2168              		.loc 1 3001 2 view .LVU649
3002:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD nrsv;
 2169              		.loc 1 3002 2 view .LVU650
3003:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 2170              		.loc 1 3003 2 view .LVU651
3004:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 2171              		.loc 1 3004 2 view .LVU652
3005:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2172              		.loc 1 3005 2 view .LVU653
3009:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(path);
 2173              		.loc 1 3009 2 view .LVU654
3009:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(path);
 2174              		.loc 1 3009 7 is_stmt 0 view .LVU655
 2175 000a 0023     		movs	r3, #0
 2176 000c 0B60     		str	r3, [r1]
3010:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 2177              		.loc 1 3010 2 is_stmt 1 view .LVU656
3010:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 2178              		.loc 1 3010 8 is_stmt 0 view .LVU657
 2179 000e FFF7FEFF 		bl	get_ldnumber
 2180              	.LVL230:
3011:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2181              		.loc 1 3011 2 is_stmt 1 view .LVU658
3011:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2182              		.loc 1 3011 5 is_stmt 0 view .LVU659
 2183 0012 071E     		subs	r7, r0, #0
 2184 0014 C0F24481 		blt	.L196
3014:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 2185              		.loc 1 3014 2 is_stmt 1 view .LVU660
3014:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 2186              		.loc 1 3014 5 is_stmt 0 view .LVU661
ARM GAS  /tmp/ccWTW02a.s 			page 149


 2187 0018 B54B     		ldr	r3, .L226
 2188 001a 53F82740 		ldr	r4, [r3, r7, lsl #2]
 2189              	.LVL231:
3015:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2190              		.loc 1 3015 2 is_stmt 1 view .LVU662
3015:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2191              		.loc 1 3015 5 is_stmt 0 view .LVU663
 2192 001e 002C     		cmp	r4, #0
 2193 0020 00F04381 		beq	.L197
3017:Middlewares/Third_Party/FatFs/src/ff.c **** 	*rfs = fs;							/* Return pointer to the file system object */
 2194              		.loc 1 3017 14 is_stmt 1 view .LVU664
3018:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2195              		.loc 1 3018 2 view .LVU665
3018:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2196              		.loc 1 3018 7 is_stmt 0 view .LVU666
 2197 0024 2C60     		str	r4, [r5]
3020:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type) {					/* If the volume has been mounted */
 2198              		.loc 1 3020 2 is_stmt 1 view .LVU667
3020:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type) {					/* If the volume has been mounted */
 2199              		.loc 1 3020 7 is_stmt 0 view .LVU668
 2200 0026 06F0FE06 		and	r6, r6, #254
 2201              	.LVL232:
3021:Middlewares/Third_Party/FatFs/src/ff.c **** 		stat = disk_status(fs->drv);
 2202              		.loc 1 3021 2 is_stmt 1 view .LVU669
3021:Middlewares/Third_Party/FatFs/src/ff.c **** 		stat = disk_status(fs->drv);
 2203              		.loc 1 3021 8 is_stmt 0 view .LVU670
 2204 002a 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
3021:Middlewares/Third_Party/FatFs/src/ff.c **** 		stat = disk_status(fs->drv);
 2205              		.loc 1 3021 5 view .LVU671
 2206 002c 73B1     		cbz	r3, .L180
3022:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
 2207              		.loc 1 3022 3 is_stmt 1 view .LVU672
3022:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
 2208              		.loc 1 3022 10 is_stmt 0 view .LVU673
 2209 002e 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 2210              	.LVL233:
3022:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
 2211              		.loc 1 3022 10 view .LVU674
 2212 0030 FFF7FEFF 		bl	disk_status
 2213              	.LVL234:
3023:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!_FS_READONLY && mode && (stat & STA_PROTECT)) {	/* Check write protection if needed */
 2214              		.loc 1 3023 3 is_stmt 1 view .LVU675
3023:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!_FS_READONLY && mode && (stat & STA_PROTECT)) {	/* Check write protection if needed */
 2215              		.loc 1 3023 6 is_stmt 0 view .LVU676
 2216 0034 10F00105 		ands	r5, r0, #1
 2217              	.LVL235:
3023:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!_FS_READONLY && mode && (stat & STA_PROTECT)) {	/* Check write protection if needed */
 2218              		.loc 1 3023 6 view .LVU677
 2219 0038 08D1     		bne	.L180
3024:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_WRITE_PROTECTED;
 2220              		.loc 1 3024 4 is_stmt 1 view .LVU678
3024:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_WRITE_PROTECTED;
 2221              		.loc 1 3024 7 is_stmt 0 view .LVU679
 2222 003a 002E     		cmp	r6, #0
 2223 003c 00F03181 		beq	.L179
3024:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_WRITE_PROTECTED;
 2224              		.loc 1 3024 30 discriminator 1 view .LVU680
ARM GAS  /tmp/ccWTW02a.s 			page 150


 2225 0040 10F0040F 		tst	r0, #4
 2226 0044 00F02D81 		beq	.L179
3025:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 2227              		.loc 1 3025 12 view .LVU681
 2228 0048 0A25     		movs	r5, #10
 2229 004a 2AE1     		b	.L179
 2230              	.LVL236:
 2231              	.L180:
3034:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
 2232              		.loc 1 3034 2 is_stmt 1 view .LVU682
3034:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
 2233              		.loc 1 3034 14 is_stmt 0 view .LVU683
 2234 004c 0023     		movs	r3, #0
 2235 004e 2370     		strb	r3, [r4]
3035:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize the physical drive */
 2236              		.loc 1 3035 2 is_stmt 1 view .LVU684
3035:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize the physical drive */
 2237              		.loc 1 3035 12 is_stmt 0 view .LVU685
 2238 0050 F8B2     		uxtb	r0, r7
3035:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize the physical drive */
 2239              		.loc 1 3035 10 view .LVU686
 2240 0052 6070     		strb	r0, [r4, #1]
3036:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) { 			/* Check if the initialization succeeded */
 2241              		.loc 1 3036 2 is_stmt 1 view .LVU687
3036:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) { 			/* Check if the initialization succeeded */
 2242              		.loc 1 3036 9 is_stmt 0 view .LVU688
 2243 0054 FFF7FEFF 		bl	disk_initialize
 2244              	.LVL237:
3037:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
 2245              		.loc 1 3037 2 is_stmt 1 view .LVU689
3037:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
 2246              		.loc 1 3037 5 is_stmt 0 view .LVU690
 2247 0058 10F00105 		ands	r5, r0, #1
 2248 005c 40F02781 		bne	.L199
3040:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_WRITE_PROTECTED;
 2249              		.loc 1 3040 2 is_stmt 1 view .LVU691
3040:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_WRITE_PROTECTED;
 2250              		.loc 1 3040 5 is_stmt 0 view .LVU692
 2251 0060 1EB1     		cbz	r6, .L181
3040:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_WRITE_PROTECTED;
 2252              		.loc 1 3040 28 discriminator 1 view .LVU693
 2253 0062 10F0040F 		tst	r0, #4
 2254 0066 40F02481 		bne	.L200
 2255              	.L181:
3049:Middlewares/Third_Party/FatFs/src/ff.c **** 	fmt = check_fs(fs, bsect);			/* Load sector 0 and check if it is an FAT-VBR as SFD */
 2256              		.loc 1 3049 2 is_stmt 1 view .LVU694
 2257              	.LVL238:
3050:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == 2 || (fmt < 2 && LD2PT(vol) != 0)) {	/* Not an FAT-VBR or forced partition number */
 2258              		.loc 1 3050 2 view .LVU695
3050:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == 2 || (fmt < 2 && LD2PT(vol) != 0)) {	/* Not an FAT-VBR or forced partition number */
 2259              		.loc 1 3050 8 is_stmt 0 view .LVU696
 2260 006a 0021     		movs	r1, #0
 2261 006c 2046     		mov	r0, r4
 2262              	.LVL239:
3050:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == 2 || (fmt < 2 && LD2PT(vol) != 0)) {	/* Not an FAT-VBR or forced partition number */
 2263              		.loc 1 3050 8 view .LVU697
 2264 006e FFF7FEFF 		bl	check_fs
ARM GAS  /tmp/ccWTW02a.s 			page 151


 2265              	.LVL240:
3051:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < 4; i++) {		/* Get partition offset */
 2266              		.loc 1 3051 2 is_stmt 1 view .LVU698
3051:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < 4; i++) {		/* Get partition offset */
 2267              		.loc 1 3051 5 is_stmt 0 view .LVU699
 2268 0072 0228     		cmp	r0, #2
 2269 0074 00F0B680 		beq	.L201
3049:Middlewares/Third_Party/FatFs/src/ff.c **** 	fmt = check_fs(fs, bsect);			/* Load sector 0 and check if it is an FAT-VBR as SFD */
 2270              		.loc 1 3049 8 view .LVU700
 2271 0078 0027     		movs	r7, #0
 2272              	.LVL241:
 2273              	.L183:
3063:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt >= 2) return FR_NO_FILESYSTEM;	/* No FAT volume is found */
 2274              		.loc 1 3063 2 is_stmt 1 view .LVU701
3063:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt >= 2) return FR_NO_FILESYSTEM;	/* No FAT volume is found */
 2275              		.loc 1 3063 5 is_stmt 0 view .LVU702
 2276 007a 0428     		cmp	r0, #4
 2277 007c 00F01B81 		beq	.L204
3064:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2278              		.loc 1 3064 2 is_stmt 1 view .LVU703
3064:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2279              		.loc 1 3064 5 is_stmt 0 view .LVU704
 2280 0080 0128     		cmp	r0, #1
 2281 0082 00F21A81 		bhi	.L205
3116:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2282              		.loc 1 3116 3 is_stmt 1 view .LVU705
3116:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2283              		.loc 1 3116 7 is_stmt 0 view .LVU706
 2284 0086 04F13B00 		add	r0, r4, #59
 2285              	.LVL242:
3116:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2286              		.loc 1 3116 7 view .LVU707
 2287 008a FFF7FEFF 		bl	ld_word
 2288              	.LVL243:
3116:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2289              		.loc 1 3116 6 view .LVU708
 2290 008e B0F5007F 		cmp	r0, #512
 2291 0092 40F01481 		bne	.L206
3118:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fasize == 0) fasize = ld_dword(fs->win + BPB_FATSz32);
 2292              		.loc 1 3118 3 is_stmt 1 view .LVU709
3118:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fasize == 0) fasize = ld_dword(fs->win + BPB_FATSz32);
 2293              		.loc 1 3118 12 is_stmt 0 view .LVU710
 2294 0096 04F14600 		add	r0, r4, #70
 2295 009a FFF7FEFF 		bl	ld_word
 2296              	.LVL244:
3118:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fasize == 0) fasize = ld_dword(fs->win + BPB_FATSz32);
 2297              		.loc 1 3118 10 view .LVU711
 2298 009e 0646     		mov	r6, r0
 2299              	.LVL245:
3119:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsize = fasize;
 2300              		.loc 1 3119 3 is_stmt 1 view .LVU712
3119:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsize = fasize;
 2301              		.loc 1 3119 6 is_stmt 0 view .LVU713
 2302 00a0 20B9     		cbnz	r0, .L188
3119:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsize = fasize;
 2303              		.loc 1 3119 20 is_stmt 1 discriminator 1 view .LVU714
3119:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsize = fasize;
ARM GAS  /tmp/ccWTW02a.s 			page 152


 2304              		.loc 1 3119 29 is_stmt 0 discriminator 1 view .LVU715
 2305 00a2 04F15400 		add	r0, r4, #84
 2306              	.LVL246:
3119:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsize = fasize;
 2307              		.loc 1 3119 29 discriminator 1 view .LVU716
 2308 00a6 FFF7FEFF 		bl	ld_dword
 2309              	.LVL247:
 2310 00aa 0646     		mov	r6, r0
 2311              	.LVL248:
 2312              	.L188:
3120:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2313              		.loc 1 3120 3 is_stmt 1 view .LVU717
3120:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2314              		.loc 1 3120 13 is_stmt 0 view .LVU718
 2315 00ac A661     		str	r6, [r4, #24]
3122:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_fats != 1 && fs->n_fats != 2) return FR_NO_FILESYSTEM;	/* (Must be 1 or 2) */
 2316              		.loc 1 3122 3 is_stmt 1 view .LVU719
3122:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_fats != 1 && fs->n_fats != 2) return FR_NO_FILESYSTEM;	/* (Must be 1 or 2) */
 2317              		.loc 1 3122 23 is_stmt 0 view .LVU720
 2318 00ae 94F84020 		ldrb	r2, [r4, #64]	@ zero_extendqisi2
3122:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_fats != 1 && fs->n_fats != 2) return FR_NO_FILESYSTEM;	/* (Must be 1 or 2) */
 2319              		.loc 1 3122 14 view .LVU721
 2320 00b2 A270     		strb	r2, [r4, #2]
3123:Middlewares/Third_Party/FatFs/src/ff.c **** 		fasize *= fs->n_fats;							/* Number of sectors for FAT area */
 2321              		.loc 1 3123 3 is_stmt 1 view .LVU722
3123:Middlewares/Third_Party/FatFs/src/ff.c **** 		fasize *= fs->n_fats;							/* Number of sectors for FAT area */
 2322              		.loc 1 3123 23 is_stmt 0 view .LVU723
 2323 00b4 531E     		subs	r3, r2, #1
 2324 00b6 DBB2     		uxtb	r3, r3
3123:Middlewares/Third_Party/FatFs/src/ff.c **** 		fasize *= fs->n_fats;							/* Number of sectors for FAT area */
 2325              		.loc 1 3123 6 view .LVU724
 2326 00b8 012B     		cmp	r3, #1
 2327 00ba 00F20281 		bhi	.L207
3124:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2328              		.loc 1 3124 3 is_stmt 1 view .LVU725
3124:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2329              		.loc 1 3124 10 is_stmt 0 view .LVU726
 2330 00be 06FB02F8 		mul	r8, r6, r2
 2331              	.LVL249:
3126:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->csize == 0 || (fs->csize & (fs->csize - 1))) return FR_NO_FILESYSTEM;	/* (Must be power o
 2332              		.loc 1 3126 3 is_stmt 1 view .LVU727
3126:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->csize == 0 || (fs->csize & (fs->csize - 1))) return FR_NO_FILESYSTEM;	/* (Must be power o
 2333              		.loc 1 3126 22 is_stmt 0 view .LVU728
 2334 00c2 94F83D90 		ldrb	r9, [r4, #61]	@ zero_extendqisi2
3126:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->csize == 0 || (fs->csize & (fs->csize - 1))) return FR_NO_FILESYSTEM;	/* (Must be power o
 2335              		.loc 1 3126 13 view .LVU729
 2336 00c6 A4F80A90 		strh	r9, [r4, #10]	@ movhi
3127:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2337              		.loc 1 3127 3 is_stmt 1 view .LVU730
3127:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2338              		.loc 1 3127 6 is_stmt 0 view .LVU731
 2339 00ca B9F1000F 		cmp	r9, #0
 2340 00ce 00F0FA80 		beq	.L208
3127:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2341              		.loc 1 3127 49 discriminator 2 view .LVU732
 2342 00d2 09F1FF33 		add	r3, r9, #-1
3127:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  /tmp/ccWTW02a.s 			page 153


 2343              		.loc 1 3127 22 discriminator 2 view .LVU733
 2344 00d6 19EA030F 		tst	r9, r3
 2345 00da 40F0F680 		bne	.L209
3129:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_rootdir % (SS(fs) / SZDIRE)) return FR_NO_FILESYSTEM;	/* (Must be sector aligned) */
 2346              		.loc 1 3129 3 is_stmt 1 view .LVU734
3129:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_rootdir % (SS(fs) / SZDIRE)) return FR_NO_FILESYSTEM;	/* (Must be sector aligned) */
 2347              		.loc 1 3129 19 is_stmt 0 view .LVU735
 2348 00de 04F14100 		add	r0, r4, #65
 2349 00e2 FFF7FEFF 		bl	ld_word
 2350              	.LVL250:
 2351 00e6 8246     		mov	r10, r0
3129:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_rootdir % (SS(fs) / SZDIRE)) return FR_NO_FILESYSTEM;	/* (Must be sector aligned) */
 2352              		.loc 1 3129 17 view .LVU736
 2353 00e8 2081     		strh	r0, [r4, #8]	@ movhi
3130:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2354              		.loc 1 3130 3 is_stmt 1 view .LVU737
3130:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2355              		.loc 1 3130 6 is_stmt 0 view .LVU738
 2356 00ea 10F00F0F 		tst	r0, #15
 2357 00ee 40F0EE80 		bne	.L210
3132:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (tsect == 0) tsect = ld_dword(fs->win + BPB_TotSec32);
 2358              		.loc 1 3132 3 is_stmt 1 view .LVU739
3132:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (tsect == 0) tsect = ld_dword(fs->win + BPB_TotSec32);
 2359              		.loc 1 3132 11 is_stmt 0 view .LVU740
 2360 00f2 04F14300 		add	r0, r4, #67
 2361 00f6 FFF7FEFF 		bl	ld_word
 2362              	.LVL251:
3132:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (tsect == 0) tsect = ld_dword(fs->win + BPB_TotSec32);
 2363              		.loc 1 3132 9 view .LVU741
 2364 00fa 8346     		mov	fp, r0
 2365              	.LVL252:
3133:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2366              		.loc 1 3133 3 is_stmt 1 view .LVU742
3133:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2367              		.loc 1 3133 6 is_stmt 0 view .LVU743
 2368 00fc 20B9     		cbnz	r0, .L189
3133:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2369              		.loc 1 3133 19 is_stmt 1 discriminator 1 view .LVU744
3133:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2370              		.loc 1 3133 27 is_stmt 0 discriminator 1 view .LVU745
 2371 00fe 04F15000 		add	r0, r4, #80
 2372              	.LVL253:
3133:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2373              		.loc 1 3133 27 discriminator 1 view .LVU746
 2374 0102 FFF7FEFF 		bl	ld_dword
 2375              	.LVL254:
 2376 0106 8346     		mov	fp, r0
 2377              	.LVL255:
 2378              	.L189:
3135:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nrsv == 0) return FR_NO_FILESYSTEM;			/* (Must not be 0) */
 2379              		.loc 1 3135 3 is_stmt 1 view .LVU747
3135:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nrsv == 0) return FR_NO_FILESYSTEM;			/* (Must not be 0) */
 2380              		.loc 1 3135 10 is_stmt 0 view .LVU748
 2381 0108 04F13E00 		add	r0, r4, #62
 2382              	.LVL256:
3135:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nrsv == 0) return FR_NO_FILESYSTEM;			/* (Must not be 0) */
 2383              		.loc 1 3135 10 view .LVU749
ARM GAS  /tmp/ccWTW02a.s 			page 154


 2384 010c FFF7FEFF 		bl	ld_word
 2385              	.LVL257:
3136:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2386              		.loc 1 3136 3 is_stmt 1 view .LVU750
3136:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2387              		.loc 1 3136 6 is_stmt 0 view .LVU751
 2388 0110 0246     		mov	r2, r0
 2389 0112 0028     		cmp	r0, #0
 2390 0114 00F0DD80 		beq	.L211
3139:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (tsect < sysect) return FR_NO_FILESYSTEM;	/* (Invalid volume size) */
 2391              		.loc 1 3139 3 is_stmt 1 view .LVU752
3139:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (tsect < sysect) return FR_NO_FILESYSTEM;	/* (Invalid volume size) */
 2392              		.loc 1 3139 17 is_stmt 0 view .LVU753
 2393 0118 00EB0803 		add	r3, r0, r8
3139:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (tsect < sysect) return FR_NO_FILESYSTEM;	/* (Invalid volume size) */
 2394              		.loc 1 3139 10 view .LVU754
 2395 011c 03EB1A13 		add	r3, r3, r10, lsr #4
 2396              	.LVL258:
3140:Middlewares/Third_Party/FatFs/src/ff.c **** 		nclst = (tsect - sysect) / fs->csize;			/* Number of clusters */
 2397              		.loc 1 3140 3 is_stmt 1 view .LVU755
3140:Middlewares/Third_Party/FatFs/src/ff.c **** 		nclst = (tsect - sysect) / fs->csize;			/* Number of clusters */
 2398              		.loc 1 3140 6 is_stmt 0 view .LVU756
 2399 0120 9B45     		cmp	fp, r3
 2400 0122 C0F0D880 		bcc	.L212
3141:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst == 0) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 2401              		.loc 1 3141 3 is_stmt 1 view .LVU757
3141:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst == 0) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 2402              		.loc 1 3141 18 is_stmt 0 view .LVU758
 2403 0126 ABEB030B 		sub	fp, fp, r3
 2404              	.LVL259:
3141:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst == 0) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 2405              		.loc 1 3141 9 view .LVU759
 2406 012a BBFBF9F1 		udiv	r1, fp, r9
 2407              	.LVL260:
3142:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_FAT32;
 2408              		.loc 1 3142 3 is_stmt 1 view .LVU760
3142:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_FAT32;
 2409              		.loc 1 3142 6 is_stmt 0 view .LVU761
 2410 012e CB45     		cmp	fp, r9
 2411 0130 C0F0D380 		bcc	.L213
3143:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst <= MAX_FAT16) fmt = FS_FAT16;
 2412              		.loc 1 3143 3 is_stmt 1 view .LVU762
 2413              	.LVL261:
3144:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst <= MAX_FAT12) fmt = FS_FAT12;
 2414              		.loc 1 3144 3 view .LVU763
3144:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst <= MAX_FAT12) fmt = FS_FAT12;
 2415              		.loc 1 3144 6 is_stmt 0 view .LVU764
 2416 0134 4FF6F570 		movw	r0, #65525
 2417              	.LVL262:
3144:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst <= MAX_FAT12) fmt = FS_FAT12;
 2418              		.loc 1 3144 6 view .LVU765
 2419 0138 8142     		cmp	r1, r0
 2420 013a 6BD9     		bls	.L214
3143:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst <= MAX_FAT16) fmt = FS_FAT16;
 2421              		.loc 1 3143 7 view .LVU766
 2422 013c 4FF0030B 		mov	fp, #3
 2423              	.L190:
ARM GAS  /tmp/ccWTW02a.s 			page 155


 2424              	.LVL263:
3145:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2425              		.loc 1 3145 3 is_stmt 1 view .LVU767
3145:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2426              		.loc 1 3145 6 is_stmt 0 view .LVU768
 2427 0140 40F6F570 		movw	r0, #4085
 2428 0144 8142     		cmp	r1, r0
 2429 0146 01D8     		bhi	.L191
3145:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2430              		.loc 1 3145 31 view .LVU769
 2431 0148 4FF0010B 		mov	fp, #1
 2432              	.LVL264:
 2433              	.L191:
3148:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->volbase = bsect;							/* Volume start sector */
 2434              		.loc 1 3148 3 is_stmt 1 view .LVU770
3148:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->volbase = bsect;							/* Volume start sector */
 2435              		.loc 1 3148 24 is_stmt 0 view .LVU771
 2436 014c 01F10209 		add	r9, r1, #2
3148:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->volbase = bsect;							/* Volume start sector */
 2437              		.loc 1 3148 16 view .LVU772
 2438 0150 C4F81490 		str	r9, [r4, #20]
3149:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fatbase = bsect + nrsv; 					/* FAT start sector */
 2439              		.loc 1 3149 3 is_stmt 1 view .LVU773
3149:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fatbase = bsect + nrsv; 					/* FAT start sector */
 2440              		.loc 1 3149 15 is_stmt 0 view .LVU774
 2441 0154 E761     		str	r7, [r4, #28]
3150:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->database = bsect + sysect;					/* Data start sector */
 2442              		.loc 1 3150 3 is_stmt 1 view .LVU775
3150:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->database = bsect + sysect;					/* Data start sector */
 2443              		.loc 1 3150 23 is_stmt 0 view .LVU776
 2444 0156 3A44     		add	r2, r2, r7
3150:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->database = bsect + sysect;					/* Data start sector */
 2445              		.loc 1 3150 15 view .LVU777
 2446 0158 2262     		str	r2, [r4, #32]
3151:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32) {
 2447              		.loc 1 3151 3 is_stmt 1 view .LVU778
3151:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32) {
 2448              		.loc 1 3151 24 is_stmt 0 view .LVU779
 2449 015a 3B44     		add	r3, r3, r7
 2450              	.LVL265:
3151:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32) {
 2451              		.loc 1 3151 16 view .LVU780
 2452 015c A362     		str	r3, [r4, #40]
3152:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ld_word(fs->win + BPB_FSVer32) != 0) return FR_NO_FILESYSTEM;	/* (Must be FAT32 revision 0.0
 2453              		.loc 1 3152 3 is_stmt 1 view .LVU781
3152:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ld_word(fs->win + BPB_FSVer32) != 0) return FR_NO_FILESYSTEM;	/* (Must be FAT32 revision 0.0
 2454              		.loc 1 3152 6 is_stmt 0 view .LVU782
 2455 015e BBF1030F 		cmp	fp, #3
 2456 0162 5AD0     		beq	.L221
3158:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbase = fs->fatbase + fasize;			/* Root directory start sector */
 2457              		.loc 1 3158 4 is_stmt 1 view .LVU783
3158:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbase = fs->fatbase + fasize;			/* Root directory start sector */
 2458              		.loc 1 3158 7 is_stmt 0 view .LVU784
 2459 0164 BAF1000F 		cmp	r10, #0
 2460 0168 00F0BD80 		beq	.L218
3159:Middlewares/Third_Party/FatFs/src/ff.c **** 			szbfat = (fmt == FS_FAT16) ?				/* (Needed FAT size) */
 2461              		.loc 1 3159 4 is_stmt 1 view .LVU785
ARM GAS  /tmp/ccWTW02a.s 			page 156


3159:Middlewares/Third_Party/FatFs/src/ff.c **** 			szbfat = (fmt == FS_FAT16) ?				/* (Needed FAT size) */
 2462              		.loc 1 3159 30 is_stmt 0 view .LVU786
 2463 016c 4244     		add	r2, r2, r8
3159:Middlewares/Third_Party/FatFs/src/ff.c **** 			szbfat = (fmt == FS_FAT16) ?				/* (Needed FAT size) */
 2464              		.loc 1 3159 16 view .LVU787
 2465 016e 6262     		str	r2, [r4, #36]
3160:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 2466              		.loc 1 3160 4 is_stmt 1 view .LVU788
3161:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2467              		.loc 1 3161 22 is_stmt 0 view .LVU789
 2468 0170 BBF1020F 		cmp	fp, #2
 2469 0174 62D0     		beq	.L222
3161:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2470              		.loc 1 3161 37 discriminator 2 view .LVU790
 2471 0176 09EB4903 		add	r3, r9, r9, lsl #1
3161:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2472              		.loc 1 3161 61 discriminator 2 view .LVU791
 2473 017a 09F00109 		and	r9, r9, #1
3161:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2474              		.loc 1 3161 22 discriminator 2 view .LVU792
 2475 017e 09EB5309 		add	r9, r9, r3, lsr #1
 2476              	.LVL266:
 2477              	.L193:
3163:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2478              		.loc 1 3163 3 is_stmt 1 view .LVU793
3163:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2479              		.loc 1 3163 27 is_stmt 0 view .LVU794
 2480 0182 09F2FF19 		addw	r9, r9, #511
 2481              	.LVL267:
3163:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2482              		.loc 1 3163 6 view .LVU795
 2483 0186 B6EB592F 		cmp	r6, r9, lsr #9
 2484 018a C0F0AE80 		bcc	.L219
3167:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag = 0x80;
 2485              		.loc 1 3167 3 is_stmt 1 view .LVU796
3167:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag = 0x80;
 2486              		.loc 1 3167 33 is_stmt 0 view .LVU797
 2487 018e 4FF0FF33 		mov	r3, #-1
 2488 0192 2361     		str	r3, [r4, #16]
3167:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag = 0x80;
 2489              		.loc 1 3167 17 view .LVU798
 2490 0194 E360     		str	r3, [r4, #12]
3168:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 3) != 3
 2491              		.loc 1 3168 3 is_stmt 1 view .LVU799
3168:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 3) != 3
 2492              		.loc 1 3168 16 is_stmt 0 view .LVU800
 2493 0196 8023     		movs	r3, #128
 2494 0198 2371     		strb	r3, [r4, #4]
3170:Middlewares/Third_Party/FatFs/src/ff.c **** 			&& ld_word(fs->win + BPB_FSInfo32) == 1
 2495              		.loc 1 3170 3 is_stmt 1 view .LVU801
3170:Middlewares/Third_Party/FatFs/src/ff.c **** 			&& ld_word(fs->win + BPB_FSInfo32) == 1
 2496              		.loc 1 3170 6 is_stmt 0 view .LVU802
 2497 019a BBF1030F 		cmp	fp, #3
 2498 019e 50D0     		beq	.L223
 2499              	.L195:
3191:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 2500              		.loc 1 3191 2 is_stmt 1 view .LVU803
ARM GAS  /tmp/ccWTW02a.s 			page 157


3191:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 2501              		.loc 1 3191 14 is_stmt 0 view .LVU804
 2502 01a0 84F800B0 		strb	fp, [r4]
3192:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 1
 2503              		.loc 1 3192 2 is_stmt 1 view .LVU805
3192:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 1
 2504              		.loc 1 3192 11 is_stmt 0 view .LVU806
 2505 01a4 534A     		ldr	r2, .L226+4
 2506 01a6 1388     		ldrh	r3, [r2]
 2507 01a8 0133     		adds	r3, r3, #1
 2508 01aa 9BB2     		uxth	r3, r3
3192:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 1
 2509              		.loc 1 3192 9 view .LVU807
 2510 01ac 1380     		strh	r3, [r2]	@ movhi
 2511 01ae E380     		strh	r3, [r4, #6]	@ movhi
3203:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 2512              		.loc 1 3203 2 is_stmt 1 view .LVU808
 2513 01b0 2046     		mov	r0, r4
 2514 01b2 FFF7FEFF 		bl	clear_lock
 2515              	.LVL268:
3205:Middlewares/Third_Party/FatFs/src/ff.c **** }
 2516              		.loc 1 3205 2 view .LVU809
3205:Middlewares/Third_Party/FatFs/src/ff.c **** }
 2517              		.loc 1 3205 9 is_stmt 0 view .LVU810
 2518 01b6 74E0     		b	.L179
 2519              	.LVL269:
 2520              	.L202:
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2521              		.loc 1 3054 54 view .LVU811
 2522 01b8 0020     		movs	r0, #0
 2523              	.LVL270:
 2524              	.L184:
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2525              		.loc 1 3054 10 discriminator 4 view .LVU812
 2526 01ba 04AB     		add	r3, sp, #16
 2527 01bc 03EB8603 		add	r3, r3, r6, lsl #2
 2528 01c0 43F8100C 		str	r0, [r3, #-16]
3052:Middlewares/Third_Party/FatFs/src/ff.c **** 			pt = fs->win + (MBR_Table + i * SZ_PTE);
 2529              		.loc 1 3052 22 is_stmt 1 discriminator 4 view .LVU813
3052:Middlewares/Third_Party/FatFs/src/ff.c **** 			pt = fs->win + (MBR_Table + i * SZ_PTE);
 2530              		.loc 1 3052 23 is_stmt 0 discriminator 4 view .LVU814
 2531 01c4 0136     		adds	r6, r6, #1
 2532              	.LVL271:
 2533              	.L182:
3052:Middlewares/Third_Party/FatFs/src/ff.c **** 			pt = fs->win + (MBR_Table + i * SZ_PTE);
 2534              		.loc 1 3052 15 is_stmt 1 discriminator 2 view .LVU815
3052:Middlewares/Third_Party/FatFs/src/ff.c **** 			pt = fs->win + (MBR_Table + i * SZ_PTE);
 2535              		.loc 1 3052 3 is_stmt 0 discriminator 2 view .LVU816
 2536 01c6 032E     		cmp	r6, #3
 2537 01c8 0ED8     		bhi	.L224
3053:Middlewares/Third_Party/FatFs/src/ff.c **** 			br[i] = pt[PTE_System] ? ld_dword(pt + PTE_StLba) : 0;
 2538              		.loc 1 3053 4 is_stmt 1 view .LVU817
3053:Middlewares/Third_Party/FatFs/src/ff.c **** 			br[i] = pt[PTE_System] ? ld_dword(pt + PTE_StLba) : 0;
 2539              		.loc 1 3053 9 is_stmt 0 view .LVU818
 2540 01ca 04F13000 		add	r0, r4, #48
3053:Middlewares/Third_Party/FatFs/src/ff.c **** 			br[i] = pt[PTE_System] ? ld_dword(pt + PTE_StLba) : 0;
 2541              		.loc 1 3053 34 view .LVU819
ARM GAS  /tmp/ccWTW02a.s 			page 158


 2542 01ce 3301     		lsls	r3, r6, #4
3053:Middlewares/Third_Party/FatFs/src/ff.c **** 			br[i] = pt[PTE_System] ? ld_dword(pt + PTE_StLba) : 0;
 2543              		.loc 1 3053 30 view .LVU820
 2544 01d0 03F5DF73 		add	r3, r3, #446
3053:Middlewares/Third_Party/FatFs/src/ff.c **** 			br[i] = pt[PTE_System] ? ld_dword(pt + PTE_StLba) : 0;
 2545              		.loc 1 3053 7 view .LVU821
 2546 01d4 1844     		add	r0, r0, r3
 2547              	.LVL272:
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2548              		.loc 1 3054 4 is_stmt 1 view .LVU822
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2549              		.loc 1 3054 14 is_stmt 0 view .LVU823
 2550 01d6 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2551              		.loc 1 3054 54 view .LVU824
 2552 01d8 002B     		cmp	r3, #0
 2553 01da EDD0     		beq	.L202
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2554              		.loc 1 3054 29 discriminator 1 view .LVU825
 2555 01dc 0830     		adds	r0, r0, #8
 2556              	.LVL273:
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2557              		.loc 1 3054 29 discriminator 1 view .LVU826
 2558 01de FFF7FEFF 		bl	ld_dword
 2559              	.LVL274:
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2560              		.loc 1 3054 29 discriminator 1 view .LVU827
 2561 01e2 EAE7     		b	.L184
 2562              	.LVL275:
 2563              	.L201:
3052:Middlewares/Third_Party/FatFs/src/ff.c **** 			pt = fs->win + (MBR_Table + i * SZ_PTE);
 2564              		.loc 1 3052 10 view .LVU828
 2565 01e4 0026     		movs	r6, #0
 2566              	.LVL276:
3052:Middlewares/Third_Party/FatFs/src/ff.c **** 			pt = fs->win + (MBR_Table + i * SZ_PTE);
 2567              		.loc 1 3052 10 view .LVU829
 2568 01e6 EEE7     		b	.L182
 2569              	.LVL277:
 2570              	.L224:
3052:Middlewares/Third_Party/FatFs/src/ff.c **** 			pt = fs->win + (MBR_Table + i * SZ_PTE);
 2571              		.loc 1 3052 10 view .LVU830
 2572 01e8 0026     		movs	r6, #0
 2573              	.LVL278:
3052:Middlewares/Third_Party/FatFs/src/ff.c **** 			pt = fs->win + (MBR_Table + i * SZ_PTE);
 2574              		.loc 1 3052 10 view .LVU831
 2575 01ea 0AE0     		b	.L187
 2576              	.LVL279:
 2577              	.L225:
3060:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (LD2PT(vol) == 0 && fmt >= 2 && ++i < 4);
 2578              		.loc 1 3060 18 discriminator 1 view .LVU832
 2579 01ec 3946     		mov	r1, r7
 2580 01ee 2046     		mov	r0, r4
 2581 01f0 FFF7FEFF 		bl	check_fs
 2582              	.LVL280:
3061:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2583              		.loc 1 3061 11 is_stmt 1 discriminator 1 view .LVU833
3061:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
ARM GAS  /tmp/ccWTW02a.s 			page 159


 2584              		.loc 1 3061 3 is_stmt 0 discriminator 1 view .LVU834
 2585 01f4 0128     		cmp	r0, #1
 2586 01f6 7FF640AF 		bls	.L183
 2587              	.LVL281:
 2588              	.L186:
3061:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2589              		.loc 1 3061 40 discriminator 1 view .LVU835
 2590 01fa 0136     		adds	r6, r6, #1
 2591              	.LVL282:
3061:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2592              		.loc 1 3061 40 discriminator 1 view .LVU836
 2593 01fc 032E     		cmp	r6, #3
 2594 01fe 3FF63CAF 		bhi	.L183
 2595              	.LVL283:
 2596              	.L187:
3058:Middlewares/Third_Party/FatFs/src/ff.c **** 			bsect = br[i];
 2597              		.loc 1 3058 3 is_stmt 1 view .LVU837
3059:Middlewares/Third_Party/FatFs/src/ff.c **** 			fmt = bsect ? check_fs(fs, bsect) : 3;	/* Check the partition */
 2598              		.loc 1 3059 4 view .LVU838
3059:Middlewares/Third_Party/FatFs/src/ff.c **** 			fmt = bsect ? check_fs(fs, bsect) : 3;	/* Check the partition */
 2599              		.loc 1 3059 10 is_stmt 0 view .LVU839
 2600 0202 04AB     		add	r3, sp, #16
 2601 0204 03EB8603 		add	r3, r3, r6, lsl #2
 2602 0208 53F8107C 		ldr	r7, [r3, #-16]
 2603              	.LVL284:
3060:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (LD2PT(vol) == 0 && fmt >= 2 && ++i < 4);
 2604              		.loc 1 3060 4 is_stmt 1 view .LVU840
3060:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (LD2PT(vol) == 0 && fmt >= 2 && ++i < 4);
 2605              		.loc 1 3060 8 is_stmt 0 view .LVU841
 2606 020c 002F     		cmp	r7, #0
 2607 020e EDD1     		bne	.L225
 2608 0210 0320     		movs	r0, #3
 2609 0212 F2E7     		b	.L186
 2610              	.LVL285:
 2611              	.L214:
3144:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst <= MAX_FAT12) fmt = FS_FAT12;
 2612              		.loc 1 3144 31 view .LVU842
 2613 0214 4FF0020B 		mov	fp, #2
 2614 0218 92E7     		b	.L190
 2615              	.LVL286:
 2616              	.L221:
3153:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->n_rootdir) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
 2617              		.loc 1 3153 4 is_stmt 1 view .LVU843
3153:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->n_rootdir) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
 2618              		.loc 1 3153 8 is_stmt 0 view .LVU844
 2619 021a 04F15A00 		add	r0, r4, #90
 2620 021e FFF7FEFF 		bl	ld_word
 2621              	.LVL287:
3153:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->n_rootdir) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
 2622              		.loc 1 3153 7 view .LVU845
 2623 0222 0028     		cmp	r0, #0
 2624 0224 5BD1     		bne	.L216
3154:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbase = ld_dword(fs->win + BPB_RootClus32);	/* Root directory start cluster */
 2625              		.loc 1 3154 4 is_stmt 1 view .LVU846
3154:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbase = ld_dword(fs->win + BPB_RootClus32);	/* Root directory start cluster */
 2626              		.loc 1 3154 7 is_stmt 0 view .LVU847
 2627 0226 BAF1000F 		cmp	r10, #0
ARM GAS  /tmp/ccWTW02a.s 			page 160


 2628 022a 5AD1     		bne	.L217
3155:Middlewares/Third_Party/FatFs/src/ff.c **** 			szbfat = fs->n_fatent * 4;					/* (Needed FAT size) */
 2629              		.loc 1 3155 4 is_stmt 1 view .LVU848
3155:Middlewares/Third_Party/FatFs/src/ff.c **** 			szbfat = fs->n_fatent * 4;					/* (Needed FAT size) */
 2630              		.loc 1 3155 18 is_stmt 0 view .LVU849
 2631 022c 04F15C00 		add	r0, r4, #92
 2632 0230 FFF7FEFF 		bl	ld_dword
 2633              	.LVL288:
3155:Middlewares/Third_Party/FatFs/src/ff.c **** 			szbfat = fs->n_fatent * 4;					/* (Needed FAT size) */
 2634              		.loc 1 3155 16 view .LVU850
 2635 0234 6062     		str	r0, [r4, #36]
3156:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 2636              		.loc 1 3156 4 is_stmt 1 view .LVU851
3156:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 2637              		.loc 1 3156 11 is_stmt 0 view .LVU852
 2638 0236 4FEA8909 		lsl	r9, r9, #2
 2639              	.LVL289:
3156:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 2640              		.loc 1 3156 11 view .LVU853
 2641 023a A2E7     		b	.L193
 2642              	.LVL290:
 2643              	.L222:
3161:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2644              		.loc 1 3161 22 discriminator 1 view .LVU854
 2645 023c 4FEA4909 		lsl	r9, r9, #1
 2646 0240 9FE7     		b	.L193
 2647              	.LVL291:
 2648              	.L223:
3171:Middlewares/Third_Party/FatFs/src/ff.c **** 			&& move_window(fs, bsect + 1) == FR_OK)
 2649              		.loc 1 3171 7 view .LVU855
 2650 0242 04F16000 		add	r0, r4, #96
 2651 0246 FFF7FEFF 		bl	ld_word
 2652              	.LVL292:
3171:Middlewares/Third_Party/FatFs/src/ff.c **** 			&& move_window(fs, bsect + 1) == FR_OK)
 2653              		.loc 1 3171 4 view .LVU856
 2654 024a 0128     		cmp	r0, #1
 2655 024c A8D1     		bne	.L195
3172:Middlewares/Third_Party/FatFs/src/ff.c **** 		{
 2656              		.loc 1 3172 7 view .LVU857
 2657 024e 791C     		adds	r1, r7, #1
 2658 0250 2046     		mov	r0, r4
 2659 0252 FFF7FEFF 		bl	move_window
 2660              	.LVL293:
3172:Middlewares/Third_Party/FatFs/src/ff.c **** 		{
 2661              		.loc 1 3172 4 view .LVU858
 2662 0256 0028     		cmp	r0, #0
 2663 0258 A2D1     		bne	.L195
3174:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ld_word(fs->win + BS_55AA) == 0xAA55	/* Load FSINFO data if available */
 2664              		.loc 1 3174 4 is_stmt 1 view .LVU859
3174:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ld_word(fs->win + BS_55AA) == 0xAA55	/* Load FSINFO data if available */
 2665              		.loc 1 3174 17 is_stmt 0 view .LVU860
 2666 025a 0023     		movs	r3, #0
 2667 025c 2371     		strb	r3, [r4, #4]
3175:Middlewares/Third_Party/FatFs/src/ff.c **** 				&& ld_dword(fs->win + FSI_LeadSig) == 0x41615252
 2668              		.loc 1 3175 4 is_stmt 1 view .LVU861
3175:Middlewares/Third_Party/FatFs/src/ff.c **** 				&& ld_dword(fs->win + FSI_LeadSig) == 0x41615252
 2669              		.loc 1 3175 8 is_stmt 0 view .LVU862
ARM GAS  /tmp/ccWTW02a.s 			page 161


 2670 025e 04F22E20 		addw	r0, r4, #558
 2671 0262 FFF7FEFF 		bl	ld_word
 2672              	.LVL294:
3175:Middlewares/Third_Party/FatFs/src/ff.c **** 				&& ld_dword(fs->win + FSI_LeadSig) == 0x41615252
 2673              		.loc 1 3175 7 view .LVU863
 2674 0266 4AF65523 		movw	r3, #43605
 2675 026a 9842     		cmp	r0, r3
 2676 026c 98D1     		bne	.L195
3176:Middlewares/Third_Party/FatFs/src/ff.c **** 				&& ld_dword(fs->win + FSI_StrucSig) == 0x61417272)
 2677              		.loc 1 3176 8 view .LVU864
 2678 026e 04F13000 		add	r0, r4, #48
 2679 0272 FFF7FEFF 		bl	ld_dword
 2680              	.LVL295:
3176:Middlewares/Third_Party/FatFs/src/ff.c **** 				&& ld_dword(fs->win + FSI_StrucSig) == 0x61417272)
 2681              		.loc 1 3176 5 view .LVU865
 2682 0276 204B     		ldr	r3, .L226+8
 2683 0278 9842     		cmp	r0, r3
 2684 027a 91D1     		bne	.L195
3177:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
 2685              		.loc 1 3177 8 view .LVU866
 2686 027c 04F50570 		add	r0, r4, #532
 2687 0280 FFF7FEFF 		bl	ld_dword
 2688              	.LVL296:
3177:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
 2689              		.loc 1 3177 5 view .LVU867
 2690 0284 1D4B     		ldr	r3, .L226+12
 2691 0286 9842     		cmp	r0, r3
 2692 0288 8AD1     		bne	.L195
3180:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 2693              		.loc 1 3180 5 is_stmt 1 view .LVU868
3180:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 2694              		.loc 1 3180 21 is_stmt 0 view .LVU869
 2695 028a 04F50670 		add	r0, r4, #536
 2696 028e FFF7FEFF 		bl	ld_dword
 2697              	.LVL297:
3180:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 2698              		.loc 1 3180 19 view .LVU870
 2699 0292 2061     		str	r0, [r4, #16]
3183:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 2700              		.loc 1 3183 5 is_stmt 1 view .LVU871
3183:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 2701              		.loc 1 3183 21 is_stmt 0 view .LVU872
 2702 0294 04F50770 		add	r0, r4, #540
 2703 0298 FFF7FEFF 		bl	ld_dword
 2704              	.LVL298:
3183:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 2705              		.loc 1 3183 19 view .LVU873
 2706 029c E060     		str	r0, [r4, #12]
 2707 029e 7FE7     		b	.L195
 2708              	.LVL299:
 2709              	.L196:
3011:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2710              		.loc 1 3011 22 view .LVU874
 2711 02a0 0B25     		movs	r5, #11
 2712              	.LVL300:
 2713              	.L179:
3206:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  /tmp/ccWTW02a.s 			page 162


 2714              		.loc 1 3206 1 view .LVU875
 2715 02a2 2846     		mov	r0, r5
 2716 02a4 05B0     		add	sp, sp, #20
 2717              	.LCFI24:
 2718              		.cfi_remember_state
 2719              		.cfi_def_cfa_offset 36
 2720              		@ sp needed
 2721 02a6 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2722              	.LVL301:
 2723              	.L197:
 2724              	.LCFI25:
 2725              		.cfi_restore_state
3015:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2726              		.loc 1 3015 18 view .LVU876
 2727 02aa 0C25     		movs	r5, #12
 2728              	.LVL302:
3015:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2729              		.loc 1 3015 18 view .LVU877
 2730 02ac F9E7     		b	.L179
 2731              	.LVL303:
 2732              	.L199:
3038:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2733              		.loc 1 3038 10 view .LVU878
 2734 02ae 0325     		movs	r5, #3
 2735 02b0 F7E7     		b	.L179
 2736              	.L200:
3041:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2737              		.loc 1 3041 10 view .LVU879
 2738 02b2 0A25     		movs	r5, #10
 2739 02b4 F5E7     		b	.L179
 2740              	.LVL304:
 2741              	.L204:
3063:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt >= 2) return FR_NO_FILESYSTEM;	/* No FAT volume is found */
 2742              		.loc 1 3063 23 view .LVU880
 2743 02b6 0125     		movs	r5, #1
 2744 02b8 F3E7     		b	.L179
 2745              	.L205:
3064:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2746              		.loc 1 3064 23 view .LVU881
 2747 02ba 0D25     		movs	r5, #13
 2748 02bc F1E7     		b	.L179
 2749              	.LVL305:
 2750              	.L206:
3116:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2751              		.loc 1 3116 59 view .LVU882
 2752 02be 0D25     		movs	r5, #13
 2753 02c0 EFE7     		b	.L179
 2754              	.LVL306:
 2755              	.L207:
3123:Middlewares/Third_Party/FatFs/src/ff.c **** 		fasize *= fs->n_fats;							/* Number of sectors for FAT area */
 2756              		.loc 1 3123 50 view .LVU883
 2757 02c2 0D25     		movs	r5, #13
 2758 02c4 EDE7     		b	.L179
 2759              	.LVL307:
 2760              	.L208:
3127:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2761              		.loc 1 3127 63 view .LVU884
ARM GAS  /tmp/ccWTW02a.s 			page 163


 2762 02c6 0D25     		movs	r5, #13
 2763 02c8 EBE7     		b	.L179
 2764              	.L209:
 2765 02ca 0D25     		movs	r5, #13
 2766 02cc E9E7     		b	.L179
 2767              	.L210:
3130:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2768              		.loc 1 3130 49 view .LVU885
 2769 02ce 0D25     		movs	r5, #13
 2770 02d0 E7E7     		b	.L179
 2771              	.LVL308:
 2772              	.L211:
3136:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2773              		.loc 1 3136 25 view .LVU886
 2774 02d2 0D25     		movs	r5, #13
 2775 02d4 E5E7     		b	.L179
 2776              	.LVL309:
 2777              	.L212:
3140:Middlewares/Third_Party/FatFs/src/ff.c **** 		nclst = (tsect - sysect) / fs->csize;			/* Number of clusters */
 2778              		.loc 1 3140 30 view .LVU887
 2779 02d6 0D25     		movs	r5, #13
 2780 02d8 E3E7     		b	.L179
 2781              	.LVL310:
 2782              	.L213:
3142:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_FAT32;
 2783              		.loc 1 3142 26 view .LVU888
 2784 02da 0D25     		movs	r5, #13
 2785 02dc E1E7     		b	.L179
 2786              	.LVL311:
 2787              	.L216:
3153:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->n_rootdir) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
 2788              		.loc 1 3153 52 view .LVU889
 2789 02de 0D25     		movs	r5, #13
 2790 02e0 DFE7     		b	.L179
 2791              	.L217:
3154:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbase = ld_dword(fs->win + BPB_RootClus32);	/* Root directory start cluster */
 2792              		.loc 1 3154 30 view .LVU890
 2793 02e2 0D25     		movs	r5, #13
 2794 02e4 DDE7     		b	.L179
 2795              	.LVL312:
 2796              	.L218:
3158:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbase = fs->fatbase + fasize;			/* Root directory start sector */
 2797              		.loc 1 3158 35 view .LVU891
 2798 02e6 0D25     		movs	r5, #13
 2799 02e8 DBE7     		b	.L179
 2800              	.LVL313:
 2801              	.L219:
3163:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2802              		.loc 1 3163 60 view .LVU892
 2803 02ea 0D25     		movs	r5, #13
 2804 02ec D9E7     		b	.L179
 2805              	.L227:
 2806 02ee 00BF     		.align	2
 2807              	.L226:
 2808 02f0 00000000 		.word	.LANCHOR2
 2809 02f4 00000000 		.word	.LANCHOR3
 2810 02f8 52526141 		.word	1096897106
ARM GAS  /tmp/ccWTW02a.s 			page 164


 2811 02fc 72724161 		.word	1631679090
 2812              		.cfi_endproc
 2813              	.LFE177:
 2815              		.section	.text.put_fat,"ax",%progbits
 2816              		.align	1
 2817              		.syntax unified
 2818              		.thumb
 2819              		.thumb_func
 2820              		.fpu fpv5-d16
 2822              	put_fat:
 2823              	.LVL314:
 2824              	.LFB159:
1086:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bc;
 2825              		.loc 1 1086 1 is_stmt 1 view -0
 2826              		.cfi_startproc
 2827              		@ args = 0, pretend = 0, frame = 0
 2828              		@ frame_needed = 0, uses_anonymous_args = 0
1086:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bc;
 2829              		.loc 1 1086 1 is_stmt 0 view .LVU894
 2830 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2831              	.LCFI26:
 2832              		.cfi_def_cfa_offset 32
 2833              		.cfi_offset 4, -32
 2834              		.cfi_offset 5, -28
 2835              		.cfi_offset 6, -24
 2836              		.cfi_offset 7, -20
 2837              		.cfi_offset 8, -16
 2838              		.cfi_offset 9, -12
 2839              		.cfi_offset 10, -8
 2840              		.cfi_offset 14, -4
1087:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *p;
 2841              		.loc 1 1087 2 is_stmt 1 view .LVU895
1088:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_INT_ERR;
 2842              		.loc 1 1088 2 view .LVU896
1089:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2843              		.loc 1 1089 2 view .LVU897
 2844              	.LVL315:
1091:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (fs->fs_type) {
 2845              		.loc 1 1091 2 view .LVU898
1091:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (fs->fs_type) {
 2846              		.loc 1 1091 5 is_stmt 0 view .LVU899
 2847 0004 0129     		cmp	r1, #1
 2848 0006 7ED9     		bls	.L236
 2849 0008 0746     		mov	r7, r0
 2850 000a 0C46     		mov	r4, r1
 2851 000c 1646     		mov	r6, r2
1091:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (fs->fs_type) {
 2852              		.loc 1 1091 28 discriminator 1 view .LVU900
 2853 000e 4369     		ldr	r3, [r0, #20]
1091:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (fs->fs_type) {
 2854              		.loc 1 1091 16 discriminator 1 view .LVU901
 2855 0010 8B42     		cmp	r3, r1
 2856 0012 7AD9     		bls	.L237
1092:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :	/* Bitfield items */
 2857              		.loc 1 1092 3 is_stmt 1 view .LVU902
1092:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :	/* Bitfield items */
 2858              		.loc 1 1092 13 is_stmt 0 view .LVU903
ARM GAS  /tmp/ccWTW02a.s 			page 165


 2859 0014 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
1092:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :	/* Bitfield items */
 2860              		.loc 1 1092 3 view .LVU904
 2861 0016 022B     		cmp	r3, #2
 2862 0018 45D0     		beq	.L230
 2863 001a 032B     		cmp	r3, #3
 2864 001c 57D0     		beq	.L231
 2865 001e 012B     		cmp	r3, #1
 2866 0020 03D0     		beq	.L240
 2867 0022 0225     		movs	r5, #2
 2868              	.LVL316:
 2869              	.L229:
1128:Middlewares/Third_Party/FatFs/src/ff.c **** }
 2870              		.loc 1 1128 2 is_stmt 1 view .LVU905
1129:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2871              		.loc 1 1129 1 is_stmt 0 view .LVU906
 2872 0024 2846     		mov	r0, r5
 2873 0026 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2874              	.LVL317:
 2875              	.L240:
1094:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2876              		.loc 1 1094 4 is_stmt 1 view .LVU907
1094:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2877              		.loc 1 1094 21 view .LVU908
1094:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2878              		.loc 1 1094 24 is_stmt 0 view .LVU909
 2879 002a 01EB5108 		add	r8, r1, r1, lsr #1
 2880              	.LVL318:
1095:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2881              		.loc 1 1095 4 is_stmt 1 view .LVU910
1095:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2882              		.loc 1 1095 28 is_stmt 0 view .LVU911
 2883 002e 016A     		ldr	r1, [r0, #32]
 2884              	.LVL319:
1095:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2885              		.loc 1 1095 10 view .LVU912
 2886 0030 01EB5821 		add	r1, r1, r8, lsr #9
 2887 0034 FFF7FEFF 		bl	move_window
 2888              	.LVL320:
1096:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = fs->win + bc++ % SS(fs);
 2889              		.loc 1 1096 4 is_stmt 1 view .LVU913
1096:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = fs->win + bc++ % SS(fs);
 2890              		.loc 1 1096 7 is_stmt 0 view .LVU914
 2891 0038 0546     		mov	r5, r0
 2892 003a 0028     		cmp	r0, #0
 2893 003c F2D1     		bne	.L229
1097:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 2894              		.loc 1 1097 4 is_stmt 1 view .LVU915
1097:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 2895              		.loc 1 1097 8 is_stmt 0 view .LVU916
 2896 003e 07F1300A 		add	r10, r7, #48
1097:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 2897              		.loc 1 1097 23 view .LVU917
 2898 0042 08F10109 		add	r9, r8, #1
 2899              	.LVL321:
1097:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 2900              		.loc 1 1097 23 view .LVU918
ARM GAS  /tmp/ccWTW02a.s 			page 166


 2901 0046 C8F30808 		ubfx	r8, r8, #0, #9
 2902              	.LVL322:
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2903              		.loc 1 1098 4 is_stmt 1 view .LVU919
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2904              		.loc 1 1098 7 is_stmt 0 view .LVU920
 2905 004a 14F00104 		ands	r4, r4, #1
 2906              	.LVL323:
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2907              		.loc 1 1098 7 view .LVU921
 2908 004e 1FD0     		beq	.L232
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2909              		.loc 1 1098 24 discriminator 1 view .LVU922
 2910 0050 1AF90830 		ldrsb	r3, [r10, r8]
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2911              		.loc 1 1098 27 discriminator 1 view .LVU923
 2912 0054 03F00F03 		and	r3, r3, #15
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2913              		.loc 1 1098 48 discriminator 1 view .LVU924
 2914 0058 3201     		lsls	r2, r6, #4
 2915 005a 02F47F62 		and	r2, r2, #4080
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2916              		.loc 1 1098 35 discriminator 1 view .LVU925
 2917 005e 1343     		orrs	r3, r3, r2
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2918              		.loc 1 1098 7 discriminator 1 view .LVU926
 2919 0060 DBB2     		uxtb	r3, r3
 2920              	.L233:
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2921              		.loc 1 1098 7 discriminator 4 view .LVU927
 2922 0062 0AF80830 		strb	r3, [r10, r8]
1099:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2923              		.loc 1 1099 4 is_stmt 1 discriminator 4 view .LVU928
1099:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2924              		.loc 1 1099 14 is_stmt 0 discriminator 4 view .LVU929
 2925 0066 0123     		movs	r3, #1
 2926 0068 FB70     		strb	r3, [r7, #3]
1100:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2927              		.loc 1 1100 4 is_stmt 1 discriminator 4 view .LVU930
1100:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2928              		.loc 1 1100 28 is_stmt 0 discriminator 4 view .LVU931
 2929 006a 396A     		ldr	r1, [r7, #32]
1100:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2930              		.loc 1 1100 10 discriminator 4 view .LVU932
 2931 006c 01EB5921 		add	r1, r1, r9, lsr #9
 2932 0070 3846     		mov	r0, r7
 2933              	.LVL324:
1100:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2934              		.loc 1 1100 10 discriminator 4 view .LVU933
 2935 0072 FFF7FEFF 		bl	move_window
 2936              	.LVL325:
1101:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = fs->win + bc % SS(fs);
 2937              		.loc 1 1101 4 is_stmt 1 discriminator 4 view .LVU934
1101:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = fs->win + bc % SS(fs);
 2938              		.loc 1 1101 7 is_stmt 0 discriminator 4 view .LVU935
 2939 0076 0546     		mov	r5, r0
 2940 0078 0028     		cmp	r0, #0
ARM GAS  /tmp/ccWTW02a.s 			page 167


 2941 007a D3D1     		bne	.L229
1102:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
 2942              		.loc 1 1102 4 is_stmt 1 view .LVU936
1102:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
 2943              		.loc 1 1102 21 is_stmt 0 view .LVU937
 2944 007c C9F30809 		ubfx	r9, r9, #0, #9
 2945              	.LVL326:
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2946              		.loc 1 1103 4 is_stmt 1 view .LVU938
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2947              		.loc 1 1103 7 is_stmt 0 view .LVU939
 2948 0080 44B1     		cbz	r4, .L234
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2949              		.loc 1 1103 7 discriminator 1 view .LVU940
 2950 0082 C6F30712 		ubfx	r2, r6, #4, #8
 2951              	.LVL327:
 2952              	.L235:
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2953              		.loc 1 1103 7 discriminator 4 view .LVU941
 2954 0086 0AF80920 		strb	r2, [r10, r9]
1104:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2955              		.loc 1 1104 4 is_stmt 1 discriminator 4 view .LVU942
1104:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2956              		.loc 1 1104 14 is_stmt 0 discriminator 4 view .LVU943
 2957 008a 0123     		movs	r3, #1
 2958 008c FB70     		strb	r3, [r7, #3]
1105:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2959              		.loc 1 1105 4 is_stmt 1 discriminator 4 view .LVU944
 2960 008e C9E7     		b	.L229
 2961              	.LVL328:
 2962              	.L232:
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2963              		.loc 1 1098 7 is_stmt 0 discriminator 2 view .LVU945
 2964 0090 F3B2     		uxtb	r3, r6
 2965 0092 E6E7     		b	.L233
 2966              	.LVL329:
 2967              	.L234:
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2968              		.loc 1 1103 43 discriminator 2 view .LVU946
 2969 0094 1AF90920 		ldrsb	r2, [r10, r9]
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2970              		.loc 1 1103 46 discriminator 2 view .LVU947
 2971 0098 22F00F02 		bic	r2, r2, #15
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2972              		.loc 1 1103 74 discriminator 2 view .LVU948
 2973 009c C6F30326 		ubfx	r6, r6, #8, #4
 2974              	.LVL330:
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2975              		.loc 1 1103 54 discriminator 2 view .LVU949
 2976 00a0 3243     		orrs	r2, r2, r6
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2977              		.loc 1 1103 7 discriminator 2 view .LVU950
 2978 00a2 D2B2     		uxtb	r2, r2
 2979 00a4 EFE7     		b	.L235
 2980              	.LVL331:
 2981              	.L230:
1108:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
ARM GAS  /tmp/ccWTW02a.s 			page 168


 2982              		.loc 1 1108 4 is_stmt 1 view .LVU951
1108:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2983              		.loc 1 1108 28 is_stmt 0 view .LVU952
 2984 00a6 016A     		ldr	r1, [r0, #32]
 2985              	.LVL332:
1108:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2986              		.loc 1 1108 10 view .LVU953
 2987 00a8 01EB1421 		add	r1, r1, r4, lsr #8
 2988 00ac FFF7FEFF 		bl	move_window
 2989              	.LVL333:
1109:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(fs->win + clst * 2 % SS(fs), (WORD)val);
 2990              		.loc 1 1109 4 is_stmt 1 view .LVU954
1109:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(fs->win + clst * 2 % SS(fs), (WORD)val);
 2991              		.loc 1 1109 7 is_stmt 0 view .LVU955
 2992 00b0 0546     		mov	r5, r0
 2993 00b2 0028     		cmp	r0, #0
 2994 00b4 B6D1     		bne	.L229
1110:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2995              		.loc 1 1110 4 is_stmt 1 view .LVU956
1110:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2996              		.loc 1 1110 12 is_stmt 0 view .LVU957
 2997 00b6 07F13000 		add	r0, r7, #48
 2998              	.LVL334:
1110:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2999              		.loc 1 1110 27 view .LVU958
 3000 00ba 6400     		lsls	r4, r4, #1
 3001              	.LVL335:
1110:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 3002              		.loc 1 1110 31 view .LVU959
 3003 00bc 04F4FF74 		and	r4, r4, #510
1110:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 3004              		.loc 1 1110 4 view .LVU960
 3005 00c0 B1B2     		uxth	r1, r6
 3006 00c2 2044     		add	r0, r0, r4
 3007 00c4 FFF7FEFF 		bl	st_word
 3008              	.LVL336:
1111:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3009              		.loc 1 1111 4 is_stmt 1 view .LVU961
1111:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3010              		.loc 1 1111 14 is_stmt 0 view .LVU962
 3011 00c8 0123     		movs	r3, #1
 3012 00ca FB70     		strb	r3, [r7, #3]
1112:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3013              		.loc 1 1112 4 is_stmt 1 view .LVU963
 3014 00cc AAE7     		b	.L229
 3015              	.LVL337:
 3016              	.L231:
1118:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 3017              		.loc 1 1118 4 view .LVU964
1118:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 3018              		.loc 1 1118 28 is_stmt 0 view .LVU965
 3019 00ce 016A     		ldr	r1, [r0, #32]
 3020              	.LVL338:
1118:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 3021              		.loc 1 1118 10 view .LVU966
 3022 00d0 01EBD411 		add	r1, r1, r4, lsr #7
 3023 00d4 FFF7FEFF 		bl	move_window
ARM GAS  /tmp/ccWTW02a.s 			page 169


 3024              	.LVL339:
1119:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 3025              		.loc 1 1119 4 is_stmt 1 view .LVU967
1119:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 3026              		.loc 1 1119 7 is_stmt 0 view .LVU968
 3027 00d8 0546     		mov	r5, r0
 3028 00da 0028     		cmp	r0, #0
 3029 00dc A2D1     		bne	.L229
1120:Middlewares/Third_Party/FatFs/src/ff.c **** 				val = (val & 0x0FFFFFFF) | (ld_dword(fs->win + clst * 4 % SS(fs)) & 0xF0000000);
 3030              		.loc 1 1120 4 is_stmt 1 view .LVU969
1121:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3031              		.loc 1 1121 5 view .LVU970
1121:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3032              		.loc 1 1121 16 is_stmt 0 view .LVU971
 3033 00de 26F07046 		bic	r6, r6, #-268435456
 3034              	.LVL340:
1121:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3035              		.loc 1 1121 42 view .LVU972
 3036 00e2 07F13003 		add	r3, r7, #48
1121:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3037              		.loc 1 1121 57 view .LVU973
 3038 00e6 A400     		lsls	r4, r4, #2
 3039              	.LVL341:
1121:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3040              		.loc 1 1121 61 view .LVU974
 3041 00e8 04F4FE74 		and	r4, r4, #508
1121:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3042              		.loc 1 1121 33 view .LVU975
 3043 00ec 1C44     		add	r4, r4, r3
 3044 00ee 2046     		mov	r0, r4
 3045              	.LVL342:
1121:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3046              		.loc 1 1121 33 view .LVU976
 3047 00f0 FFF7FEFF 		bl	ld_dword
 3048              	.LVL343:
1121:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3049              		.loc 1 1121 71 view .LVU977
 3050 00f4 00F07041 		and	r1, r0, #-268435456
 3051              	.LVL344:
1123:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 3052              		.loc 1 1123 4 is_stmt 1 view .LVU978
 3053 00f8 3143     		orrs	r1, r1, r6
 3054              	.LVL345:
1123:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 3055              		.loc 1 1123 4 is_stmt 0 view .LVU979
 3056 00fa 2046     		mov	r0, r4
 3057 00fc FFF7FEFF 		bl	st_dword
 3058              	.LVL346:
1124:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3059              		.loc 1 1124 4 is_stmt 1 view .LVU980
1124:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3060              		.loc 1 1124 14 is_stmt 0 view .LVU981
 3061 0100 0123     		movs	r3, #1
 3062 0102 FB70     		strb	r3, [r7, #3]
1125:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3063              		.loc 1 1125 4 is_stmt 1 view .LVU982
 3064 0104 8EE7     		b	.L229
ARM GAS  /tmp/ccWTW02a.s 			page 170


 3065              	.LVL347:
 3066              	.L236:
1089:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3067              		.loc 1 1089 10 is_stmt 0 view .LVU983
 3068 0106 0225     		movs	r5, #2
 3069 0108 8CE7     		b	.L229
 3070              	.L237:
1089:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3071              		.loc 1 1089 10 view .LVU984
 3072 010a 0225     		movs	r5, #2
 3073 010c 8AE7     		b	.L229
 3074              		.cfi_endproc
 3075              	.LFE159:
 3077              		.section	.text.get_fat,"ax",%progbits
 3078              		.align	1
 3079              		.syntax unified
 3080              		.thumb
 3081              		.thumb_func
 3082              		.fpu fpv5-d16
 3084              	get_fat:
 3085              	.LVL348:
 3086              	.LFB158:
1005:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT wc, bc;
 3087              		.loc 1 1005 1 is_stmt 1 view -0
 3088              		.cfi_startproc
 3089              		@ args = 0, pretend = 0, frame = 0
 3090              		@ frame_needed = 0, uses_anonymous_args = 0
1005:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT wc, bc;
 3091              		.loc 1 1005 1 is_stmt 0 view .LVU986
 3092 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3093              	.LCFI27:
 3094              		.cfi_def_cfa_offset 24
 3095              		.cfi_offset 3, -24
 3096              		.cfi_offset 4, -20
 3097              		.cfi_offset 5, -16
 3098              		.cfi_offset 6, -12
 3099              		.cfi_offset 7, -8
 3100              		.cfi_offset 14, -4
1006:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD val;
 3101              		.loc 1 1006 2 is_stmt 1 view .LVU987
1007:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = obj->fs;
 3102              		.loc 1 1007 2 view .LVU988
1008:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3103              		.loc 1 1008 2 view .LVU989
1008:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3104              		.loc 1 1008 9 is_stmt 0 view .LVU990
 3105 0002 0568     		ldr	r5, [r0]
 3106              	.LVL349:
1011:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 3107              		.loc 1 1011 2 is_stmt 1 view .LVU991
1011:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 3108              		.loc 1 1011 5 is_stmt 0 view .LVU992
 3109 0004 0129     		cmp	r1, #1
 3110 0006 56D9     		bls	.L246
 3111 0008 0C46     		mov	r4, r1
1011:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 3112              		.loc 1 1011 28 discriminator 1 view .LVU993
ARM GAS  /tmp/ccWTW02a.s 			page 171


 3113 000a 6B69     		ldr	r3, [r5, #20]
1011:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 3114              		.loc 1 1011 15 discriminator 1 view .LVU994
 3115 000c 8B42     		cmp	r3, r1
 3116 000e 54D9     		bls	.L247
1015:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3117              		.loc 1 1015 3 is_stmt 1 view .LVU995
 3118              	.LVL350:
1017:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :
 3119              		.loc 1 1017 3 view .LVU996
1017:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :
 3120              		.loc 1 1017 13 is_stmt 0 view .LVU997
 3121 0010 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
1017:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :
 3122              		.loc 1 1017 3 view .LVU998
 3123 0012 022B     		cmp	r3, #2
 3124 0014 2DD0     		beq	.L243
 3125 0016 032B     		cmp	r3, #3
 3126 0018 3BD0     		beq	.L244
 3127 001a 012B     		cmp	r3, #1
 3128 001c 01D0     		beq	.L254
 3129 001e 0120     		movs	r0, #1
 3130              	.LVL351:
1017:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :
 3131              		.loc 1 1017 3 view .LVU999
 3132 0020 4AE0     		b	.L241
 3133              	.LVL352:
 3134              	.L254:
1019:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 3135              		.loc 1 1019 4 is_stmt 1 view .LVU1000
1019:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 3136              		.loc 1 1019 21 view .LVU1001
1019:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 3137              		.loc 1 1019 24 is_stmt 0 view .LVU1002
 3138 0022 01EB5106 		add	r6, r1, r1, lsr #1
 3139              	.LVL353:
1020:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = fs->win[bc++ % SS(fs)];
 3140              		.loc 1 1020 4 is_stmt 1 view .LVU1003
1020:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = fs->win[bc++ % SS(fs)];
 3141              		.loc 1 1020 26 is_stmt 0 view .LVU1004
 3142 0026 296A     		ldr	r1, [r5, #32]
 3143              	.LVL354:
1020:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = fs->win[bc++ % SS(fs)];
 3144              		.loc 1 1020 8 view .LVU1005
 3145 0028 01EB5621 		add	r1, r1, r6, lsr #9
 3146 002c 2846     		mov	r0, r5
 3147              	.LVL355:
1020:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = fs->win[bc++ % SS(fs)];
 3148              		.loc 1 1020 8 view .LVU1006
 3149 002e FFF7FEFF 		bl	move_window
 3150              	.LVL356:
1020:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = fs->win[bc++ % SS(fs)];
 3151              		.loc 1 1020 7 view .LVU1007
 3152 0032 10B1     		cbz	r0, .L255
1015:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3153              		.loc 1 1015 7 view .LVU1008
 3154 0034 4FF0FF30 		mov	r0, #-1
ARM GAS  /tmp/ccWTW02a.s 			page 172


 3155 0038 3EE0     		b	.L241
 3156              	.L255:
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 3157              		.loc 1 1021 4 is_stmt 1 view .LVU1009
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 3158              		.loc 1 1021 19 is_stmt 0 view .LVU1010
 3159 003a 771C     		adds	r7, r6, #1
 3160              	.LVL357:
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 3161              		.loc 1 1021 22 view .LVU1011
 3162 003c C6F30806 		ubfx	r6, r6, #0, #9
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 3163              		.loc 1 1021 16 view .LVU1012
 3164 0040 2E44     		add	r6, r6, r5
 3165 0042 96F83060 		ldrb	r6, [r6, #48]	@ zero_extendqisi2
 3166              	.LVL358:
1022:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;
 3167              		.loc 1 1022 4 is_stmt 1 view .LVU1013
1022:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;
 3168              		.loc 1 1022 26 is_stmt 0 view .LVU1014
 3169 0046 296A     		ldr	r1, [r5, #32]
1022:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;
 3170              		.loc 1 1022 8 view .LVU1015
 3171 0048 01EB5721 		add	r1, r1, r7, lsr #9
 3172 004c 2846     		mov	r0, r5
 3173 004e FFF7FEFF 		bl	move_window
 3174              	.LVL359:
1022:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;
 3175              		.loc 1 1022 7 view .LVU1016
 3176 0052 A0BB     		cbnz	r0, .L250
1023:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 3177              		.loc 1 1023 4 is_stmt 1 view .LVU1017
1023:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 3178              		.loc 1 1023 21 is_stmt 0 view .LVU1018
 3179 0054 C7F30807 		ubfx	r7, r7, #0, #9
 3180              	.LVL360:
1023:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 3181              		.loc 1 1023 17 view .LVU1019
 3182 0058 3D44     		add	r5, r5, r7
 3183              	.LVL361:
1023:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 3184              		.loc 1 1023 17 view .LVU1020
 3185 005a 95F83000 		ldrb	r0, [r5, #48]	@ zero_extendqisi2
1023:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 3186              		.loc 1 1023 7 view .LVU1021
 3187 005e 46EA0020 		orr	r0, r6, r0, lsl #8
 3188              	.LVL362:
1024:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3189              		.loc 1 1024 4 is_stmt 1 view .LVU1022
1024:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3190              		.loc 1 1024 33 is_stmt 0 view .LVU1023
 3191 0062 14F0010F 		tst	r4, #1
 3192 0066 01D0     		beq	.L245
1024:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3193              		.loc 1 1024 33 discriminator 1 view .LVU1024
 3194 0068 0009     		lsrs	r0, r0, #4
 3195              	.LVL363:
ARM GAS  /tmp/ccWTW02a.s 			page 173


1024:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3196              		.loc 1 1024 33 discriminator 1 view .LVU1025
 3197 006a 25E0     		b	.L241
 3198              	.LVL364:
 3199              	.L245:
1024:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3200              		.loc 1 1024 33 discriminator 2 view .LVU1026
 3201 006c C0F30B00 		ubfx	r0, r0, #0, #12
 3202              	.LVL365:
1024:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3203              		.loc 1 1024 33 discriminator 2 view .LVU1027
 3204 0070 22E0     		b	.L241
 3205              	.LVL366:
 3206              	.L243:
1028:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));
 3207              		.loc 1 1028 4 is_stmt 1 view .LVU1028
1028:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));
 3208              		.loc 1 1028 26 is_stmt 0 view .LVU1029
 3209 0072 296A     		ldr	r1, [r5, #32]
 3210              	.LVL367:
1028:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));
 3211              		.loc 1 1028 8 view .LVU1030
 3212 0074 01EB1421 		add	r1, r1, r4, lsr #8
 3213 0078 2846     		mov	r0, r5
 3214              	.LVL368:
1028:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));
 3215              		.loc 1 1028 8 view .LVU1031
 3216 007a FFF7FEFF 		bl	move_window
 3217              	.LVL369:
1028:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));
 3218              		.loc 1 1028 7 view .LVU1032
 3219 007e 08BB     		cbnz	r0, .L251
1029:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3220              		.loc 1 1029 4 is_stmt 1 view .LVU1033
1029:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3221              		.loc 1 1029 18 is_stmt 0 view .LVU1034
 3222 0080 05F13000 		add	r0, r5, #48
1029:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3223              		.loc 1 1029 33 view .LVU1035
 3224 0084 6400     		lsls	r4, r4, #1
 3225              	.LVL370:
1029:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3226              		.loc 1 1029 37 view .LVU1036
 3227 0086 04F4FF74 		and	r4, r4, #510
1029:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3228              		.loc 1 1029 10 view .LVU1037
 3229 008a 2044     		add	r0, r0, r4
 3230 008c FFF7FEFF 		bl	ld_word
 3231              	.LVL371:
1030:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3232              		.loc 1 1030 4 is_stmt 1 view .LVU1038
 3233 0090 12E0     		b	.L241
 3234              	.LVL372:
 3235              	.L244:
1033:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;
 3236              		.loc 1 1033 4 view .LVU1039
1033:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;
ARM GAS  /tmp/ccWTW02a.s 			page 174


 3237              		.loc 1 1033 26 is_stmt 0 view .LVU1040
 3238 0092 296A     		ldr	r1, [r5, #32]
 3239              	.LVL373:
1033:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;
 3240              		.loc 1 1033 8 view .LVU1041
 3241 0094 01EBD411 		add	r1, r1, r4, lsr #7
 3242 0098 2846     		mov	r0, r5
 3243              	.LVL374:
1033:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;
 3244              		.loc 1 1033 8 view .LVU1042
 3245 009a FFF7FEFF 		bl	move_window
 3246              	.LVL375:
1033:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;
 3247              		.loc 1 1033 7 view .LVU1043
 3248 009e A0B9     		cbnz	r0, .L252
1034:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3249              		.loc 1 1034 4 is_stmt 1 view .LVU1044
1034:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3250              		.loc 1 1034 19 is_stmt 0 view .LVU1045
 3251 00a0 05F13000 		add	r0, r5, #48
1034:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3252              		.loc 1 1034 34 view .LVU1046
 3253 00a4 A400     		lsls	r4, r4, #2
 3254              	.LVL376:
1034:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3255              		.loc 1 1034 38 view .LVU1047
 3256 00a6 04F4FE74 		and	r4, r4, #508
1034:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3257              		.loc 1 1034 10 view .LVU1048
 3258 00aa 2044     		add	r0, r0, r4
 3259 00ac FFF7FEFF 		bl	ld_dword
 3260              	.LVL377:
1034:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3261              		.loc 1 1034 8 view .LVU1049
 3262 00b0 20F07040 		bic	r0, r0, #-268435456
 3263              	.LVL378:
1035:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 3264              		.loc 1 1035 4 is_stmt 1 view .LVU1050
 3265 00b4 00E0     		b	.L241
 3266              	.LVL379:
 3267              	.L246:
1012:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3268              		.loc 1 1012 7 is_stmt 0 view .LVU1051
 3269 00b6 0120     		movs	r0, #1
 3270              	.LVL380:
 3271              	.L241:
1070:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3272              		.loc 1 1070 1 view .LVU1052
 3273 00b8 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3274              	.LVL381:
 3275              	.L247:
1012:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3276              		.loc 1 1012 7 view .LVU1053
 3277 00ba 0120     		movs	r0, #1
 3278              	.LVL382:
1012:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3279              		.loc 1 1012 7 view .LVU1054
ARM GAS  /tmp/ccWTW02a.s 			page 175


 3280 00bc FCE7     		b	.L241
 3281              	.LVL383:
 3282              	.L250:
1015:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3283              		.loc 1 1015 7 view .LVU1055
 3284 00be 4FF0FF30 		mov	r0, #-1
 3285 00c2 F9E7     		b	.L241
 3286              	.LVL384:
 3287              	.L251:
1015:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3288              		.loc 1 1015 7 view .LVU1056
 3289 00c4 4FF0FF30 		mov	r0, #-1
 3290 00c8 F6E7     		b	.L241
 3291              	.L252:
1015:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3292              		.loc 1 1015 7 view .LVU1057
 3293 00ca 4FF0FF30 		mov	r0, #-1
1069:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3294              		.loc 1 1069 2 is_stmt 1 view .LVU1058
1069:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3295              		.loc 1 1069 9 is_stmt 0 view .LVU1059
 3296 00ce F3E7     		b	.L241
 3297              		.cfi_endproc
 3298              	.LFE158:
 3300              		.section	.text.dir_sdi,"ax",%progbits
 3301              		.align	1
 3302              		.syntax unified
 3303              		.thumb
 3304              		.thumb_func
 3305              		.fpu fpv5-d16
 3307              	dir_sdi:
 3308              	.LVL385:
 3309              	.LFB163:
1474:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD csz, clst;
 3310              		.loc 1 1474 1 is_stmt 1 view -0
 3311              		.cfi_startproc
 3312              		@ args = 0, pretend = 0, frame = 0
 3313              		@ frame_needed = 0, uses_anonymous_args = 0
1474:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD csz, clst;
 3314              		.loc 1 1474 1 is_stmt 0 view .LVU1061
 3315 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 3316              	.LCFI28:
 3317              		.cfi_def_cfa_offset 24
 3318              		.cfi_offset 4, -24
 3319              		.cfi_offset 5, -20
 3320              		.cfi_offset 6, -16
 3321              		.cfi_offset 7, -12
 3322              		.cfi_offset 8, -8
 3323              		.cfi_offset 14, -4
1475:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
 3324              		.loc 1 1475 2 is_stmt 1 view .LVU1062
1476:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3325              		.loc 1 1476 2 view .LVU1063
1476:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3326              		.loc 1 1476 9 is_stmt 0 view .LVU1064
 3327 0004 D0F80080 		ldr	r8, [r0]
 3328              	.LVL386:
ARM GAS  /tmp/ccWTW02a.s 			page 176


1479:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INT_ERR;
 3329              		.loc 1 1479 2 is_stmt 1 view .LVU1065
1479:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INT_ERR;
 3330              		.loc 1 1479 5 is_stmt 0 view .LVU1066
 3331 0008 B1F5001F 		cmp	r1, #2097152
 3332 000c 42D2     		bcs	.L263
 3333 000e 0646     		mov	r6, r0
 3334 0010 0F46     		mov	r7, r1
1479:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INT_ERR;
 3335              		.loc 1 1479 84 discriminator 1 view .LVU1067
 3336 0012 11F01F0F 		tst	r1, #31
 3337 0016 3FD1     		bne	.L264
1482:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst = dp->obj.sclust;		/* Table start cluster (0:root) */
 3338              		.loc 1 1482 2 is_stmt 1 view .LVU1068
1482:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst = dp->obj.sclust;		/* Table start cluster (0:root) */
 3339              		.loc 1 1482 11 is_stmt 0 view .LVU1069
 3340 0018 4161     		str	r1, [r0, #20]
1483:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst == 0 && fs->fs_type >= FS_FAT32) {	/* Replace cluster# 0 with root cluster# */
 3341              		.loc 1 1483 2 is_stmt 1 view .LVU1070
1483:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst == 0 && fs->fs_type >= FS_FAT32) {	/* Replace cluster# 0 with root cluster# */
 3342              		.loc 1 1483 7 is_stmt 0 view .LVU1071
 3343 001a 8468     		ldr	r4, [r0, #8]
 3344              	.LVL387:
1484:Middlewares/Third_Party/FatFs/src/ff.c **** 		clst = fs->dirbase;
 3345              		.loc 1 1484 2 is_stmt 1 view .LVU1072
1484:Middlewares/Third_Party/FatFs/src/ff.c **** 		clst = fs->dirbase;
 3346              		.loc 1 1484 5 is_stmt 0 view .LVU1073
 3347 001c 2CB9     		cbnz	r4, .L258
1484:Middlewares/Third_Party/FatFs/src/ff.c **** 		clst = fs->dirbase;
 3348              		.loc 1 1484 21 discriminator 1 view .LVU1074
 3349 001e 98F80030 		ldrb	r3, [r8]	@ zero_extendqisi2
1484:Middlewares/Third_Party/FatFs/src/ff.c **** 		clst = fs->dirbase;
 3350              		.loc 1 1484 16 discriminator 1 view .LVU1075
 3351 0022 022B     		cmp	r3, #2
 3352 0024 01D9     		bls	.L258
1485:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_EXFAT) dp->obj.stat = 0;	/* exFAT: Root dir has an FAT chain */
 3353              		.loc 1 1485 3 is_stmt 1 view .LVU1076
1485:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_EXFAT) dp->obj.stat = 0;	/* exFAT: Root dir has an FAT chain */
 3354              		.loc 1 1485 8 is_stmt 0 view .LVU1077
 3355 0026 D8F82440 		ldr	r4, [r8, #36]
 3356              	.LVL388:
1486:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3357              		.loc 1 1486 3 is_stmt 1 view .LVU1078
 3358              	.L258:
1489:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs / SZDIRE >= fs->n_rootdir)	return FR_INT_ERR;	/* Is index out of range? */
 3359              		.loc 1 1489 2 view .LVU1079
1489:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs / SZDIRE >= fs->n_rootdir)	return FR_INT_ERR;	/* Is index out of range? */
 3360              		.loc 1 1489 5 is_stmt 0 view .LVU1080
 3361 002a B4B9     		cbnz	r4, .L259
1490:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect = fs->dirbase;
 3362              		.loc 1 1490 3 is_stmt 1 view .LVU1081
1490:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect = fs->dirbase;
 3363              		.loc 1 1490 25 is_stmt 0 view .LVU1082
 3364 002c B8F80830 		ldrh	r3, [r8, #8]
1490:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect = fs->dirbase;
 3365              		.loc 1 1490 6 view .LVU1083
 3366 0030 B3EB571F 		cmp	r3, r7, lsr #5
ARM GAS  /tmp/ccWTW02a.s 			page 177


 3367 0034 32D9     		bls	.L265
1491:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3368              		.loc 1 1491 3 is_stmt 1 view .LVU1084
1491:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3369              		.loc 1 1491 16 is_stmt 0 view .LVU1085
 3370 0036 D8F82430 		ldr	r3, [r8, #36]
1491:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3371              		.loc 1 1491 12 view .LVU1086
 3372 003a F361     		str	r3, [r6, #28]
 3373              	.LVL389:
 3374              	.L260:
1503:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp->sect) return FR_INT_ERR;
 3375              		.loc 1 1503 2 is_stmt 1 view .LVU1087
1503:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp->sect) return FR_INT_ERR;
 3376              		.loc 1 1503 12 is_stmt 0 view .LVU1088
 3377 003c B461     		str	r4, [r6, #24]
1504:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->sect += ofs / SS(fs);			/* Sector# of the directory entry */
 3378              		.loc 1 1504 2 is_stmt 1 view .LVU1089
1504:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->sect += ofs / SS(fs);			/* Sector# of the directory entry */
 3379              		.loc 1 1504 9 is_stmt 0 view .LVU1090
 3380 003e F369     		ldr	r3, [r6, #28]
1504:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->sect += ofs / SS(fs);			/* Sector# of the directory entry */
 3381              		.loc 1 1504 5 view .LVU1091
 3382 0040 93B3     		cbz	r3, .L269
1505:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = fs->win + (ofs % SS(fs));	/* Pointer to the entry in the win[] */
 3383              		.loc 1 1505 2 is_stmt 1 view .LVU1092
1505:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = fs->win + (ofs % SS(fs));	/* Pointer to the entry in the win[] */
 3384              		.loc 1 1505 11 is_stmt 0 view .LVU1093
 3385 0042 03EB5723 		add	r3, r3, r7, lsr #9
 3386 0046 F361     		str	r3, [r6, #28]
1506:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3387              		.loc 1 1506 2 is_stmt 1 view .LVU1094
1506:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3388              		.loc 1 1506 12 is_stmt 0 view .LVU1095
 3389 0048 08F13003 		add	r3, r8, #48
1506:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3390              		.loc 1 1506 27 view .LVU1096
 3391 004c C7F30801 		ubfx	r1, r7, #0, #9
1506:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3392              		.loc 1 1506 20 view .LVU1097
 3393 0050 1944     		add	r1, r1, r3
1506:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3394              		.loc 1 1506 10 view .LVU1098
 3395 0052 3162     		str	r1, [r6, #32]
1508:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3396              		.loc 1 1508 2 is_stmt 1 view .LVU1099
1508:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3397              		.loc 1 1508 9 is_stmt 0 view .LVU1100
 3398 0054 0020     		movs	r0, #0
 3399              	.LVL390:
 3400              	.L257:
1509:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3401              		.loc 1 1509 1 view .LVU1101
 3402 0056 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3403              	.LVL391:
 3404              	.L259:
1494:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (ofs >= csz) {				/* Follow cluster chain */
ARM GAS  /tmp/ccWTW02a.s 			page 178


 3405              		.loc 1 1494 3 is_stmt 1 view .LVU1102
1494:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (ofs >= csz) {				/* Follow cluster chain */
 3406              		.loc 1 1494 18 is_stmt 0 view .LVU1103
 3407 005a B8F80A50 		ldrh	r5, [r8, #10]
1494:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (ofs >= csz) {				/* Follow cluster chain */
 3408              		.loc 1 1494 7 view .LVU1104
 3409 005e 6D02     		lsls	r5, r5, #9
 3410              	.LVL392:
1495:Middlewares/Third_Party/FatFs/src/ff.c **** 			clst = get_fat(&dp->obj, clst);				/* Get next cluster */
 3411              		.loc 1 1495 3 is_stmt 1 view .LVU1105
1495:Middlewares/Third_Party/FatFs/src/ff.c **** 			clst = get_fat(&dp->obj, clst);				/* Get next cluster */
 3412              		.loc 1 1495 9 is_stmt 0 view .LVU1106
 3413 0060 00E0     		b	.L261
 3414              	.LVL393:
 3415              	.L272:
1499:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3416              		.loc 1 1499 4 is_stmt 1 view .LVU1107
1499:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3417              		.loc 1 1499 8 is_stmt 0 view .LVU1108
 3418 0062 7F1B     		subs	r7, r7, r5
 3419              	.LVL394:
 3420              	.L261:
1495:Middlewares/Third_Party/FatFs/src/ff.c **** 			clst = get_fat(&dp->obj, clst);				/* Get next cluster */
 3421              		.loc 1 1495 9 is_stmt 1 view .LVU1109
 3422 0064 AF42     		cmp	r7, r5
 3423 0066 0FD3     		bcc	.L271
1496:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 3424              		.loc 1 1496 4 view .LVU1110
1496:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 3425              		.loc 1 1496 11 is_stmt 0 view .LVU1111
 3426 0068 2146     		mov	r1, r4
 3427 006a 3046     		mov	r0, r6
 3428 006c FFF7FEFF 		bl	get_fat
 3429              	.LVL395:
 3430 0070 0446     		mov	r4, r0
 3431              	.LVL396:
1497:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Reached to end of table or internal 
 3432              		.loc 1 1497 4 is_stmt 1 view .LVU1112
1497:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Reached to end of table or internal 
 3433              		.loc 1 1497 7 is_stmt 0 view .LVU1113
 3434 0072 B0F1FF3F 		cmp	r0, #-1
 3435 0076 13D0     		beq	.L266
1498:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs -= csz;
 3436              		.loc 1 1498 4 is_stmt 1 view .LVU1114
1498:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs -= csz;
 3437              		.loc 1 1498 7 is_stmt 0 view .LVU1115
 3438 0078 0128     		cmp	r0, #1
 3439 007a 13D9     		bls	.L267
1498:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs -= csz;
 3440              		.loc 1 1498 30 discriminator 2 view .LVU1116
 3441 007c D8F81430 		ldr	r3, [r8, #20]
1498:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs -= csz;
 3442              		.loc 1 1498 17 discriminator 2 view .LVU1117
 3443 0080 8342     		cmp	r3, r0
 3444 0082 EED8     		bhi	.L272
1498:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs -= csz;
 3445              		.loc 1 1498 49 view .LVU1118
ARM GAS  /tmp/ccWTW02a.s 			page 179


 3446 0084 0220     		movs	r0, #2
 3447              	.LVL397:
1498:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs -= csz;
 3448              		.loc 1 1498 49 view .LVU1119
 3449 0086 E6E7     		b	.L257
 3450              	.L271:
1501:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3451              		.loc 1 1501 3 is_stmt 1 view .LVU1120
1501:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3452              		.loc 1 1501 14 is_stmt 0 view .LVU1121
 3453 0088 2146     		mov	r1, r4
 3454 008a 4046     		mov	r0, r8
 3455 008c FFF7FEFF 		bl	clust2sect
 3456              	.LVL398:
1501:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3457              		.loc 1 1501 12 view .LVU1122
 3458 0090 F061     		str	r0, [r6, #28]
 3459 0092 D3E7     		b	.L260
 3460              	.LVL399:
 3461              	.L263:
1480:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3462              		.loc 1 1480 10 view .LVU1123
 3463 0094 0220     		movs	r0, #2
 3464              	.LVL400:
1480:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3465              		.loc 1 1480 10 view .LVU1124
 3466 0096 DEE7     		b	.L257
 3467              	.LVL401:
 3468              	.L264:
1480:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3469              		.loc 1 1480 10 view .LVU1125
 3470 0098 0220     		movs	r0, #2
 3471              	.LVL402:
1480:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3472              		.loc 1 1480 10 view .LVU1126
 3473 009a DCE7     		b	.L257
 3474              	.LVL403:
 3475              	.L265:
1490:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect = fs->dirbase;
 3476              		.loc 1 1490 45 view .LVU1127
 3477 009c 0220     		movs	r0, #2
 3478              	.LVL404:
1490:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect = fs->dirbase;
 3479              		.loc 1 1490 45 view .LVU1128
 3480 009e DAE7     		b	.L257
 3481              	.LVL405:
 3482              	.L266:
1497:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Reached to end of table or internal 
 3483              		.loc 1 1497 35 view .LVU1129
 3484 00a0 0120     		movs	r0, #1
 3485              	.LVL406:
1497:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Reached to end of table or internal 
 3486              		.loc 1 1497 35 view .LVU1130
 3487 00a2 D8E7     		b	.L257
 3488              	.LVL407:
 3489              	.L267:
1498:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs -= csz;
ARM GAS  /tmp/ccWTW02a.s 			page 180


 3490              		.loc 1 1498 49 view .LVU1131
 3491 00a4 0220     		movs	r0, #2
 3492              	.LVL408:
1498:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs -= csz;
 3493              		.loc 1 1498 49 view .LVU1132
 3494 00a6 D6E7     		b	.L257
 3495              	.LVL409:
 3496              	.L269:
1504:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->sect += ofs / SS(fs);			/* Sector# of the directory entry */
 3497              		.loc 1 1504 24 view .LVU1133
 3498 00a8 0220     		movs	r0, #2
 3499 00aa D4E7     		b	.L257
 3500              		.cfi_endproc
 3501              	.LFE163:
 3503              		.section	.text.create_chain,"ax",%progbits
 3504              		.align	1
 3505              		.syntax unified
 3506              		.thumb
 3507              		.thumb_func
 3508              		.fpu fpv5-d16
 3510              	create_chain:
 3511              	.LVL410:
 3512              	.LFB161:
1355:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cs, ncl, scl;
 3513              		.loc 1 1355 1 is_stmt 1 view -0
 3514              		.cfi_startproc
 3515              		@ args = 0, pretend = 0, frame = 0
 3516              		@ frame_needed = 0, uses_anonymous_args = 0
1355:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cs, ncl, scl;
 3517              		.loc 1 1355 1 is_stmt 0 view .LVU1135
 3518 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 3519              	.LCFI29:
 3520              		.cfi_def_cfa_offset 24
 3521              		.cfi_offset 4, -24
 3522              		.cfi_offset 5, -20
 3523              		.cfi_offset 6, -16
 3524              		.cfi_offset 7, -12
 3525              		.cfi_offset 8, -8
 3526              		.cfi_offset 14, -4
 3527 0004 0546     		mov	r5, r0
1356:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 3528              		.loc 1 1356 2 is_stmt 1 view .LVU1136
1357:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = obj->fs;
 3529              		.loc 1 1357 2 view .LVU1137
1358:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3530              		.loc 1 1358 2 view .LVU1138
1358:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3531              		.loc 1 1358 9 is_stmt 0 view .LVU1139
 3532 0006 0668     		ldr	r6, [r0]
 3533              	.LVL411:
1361:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = fs->last_clst;				/* Get suggested cluster to start from */
 3534              		.loc 1 1361 2 is_stmt 1 view .LVU1140
1361:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = fs->last_clst;				/* Get suggested cluster to start from */
 3535              		.loc 1 1361 5 is_stmt 0 view .LVU1141
 3536 0008 0F46     		mov	r7, r1
 3537 000a 51B9     		cbnz	r1, .L274
1362:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (scl == 0 || scl >= fs->n_fatent) scl = 1;
ARM GAS  /tmp/ccWTW02a.s 			page 181


 3538              		.loc 1 1362 3 is_stmt 1 view .LVU1142
1362:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (scl == 0 || scl >= fs->n_fatent) scl = 1;
 3539              		.loc 1 1362 7 is_stmt 0 view .LVU1143
 3540 000c D6F80C80 		ldr	r8, [r6, #12]
 3541              	.LVL412:
1363:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3542              		.loc 1 1363 3 is_stmt 1 view .LVU1144
1363:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3543              		.loc 1 1363 6 is_stmt 0 view .LVU1145
 3544 0010 B8F1000F 		cmp	r8, #0
 3545 0014 12D0     		beq	.L283
1363:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3546              		.loc 1 1363 28 discriminator 2 view .LVU1146
 3547 0016 7369     		ldr	r3, [r6, #20]
1363:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3548              		.loc 1 1363 16 discriminator 2 view .LVU1147
 3549 0018 4345     		cmp	r3, r8
 3550 001a 11D8     		bhi	.L275
1363:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3551              		.loc 1 1363 44 view .LVU1148
 3552 001c 4FF00108 		mov	r8, #1
 3553              	.LVL413:
1363:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3554              		.loc 1 1363 44 view .LVU1149
 3555 0020 0EE0     		b	.L275
 3556              	.LVL414:
 3557              	.L274:
1366:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < 2) return 1;				/* Invalid FAT value */
 3558              		.loc 1 1366 3 is_stmt 1 view .LVU1150
1366:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < 2) return 1;				/* Invalid FAT value */
 3559              		.loc 1 1366 8 is_stmt 0 view .LVU1151
 3560 0022 FFF7FEFF 		bl	get_fat
 3561              	.LVL415:
1366:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < 2) return 1;				/* Invalid FAT value */
 3562              		.loc 1 1366 8 view .LVU1152
 3563 0026 0346     		mov	r3, r0
 3564              	.LVL416:
1367:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
 3565              		.loc 1 1367 3 is_stmt 1 view .LVU1153
1367:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
 3566              		.loc 1 1367 6 is_stmt 0 view .LVU1154
 3567 0028 0128     		cmp	r0, #1
 3568 002a 4CD9     		bls	.L285
1368:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
 3569              		.loc 1 1368 3 is_stmt 1 view .LVU1155
1368:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
 3570              		.loc 1 1368 6 is_stmt 0 view .LVU1156
 3571 002c B0F1FF3F 		cmp	r0, #-1
 3572 0030 4ED0     		beq	.L273
1369:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = clst;
 3573              		.loc 1 1369 3 is_stmt 1 view .LVU1157
1369:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = clst;
 3574              		.loc 1 1369 14 is_stmt 0 view .LVU1158
 3575 0032 7269     		ldr	r2, [r6, #20]
1369:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = clst;
 3576              		.loc 1 1369 6 view .LVU1159
 3577 0034 8242     		cmp	r2, r0
ARM GAS  /tmp/ccWTW02a.s 			page 182


 3578 0036 4BD8     		bhi	.L273
1370:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3579              		.loc 1 1370 7 view .LVU1160
 3580 0038 B846     		mov	r8, r7
 3581 003a 01E0     		b	.L275
 3582              	.LVL417:
 3583              	.L283:
1363:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3584              		.loc 1 1363 44 view .LVU1161
 3585 003c 4FF00108 		mov	r8, #1
 3586              	.LVL418:
 3587              	.L275:
1400:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {
 3588              		.loc 1 1400 3 is_stmt 1 view .LVU1162
1400:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {
 3589              		.loc 1 1400 7 is_stmt 0 view .LVU1163
 3590 0040 4446     		mov	r4, r8
 3591 0042 0CE0     		b	.L279
 3592              	.LVL419:
 3593              	.L277:
1407:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cs == 0) break;				/* Found a free cluster */
 3594              		.loc 1 1407 4 is_stmt 1 view .LVU1164
1407:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cs == 0) break;				/* Found a free cluster */
 3595              		.loc 1 1407 9 is_stmt 0 view .LVU1165
 3596 0044 2146     		mov	r1, r4
 3597 0046 2846     		mov	r0, r5
 3598 0048 FFF7FEFF 		bl	get_fat
 3599              	.LVL420:
1408:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cs == 1 || cs == 0xFFFFFFFF) return cs;	/* An error occurred */
 3600              		.loc 1 1408 4 is_stmt 1 view .LVU1166
1408:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cs == 1 || cs == 0xFFFFFFFF) return cs;	/* An error occurred */
 3601              		.loc 1 1408 7 is_stmt 0 view .LVU1167
 3602 004c 0346     		mov	r3, r0
 3603 004e 78B1     		cbz	r0, .L278
1409:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == scl) return 0;		/* No free cluster */
 3604              		.loc 1 1409 4 is_stmt 1 view .LVU1168
1409:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == scl) return 0;		/* No free cluster */
 3605              		.loc 1 1409 7 is_stmt 0 view .LVU1169
 3606 0050 B0F1FF3F 		cmp	r0, #-1
 3607 0054 18BF     		it	ne
 3608 0056 0128     		cmpne	r0, #1
 3609 0058 3AD0     		beq	.L273
1410:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3610              		.loc 1 1410 4 is_stmt 1 view .LVU1170
1410:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3611              		.loc 1 1410 7 is_stmt 0 view .LVU1171
 3612 005a 4445     		cmp	r4, r8
 3613 005c 37D0     		beq	.L290
 3614              	.LVL421:
 3615              	.L279:
1401:Middlewares/Third_Party/FatFs/src/ff.c **** 			ncl++;							/* Next cluster */
 3616              		.loc 1 1401 3 is_stmt 1 view .LVU1172
1402:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl >= fs->n_fatent) {		/* Check wrap-around */
 3617              		.loc 1 1402 4 view .LVU1173
1402:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl >= fs->n_fatent) {		/* Check wrap-around */
 3618              		.loc 1 1402 7 is_stmt 0 view .LVU1174
 3619 005e 0134     		adds	r4, r4, #1
ARM GAS  /tmp/ccWTW02a.s 			page 183


 3620              	.LVL422:
1403:Middlewares/Third_Party/FatFs/src/ff.c **** 				ncl = 2;
 3621              		.loc 1 1403 4 is_stmt 1 view .LVU1175
1403:Middlewares/Third_Party/FatFs/src/ff.c **** 				ncl = 2;
 3622              		.loc 1 1403 17 is_stmt 0 view .LVU1176
 3623 0060 7369     		ldr	r3, [r6, #20]
1403:Middlewares/Third_Party/FatFs/src/ff.c **** 				ncl = 2;
 3624              		.loc 1 1403 7 view .LVU1177
 3625 0062 A342     		cmp	r3, r4
 3626 0064 EED8     		bhi	.L277
1404:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ncl > scl) return 0;	/* No free cluster */
 3627              		.loc 1 1404 5 is_stmt 1 view .LVU1178
 3628              	.LVL423:
1405:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3629              		.loc 1 1405 5 view .LVU1179
1405:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3630              		.loc 1 1405 8 is_stmt 0 view .LVU1180
 3631 0066 B8F1010F 		cmp	r8, #1
 3632 006a 2ED9     		bls	.L286
1404:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ncl > scl) return 0;	/* No free cluster */
 3633              		.loc 1 1404 9 view .LVU1181
 3634 006c 0224     		movs	r4, #2
 3635 006e E9E7     		b	.L277
 3636              	.LVL424:
 3637              	.L278:
1412:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && clst != 0) {
 3638              		.loc 1 1412 3 is_stmt 1 view .LVU1182
1412:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && clst != 0) {
 3639              		.loc 1 1412 9 is_stmt 0 view .LVU1183
 3640 0070 4FF0FF32 		mov	r2, #-1
 3641 0074 2146     		mov	r1, r4
 3642 0076 3046     		mov	r0, r6
 3643              	.LVL425:
1412:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && clst != 0) {
 3644              		.loc 1 1412 9 view .LVU1184
 3645 0078 FFF7FEFF 		bl	put_fat
 3646              	.LVL426:
1413:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, ncl);	/* Link it from the previous one if needed */
 3647              		.loc 1 1413 3 is_stmt 1 view .LVU1185
1413:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, ncl);	/* Link it from the previous one if needed */
 3648              		.loc 1 1413 11 is_stmt 0 view .LVU1186
 3649 007c 0246     		mov	r2, r0
1413:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, ncl);	/* Link it from the previous one if needed */
 3650              		.loc 1 1413 28 view .LVU1187
 3651 007e 3B1E     		subs	r3, r7, #0
 3652 0080 18BF     		it	ne
 3653 0082 0123     		movne	r3, #1
1413:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, ncl);	/* Link it from the previous one if needed */
 3654              		.loc 1 1413 20 view .LVU1188
 3655 0084 0028     		cmp	r0, #0
 3656 0086 18BF     		it	ne
 3657 0088 0023     		movne	r3, #0
1413:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, ncl);	/* Link it from the previous one if needed */
 3658              		.loc 1 1413 6 view .LVU1189
 3659 008a 73B9     		cbnz	r3, .L291
 3660              	.LVL427:
 3661              	.L280:
ARM GAS  /tmp/ccWTW02a.s 			page 184


1418:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->last_clst = ncl;
 3662              		.loc 1 1418 2 is_stmt 1 view .LVU1190
1418:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->last_clst = ncl;
 3663              		.loc 1 1418 5 is_stmt 0 view .LVU1191
 3664 008c A2B9     		cbnz	r2, .L281
1419:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->free_clst <= fs->n_fatent - 2) fs->free_clst--;
 3665              		.loc 1 1419 3 is_stmt 1 view .LVU1192
1419:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->free_clst <= fs->n_fatent - 2) fs->free_clst--;
 3666              		.loc 1 1419 17 is_stmt 0 view .LVU1193
 3667 008e F460     		str	r4, [r6, #12]
1420:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag |= 1;
 3668              		.loc 1 1420 3 is_stmt 1 view .LVU1194
1420:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag |= 1;
 3669              		.loc 1 1420 9 is_stmt 0 view .LVU1195
 3670 0090 3269     		ldr	r2, [r6, #16]
 3671              	.LVL428:
1420:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag |= 1;
 3672              		.loc 1 1420 26 view .LVU1196
 3673 0092 7369     		ldr	r3, [r6, #20]
1420:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag |= 1;
 3674              		.loc 1 1420 37 view .LVU1197
 3675 0094 023B     		subs	r3, r3, #2
1420:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag |= 1;
 3676              		.loc 1 1420 6 view .LVU1198
 3677 0096 9A42     		cmp	r2, r3
 3678 0098 01D8     		bhi	.L282
1420:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag |= 1;
 3679              		.loc 1 1420 42 is_stmt 1 discriminator 1 view .LVU1199
1420:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag |= 1;
 3680              		.loc 1 1420 55 is_stmt 0 discriminator 1 view .LVU1200
 3681 009a 013A     		subs	r2, r2, #1
 3682 009c 3261     		str	r2, [r6, #16]
 3683              	.L282:
1421:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 3684              		.loc 1 1421 3 is_stmt 1 view .LVU1201
1421:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 3685              		.loc 1 1421 16 is_stmt 0 view .LVU1202
 3686 009e 3379     		ldrb	r3, [r6, #4]	@ zero_extendqisi2
 3687 00a0 43F00103 		orr	r3, r3, #1
 3688 00a4 3371     		strb	r3, [r6, #4]
 3689 00a6 2346     		mov	r3, r4
 3690 00a8 12E0     		b	.L273
 3691              	.LVL429:
 3692              	.L291:
1414:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3693              		.loc 1 1414 4 is_stmt 1 view .LVU1203
1414:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3694              		.loc 1 1414 10 is_stmt 0 view .LVU1204
 3695 00aa 2246     		mov	r2, r4
 3696 00ac 3946     		mov	r1, r7
 3697 00ae 3046     		mov	r0, r6
 3698              	.LVL430:
1414:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3699              		.loc 1 1414 10 view .LVU1205
 3700 00b0 FFF7FEFF 		bl	put_fat
 3701              	.LVL431:
 3702 00b4 0246     		mov	r2, r0
ARM GAS  /tmp/ccWTW02a.s 			page 185


 3703              	.LVL432:
1414:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3704              		.loc 1 1414 10 view .LVU1206
 3705 00b6 E9E7     		b	.L280
 3706              	.L281:
1423:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3707              		.loc 1 1423 3 is_stmt 1 view .LVU1207
1423:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3708              		.loc 1 1423 43 is_stmt 0 view .LVU1208
 3709 00b8 012A     		cmp	r2, #1
 3710 00ba 01D0     		beq	.L292
 3711 00bc 0123     		movs	r3, #1
 3712              	.LVL433:
1423:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3713              		.loc 1 1423 43 view .LVU1209
 3714 00be 07E0     		b	.L273
 3715              	.LVL434:
 3716              	.L292:
1423:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3717              		.loc 1 1423 43 view .LVU1210
 3718 00c0 4FF0FF33 		mov	r3, #-1
 3719 00c4 04E0     		b	.L273
 3720              	.LVL435:
 3721              	.L285:
1367:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
 3722              		.loc 1 1367 22 view .LVU1211
 3723 00c6 0123     		movs	r3, #1
 3724 00c8 02E0     		b	.L273
 3725              	.LVL436:
 3726              	.L286:
1405:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3727              		.loc 1 1405 27 view .LVU1212
 3728 00ca 0023     		movs	r3, #0
 3729 00cc 00E0     		b	.L273
 3730              	.LVL437:
 3731              	.L290:
1410:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3732              		.loc 1 1410 27 view .LVU1213
 3733 00ce 0023     		movs	r3, #0
 3734              	.LVL438:
 3735              	.L273:
1427:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3736              		.loc 1 1427 1 view .LVU1214
 3737 00d0 1846     		mov	r0, r3
 3738 00d2 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
1427:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3739              		.loc 1 1427 1 view .LVU1215
 3740              		.cfi_endproc
 3741              	.LFE161:
 3743              		.section	.text.remove_chain,"ax",%progbits
 3744              		.align	1
 3745              		.syntax unified
 3746              		.thumb
 3747              		.thumb_func
 3748              		.fpu fpv5-d16
 3750              	remove_chain:
 3751              	.LVL439:
ARM GAS  /tmp/ccWTW02a.s 			page 186


 3752              	.LFB160:
1276:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 3753              		.loc 1 1276 1 is_stmt 1 view -0
 3754              		.cfi_startproc
 3755              		@ args = 0, pretend = 0, frame = 0
 3756              		@ frame_needed = 0, uses_anonymous_args = 0
1276:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 3757              		.loc 1 1276 1 is_stmt 0 view .LVU1217
 3758 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3759              	.LCFI30:
 3760              		.cfi_def_cfa_offset 24
 3761              		.cfi_offset 3, -24
 3762              		.cfi_offset 4, -20
 3763              		.cfi_offset 5, -16
 3764              		.cfi_offset 6, -12
 3765              		.cfi_offset 7, -8
 3766              		.cfi_offset 14, -4
 3767 0002 0C46     		mov	r4, r1
1277:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD nxt;
 3768              		.loc 1 1277 2 is_stmt 1 view .LVU1218
 3769              	.LVL440:
1278:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = obj->fs;
 3770              		.loc 1 1278 2 view .LVU1219
1279:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT || _USE_TRIM
 3771              		.loc 1 1279 2 view .LVU1220
1279:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT || _USE_TRIM
 3772              		.loc 1 1279 9 is_stmt 0 view .LVU1221
 3773 0004 0568     		ldr	r5, [r0]
 3774              	.LVL441:
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3775              		.loc 1 1287 2 is_stmt 1 view .LVU1222
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3776              		.loc 1 1287 5 is_stmt 0 view .LVU1223
 3777 0006 0129     		cmp	r1, #1
 3778 0008 2ED9     		bls	.L298
 3779 000a 0646     		mov	r6, r0
 3780 000c 1146     		mov	r1, r2
 3781              	.LVL442:
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3782              		.loc 1 1287 28 discriminator 2 view .LVU1224
 3783 000e 6B69     		ldr	r3, [r5, #20]
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3784              		.loc 1 1287 15 discriminator 2 view .LVU1225
 3785 0010 A342     		cmp	r3, r4
 3786 0012 2BD9     		bls	.L299
1290:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = put_fat(fs, pclst, 0xFFFFFFFF);
 3787              		.loc 1 1290 2 is_stmt 1 view .LVU1226
1290:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = put_fat(fs, pclst, 0xFFFFFFFF);
 3788              		.loc 1 1290 5 is_stmt 0 view .LVU1227
 3789 0014 4AB1     		cbz	r2, .L297
1291:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
 3790              		.loc 1 1291 3 is_stmt 1 view .LVU1228
1291:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
 3791              		.loc 1 1291 9 is_stmt 0 view .LVU1229
 3792 0016 4FF0FF32 		mov	r2, #-1
 3793              	.LVL443:
1291:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
ARM GAS  /tmp/ccWTW02a.s 			page 187


 3794              		.loc 1 1291 9 view .LVU1230
 3795 001a 2846     		mov	r0, r5
 3796              	.LVL444:
1291:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
 3797              		.loc 1 1291 9 view .LVU1231
 3798 001c FFF7FEFF 		bl	put_fat
 3799              	.LVL445:
1292:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3800              		.loc 1 1292 3 is_stmt 1 view .LVU1232
1292:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3801              		.loc 1 1292 6 is_stmt 0 view .LVU1233
 3802 0020 0746     		mov	r7, r0
 3803 0022 10B1     		cbz	r0, .L297
 3804 0024 23E0     		b	.L294
 3805              	.LVL446:
 3806              	.L296:
1327:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (clst < fs->n_fatent);	/* Repeat while not the last link */
 3807              		.loc 1 1327 3 is_stmt 1 view .LVU1234
1328:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3808              		.loc 1 1328 10 view .LVU1235
1328:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3809              		.loc 1 1328 2 is_stmt 0 view .LVU1236
 3810 0026 A242     		cmp	r2, r4
 3811 0028 21D9     		bls	.L294
 3812              	.LVL447:
 3813              	.L297:
1296:Middlewares/Third_Party/FatFs/src/ff.c **** 		nxt = get_fat(obj, clst);			/* Get cluster status */
 3814              		.loc 1 1296 2 is_stmt 1 view .LVU1237
1297:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 0) break;				/* Empty cluster? */
 3815              		.loc 1 1297 3 view .LVU1238
 3816 002a 2746     		mov	r7, r4
1297:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 0) break;				/* Empty cluster? */
 3817              		.loc 1 1297 9 is_stmt 0 view .LVU1239
 3818 002c 2146     		mov	r1, r4
 3819 002e 3046     		mov	r0, r6
 3820 0030 FFF7FEFF 		bl	get_fat
 3821              	.LVL448:
1298:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 1) return FR_INT_ERR;	/* Internal error? */
 3822              		.loc 1 1298 3 is_stmt 1 view .LVU1240
1298:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 1) return FR_INT_ERR;	/* Internal error? */
 3823              		.loc 1 1298 6 is_stmt 0 view .LVU1241
 3824 0034 0446     		mov	r4, r0
 3825              	.LVL449:
1298:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 1) return FR_INT_ERR;	/* Internal error? */
 3826              		.loc 1 1298 6 view .LVU1242
 3827 0036 E0B1     		cbz	r0, .L300
1299:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error? */
 3828              		.loc 1 1299 3 is_stmt 1 view .LVU1243
1299:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error? */
 3829              		.loc 1 1299 6 is_stmt 0 view .LVU1244
 3830 0038 0128     		cmp	r0, #1
 3831 003a 1CD0     		beq	.L301
1300:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 3832              		.loc 1 1300 3 is_stmt 1 view .LVU1245
1300:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 3833              		.loc 1 1300 6 is_stmt 0 view .LVU1246
 3834 003c B0F1FF3F 		cmp	r0, #-1
ARM GAS  /tmp/ccWTW02a.s 			page 188


 3835 0040 1BD0     		beq	.L302
1301:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, 0);		/* Mark the cluster 'free' on the FAT */
 3836              		.loc 1 1301 3 is_stmt 1 view .LVU1247
1302:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
 3837              		.loc 1 1302 4 view .LVU1248
1302:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
 3838              		.loc 1 1302 10 is_stmt 0 view .LVU1249
 3839 0042 0022     		movs	r2, #0
 3840 0044 3946     		mov	r1, r7
 3841 0046 2846     		mov	r0, r5
 3842              	.LVL450:
1302:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
 3843              		.loc 1 1302 10 view .LVU1250
 3844 0048 FFF7FEFF 		bl	put_fat
 3845              	.LVL451:
1303:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3846              		.loc 1 1303 4 is_stmt 1 view .LVU1251
1303:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3847              		.loc 1 1303 7 is_stmt 0 view .LVU1252
 3848 004c 0746     		mov	r7, r0
 3849              	.LVL452:
1303:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3850              		.loc 1 1303 7 view .LVU1253
 3851 004e 70B9     		cbnz	r0, .L294
1305:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clst++;
 3852              		.loc 1 1305 3 is_stmt 1 view .LVU1254
1305:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clst++;
 3853              		.loc 1 1305 9 is_stmt 0 view .LVU1255
 3854 0050 2B69     		ldr	r3, [r5, #16]
1305:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clst++;
 3855              		.loc 1 1305 25 view .LVU1256
 3856 0052 6A69     		ldr	r2, [r5, #20]
1305:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clst++;
 3857              		.loc 1 1305 36 view .LVU1257
 3858 0054 911E     		subs	r1, r2, #2
1305:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clst++;
 3859              		.loc 1 1305 6 view .LVU1258
 3860 0056 8B42     		cmp	r3, r1
 3861 0058 E5D2     		bcs	.L296
1306:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;
 3862              		.loc 1 1306 4 is_stmt 1 view .LVU1259
1306:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;
 3863              		.loc 1 1306 17 is_stmt 0 view .LVU1260
 3864 005a 0133     		adds	r3, r3, #1
 3865 005c 2B61     		str	r3, [r5, #16]
1307:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3866              		.loc 1 1307 4 is_stmt 1 view .LVU1261
1307:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3867              		.loc 1 1307 17 is_stmt 0 view .LVU1262
 3868 005e 2B79     		ldrb	r3, [r5, #4]	@ zero_extendqisi2
 3869 0060 43F00103 		orr	r3, r3, #1
 3870 0064 2B71     		strb	r3, [r5, #4]
 3871 0066 DEE7     		b	.L296
 3872              	.LVL453:
 3873              	.L298:
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3874              		.loc 1 1287 47 view .LVU1263
ARM GAS  /tmp/ccWTW02a.s 			page 189


 3875 0068 0227     		movs	r7, #2
 3876 006a 00E0     		b	.L294
 3877              	.LVL454:
 3878              	.L299:
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3879              		.loc 1 1287 47 view .LVU1264
 3880 006c 0227     		movs	r7, #2
 3881              	.LVL455:
 3882              	.L294:
1342:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3883              		.loc 1 1342 1 view .LVU1265
 3884 006e 3846     		mov	r0, r7
 3885 0070 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3886              	.LVL456:
 3887              	.L300:
1341:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3888              		.loc 1 1341 9 view .LVU1266
 3889 0072 0027     		movs	r7, #0
 3890              	.LVL457:
1341:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3891              		.loc 1 1341 9 view .LVU1267
 3892 0074 FBE7     		b	.L294
 3893              	.LVL458:
 3894              	.L301:
1299:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error? */
 3895              		.loc 1 1299 24 view .LVU1268
 3896 0076 0227     		movs	r7, #2
 3897              	.LVL459:
1299:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error? */
 3898              		.loc 1 1299 24 view .LVU1269
 3899 0078 F9E7     		b	.L294
 3900              	.LVL460:
 3901              	.L302:
1300:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 3902              		.loc 1 1300 33 view .LVU1270
 3903 007a 0127     		movs	r7, #1
 3904              	.LVL461:
1300:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 3905              		.loc 1 1300 33 view .LVU1271
 3906 007c F7E7     		b	.L294
 3907              		.cfi_endproc
 3908              	.LFE160:
 3910              		.section	.text.dir_remove,"ax",%progbits
 3911              		.align	1
 3912              		.syntax unified
 3913              		.thumb
 3914              		.thumb_func
 3915              		.fpu fpv5-d16
 3917              	dir_remove:
 3918              	.LVL462:
 3919              	.LFB171:
2399:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 3920              		.loc 1 2399 1 is_stmt 1 view -0
 3921              		.cfi_startproc
 3922              		@ args = 0, pretend = 0, frame = 0
 3923              		@ frame_needed = 0, uses_anonymous_args = 0
2399:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
ARM GAS  /tmp/ccWTW02a.s 			page 190


 3924              		.loc 1 2399 1 is_stmt 0 view .LVU1273
 3925 0000 38B5     		push	{r3, r4, r5, lr}
 3926              	.LCFI31:
 3927              		.cfi_def_cfa_offset 16
 3928              		.cfi_offset 3, -16
 3929              		.cfi_offset 4, -12
 3930              		.cfi_offset 5, -8
 3931              		.cfi_offset 14, -4
 3932 0002 0446     		mov	r4, r0
2400:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
 3933              		.loc 1 2400 2 is_stmt 1 view .LVU1274
2401:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 3934              		.loc 1 2401 2 view .LVU1275
2401:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 3935              		.loc 1 2401 9 is_stmt 0 view .LVU1276
 3936 0004 0568     		ldr	r5, [r0]
 3937              	.LVL463:
2424:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 3938              		.loc 1 2424 2 is_stmt 1 view .LVU1277
2424:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 3939              		.loc 1 2424 8 is_stmt 0 view .LVU1278
 3940 0006 C169     		ldr	r1, [r0, #28]
 3941 0008 2846     		mov	r0, r5
 3942              	.LVL464:
2424:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 3943              		.loc 1 2424 8 view .LVU1279
 3944 000a FFF7FEFF 		bl	move_window
 3945              	.LVL465:
2425:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->dir[DIR_Name] = DDEM;
 3946              		.loc 1 2425 2 is_stmt 1 view .LVU1280
2425:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->dir[DIR_Name] = DDEM;
 3947              		.loc 1 2425 5 is_stmt 0 view .LVU1281
 3948 000e 20B9     		cbnz	r0, .L305
2426:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->wflag = 1;
 3949              		.loc 1 2426 3 is_stmt 1 view .LVU1282
2426:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->wflag = 1;
 3950              		.loc 1 2426 5 is_stmt 0 view .LVU1283
 3951 0010 236A     		ldr	r3, [r4, #32]
2426:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->wflag = 1;
 3952              		.loc 1 2426 21 view .LVU1284
 3953 0012 E522     		movs	r2, #229
 3954 0014 1A70     		strb	r2, [r3]
2427:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3955              		.loc 1 2427 3 is_stmt 1 view .LVU1285
2427:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3956              		.loc 1 2427 13 is_stmt 0 view .LVU1286
 3957 0016 0123     		movs	r3, #1
 3958 0018 EB70     		strb	r3, [r5, #3]
 3959              	.L305:
2431:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3960              		.loc 1 2431 2 is_stmt 1 view .LVU1287
2432:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3961              		.loc 1 2432 1 is_stmt 0 view .LVU1288
 3962 001a 38BD     		pop	{r3, r4, r5, pc}
2432:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3963              		.loc 1 2432 1 view .LVU1289
 3964              		.cfi_endproc
ARM GAS  /tmp/ccWTW02a.s 			page 191


 3965              	.LFE171:
 3967              		.section	.text.dir_next,"ax",%progbits
 3968              		.align	1
 3969              		.syntax unified
 3970              		.thumb
 3971              		.thumb_func
 3972              		.fpu fpv5-d16
 3974              	dir_next:
 3975              	.LVL466:
 3976              	.LFB164:
1523:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ofs, clst;
 3977              		.loc 1 1523 1 is_stmt 1 view -0
 3978              		.cfi_startproc
 3979              		@ args = 0, pretend = 0, frame = 0
 3980              		@ frame_needed = 0, uses_anonymous_args = 0
1523:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ofs, clst;
 3981              		.loc 1 1523 1 is_stmt 0 view .LVU1291
 3982 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 3983              	.LCFI32:
 3984              		.cfi_def_cfa_offset 32
 3985              		.cfi_offset 4, -32
 3986              		.cfi_offset 5, -28
 3987              		.cfi_offset 6, -24
 3988              		.cfi_offset 7, -20
 3989              		.cfi_offset 8, -16
 3990              		.cfi_offset 9, -12
 3991              		.cfi_offset 10, -8
 3992              		.cfi_offset 14, -4
1524:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
 3993              		.loc 1 1524 2 is_stmt 1 view .LVU1292
1525:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 3994              		.loc 1 1525 2 view .LVU1293
1525:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 3995              		.loc 1 1525 9 is_stmt 0 view .LVU1294
 3996 0004 0668     		ldr	r6, [r0]
 3997              	.LVL467:
1527:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 3998              		.loc 1 1527 2 is_stmt 1 view .LVU1295
1530:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp->sect || ofs >= (DWORD)((_FS_EXFAT && fs->fs_type == FS_EXFAT) ? MAX_DIR_EX : MAX_DIR)) re
 3999              		.loc 1 1530 2 view .LVU1296
1530:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp->sect || ofs >= (DWORD)((_FS_EXFAT && fs->fs_type == FS_EXFAT) ? MAX_DIR_EX : MAX_DIR)) re
 4000              		.loc 1 1530 10 is_stmt 0 view .LVU1297
 4001 0006 4569     		ldr	r5, [r0, #20]
 4002              	.LVL468:
1531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4003              		.loc 1 1531 2 is_stmt 1 view .LVU1298
1531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4004              		.loc 1 1531 9 is_stmt 0 view .LVU1299
 4005 0008 C369     		ldr	r3, [r0, #28]
1531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4006              		.loc 1 1531 5 view .LVU1300
 4007 000a 002B     		cmp	r3, #0
 4008 000c 6CD0     		beq	.L315
 4009 000e 0446     		mov	r4, r0
 4010 0010 8846     		mov	r8, r1
 4011 0012 2035     		adds	r5, r5, #32
 4012              	.LVL469:
ARM GAS  /tmp/ccWTW02a.s 			page 192


1531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4013              		.loc 1 1531 16 discriminator 2 view .LVU1301
 4014 0014 B5F5001F 		cmp	r5, #2097152
 4015 0018 68D2     		bcs	.L316
1533:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect++;				/* Next sector */
 4016              		.loc 1 1533 2 is_stmt 1 view .LVU1302
1533:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect++;				/* Next sector */
 4017              		.loc 1 1533 10 is_stmt 0 view .LVU1303
 4018 001a C5F30807 		ubfx	r7, r5, #0, #9
1533:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect++;				/* Next sector */
 4019              		.loc 1 1533 5 view .LVU1304
 4020 001e 3FB9     		cbnz	r7, .L309
1534:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4021              		.loc 1 1534 3 is_stmt 1 view .LVU1305
1534:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4022              		.loc 1 1534 11 is_stmt 0 view .LVU1306
 4023 0020 0133     		adds	r3, r3, #1
 4024 0022 C361     		str	r3, [r0, #28]
1536:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs / SZDIRE >= fs->n_rootdir) {	/* Report EOT if it reached end of static table */
 4025              		.loc 1 1536 3 is_stmt 1 view .LVU1307
1536:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs / SZDIRE >= fs->n_rootdir) {	/* Report EOT if it reached end of static table */
 4026              		.loc 1 1536 10 is_stmt 0 view .LVU1308
 4027 0024 8169     		ldr	r1, [r0, #24]
 4028              	.LVL470:
1536:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs / SZDIRE >= fs->n_rootdir) {	/* Report EOT if it reached end of static table */
 4029              		.loc 1 1536 6 view .LVU1309
 4030 0026 79B9     		cbnz	r1, .L310
1537:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = 0; return FR_NO_FILE;
 4031              		.loc 1 1537 4 is_stmt 1 view .LVU1310
1537:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = 0; return FR_NO_FILE;
 4032              		.loc 1 1537 26 is_stmt 0 view .LVU1311
 4033 0028 3389     		ldrh	r3, [r6, #8]
1537:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = 0; return FR_NO_FILE;
 4034              		.loc 1 1537 7 view .LVU1312
 4035 002a B3EB551F 		cmp	r3, r5, lsr #5
 4036 002e 07D9     		bls	.L325
 4037              	.LVL471:
 4038              	.L309:
1574:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = fs->win + ofs % SS(fs);	/* Pointer to the entry in the win[] */
 4039              		.loc 1 1574 2 is_stmt 1 view .LVU1313
1574:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = fs->win + ofs % SS(fs);	/* Pointer to the entry in the win[] */
 4040              		.loc 1 1574 11 is_stmt 0 view .LVU1314
 4041 0030 6561     		str	r5, [r4, #20]
1575:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4042              		.loc 1 1575 2 is_stmt 1 view .LVU1315
1575:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4043              		.loc 1 1575 12 is_stmt 0 view .LVU1316
 4044 0032 06F13003 		add	r3, r6, #48
1575:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4045              		.loc 1 1575 20 view .LVU1317
 4046 0036 3B44     		add	r3, r3, r7
1575:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4047              		.loc 1 1575 10 view .LVU1318
 4048 0038 2362     		str	r3, [r4, #32]
1577:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4049              		.loc 1 1577 2 is_stmt 1 view .LVU1319
1577:Middlewares/Third_Party/FatFs/src/ff.c **** }
ARM GAS  /tmp/ccWTW02a.s 			page 193


 4050              		.loc 1 1577 9 is_stmt 0 view .LVU1320
 4051 003a 0020     		movs	r0, #0
 4052              	.LVL472:
 4053              	.L308:
1578:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4054              		.loc 1 1578 1 view .LVU1321
 4055 003c BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 4056              	.LVL473:
 4057              	.L325:
1538:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4058              		.loc 1 1538 5 is_stmt 1 view .LVU1322
1538:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4059              		.loc 1 1538 14 is_stmt 0 view .LVU1323
 4060 0040 0023     		movs	r3, #0
 4061 0042 C361     		str	r3, [r0, #28]
1538:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4062              		.loc 1 1538 19 is_stmt 1 view .LVU1324
1538:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4063              		.loc 1 1538 26 is_stmt 0 view .LVU1325
 4064 0044 0420     		movs	r0, #4
 4065              	.LVL474:
1538:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4066              		.loc 1 1538 26 view .LVU1326
 4067 0046 F9E7     		b	.L308
 4068              	.LVL475:
 4069              	.L310:
1542:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);			/* Get next cluster */
 4070              		.loc 1 1542 4 is_stmt 1 view .LVU1327
1542:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);			/* Get next cluster */
 4071              		.loc 1 1542 27 is_stmt 0 view .LVU1328
 4072 0048 7389     		ldrh	r3, [r6, #10]
1542:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);			/* Get next cluster */
 4073              		.loc 1 1542 35 view .LVU1329
 4074 004a 013B     		subs	r3, r3, #1
1542:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);			/* Get next cluster */
 4075              		.loc 1 1542 7 view .LVU1330
 4076 004c 13EA5529 		ands	r9, r3, r5, lsr #9
 4077 0050 EED1     		bne	.L309
1543:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst <= 1) return FR_INT_ERR;				/* Internal error */
 4078              		.loc 1 1543 5 is_stmt 1 view .LVU1331
1543:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst <= 1) return FR_INT_ERR;				/* Internal error */
 4079              		.loc 1 1543 12 is_stmt 0 view .LVU1332
 4080 0052 FFF7FEFF 		bl	get_fat
 4081              	.LVL476:
1543:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst <= 1) return FR_INT_ERR;				/* Internal error */
 4082              		.loc 1 1543 12 view .LVU1333
 4083 0056 8246     		mov	r10, r0
 4084              	.LVL477:
1544:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;		/* Disk error */
 4085              		.loc 1 1544 5 is_stmt 1 view .LVU1334
1544:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;		/* Disk error */
 4086              		.loc 1 1544 8 is_stmt 0 view .LVU1335
 4087 0058 0128     		cmp	r0, #1
 4088 005a 49D9     		bls	.L317
1545:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst >= fs->n_fatent) {						/* Reached end of dynamic table */
 4089              		.loc 1 1545 5 is_stmt 1 view .LVU1336
1545:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst >= fs->n_fatent) {						/* Reached end of dynamic table */
ARM GAS  /tmp/ccWTW02a.s 			page 194


 4090              		.loc 1 1545 8 is_stmt 0 view .LVU1337
 4091 005c B0F1FF3F 		cmp	r0, #-1
 4092 0060 48D0     		beq	.L318
1546:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 4093              		.loc 1 1546 5 is_stmt 1 view .LVU1338
1546:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 4094              		.loc 1 1546 19 is_stmt 0 view .LVU1339
 4095 0062 7369     		ldr	r3, [r6, #20]
1546:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 4096              		.loc 1 1546 8 view .LVU1340
 4097 0064 8342     		cmp	r3, r0
 4098 0066 37D8     		bhi	.L311
1548:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->sect = 0; return FR_NO_FILE;
 4099              		.loc 1 1548 6 is_stmt 1 view .LVU1341
1548:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->sect = 0; return FR_NO_FILE;
 4100              		.loc 1 1548 9 is_stmt 0 view .LVU1342
 4101 0068 B8F1000F 		cmp	r8, #0
 4102 006c 11D0     		beq	.L326
1551:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
 4103              		.loc 1 1551 6 is_stmt 1 view .LVU1343
1551:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
 4104              		.loc 1 1551 13 is_stmt 0 view .LVU1344
 4105 006e A169     		ldr	r1, [r4, #24]
 4106 0070 2046     		mov	r0, r4
 4107              	.LVL478:
1551:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
 4108              		.loc 1 1551 13 view .LVU1345
 4109 0072 FFF7FEFF 		bl	create_chain
 4110              	.LVL479:
1552:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) return FR_INT_ERR;			/* Internal error */
 4111              		.loc 1 1552 6 is_stmt 1 view .LVU1346
1552:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) return FR_INT_ERR;			/* Internal error */
 4112              		.loc 1 1552 9 is_stmt 0 view .LVU1347
 4113 0076 8246     		mov	r10, r0
 4114 0078 0028     		cmp	r0, #0
 4115 007a 3DD0     		beq	.L319
1553:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 4116              		.loc 1 1553 6 is_stmt 1 view .LVU1348
1553:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 4117              		.loc 1 1553 9 is_stmt 0 view .LVU1349
 4118 007c 0128     		cmp	r0, #1
 4119 007e 3DD0     		beq	.L320
1554:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Clean-up the stretched table */
 4120              		.loc 1 1554 6 is_stmt 1 view .LVU1350
1554:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Clean-up the stretched table */
 4121              		.loc 1 1554 9 is_stmt 0 view .LVU1351
 4122 0080 B0F1FF3F 		cmp	r0, #-1
 4123 0084 3CD0     		beq	.L321
1556:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (sync_window(fs) != FR_OK) return FR_DISK_ERR;	/* Flush disk access window */
 4124              		.loc 1 1556 6 is_stmt 1 view .LVU1352
1557:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(fs->win, 0, SS(fs));				/* Clear window buffer */
 4125              		.loc 1 1557 6 view .LVU1353
1557:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(fs->win, 0, SS(fs));				/* Clear window buffer */
 4126              		.loc 1 1557 10 is_stmt 0 view .LVU1354
 4127 0086 3046     		mov	r0, r6
 4128              	.LVL480:
1557:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(fs->win, 0, SS(fs));				/* Clear window buffer */
ARM GAS  /tmp/ccWTW02a.s 			page 195


 4129              		.loc 1 1557 10 view .LVU1355
 4130 0088 FFF7FEFF 		bl	sync_window
 4131              	.LVL481:
1557:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(fs->win, 0, SS(fs));				/* Clear window buffer */
 4132              		.loc 1 1557 9 view .LVU1356
 4133 008c 28B1     		cbz	r0, .L327
1557:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(fs->win, 0, SS(fs));				/* Clear window buffer */
 4134              		.loc 1 1557 43 view .LVU1357
 4135 008e 0120     		movs	r0, #1
 4136 0090 D4E7     		b	.L308
 4137              	.LVL482:
 4138              	.L326:
1549:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4139              		.loc 1 1549 7 is_stmt 1 view .LVU1358
1549:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4140              		.loc 1 1549 16 is_stmt 0 view .LVU1359
 4141 0092 0023     		movs	r3, #0
 4142 0094 E361     		str	r3, [r4, #28]
1549:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4143              		.loc 1 1549 21 is_stmt 1 view .LVU1360
1549:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4144              		.loc 1 1549 28 is_stmt 0 view .LVU1361
 4145 0096 0420     		movs	r0, #4
 4146              	.LVL483:
1549:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4147              		.loc 1 1549 28 view .LVU1362
 4148 0098 D0E7     		b	.L308
 4149              	.L327:
1558:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (n = 0, fs->winsect = clust2sect(fs, clst); n < fs->csize; n++, fs->winsect++) {	/* Fill t
 4150              		.loc 1 1558 6 is_stmt 1 view .LVU1363
 4151 009a 4FF40072 		mov	r2, #512
 4152 009e 0021     		movs	r1, #0
 4153 00a0 06F13000 		add	r0, r6, #48
 4154 00a4 FFF7FEFF 		bl	mem_set
 4155              	.LVL484:
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 4156              		.loc 1 1559 6 view .LVU1364
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 4157              		.loc 1 1559 32 is_stmt 0 view .LVU1365
 4158 00a8 5146     		mov	r1, r10
 4159 00aa 3046     		mov	r0, r6
 4160 00ac FFF7FEFF 		bl	clust2sect
 4161              	.LVL485:
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 4162              		.loc 1 1559 30 view .LVU1366
 4163 00b0 F062     		str	r0, [r6, #44]
 4164              	.LVL486:
 4165              	.L313:
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 4166              		.loc 1 1559 54 is_stmt 1 discriminator 1 view .LVU1367
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 4167              		.loc 1 1559 60 is_stmt 0 discriminator 1 view .LVU1368
 4168 00b2 7389     		ldrh	r3, [r6, #10]
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 4169              		.loc 1 1559 6 discriminator 1 view .LVU1369
 4170 00b4 9945     		cmp	r9, r3
 4171 00b6 0BD2     		bcs	.L328
ARM GAS  /tmp/ccWTW02a.s 			page 196


1560:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (sync_window(fs) != FR_OK) return FR_DISK_ERR;
 4172              		.loc 1 1560 7 is_stmt 1 view .LVU1370
1560:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (sync_window(fs) != FR_OK) return FR_DISK_ERR;
 4173              		.loc 1 1560 17 is_stmt 0 view .LVU1371
 4174 00b8 0123     		movs	r3, #1
 4175 00ba F370     		strb	r3, [r6, #3]
1561:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4176              		.loc 1 1561 7 is_stmt 1 view .LVU1372
1561:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4177              		.loc 1 1561 11 is_stmt 0 view .LVU1373
 4178 00bc 3046     		mov	r0, r6
 4179 00be FFF7FEFF 		bl	sync_window
 4180              	.LVL487:
1561:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4181              		.loc 1 1561 10 view .LVU1374
 4182 00c2 F8B9     		cbnz	r0, .L323
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 4183              		.loc 1 1559 69 is_stmt 1 discriminator 2 view .LVU1375
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 4184              		.loc 1 1559 70 is_stmt 0 discriminator 2 view .LVU1376
 4185 00c4 09F10109 		add	r9, r9, #1
 4186              	.LVL488:
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 4187              		.loc 1 1559 76 discriminator 2 view .LVU1377
 4188 00c8 F36A     		ldr	r3, [r6, #44]
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 4189              		.loc 1 1559 85 discriminator 2 view .LVU1378
 4190 00ca 0133     		adds	r3, r3, #1
 4191 00cc F362     		str	r3, [r6, #44]
 4192 00ce F0E7     		b	.L313
 4193              	.L328:
1563:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 4194              		.loc 1 1563 6 is_stmt 1 view .LVU1379
1563:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 4195              		.loc 1 1563 18 is_stmt 0 view .LVU1380
 4196 00d0 F36A     		ldr	r3, [r6, #44]
 4197 00d2 A3EB0903 		sub	r3, r3, r9
 4198 00d6 F362     		str	r3, [r6, #44]
 4199              	.LVL489:
 4200              	.L311:
1569:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = clust2sect(fs, clst);
 4201              		.loc 1 1569 5 is_stmt 1 view .LVU1381
1569:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = clust2sect(fs, clst);
 4202              		.loc 1 1569 15 is_stmt 0 view .LVU1382
 4203 00d8 C4F818A0 		str	r10, [r4, #24]
1570:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4204              		.loc 1 1570 5 is_stmt 1 view .LVU1383
1570:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4205              		.loc 1 1570 16 is_stmt 0 view .LVU1384
 4206 00dc 5146     		mov	r1, r10
 4207 00de 3046     		mov	r0, r6
 4208 00e0 FFF7FEFF 		bl	clust2sect
 4209              	.LVL490:
1570:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4210              		.loc 1 1570 14 view .LVU1385
 4211 00e4 E061     		str	r0, [r4, #28]
 4212 00e6 A3E7     		b	.L309
ARM GAS  /tmp/ccWTW02a.s 			page 197


 4213              	.LVL491:
 4214              	.L315:
1531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4215              		.loc 1 1531 105 view .LVU1386
 4216 00e8 0420     		movs	r0, #4
 4217              	.LVL492:
1531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4218              		.loc 1 1531 105 view .LVU1387
 4219 00ea A7E7     		b	.L308
 4220              	.LVL493:
 4221              	.L316:
1531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4222              		.loc 1 1531 105 view .LVU1388
 4223 00ec 0420     		movs	r0, #4
 4224              	.LVL494:
1531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4225              		.loc 1 1531 105 view .LVU1389
 4226 00ee A5E7     		b	.L308
 4227              	.LVL495:
 4228              	.L317:
1544:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;		/* Disk error */
 4229              		.loc 1 1544 27 view .LVU1390
 4230 00f0 0220     		movs	r0, #2
 4231              	.LVL496:
1544:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;		/* Disk error */
 4232              		.loc 1 1544 27 view .LVU1391
 4233 00f2 A3E7     		b	.L308
 4234              	.LVL497:
 4235              	.L318:
1545:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst >= fs->n_fatent) {						/* Reached end of dynamic table */
 4236              		.loc 1 1545 36 view .LVU1392
 4237 00f4 0120     		movs	r0, #1
 4238              	.LVL498:
1545:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst >= fs->n_fatent) {						/* Reached end of dynamic table */
 4239              		.loc 1 1545 36 view .LVU1393
 4240 00f6 A1E7     		b	.L308
 4241              	.LVL499:
 4242              	.L319:
1552:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) return FR_INT_ERR;			/* Internal error */
 4243              		.loc 1 1552 28 view .LVU1394
 4244 00f8 0720     		movs	r0, #7
 4245              	.LVL500:
1552:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) return FR_INT_ERR;			/* Internal error */
 4246              		.loc 1 1552 28 view .LVU1395
 4247 00fa 9FE7     		b	.L308
 4248              	.LVL501:
 4249              	.L320:
1553:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 4250              		.loc 1 1553 28 view .LVU1396
 4251 00fc 0220     		movs	r0, #2
 4252              	.LVL502:
1553:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 4253              		.loc 1 1553 28 view .LVU1397
 4254 00fe 9DE7     		b	.L308
 4255              	.LVL503:
 4256              	.L321:
1554:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Clean-up the stretched table */
ARM GAS  /tmp/ccWTW02a.s 			page 198


 4257              		.loc 1 1554 37 view .LVU1398
 4258 0100 0120     		movs	r0, #1
 4259              	.LVL504:
1554:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Clean-up the stretched table */
 4260              		.loc 1 1554 37 view .LVU1399
 4261 0102 9BE7     		b	.L308
 4262              	.LVL505:
 4263              	.L323:
1561:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4264              		.loc 1 1561 44 view .LVU1400
 4265 0104 0120     		movs	r0, #1
 4266 0106 99E7     		b	.L308
 4267              		.cfi_endproc
 4268              	.LFE164:
 4270              		.section	.text.dir_find,"ax",%progbits
 4271              		.align	1
 4272              		.syntax unified
 4273              		.thumb
 4274              		.thumb_func
 4275              		.fpu fpv5-d16
 4277              	dir_find:
 4278              	.LVL506:
 4279              	.LFB169:
2213:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4280              		.loc 1 2213 1 is_stmt 1 view -0
 4281              		.cfi_startproc
 4282              		@ args = 0, pretend = 0, frame = 0
 4283              		@ frame_needed = 0, uses_anonymous_args = 0
2213:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4284              		.loc 1 2213 1 is_stmt 0 view .LVU1402
 4285 0000 70B5     		push	{r4, r5, r6, lr}
 4286              	.LCFI33:
 4287              		.cfi_def_cfa_offset 16
 4288              		.cfi_offset 4, -16
 4289              		.cfi_offset 5, -12
 4290              		.cfi_offset 6, -8
 4291              		.cfi_offset 14, -4
 4292 0002 0446     		mov	r4, r0
2214:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
 4293              		.loc 1 2214 2 is_stmt 1 view .LVU1403
2215:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE c;
 4294              		.loc 1 2215 2 view .LVU1404
2215:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE c;
 4295              		.loc 1 2215 9 is_stmt 0 view .LVU1405
 4296 0004 0668     		ldr	r6, [r0]
 4297              	.LVL507:
2216:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
 4298              		.loc 1 2216 2 is_stmt 1 view .LVU1406
2221:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) return res;
 4299              		.loc 1 2221 2 view .LVU1407
2221:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) return res;
 4300              		.loc 1 2221 8 is_stmt 0 view .LVU1408
 4301 0006 0021     		movs	r1, #0
 4302 0008 FFF7FEFF 		bl	dir_sdi
 4303              	.LVL508:
2222:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 4304              		.loc 1 2222 2 is_stmt 1 view .LVU1409
ARM GAS  /tmp/ccWTW02a.s 			page 199


2222:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 4305              		.loc 1 2222 5 is_stmt 0 view .LVU1410
 4306 000c 0546     		mov	r5, r0
 4307 000e 40B1     		cbz	r0, .L332
 4308              	.LVL509:
 4309              	.L330:
2281:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4310              		.loc 1 2281 1 view .LVU1411
 4311 0010 2846     		mov	r0, r5
 4312 0012 70BD     		pop	{r4, r5, r6, pc}
 4313              	.LVL510:
 4314              	.L331:
2277:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (res == FR_OK);
 4315              		.loc 1 2277 3 is_stmt 1 view .LVU1412
2277:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (res == FR_OK);
 4316              		.loc 1 2277 9 is_stmt 0 view .LVU1413
 4317 0014 0021     		movs	r1, #0
 4318 0016 2046     		mov	r0, r4
 4319 0018 FFF7FEFF 		bl	dir_next
 4320              	.LVL511:
2278:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4321              		.loc 1 2278 10 is_stmt 1 view .LVU1414
2278:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4322              		.loc 1 2278 2 is_stmt 0 view .LVU1415
 4323 001c 0546     		mov	r5, r0
 4324 001e 0028     		cmp	r0, #0
 4325 0020 F6D1     		bne	.L330
 4326              	.L332:
2247:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
 4327              		.loc 1 2247 2 is_stmt 1 view .LVU1416
2248:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 4328              		.loc 1 2248 3 view .LVU1417
2248:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 4329              		.loc 1 2248 9 is_stmt 0 view .LVU1418
 4330 0022 E169     		ldr	r1, [r4, #28]
 4331 0024 3046     		mov	r0, r6
 4332              	.LVL512:
2248:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 4333              		.loc 1 2248 9 view .LVU1419
 4334 0026 FFF7FEFF 		bl	move_window
 4335              	.LVL513:
2249:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dp->dir[DIR_Name];
 4336              		.loc 1 2249 3 is_stmt 1 view .LVU1420
2249:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dp->dir[DIR_Name];
 4337              		.loc 1 2249 6 is_stmt 0 view .LVU1421
 4338 002a 0546     		mov	r5, r0
 4339 002c 0028     		cmp	r0, #0
 4340 002e EFD1     		bne	.L330
2250:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 4341              		.loc 1 2250 3 is_stmt 1 view .LVU1422
2250:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 4342              		.loc 1 2250 9 is_stmt 0 view .LVU1423
 4343 0030 206A     		ldr	r0, [r4, #32]
 4344              	.LVL514:
2250:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 4345              		.loc 1 2250 5 view .LVU1424
 4346 0032 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
ARM GAS  /tmp/ccWTW02a.s 			page 200


 4347              	.LVL515:
2251:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 4348              		.loc 1 2251 3 is_stmt 1 view .LVU1425
2251:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 4349              		.loc 1 2251 6 is_stmt 0 view .LVU1426
 4350 0034 7BB1     		cbz	r3, .L333
2274:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(dp->dir[DIR_Attr] & AM_VOL) && !mem_cmp(dp->dir, dp->fn, 11)) break;	/* Is it a valid entry
 4351              		.loc 1 2274 3 is_stmt 1 view .LVU1427
2274:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(dp->dir[DIR_Attr] & AM_VOL) && !mem_cmp(dp->dir, dp->fn, 11)) break;	/* Is it a valid entry
 4352              		.loc 1 2274 25 is_stmt 0 view .LVU1428
 4353 0036 C37A     		ldrb	r3, [r0, #11]	@ zero_extendqisi2
 4354              	.LVL516:
2274:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(dp->dir[DIR_Attr] & AM_VOL) && !mem_cmp(dp->dir, dp->fn, 11)) break;	/* Is it a valid entry
 4355              		.loc 1 2274 36 view .LVU1429
 4356 0038 03F03F03 		and	r3, r3, #63
2274:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(dp->dir[DIR_Attr] & AM_VOL) && !mem_cmp(dp->dir, dp->fn, 11)) break;	/* Is it a valid entry
 4357              		.loc 1 2274 16 view .LVU1430
 4358 003c A371     		strb	r3, [r4, #6]
 4359              	.LVL517:
2275:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4360              		.loc 1 2275 3 is_stmt 1 view .LVU1431
2275:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4361              		.loc 1 2275 16 is_stmt 0 view .LVU1432
 4362 003e C37A     		ldrb	r3, [r0, #11]	@ zero_extendqisi2
2275:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4363              		.loc 1 2275 6 view .LVU1433
 4364 0040 13F0080F 		tst	r3, #8
 4365 0044 E6D1     		bne	.L331
2275:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4366              		.loc 1 2275 41 discriminator 1 view .LVU1434
 4367 0046 0B22     		movs	r2, #11
 4368 0048 04F12401 		add	r1, r4, #36
 4369 004c FFF7FEFF 		bl	mem_cmp
 4370              	.LVL518:
2275:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4371              		.loc 1 2275 37 discriminator 1 view .LVU1435
 4372 0050 0028     		cmp	r0, #0
 4373 0052 DFD1     		bne	.L331
 4374 0054 DCE7     		b	.L330
 4375              	.LVL519:
 4376              	.L333:
2251:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 4377              		.loc 1 2251 21 view .LVU1436
 4378 0056 0425     		movs	r5, #4
 4379 0058 DAE7     		b	.L330
 4380              		.cfi_endproc
 4381              	.LFE169:
 4383              		.section	.text.follow_path,"ax",%progbits
 4384              		.align	1
 4385              		.syntax unified
 4386              		.thumb
 4387              		.thumb_func
 4388              		.fpu fpv5-d16
 4390              	follow_path:
 4391              	.LVL520:
 4392              	.LFB174:
2817:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
ARM GAS  /tmp/ccWTW02a.s 			page 201


 4393              		.loc 1 2817 1 is_stmt 1 view -0
 4394              		.cfi_startproc
 4395              		@ args = 0, pretend = 0, frame = 8
 4396              		@ frame_needed = 0, uses_anonymous_args = 0
2817:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4397              		.loc 1 2817 1 is_stmt 0 view .LVU1438
 4398 0000 30B5     		push	{r4, r5, lr}
 4399              	.LCFI34:
 4400              		.cfi_def_cfa_offset 12
 4401              		.cfi_offset 4, -12
 4402              		.cfi_offset 5, -8
 4403              		.cfi_offset 14, -4
 4404 0002 83B0     		sub	sp, sp, #12
 4405              	.LCFI35:
 4406              		.cfi_def_cfa_offset 24
 4407 0004 0446     		mov	r4, r0
 4408 0006 0191     		str	r1, [sp, #4]
2818:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE ns;
 4409              		.loc 1 2818 2 is_stmt 1 view .LVU1439
2819:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID *obj = &dp->obj;
 4410              		.loc 1 2819 2 view .LVU1440
2820:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = obj->fs;
 4411              		.loc 1 2820 2 view .LVU1441
 4412              	.LVL521:
2821:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4413              		.loc 1 2821 2 view .LVU1442
2821:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4414              		.loc 1 2821 9 is_stmt 0 view .LVU1443
 4415 0008 0568     		ldr	r5, [r0]
 4416              	.LVL522:
2830:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->sclust = 0;					/* Start from root directory */
 4417              		.loc 1 2830 3 is_stmt 1 view .LVU1444
 4418              	.L336:
2830:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->sclust = 0;					/* Start from root directory */
 4419              		.loc 1 2830 9 discriminator 1 view .LVU1445
2830:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->sclust = 0;					/* Start from root directory */
 4420              		.loc 1 2830 10 is_stmt 0 discriminator 1 view .LVU1446
 4421 000a 019B     		ldr	r3, [sp, #4]
 4422 000c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
2830:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->sclust = 0;					/* Start from root directory */
 4423              		.loc 1 2830 9 discriminator 1 view .LVU1447
 4424 000e 5C2A     		cmp	r2, #92
 4425 0010 18BF     		it	ne
 4426 0012 2F2A     		cmpne	r2, #47
 4427 0014 02D1     		bne	.L344
2830:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->sclust = 0;					/* Start from root directory */
 4428              		.loc 1 2830 41 is_stmt 1 discriminator 2 view .LVU1448
2830:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->sclust = 0;					/* Start from root directory */
 4429              		.loc 1 2830 45 is_stmt 0 discriminator 2 view .LVU1449
 4430 0016 0133     		adds	r3, r3, #1
 4431 0018 0193     		str	r3, [sp, #4]
 4432 001a F6E7     		b	.L336
 4433              	.L344:
2831:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4434              		.loc 1 2831 3 is_stmt 1 view .LVU1450
2831:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4435              		.loc 1 2831 15 is_stmt 0 view .LVU1451
ARM GAS  /tmp/ccWTW02a.s 			page 202


 4436 001c 0022     		movs	r2, #0
 4437 001e A260     		str	r2, [r4, #8]
2850:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[NSFLAG] = NS_NONAME;
 4438              		.loc 1 2850 2 is_stmt 1 view .LVU1452
2850:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[NSFLAG] = NS_NONAME;
 4439              		.loc 1 2850 12 is_stmt 0 view .LVU1453
 4440 0020 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
2850:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[NSFLAG] = NS_NONAME;
 4441              		.loc 1 2850 5 view .LVU1454
 4442 0022 1F2B     		cmp	r3, #31
 4443 0024 1BD8     		bhi	.L338
2851:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(dp, 0);
 4444              		.loc 1 2851 3 is_stmt 1 view .LVU1455
2851:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(dp, 0);
 4445              		.loc 1 2851 18 is_stmt 0 view .LVU1456
 4446 0026 8023     		movs	r3, #128
 4447 0028 84F82F30 		strb	r3, [r4, #47]
2852:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4448              		.loc 1 2852 3 is_stmt 1 view .LVU1457
2852:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4449              		.loc 1 2852 9 is_stmt 0 view .LVU1458
 4450 002c 1146     		mov	r1, r2
 4451              	.LVL523:
2852:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4452              		.loc 1 2852 9 view .LVU1459
 4453 002e 2046     		mov	r0, r4
 4454              	.LVL524:
2852:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4455              		.loc 1 2852 9 view .LVU1460
 4456 0030 FFF7FEFF 		bl	dir_sdi
 4457              	.LVL525:
 4458 0034 0346     		mov	r3, r0
 4459              	.LVL526:
 4460              	.L339:
2893:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4461              		.loc 1 2893 2 is_stmt 1 view .LVU1461
2894:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4462              		.loc 1 2894 1 is_stmt 0 view .LVU1462
 4463 0036 1846     		mov	r0, r3
 4464 0038 03B0     		add	sp, sp, #12
 4465              	.LCFI36:
 4466              		.cfi_remember_state
 4467              		.cfi_def_cfa_offset 12
 4468              		@ sp needed
 4469 003a 30BD     		pop	{r4, r5, pc}
 4470              	.LVL527:
 4471              	.L345:
 4472              	.LCFI37:
 4473              		.cfi_restore_state
2861:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, stay there */
 4474              		.loc 1 2861 5 is_stmt 1 view .LVU1463
2861:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, stay there */
 4475              		.loc 1 2861 8 is_stmt 0 view .LVU1464
 4476 003c 0428     		cmp	r0, #4
 4477 003e FAD1     		bne	.L339
2862:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!(ns & NS_LAST)) continue;	/* Continue to follow if not last segment */
 4478              		.loc 1 2862 6 is_stmt 1 view .LVU1465
ARM GAS  /tmp/ccWTW02a.s 			page 203


2867:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4479              		.loc 1 2867 7 view .LVU1466
2867:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4480              		.loc 1 2867 10 is_stmt 0 view .LVU1467
 4481 0040 12F0040F 		tst	r2, #4
 4482 0044 F7D1     		bne	.L339
2867:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4483              		.loc 1 2867 32 view .LVU1468
 4484 0046 0523     		movs	r3, #5
 4485 0048 F5E7     		b	.L339
 4486              	.L346:
2888:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4487              		.loc 1 2888 5 is_stmt 1 view .LVU1469
2888:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4488              		.loc 1 2888 32 is_stmt 0 view .LVU1470
 4489 004a 05F13001 		add	r1, r5, #48
2888:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4490              		.loc 1 2888 44 view .LVU1471
 4491 004e 6369     		ldr	r3, [r4, #20]
2888:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4492              		.loc 1 2888 51 view .LVU1472
 4493 0050 C3F30803 		ubfx	r3, r3, #0, #9
2888:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4494              		.loc 1 2888 19 view .LVU1473
 4495 0054 1944     		add	r1, r1, r3
 4496 0056 2846     		mov	r0, r5
 4497              	.LVL528:
2888:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4498              		.loc 1 2888 19 view .LVU1474
 4499 0058 FFF7FEFF 		bl	ld_clust
 4500              	.LVL529:
2888:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4501              		.loc 1 2888 17 view .LVU1475
 4502 005c A060     		str	r0, [r4, #8]
2855:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = create_name(dp, &path);	/* Get a segment name of the path */
 4503              		.loc 1 2855 9 is_stmt 1 view .LVU1476
 4504              	.L338:
2855:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = create_name(dp, &path);	/* Get a segment name of the path */
 4505              		.loc 1 2855 3 view .LVU1477
2856:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 4506              		.loc 1 2856 4 view .LVU1478
2856:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 4507              		.loc 1 2856 10 is_stmt 0 view .LVU1479
 4508 005e 01A9     		add	r1, sp, #4
 4509 0060 2046     		mov	r0, r4
 4510 0062 FFF7FEFF 		bl	create_name
 4511              	.LVL530:
2857:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_find(dp);				/* Find an object with the segment name */
 4512              		.loc 1 2857 4 is_stmt 1 view .LVU1480
2857:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_find(dp);				/* Find an object with the segment name */
 4513              		.loc 1 2857 7 is_stmt 0 view .LVU1481
 4514 0066 0346     		mov	r3, r0
 4515 0068 0028     		cmp	r0, #0
 4516 006a E4D1     		bne	.L339
2858:Middlewares/Third_Party/FatFs/src/ff.c **** 			ns = dp->fn[NSFLAG];
 4517              		.loc 1 2858 4 is_stmt 1 view .LVU1482
2858:Middlewares/Third_Party/FatFs/src/ff.c **** 			ns = dp->fn[NSFLAG];
ARM GAS  /tmp/ccWTW02a.s 			page 204


 4518              		.loc 1 2858 10 is_stmt 0 view .LVU1483
 4519 006c 2046     		mov	r0, r4
 4520              	.LVL531:
2858:Middlewares/Third_Party/FatFs/src/ff.c **** 			ns = dp->fn[NSFLAG];
 4521              		.loc 1 2858 10 view .LVU1484
 4522 006e FFF7FEFF 		bl	dir_find
 4523              	.LVL532:
2859:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
 4524              		.loc 1 2859 4 is_stmt 1 view .LVU1485
2859:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
 4525              		.loc 1 2859 7 is_stmt 0 view .LVU1486
 4526 0072 94F82F20 		ldrb	r2, [r4, #47]	@ zero_extendqisi2
 4527              	.LVL533:
2860:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) {	/* Object is not found */
 4528              		.loc 1 2860 4 is_stmt 1 view .LVU1487
2860:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) {	/* Object is not found */
 4529              		.loc 1 2860 7 is_stmt 0 view .LVU1488
 4530 0076 0346     		mov	r3, r0
 4531 0078 0028     		cmp	r0, #0
 4532 007a DFD1     		bne	.L345
2872:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Get into the sub-directory */
 4533              		.loc 1 2872 4 is_stmt 1 view .LVU1489
2872:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Get into the sub-directory */
 4534              		.loc 1 2872 7 is_stmt 0 view .LVU1490
 4535 007c 12F0040F 		tst	r2, #4
 4536 0080 D9D1     		bne	.L339
2874:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NO_PATH; break;
 4537              		.loc 1 2874 4 is_stmt 1 view .LVU1491
2874:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NO_PATH; break;
 4538              		.loc 1 2874 13 is_stmt 0 view .LVU1492
 4539 0082 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
2874:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NO_PATH; break;
 4540              		.loc 1 2874 7 view .LVU1493
 4541 0084 13F0100F 		tst	r3, #16
 4542 0088 DFD1     		bne	.L346
2875:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4543              		.loc 1 2875 9 view .LVU1494
 4544 008a 0523     		movs	r3, #5
 4545 008c D3E7     		b	.L339
 4546              		.cfi_endproc
 4547              	.LFE174:
 4549              		.section	.text.dir_alloc,"ax",%progbits
 4550              		.align	1
 4551              		.syntax unified
 4552              		.thumb
 4553              		.thumb_func
 4554              		.fpu fpv5-d16
 4556              	dir_alloc:
 4557              	.LVL534:
 4558              	.LFB165:
1593:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4559              		.loc 1 1593 1 is_stmt 1 view -0
 4560              		.cfi_startproc
 4561              		@ args = 0, pretend = 0, frame = 0
 4562              		@ frame_needed = 0, uses_anonymous_args = 0
1593:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4563              		.loc 1 1593 1 is_stmt 0 view .LVU1496
ARM GAS  /tmp/ccWTW02a.s 			page 205


 4564 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 4565              	.LCFI38:
 4566              		.cfi_def_cfa_offset 24
 4567              		.cfi_offset 3, -24
 4568              		.cfi_offset 4, -20
 4569              		.cfi_offset 5, -16
 4570              		.cfi_offset 6, -12
 4571              		.cfi_offset 7, -8
 4572              		.cfi_offset 14, -4
 4573 0002 0446     		mov	r4, r0
 4574 0004 0E46     		mov	r6, r1
1594:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n;
 4575              		.loc 1 1594 2 is_stmt 1 view .LVU1497
1595:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
 4576              		.loc 1 1595 2 view .LVU1498
1596:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4577              		.loc 1 1596 2 view .LVU1499
1596:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4578              		.loc 1 1596 9 is_stmt 0 view .LVU1500
 4579 0006 0768     		ldr	r7, [r0]
 4580              	.LVL535:
1599:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 4581              		.loc 1 1599 2 is_stmt 1 view .LVU1501
1599:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 4582              		.loc 1 1599 8 is_stmt 0 view .LVU1502
 4583 0008 0021     		movs	r1, #0
 4584              	.LVL536:
1599:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 4585              		.loc 1 1599 8 view .LVU1503
 4586 000a FFF7FEFF 		bl	dir_sdi
 4587              	.LVL537:
1600:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = 0;
 4588              		.loc 1 1600 2 is_stmt 1 view .LVU1504
1600:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = 0;
 4589              		.loc 1 1600 5 is_stmt 0 view .LVU1505
 4590 000e 0246     		mov	r2, r0
 4591 0010 B8B9     		cbnz	r0, .L348
1601:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 4592              		.loc 1 1601 5 view .LVU1506
 4593 0012 0025     		movs	r5, #0
 4594 0014 06E0     		b	.L350
 4595              	.LVL538:
 4596              	.L352:
1612:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4597              		.loc 1 1612 7 view .LVU1507
 4598 0016 0025     		movs	r5, #0
 4599              	.LVL539:
 4600              	.L349:
1614:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (res == FR_OK);	/* Next entry with table stretch enabled */
 4601              		.loc 1 1614 4 is_stmt 1 view .LVU1508
1614:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (res == FR_OK);	/* Next entry with table stretch enabled */
 4602              		.loc 1 1614 10 is_stmt 0 view .LVU1509
 4603 0018 0121     		movs	r1, #1
 4604 001a 2046     		mov	r0, r4
 4605              	.LVL540:
1614:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (res == FR_OK);	/* Next entry with table stretch enabled */
 4606              		.loc 1 1614 10 view .LVU1510
ARM GAS  /tmp/ccWTW02a.s 			page 206


 4607 001c FFF7FEFF 		bl	dir_next
 4608              	.LVL541:
1615:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4609              		.loc 1 1615 11 is_stmt 1 view .LVU1511
1615:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4610              		.loc 1 1615 3 is_stmt 0 view .LVU1512
 4611 0020 0246     		mov	r2, r0
 4612 0022 70B9     		cbnz	r0, .L348
 4613              	.LVL542:
 4614              	.L350:
1602:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, dp->sect);
 4615              		.loc 1 1602 3 is_stmt 1 view .LVU1513
1603:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 4616              		.loc 1 1603 4 view .LVU1514
1603:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 4617              		.loc 1 1603 10 is_stmt 0 view .LVU1515
 4618 0024 E169     		ldr	r1, [r4, #28]
 4619 0026 3846     		mov	r0, r7
 4620              	.LVL543:
1603:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 4621              		.loc 1 1603 10 view .LVU1516
 4622 0028 FFF7FEFF 		bl	move_window
 4623              	.LVL544:
1604:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 4624              		.loc 1 1604 4 is_stmt 1 view .LVU1517
1604:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 4625              		.loc 1 1604 7 is_stmt 0 view .LVU1518
 4626 002c 0246     		mov	r2, r0
 4627 002e 40B9     		cbnz	r0, .L348
1608:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4628              		.loc 1 1608 4 is_stmt 1 view .LVU1519
1608:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4629              		.loc 1 1608 10 is_stmt 0 view .LVU1520
 4630 0030 236A     		ldr	r3, [r4, #32]
1608:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4631              		.loc 1 1608 15 view .LVU1521
 4632 0032 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1608:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4633              		.loc 1 1608 7 view .LVU1522
 4634 0034 002B     		cmp	r3, #0
 4635 0036 18BF     		it	ne
 4636 0038 E52B     		cmpne	r3, #229
 4637 003a ECD1     		bne	.L352
1610:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 4638              		.loc 1 1610 5 is_stmt 1 view .LVU1523
1610:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 4639              		.loc 1 1610 8 is_stmt 0 view .LVU1524
 4640 003c 0135     		adds	r5, r5, #1
 4641              	.LVL545:
1610:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 4642              		.loc 1 1610 8 view .LVU1525
 4643 003e B542     		cmp	r5, r6
 4644 0040 EAD1     		bne	.L349
 4645              	.LVL546:
 4646              	.L348:
1618:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4647              		.loc 1 1618 2 is_stmt 1 view .LVU1526
ARM GAS  /tmp/ccWTW02a.s 			page 207


1618:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4648              		.loc 1 1618 5 is_stmt 0 view .LVU1527
 4649 0042 042A     		cmp	r2, #4
 4650 0044 01D0     		beq	.L355
 4651              	.LVL547:
 4652              	.L351:
1619:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4653              		.loc 1 1619 2 is_stmt 1 view .LVU1528
1620:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4654              		.loc 1 1620 1 is_stmt 0 view .LVU1529
 4655 0046 1046     		mov	r0, r2
 4656 0048 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 4657              	.LVL548:
 4658              	.L355:
1618:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4659              		.loc 1 1618 29 view .LVU1530
 4660 004a 0722     		movs	r2, #7
 4661              	.LVL549:
1618:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4662              		.loc 1 1618 29 view .LVU1531
 4663 004c FBE7     		b	.L351
 4664              		.cfi_endproc
 4665              	.LFE165:
 4667              		.section	.text.dir_register,"ax",%progbits
 4668              		.align	1
 4669              		.syntax unified
 4670              		.thumb
 4671              		.thumb_func
 4672              		.fpu fpv5-d16
 4674              	dir_register:
 4675              	.LVL550:
 4676              	.LFB170:
2295:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4677              		.loc 1 2295 1 is_stmt 1 view -0
 4678              		.cfi_startproc
 4679              		@ args = 0, pretend = 0, frame = 0
 4680              		@ frame_needed = 0, uses_anonymous_args = 0
2295:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4681              		.loc 1 2295 1 is_stmt 0 view .LVU1533
 4682 0000 70B5     		push	{r4, r5, r6, lr}
 4683              	.LCFI39:
 4684              		.cfi_def_cfa_offset 16
 4685              		.cfi_offset 4, -16
 4686              		.cfi_offset 5, -12
 4687              		.cfi_offset 6, -8
 4688              		.cfi_offset 14, -4
 4689 0002 0446     		mov	r4, r0
2296:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
 4690              		.loc 1 2296 2 is_stmt 1 view .LVU1534
2297:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 4691              		.loc 1 2297 2 view .LVU1535
2297:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 4692              		.loc 1 2297 9 is_stmt 0 view .LVU1536
 4693 0004 0668     		ldr	r6, [r0]
 4694              	.LVL551:
2366:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4695              		.loc 1 2366 2 is_stmt 1 view .LVU1537
ARM GAS  /tmp/ccWTW02a.s 			page 208


2366:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4696              		.loc 1 2366 8 is_stmt 0 view .LVU1538
 4697 0006 0121     		movs	r1, #1
 4698 0008 FFF7FEFF 		bl	dir_alloc
 4699              	.LVL552:
2371:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
 4700              		.loc 1 2371 2 is_stmt 1 view .LVU1539
2371:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
 4701              		.loc 1 2371 5 is_stmt 0 view .LVU1540
 4702 000c 0546     		mov	r5, r0
 4703 000e 08B1     		cbz	r0, .L359
 4704              	.LVL553:
 4705              	.L357:
2383:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4706              		.loc 1 2383 2 is_stmt 1 view .LVU1541
2384:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4707              		.loc 1 2384 1 is_stmt 0 view .LVU1542
 4708 0010 2846     		mov	r0, r5
 4709 0012 70BD     		pop	{r4, r5, r6, pc}
 4710              	.LVL554:
 4711              	.L359:
2372:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
 4712              		.loc 1 2372 3 is_stmt 1 view .LVU1543
2372:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
 4713              		.loc 1 2372 9 is_stmt 0 view .LVU1544
 4714 0014 E169     		ldr	r1, [r4, #28]
 4715 0016 3046     		mov	r0, r6
 4716              	.LVL555:
2372:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
 4717              		.loc 1 2372 9 view .LVU1545
 4718 0018 FFF7FEFF 		bl	move_window
 4719              	.LVL556:
2373:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(dp->dir, 0, SZDIRE);	/* Clean the entry */
 4720              		.loc 1 2373 3 is_stmt 1 view .LVU1546
2373:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(dp->dir, 0, SZDIRE);	/* Clean the entry */
 4721              		.loc 1 2373 6 is_stmt 0 view .LVU1547
 4722 001c 0546     		mov	r5, r0
 4723 001e 0028     		cmp	r0, #0
 4724 0020 F6D1     		bne	.L357
2374:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(dp->dir + DIR_Name, dp->fn, 11);	/* Put SFN */
 4725              		.loc 1 2374 4 is_stmt 1 view .LVU1548
 4726 0022 2022     		movs	r2, #32
 4727 0024 0021     		movs	r1, #0
 4728 0026 206A     		ldr	r0, [r4, #32]
 4729              	.LVL557:
2374:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(dp->dir + DIR_Name, dp->fn, 11);	/* Put SFN */
 4730              		.loc 1 2374 4 is_stmt 0 view .LVU1549
 4731 0028 FFF7FEFF 		bl	mem_set
 4732              	.LVL558:
2375:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
 4733              		.loc 1 2375 4 is_stmt 1 view .LVU1550
 4734 002c 0B22     		movs	r2, #11
 4735 002e 04F12401 		add	r1, r4, #36
 4736 0032 206A     		ldr	r0, [r4, #32]
 4737 0034 FFF7FEFF 		bl	mem_cpy
 4738              	.LVL559:
2379:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
ARM GAS  /tmp/ccWTW02a.s 			page 209


 4739              		.loc 1 2379 4 view .LVU1551
2379:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 4740              		.loc 1 2379 14 is_stmt 0 view .LVU1552
 4741 0038 0123     		movs	r3, #1
 4742 003a F370     		strb	r3, [r6, #3]
 4743 003c E8E7     		b	.L357
 4744              		.cfi_endproc
 4745              	.LFE170:
 4747              		.section	.text.dir_read,"ax",%progbits
 4748              		.align	1
 4749              		.syntax unified
 4750              		.thumb
 4751              		.thumb_func
 4752              		.fpu fpv5-d16
 4754              	dir_read:
 4755              	.LVL560:
 4756              	.LFB168:
2135:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_NO_FILE;
 4757              		.loc 1 2135 1 is_stmt 1 view -0
 4758              		.cfi_startproc
 4759              		@ args = 0, pretend = 0, frame = 0
 4760              		@ frame_needed = 0, uses_anonymous_args = 0
2135:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_NO_FILE;
 4761              		.loc 1 2135 1 is_stmt 0 view .LVU1554
 4762 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 4763              	.LCFI40:
 4764              		.cfi_def_cfa_offset 24
 4765              		.cfi_offset 3, -24
 4766              		.cfi_offset 4, -20
 4767              		.cfi_offset 5, -16
 4768              		.cfi_offset 6, -12
 4769              		.cfi_offset 7, -8
 4770              		.cfi_offset 14, -4
 4771 0002 0446     		mov	r4, r0
 4772 0004 0E46     		mov	r6, r1
2136:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
 4773              		.loc 1 2136 2 is_stmt 1 view .LVU1555
 4774              	.LVL561:
2137:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE a, c;
 4775              		.loc 1 2137 2 view .LVU1556
2137:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE a, c;
 4776              		.loc 1 2137 9 is_stmt 0 view .LVU1557
 4777 0006 0568     		ldr	r5, [r0]
 4778              	.LVL562:
2138:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
 4779              		.loc 1 2138 2 is_stmt 1 view .LVU1558
2143:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
 4780              		.loc 1 2143 2 view .LVU1559
2136:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
 4781              		.loc 1 2136 10 is_stmt 0 view .LVU1560
 4782 0008 0427     		movs	r7, #4
2143:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
 4783              		.loc 1 2143 8 view .LVU1561
 4784 000a 05E0     		b	.L361
 4785              	.LVL563:
 4786              	.L363:
2193:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
ARM GAS  /tmp/ccWTW02a.s 			page 210


 4787              		.loc 1 2193 3 is_stmt 1 view .LVU1562
2193:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 4788              		.loc 1 2193 9 is_stmt 0 view .LVU1563
 4789 000c 0021     		movs	r1, #0
 4790 000e 2046     		mov	r0, r4
 4791              	.LVL564:
2193:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 4792              		.loc 1 2193 9 view .LVU1564
 4793 0010 FFF7FEFF 		bl	dir_next
 4794              	.LVL565:
2194:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4795              		.loc 1 2194 3 is_stmt 1 view .LVU1565
2194:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4796              		.loc 1 2194 6 is_stmt 0 view .LVU1566
 4797 0014 0746     		mov	r7, r0
 4798 0016 E8B9     		cbnz	r0, .L362
 4799              	.LVL566:
 4800              	.L361:
2143:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
 4801              		.loc 1 2143 8 is_stmt 1 view .LVU1567
2143:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
 4802              		.loc 1 2143 11 is_stmt 0 view .LVU1568
 4803 0018 E169     		ldr	r1, [r4, #28]
2143:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
 4804              		.loc 1 2143 8 view .LVU1569
 4805 001a D9B1     		cbz	r1, .L362
2144:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 4806              		.loc 1 2144 3 is_stmt 1 view .LVU1570
2144:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 4807              		.loc 1 2144 9 is_stmt 0 view .LVU1571
 4808 001c 2846     		mov	r0, r5
 4809 001e FFF7FEFF 		bl	move_window
 4810              	.LVL567:
2145:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dp->dir[DIR_Name];	/* Test for the entry type */
 4811              		.loc 1 2145 3 is_stmt 1 view .LVU1572
2145:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dp->dir[DIR_Name];	/* Test for the entry type */
 4812              		.loc 1 2145 6 is_stmt 0 view .LVU1573
 4813 0022 0746     		mov	r7, r0
 4814 0024 B0B9     		cbnz	r0, .L362
2146:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) {
 4815              		.loc 1 2146 3 is_stmt 1 view .LVU1574
2146:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) {
 4816              		.loc 1 2146 9 is_stmt 0 view .LVU1575
 4817 0026 236A     		ldr	r3, [r4, #32]
2146:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) {
 4818              		.loc 1 2146 5 view .LVU1576
 4819 0028 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 4820              	.LVL568:
2147:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_NO_FILE; break; /* Reached to end of the directory */
 4821              		.loc 1 2147 3 is_stmt 1 view .LVU1577
2147:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_NO_FILE; break; /* Reached to end of the directory */
 4822              		.loc 1 2147 6 is_stmt 0 view .LVU1578
 4823 002a 92B1     		cbz	r2, .L366
2167:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 4824              		.loc 1 2167 4 is_stmt 1 view .LVU1579
2167:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 4825              		.loc 1 2167 30 is_stmt 0 view .LVU1580
ARM GAS  /tmp/ccWTW02a.s 			page 211


 4826 002c DB7A     		ldrb	r3, [r3, #11]	@ zero_extendqisi2
2167:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 4827              		.loc 1 2167 21 view .LVU1581
 4828 002e 03F03F03 		and	r3, r3, #63
 4829              	.LVL569:
2167:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 4830              		.loc 1 2167 17 view .LVU1582
 4831 0032 A371     		strb	r3, [r4, #6]
2188:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
 4832              		.loc 1 2188 4 is_stmt 1 view .LVU1583
2188:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
 4833              		.loc 1 2188 7 is_stmt 0 view .LVU1584
 4834 0034 E52A     		cmp	r2, #229
 4835 0036 18BF     		it	ne
 4836 0038 2E2A     		cmpne	r2, #46
 4837 003a E7D0     		beq	.L363
2188:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
 4838              		.loc 1 2188 30 discriminator 1 view .LVU1585
 4839 003c 0F2B     		cmp	r3, #15
 4840 003e E5D0     		beq	.L363
2188:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
 4841              		.loc 1 2188 57 discriminator 2 view .LVU1586
 4842 0040 23F02003 		bic	r3, r3, #32
 4843              	.LVL570:
2188:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
 4844              		.loc 1 2188 48 discriminator 2 view .LVU1587
 4845 0044 082B     		cmp	r3, #8
 4846 0046 14BF     		ite	ne
 4847 0048 0023     		movne	r3, #0
 4848 004a 0123     		moveq	r3, #1
2188:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
 4849              		.loc 1 2188 45 discriminator 2 view .LVU1588
 4850 004c B342     		cmp	r3, r6
 4851 004e DDD1     		bne	.L363
 4852 0050 00E0     		b	.L362
 4853              	.LVL571:
 4854              	.L366:
2148:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 4855              		.loc 1 2148 8 view .LVU1589
 4856 0052 0427     		movs	r7, #4
 4857              	.LVL572:
 4858              	.L362:
2197:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4859              		.loc 1 2197 2 is_stmt 1 view .LVU1590
2197:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4860              		.loc 1 2197 5 is_stmt 0 view .LVU1591
 4861 0054 0FB1     		cbz	r7, .L365
2197:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4862              		.loc 1 2197 20 is_stmt 1 discriminator 1 view .LVU1592
2197:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4863              		.loc 1 2197 29 is_stmt 0 discriminator 1 view .LVU1593
 4864 0056 0023     		movs	r3, #0
 4865 0058 E361     		str	r3, [r4, #28]
 4866              	.L365:
2198:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4867              		.loc 1 2198 2 is_stmt 1 view .LVU1594
2199:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  /tmp/ccWTW02a.s 			page 212


 4868              		.loc 1 2199 1 is_stmt 0 view .LVU1595
 4869 005a 3846     		mov	r0, r7
 4870 005c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
2199:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4871              		.loc 1 2199 1 view .LVU1596
 4872              		.cfi_endproc
 4873              	.LFE168:
 4875              		.section	.text.sync_fs,"ax",%progbits
 4876              		.align	1
 4877              		.syntax unified
 4878              		.thumb
 4879              		.thumb_func
 4880              		.fpu fpv5-d16
 4882              	sync_fs:
 4883              	.LVL573:
 4884              	.LFB156:
 947:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4885              		.loc 1 947 1 is_stmt 1 view -0
 4886              		.cfi_startproc
 4887              		@ args = 0, pretend = 0, frame = 0
 4888              		@ frame_needed = 0, uses_anonymous_args = 0
 947:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4889              		.loc 1 947 1 is_stmt 0 view .LVU1598
 4890 0000 70B5     		push	{r4, r5, r6, lr}
 4891              	.LCFI41:
 4892              		.cfi_def_cfa_offset 16
 4893              		.cfi_offset 4, -16
 4894              		.cfi_offset 5, -12
 4895              		.cfi_offset 6, -8
 4896              		.cfi_offset 14, -4
 4897 0002 0446     		mov	r4, r0
 948:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4898              		.loc 1 948 2 is_stmt 1 view .LVU1599
 951:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 4899              		.loc 1 951 2 view .LVU1600
 951:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 4900              		.loc 1 951 8 is_stmt 0 view .LVU1601
 4901 0004 FFF7FEFF 		bl	sync_window
 4902              	.LVL574:
 952:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Update FSInfo sector if needed */
 4903              		.loc 1 952 2 is_stmt 1 view .LVU1602
 952:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Update FSInfo sector if needed */
 4904              		.loc 1 952 5 is_stmt 0 view .LVU1603
 4905 0008 0546     		mov	r5, r0
 4906 000a 48B9     		cbnz	r0, .L369
 954:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Create FSInfo structure */
 4907              		.loc 1 954 3 is_stmt 1 view .LVU1604
 954:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Create FSInfo structure */
 4908              		.loc 1 954 9 is_stmt 0 view .LVU1605
 4909 000c 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 954:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Create FSInfo structure */
 4910              		.loc 1 954 6 view .LVU1606
 4911 000e 032B     		cmp	r3, #3
 4912 0010 08D0     		beq	.L373
 4913              	.LVL575:
 4914              	.L370:
 968:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
ARM GAS  /tmp/ccWTW02a.s 			page 213


 4915              		.loc 1 968 3 is_stmt 1 view .LVU1607
 968:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4916              		.loc 1 968 7 is_stmt 0 view .LVU1608
 4917 0012 0022     		movs	r2, #0
 4918 0014 1146     		mov	r1, r2
 4919 0016 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 4920 0018 FFF7FEFF 		bl	disk_ioctl
 4921              	.LVL576:
 968:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4922              		.loc 1 968 6 view .LVU1609
 4923 001c 00B1     		cbz	r0, .L369
 968:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4924              		.loc 1 968 56 view .LVU1610
 4925 001e 0125     		movs	r5, #1
 4926              	.L369:
 4927              	.LVL577:
 971:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4928              		.loc 1 971 2 is_stmt 1 view .LVU1611
 972:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4929              		.loc 1 972 1 is_stmt 0 view .LVU1612
 4930 0020 2846     		mov	r0, r5
 4931 0022 70BD     		pop	{r4, r5, r6, pc}
 4932              	.LVL578:
 4933              	.L373:
 954:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Create FSInfo structure */
 4934              		.loc 1 954 36 discriminator 1 view .LVU1613
 4935 0024 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 954:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Create FSInfo structure */
 4936              		.loc 1 954 31 discriminator 1 view .LVU1614
 4937 0026 012B     		cmp	r3, #1
 4938 0028 F3D1     		bne	.L370
 956:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(fs->win + BS_55AA, 0xAA55);
 4939              		.loc 1 956 4 is_stmt 1 view .LVU1615
 956:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(fs->win + BS_55AA, 0xAA55);
 4940              		.loc 1 956 14 is_stmt 0 view .LVU1616
 4941 002a 04F13006 		add	r6, r4, #48
 956:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(fs->win + BS_55AA, 0xAA55);
 4942              		.loc 1 956 4 view .LVU1617
 4943 002e 4FF40072 		mov	r2, #512
 4944 0032 0021     		movs	r1, #0
 4945 0034 3046     		mov	r0, r6
 4946              	.LVL579:
 956:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(fs->win + BS_55AA, 0xAA55);
 4947              		.loc 1 956 4 view .LVU1618
 4948 0036 FFF7FEFF 		bl	mem_set
 4949              	.LVL580:
 957:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_LeadSig, 0x41615252);
 4950              		.loc 1 957 4 is_stmt 1 view .LVU1619
 4951 003a 4AF65521 		movw	r1, #43605
 4952 003e 04F22E20 		addw	r0, r4, #558
 4953 0042 FFF7FEFF 		bl	st_word
 4954              	.LVL581:
 958:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_StrucSig, 0x61417272);
 4955              		.loc 1 958 4 view .LVU1620
 4956 0046 0F49     		ldr	r1, .L374
 4957 0048 3046     		mov	r0, r6
 4958 004a FFF7FEFF 		bl	st_dword
ARM GAS  /tmp/ccWTW02a.s 			page 214


 4959              	.LVL582:
 959:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_Free_Count, fs->free_clst);
 4960              		.loc 1 959 4 view .LVU1621
 4961 004e 0E49     		ldr	r1, .L374+4
 4962 0050 04F50570 		add	r0, r4, #532
 4963 0054 FFF7FEFF 		bl	st_dword
 4964              	.LVL583:
 960:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_Nxt_Free, fs->last_clst);
 4965              		.loc 1 960 4 view .LVU1622
 4966 0058 2169     		ldr	r1, [r4, #16]
 4967 005a 04F50670 		add	r0, r4, #536
 4968 005e FFF7FEFF 		bl	st_dword
 4969              	.LVL584:
 961:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Write it into the FSInfo sector */
 4970              		.loc 1 961 4 view .LVU1623
 4971 0062 E168     		ldr	r1, [r4, #12]
 4972 0064 04F50770 		add	r0, r4, #540
 4973 0068 FFF7FEFF 		bl	st_dword
 4974              	.LVL585:
 963:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(fs->drv, fs->win, fs->winsect, 1);
 4975              		.loc 1 963 4 view .LVU1624
 963:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(fs->drv, fs->win, fs->winsect, 1);
 4976              		.loc 1 963 20 is_stmt 0 view .LVU1625
 4977 006c E269     		ldr	r2, [r4, #28]
 963:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(fs->drv, fs->win, fs->winsect, 1);
 4978              		.loc 1 963 30 view .LVU1626
 4979 006e 0132     		adds	r2, r2, #1
 963:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(fs->drv, fs->win, fs->winsect, 1);
 4980              		.loc 1 963 16 view .LVU1627
 4981 0070 E262     		str	r2, [r4, #44]
 964:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag = 0;
 4982              		.loc 1 964 4 is_stmt 1 view .LVU1628
 4983 0072 0123     		movs	r3, #1
 4984 0074 3146     		mov	r1, r6
 4985 0076 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 4986 0078 FFF7FEFF 		bl	disk_write
 4987              	.LVL586:
 965:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 4988              		.loc 1 965 4 view .LVU1629
 965:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 4989              		.loc 1 965 17 is_stmt 0 view .LVU1630
 4990 007c 0023     		movs	r3, #0
 4991 007e 2371     		strb	r3, [r4, #4]
 4992 0080 C7E7     		b	.L370
 4993              	.L375:
 4994 0082 00BF     		.align	2
 4995              	.L374:
 4996 0084 52526141 		.word	1096897106
 4997 0088 72724161 		.word	1631679090
 4998              		.cfi_endproc
 4999              	.LFE156:
 5001              		.section	.text.f_mount,"ax",%progbits
 5002              		.align	1
 5003              		.global	f_mount
 5004              		.syntax unified
 5005              		.thumb
 5006              		.thumb_func
ARM GAS  /tmp/ccWTW02a.s 			page 215


 5007              		.fpu fpv5-d16
 5009              	f_mount:
 5010              	.LVL587:
 5011              	.LFB179:
3265:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *cfs;
 5012              		.loc 1 3265 1 is_stmt 1 view -0
 5013              		.cfi_startproc
 5014              		@ args = 0, pretend = 0, frame = 16
 5015              		@ frame_needed = 0, uses_anonymous_args = 0
3265:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *cfs;
 5016              		.loc 1 3265 1 is_stmt 0 view .LVU1632
 5017 0000 70B5     		push	{r4, r5, r6, lr}
 5018              	.LCFI42:
 5019              		.cfi_def_cfa_offset 16
 5020              		.cfi_offset 4, -16
 5021              		.cfi_offset 5, -12
 5022              		.cfi_offset 6, -8
 5023              		.cfi_offset 14, -4
 5024 0002 84B0     		sub	sp, sp, #16
 5025              	.LCFI43:
 5026              		.cfi_def_cfa_offset 32
 5027 0004 0190     		str	r0, [sp, #4]
 5028 0006 0091     		str	r1, [sp]
 5029 0008 1646     		mov	r6, r2
3266:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
 5030              		.loc 1 3266 2 is_stmt 1 view .LVU1633
3267:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 5031              		.loc 1 3267 2 view .LVU1634
3268:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *rp = path;
 5032              		.loc 1 3268 2 view .LVU1635
3269:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5033              		.loc 1 3269 2 view .LVU1636
3269:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5034              		.loc 1 3269 15 is_stmt 0 view .LVU1637
 5035 000a 0391     		str	r1, [sp, #12]
3273:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 5036              		.loc 1 3273 2 is_stmt 1 view .LVU1638
3273:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 5037              		.loc 1 3273 8 is_stmt 0 view .LVU1639
 5038 000c 03A8     		add	r0, sp, #12
 5039              	.LVL588:
3273:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 5040              		.loc 1 3273 8 view .LVU1640
 5041 000e FFF7FEFF 		bl	get_ldnumber
 5042              	.LVL589:
3274:Middlewares/Third_Party/FatFs/src/ff.c **** 	cfs = FatFs[vol];					/* Pointer to fs object */
 5043              		.loc 1 3274 2 is_stmt 1 view .LVU1641
3274:Middlewares/Third_Party/FatFs/src/ff.c **** 	cfs = FatFs[vol];					/* Pointer to fs object */
 5044              		.loc 1 3274 5 is_stmt 0 view .LVU1642
 5045 0012 041E     		subs	r4, r0, #0
 5046 0014 1FDB     		blt	.L380
3275:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5047              		.loc 1 3275 2 is_stmt 1 view .LVU1643
3275:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5048              		.loc 1 3275 6 is_stmt 0 view .LVU1644
 5049 0016 114B     		ldr	r3, .L384
 5050 0018 53F82450 		ldr	r5, [r3, r4, lsl #2]
ARM GAS  /tmp/ccWTW02a.s 			page 216


 5051              	.LVL590:
3277:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 5052              		.loc 1 3277 2 is_stmt 1 view .LVU1645
3277:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 5053              		.loc 1 3277 5 is_stmt 0 view .LVU1646
 5054 001c 25B1     		cbz	r5, .L378
3279:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5055              		.loc 1 3279 3 is_stmt 1 view .LVU1647
 5056 001e 2846     		mov	r0, r5
 5057              	.LVL591:
3279:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5058              		.loc 1 3279 3 is_stmt 0 view .LVU1648
 5059 0020 FFF7FEFF 		bl	clear_lock
 5060              	.LVL592:
3284:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 5061              		.loc 1 3284 3 is_stmt 1 view .LVU1649
3284:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 5062              		.loc 1 3284 16 is_stmt 0 view .LVU1650
 5063 0024 0023     		movs	r3, #0
 5064 0026 2B70     		strb	r3, [r5]
 5065              	.L378:
3287:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fs_type = 0;				/* Clear new fs object */
 5066              		.loc 1 3287 2 is_stmt 1 view .LVU1651
3287:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fs_type = 0;				/* Clear new fs object */
 5067              		.loc 1 3287 6 is_stmt 0 view .LVU1652
 5068 0028 019B     		ldr	r3, [sp, #4]
3287:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fs_type = 0;				/* Clear new fs object */
 5069              		.loc 1 3287 5 view .LVU1653
 5070 002a 0BB1     		cbz	r3, .L379
3288:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT						/* Create sync object for the new volume */
 5071              		.loc 1 3288 3 is_stmt 1 view .LVU1654
3288:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT						/* Create sync object for the new volume */
 5072              		.loc 1 3288 15 is_stmt 0 view .LVU1655
 5073 002c 0022     		movs	r2, #0
 5074 002e 1A70     		strb	r2, [r3]
 5075              	.L379:
3293:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5076              		.loc 1 3293 2 is_stmt 1 view .LVU1656
3293:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5077              		.loc 1 3293 13 is_stmt 0 view .LVU1657
 5078 0030 019B     		ldr	r3, [sp, #4]
 5079 0032 0A4A     		ldr	r2, .L384
 5080 0034 42F82430 		str	r3, [r2, r4, lsl #2]
3295:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5081              		.loc 1 3295 2 is_stmt 1 view .LVU1658
3295:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5082              		.loc 1 3295 17 is_stmt 0 view .LVU1659
 5083 0038 721E     		subs	r2, r6, #1
 5084 003a 18BF     		it	ne
 5085 003c 0122     		movne	r2, #1
3295:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5086              		.loc 1 3295 10 view .LVU1660
 5087 003e 002B     		cmp	r3, #0
 5088 0040 08BF     		it	eq
 5089 0042 0122     		moveq	r2, #1
3295:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5090              		.loc 1 3295 5 view .LVU1661
ARM GAS  /tmp/ccWTW02a.s 			page 217


 5091 0044 12B1     		cbz	r2, .L383
3295:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5092              		.loc 1 3295 30 view .LVU1662
 5093 0046 0020     		movs	r0, #0
 5094              	.LVL593:
 5095              	.L377:
3299:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5096              		.loc 1 3299 1 view .LVU1663
 5097 0048 04B0     		add	sp, sp, #16
 5098              	.LCFI44:
 5099              		.cfi_remember_state
 5100              		.cfi_def_cfa_offset 16
 5101              		@ sp needed
 5102 004a 70BD     		pop	{r4, r5, r6, pc}
 5103              	.LVL594:
 5104              	.L383:
 5105              	.LCFI45:
 5106              		.cfi_restore_state
3297:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
 5107              		.loc 1 3297 2 is_stmt 1 view .LVU1664
3297:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
 5108              		.loc 1 3297 8 is_stmt 0 view .LVU1665
 5109 004c 01A9     		add	r1, sp, #4
 5110 004e 6846     		mov	r0, sp
 5111 0050 FFF7FEFF 		bl	find_volume
 5112              	.LVL595:
3298:Middlewares/Third_Party/FatFs/src/ff.c **** }
 5113              		.loc 1 3298 2 is_stmt 1 view .LVU1666
 5114 0054 F8E7     		b	.L377
 5115              	.LVL596:
 5116              	.L380:
3274:Middlewares/Third_Party/FatFs/src/ff.c **** 	cfs = FatFs[vol];					/* Pointer to fs object */
 5117              		.loc 1 3274 22 is_stmt 0 view .LVU1667
 5118 0056 0B20     		movs	r0, #11
 5119              	.LVL597:
3274:Middlewares/Third_Party/FatFs/src/ff.c **** 	cfs = FatFs[vol];					/* Pointer to fs object */
 5120              		.loc 1 3274 22 view .LVU1668
 5121 0058 F6E7     		b	.L377
 5122              	.L385:
 5123 005a 00BF     		.align	2
 5124              	.L384:
 5125 005c 00000000 		.word	.LANCHOR2
 5126              		.cfi_endproc
 5127              	.LFE179:
 5129              		.section	.text.f_open,"ax",%progbits
 5130              		.align	1
 5131              		.global	f_open
 5132              		.syntax unified
 5133              		.thumb
 5134              		.thumb_func
 5135              		.fpu fpv5-d16
 5137              	f_open:
 5138              	.LVL598:
 5139              	.LFB180:
3313:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 5140              		.loc 1 3313 1 is_stmt 1 view -0
 5141              		.cfi_startproc
ARM GAS  /tmp/ccWTW02a.s 			page 218


 5142              		@ args = 0, pretend = 0, frame = 64
 5143              		@ frame_needed = 0, uses_anonymous_args = 0
3313:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 5144              		.loc 1 3313 1 is_stmt 0 view .LVU1670
 5145 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 5146              	.LCFI46:
 5147              		.cfi_def_cfa_offset 28
 5148              		.cfi_offset 4, -28
 5149              		.cfi_offset 5, -24
 5150              		.cfi_offset 6, -20
 5151              		.cfi_offset 7, -16
 5152              		.cfi_offset 8, -12
 5153              		.cfi_offset 9, -8
 5154              		.cfi_offset 14, -4
 5155 0004 91B0     		sub	sp, sp, #68
 5156              	.LCFI47:
 5157              		.cfi_def_cfa_offset 96
 5158 0006 0191     		str	r1, [sp, #4]
3314:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
 5159              		.loc 1 3314 2 is_stmt 1 view .LVU1671
3315:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 5160              		.loc 1 3315 2 view .LVU1672
3316:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 5161              		.loc 1 3316 2 view .LVU1673
3318:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t ofs;
 5162              		.loc 1 3318 2 view .LVU1674
3319:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5163              		.loc 1 3319 2 view .LVU1675
3324:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5164              		.loc 1 3324 2 view .LVU1676
3324:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5165              		.loc 1 3324 5 is_stmt 0 view .LVU1677
 5166 0008 0028     		cmp	r0, #0
 5167 000a 00F00F81 		beq	.L402
 5168 000e 1546     		mov	r5, r2
 5169 0010 0646     		mov	r6, r0
3327:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, mode);
 5170              		.loc 1 3327 2 is_stmt 1 view .LVU1678
3327:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, mode);
 5171              		.loc 1 3327 7 is_stmt 0 view .LVU1679
 5172 0012 02F03F07 		and	r7, r2, #63
 5173              	.LVL599:
3328:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 5174              		.loc 1 3328 2 is_stmt 1 view .LVU1680
3328:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 5175              		.loc 1 3328 8 is_stmt 0 view .LVU1681
 5176 0016 3A46     		mov	r2, r7
 5177 0018 03A9     		add	r1, sp, #12
 5178              	.LVL600:
3328:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 5179              		.loc 1 3328 8 view .LVU1682
 5180 001a 01A8     		add	r0, sp, #4
 5181              	.LVL601:
3328:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 5182              		.loc 1 3328 8 view .LVU1683
 5183 001c FFF7FEFF 		bl	find_volume
 5184              	.LVL602:
ARM GAS  /tmp/ccWTW02a.s 			page 219


3329:Middlewares/Third_Party/FatFs/src/ff.c **** 		dj.obj.fs = fs;
 5185              		.loc 1 3329 2 is_stmt 1 view .LVU1684
3329:Middlewares/Third_Party/FatFs/src/ff.c **** 		dj.obj.fs = fs;
 5186              		.loc 1 3329 5 is_stmt 0 view .LVU1685
 5187 0020 0446     		mov	r4, r0
 5188 0022 30B1     		cbz	r0, .L415
 5189              	.LVL603:
 5190              	.L388:
3496:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 5191              		.loc 1 3496 16 is_stmt 1 view .LVU1686
3499:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5192              		.loc 1 3499 2 view .LVU1687
3499:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5193              		.loc 1 3499 5 is_stmt 0 view .LVU1688
 5194 0024 0CB1     		cbz	r4, .L387
 5195              	.LVL604:
 5196              	.L401:
3499:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5197              		.loc 1 3499 20 is_stmt 1 discriminator 1 view .LVU1689
3499:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5198              		.loc 1 3499 31 is_stmt 0 discriminator 1 view .LVU1690
 5199 0026 0023     		movs	r3, #0
 5200 0028 3360     		str	r3, [r6]
 5201              	.LVL605:
 5202              	.L387:
3502:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5203              		.loc 1 3502 1 view .LVU1691
 5204 002a 2046     		mov	r0, r4
 5205 002c 11B0     		add	sp, sp, #68
 5206              	.LCFI48:
 5207              		.cfi_remember_state
 5208              		.cfi_def_cfa_offset 28
 5209              		@ sp needed
 5210 002e BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 5211              	.LVL606:
 5212              	.L415:
 5213              	.LCFI49:
 5214              		.cfi_restore_state
3330:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 5215              		.loc 1 3330 3 is_stmt 1 view .LVU1692
3330:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 5216              		.loc 1 3330 13 is_stmt 0 view .LVU1693
 5217 0032 039B     		ldr	r3, [sp, #12]
 5218 0034 0493     		str	r3, [sp, #16]
3331:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 5219              		.loc 1 3331 18 is_stmt 1 view .LVU1694
3332:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY	/* R/W configuration */
 5220              		.loc 1 3332 3 view .LVU1695
3332:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY	/* R/W configuration */
 5221              		.loc 1 3332 9 is_stmt 0 view .LVU1696
 5222 0036 0199     		ldr	r1, [sp, #4]
 5223 0038 04A8     		add	r0, sp, #16
 5224              	.LVL607:
3332:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY	/* R/W configuration */
 5225              		.loc 1 3332 9 view .LVU1697
 5226 003a FFF7FEFF 		bl	follow_path
 5227              	.LVL608:
ARM GAS  /tmp/ccWTW02a.s 			page 220


3334:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* Origin directory itself? */
 5228              		.loc 1 3334 3 is_stmt 1 view .LVU1698
3334:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* Origin directory itself? */
 5229              		.loc 1 3334 6 is_stmt 0 view .LVU1699
 5230 003e 0446     		mov	r4, r0
 5231 0040 60B9     		cbnz	r0, .L389
3335:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
 5232              		.loc 1 3335 4 is_stmt 1 view .LVU1700
3335:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
 5233              		.loc 1 3335 8 is_stmt 0 view .LVU1701
 5234 0042 9DF93F30 		ldrsb	r3, [sp, #63]
3335:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
 5235              		.loc 1 3335 7 view .LVU1702
 5236 0046 002B     		cmp	r3, #0
 5237 0048 50DB     		blt	.L403
3340:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5238              		.loc 1 3340 5 is_stmt 1 view .LVU1703
3340:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5239              		.loc 1 3340 11 is_stmt 0 view .LVU1704
 5240 004a 37F00103 		bics	r3, r7, #1
 5241 004e 14BF     		ite	ne
 5242 0050 0121     		movne	r1, #1
 5243 0052 0021     		moveq	r1, #0
 5244 0054 04A8     		add	r0, sp, #16
 5245              	.LVL609:
3340:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5246              		.loc 1 3340 11 view .LVU1705
 5247 0056 FFF7FEFF 		bl	chk_lock
 5248              	.LVL610:
 5249 005a 0446     		mov	r4, r0
 5250              	.LVL611:
 5251              	.L389:
3345:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {					/* No file, create new */
 5252              		.loc 1 3345 3 is_stmt 1 view .LVU1706
3345:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {					/* No file, create new */
 5253              		.loc 1 3345 6 is_stmt 0 view .LVU1707
 5254 005c 15F01C0F 		tst	r5, #28
 5255 0060 5AD0     		beq	.L390
3346:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) {		/* There is no file to open, create a new entry */
 5256              		.loc 1 3346 4 is_stmt 1 view .LVU1708
3346:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) {		/* There is no file to open, create a new entry */
 5257              		.loc 1 3346 7 is_stmt 0 view .LVU1709
 5258 0062 002C     		cmp	r4, #0
 5259 0064 4ED0     		beq	.L391
3347:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 5260              		.loc 1 3347 5 is_stmt 1 view .LVU1710
3347:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 5261              		.loc 1 3347 8 is_stmt 0 view .LVU1711
 5262 0066 042C     		cmp	r4, #4
 5263 0068 42D0     		beq	.L416
 5264              	.LVL612:
 5265              	.L392:
3354:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5266              		.loc 1 3354 5 is_stmt 1 view .LVU1712
3354:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5267              		.loc 1 3354 10 is_stmt 0 view .LVU1713
 5268 006a 47F00807 		orr	r7, r7, #8
ARM GAS  /tmp/ccWTW02a.s 			page 221


 5269              	.LVL613:
 5270              	.L393:
3363:Middlewares/Third_Party/FatFs/src/ff.c **** 				dw = GET_FATTIME();
 5271              		.loc 1 3363 4 is_stmt 1 view .LVU1714
3363:Middlewares/Third_Party/FatFs/src/ff.c **** 				dw = GET_FATTIME();
 5272              		.loc 1 3363 7 is_stmt 0 view .LVU1715
 5273 006e 002C     		cmp	r4, #0
 5274 0070 61D1     		bne	.L394
3363:Middlewares/Third_Party/FatFs/src/ff.c **** 				dw = GET_FATTIME();
 5275              		.loc 1 3363 21 discriminator 1 view .LVU1716
 5276 0072 17F0080F 		tst	r7, #8
 5277 0076 5ED0     		beq	.L394
3364:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 5278              		.loc 1 3364 5 is_stmt 1 view .LVU1717
3364:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 5279              		.loc 1 3364 10 is_stmt 0 view .LVU1718
 5280 0078 FFF7FEFF 		bl	get_fattime
 5281              	.LVL614:
 5282 007c 0546     		mov	r5, r0
 5283              	.LVL615:
3392:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dj.dir + DIR_ModTime, dw);	/* Set modified time */
 5284              		.loc 1 3392 6 is_stmt 1 view .LVU1719
 5285 007e 0146     		mov	r1, r0
 5286 0080 0C98     		ldr	r0, [sp, #48]
 5287              	.LVL616:
3392:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dj.dir + DIR_ModTime, dw);	/* Set modified time */
 5288              		.loc 1 3392 6 is_stmt 0 view .LVU1720
 5289 0082 0E30     		adds	r0, r0, #14
 5290 0084 FFF7FEFF 		bl	st_dword
 5291              	.LVL617:
3393:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.dir[DIR_Attr] = AM_ARC;			/* Reset attribute */
 5292              		.loc 1 3393 6 is_stmt 1 view .LVU1721
 5293 0088 2946     		mov	r1, r5
 5294 008a 0C98     		ldr	r0, [sp, #48]
 5295 008c 1630     		adds	r0, r0, #22
 5296 008e FFF7FEFF 		bl	st_dword
 5297              	.LVL618:
3394:Middlewares/Third_Party/FatFs/src/ff.c **** 					cl = ld_clust(fs, dj.dir);			/* Get cluster chain */
 5298              		.loc 1 3394 6 view .LVU1722
3394:Middlewares/Third_Party/FatFs/src/ff.c **** 					cl = ld_clust(fs, dj.dir);			/* Get cluster chain */
 5299              		.loc 1 3394 23 is_stmt 0 view .LVU1723
 5300 0092 0C9B     		ldr	r3, [sp, #48]
 5301 0094 2022     		movs	r2, #32
 5302 0096 DA72     		strb	r2, [r3, #11]
3395:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dj.dir, 0);			/* Reset file allocation info */
 5303              		.loc 1 3395 6 is_stmt 1 view .LVU1724
3395:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dj.dir, 0);			/* Reset file allocation info */
 5304              		.loc 1 3395 11 is_stmt 0 view .LVU1725
 5305 0098 DDF80C80 		ldr	r8, [sp, #12]
3395:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dj.dir, 0);			/* Reset file allocation info */
 5306              		.loc 1 3395 26 view .LVU1726
 5307 009c DDF83090 		ldr	r9, [sp, #48]
3395:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dj.dir, 0);			/* Reset file allocation info */
 5308              		.loc 1 3395 11 view .LVU1727
 5309 00a0 4946     		mov	r1, r9
 5310 00a2 4046     		mov	r0, r8
 5311 00a4 FFF7FEFF 		bl	ld_clust
ARM GAS  /tmp/ccWTW02a.s 			page 222


 5312              	.LVL619:
 5313 00a8 0546     		mov	r5, r0
 5314              	.LVL620:
3396:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dj.dir + DIR_FileSize, 0);
 5315              		.loc 1 3396 6 is_stmt 1 view .LVU1728
 5316 00aa 0022     		movs	r2, #0
 5317 00ac 4946     		mov	r1, r9
 5318 00ae 4046     		mov	r0, r8
 5319              	.LVL621:
3396:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dj.dir + DIR_FileSize, 0);
 5320              		.loc 1 3396 6 is_stmt 0 view .LVU1729
 5321 00b0 FFF7FEFF 		bl	st_clust
 5322              	.LVL622:
3397:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
 5323              		.loc 1 3397 6 is_stmt 1 view .LVU1730
 5324 00b4 0021     		movs	r1, #0
 5325 00b6 0C98     		ldr	r0, [sp, #48]
 5326 00b8 1C30     		adds	r0, r0, #28
 5327 00ba FFF7FEFF 		bl	st_dword
 5328              	.LVL623:
3398:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5329              		.loc 1 3398 6 view .LVU1731
3398:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5330              		.loc 1 3398 16 is_stmt 0 view .LVU1732
 5331 00be 039B     		ldr	r3, [sp, #12]
 5332 00c0 0122     		movs	r2, #1
 5333 00c2 DA70     		strb	r2, [r3, #3]
3400:Middlewares/Third_Party/FatFs/src/ff.c **** 						dw = fs->winsect;
 5334              		.loc 1 3400 6 is_stmt 1 view .LVU1733
3400:Middlewares/Third_Party/FatFs/src/ff.c **** 						dw = fs->winsect;
 5335              		.loc 1 3400 9 is_stmt 0 view .LVU1734
 5336 00c4 BDB3     		cbz	r5, .L394
3401:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = remove_chain(&dj.obj, cl, 0);
 5337              		.loc 1 3401 7 is_stmt 1 view .LVU1735
3401:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = remove_chain(&dj.obj, cl, 0);
 5338              		.loc 1 3401 14 is_stmt 0 view .LVU1736
 5339 00c6 039B     		ldr	r3, [sp, #12]
3401:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = remove_chain(&dj.obj, cl, 0);
 5340              		.loc 1 3401 10 view .LVU1737
 5341 00c8 D3F82C80 		ldr	r8, [r3, #44]
 5342              	.LVL624:
3402:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
 5343              		.loc 1 3402 7 is_stmt 1 view .LVU1738
3402:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
 5344              		.loc 1 3402 13 is_stmt 0 view .LVU1739
 5345 00cc 0022     		movs	r2, #0
 5346 00ce 2946     		mov	r1, r5
 5347 00d0 04A8     		add	r0, sp, #16
 5348 00d2 FFF7FEFF 		bl	remove_chain
 5349              	.LVL625:
3403:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = move_window(fs, dw);
 5350              		.loc 1 3403 7 is_stmt 1 view .LVU1740
3403:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = move_window(fs, dw);
 5351              		.loc 1 3403 10 is_stmt 0 view .LVU1741
 5352 00d6 0446     		mov	r4, r0
 5353 00d8 68BB     		cbnz	r0, .L394
3404:Middlewares/Third_Party/FatFs/src/ff.c **** 							fs->last_clst = cl - 1;		/* Reuse the cluster hole */
ARM GAS  /tmp/ccWTW02a.s 			page 223


 5354              		.loc 1 3404 8 is_stmt 1 view .LVU1742
3404:Middlewares/Third_Party/FatFs/src/ff.c **** 							fs->last_clst = cl - 1;		/* Reuse the cluster hole */
 5355              		.loc 1 3404 14 is_stmt 0 view .LVU1743
 5356 00da 4146     		mov	r1, r8
 5357 00dc 0398     		ldr	r0, [sp, #12]
 5358              	.LVL626:
3404:Middlewares/Third_Party/FatFs/src/ff.c **** 							fs->last_clst = cl - 1;		/* Reuse the cluster hole */
 5359              		.loc 1 3404 14 view .LVU1744
 5360 00de FFF7FEFF 		bl	move_window
 5361              	.LVL627:
 5362 00e2 0446     		mov	r4, r0
 5363              	.LVL628:
3405:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 5364              		.loc 1 3405 8 is_stmt 1 view .LVU1745
3405:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 5365              		.loc 1 3405 27 is_stmt 0 view .LVU1746
 5366 00e4 013D     		subs	r5, r5, #1
 5367              	.LVL629:
3405:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 5368              		.loc 1 3405 22 view .LVU1747
 5369 00e6 039B     		ldr	r3, [sp, #12]
 5370 00e8 DD60     		str	r5, [r3, #12]
 5371 00ea 24E0     		b	.L394
 5372              	.LVL630:
 5373              	.L403:
3336:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5374              		.loc 1 3336 9 view .LVU1748
 5375 00ec 0624     		movs	r4, #6
 5376 00ee B5E7     		b	.L389
 5377              	.LVL631:
 5378              	.L416:
3349:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 5379              		.loc 1 3349 6 is_stmt 1 view .LVU1749
3349:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 5380              		.loc 1 3349 12 is_stmt 0 view .LVU1750
 5381 00f0 FFF7FEFF 		bl	enq_lock
 5382              	.LVL632:
3349:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 5383              		.loc 1 3349 43 view .LVU1751
 5384 00f4 08B9     		cbnz	r0, .L417
 5385 00f6 1224     		movs	r4, #18
 5386              	.LVL633:
3349:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 5387              		.loc 1 3349 43 view .LVU1752
 5388 00f8 B7E7     		b	.L392
 5389              	.LVL634:
 5390              	.L417:
3349:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 5391              		.loc 1 3349 25 discriminator 1 view .LVU1753
 5392 00fa 04A8     		add	r0, sp, #16
 5393 00fc FFF7FEFF 		bl	dir_register
 5394              	.LVL635:
 5395 0100 0446     		mov	r4, r0
 5396              	.LVL636:
3349:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 5397              		.loc 1 3349 25 discriminator 1 view .LVU1754
 5398 0102 B2E7     		b	.L392
ARM GAS  /tmp/ccWTW02a.s 			page 224


 5399              	.LVL637:
 5400              	.L391:
3357:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;
 5401              		.loc 1 3357 5 is_stmt 1 view .LVU1755
3357:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;
 5402              		.loc 1 3357 15 is_stmt 0 view .LVU1756
 5403 0104 9DF81630 		ldrb	r3, [sp, #22]	@ zero_extendqisi2
3357:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;
 5404              		.loc 1 3357 8 view .LVU1757
 5405 0108 13F0110F 		tst	r3, #17
 5406 010c 12D1     		bne	.L405
3360:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5407              		.loc 1 3360 6 is_stmt 1 view .LVU1758
3360:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5408              		.loc 1 3360 9 is_stmt 0 view .LVU1759
 5409 010e 15F0040F 		tst	r5, #4
 5410 0112 ACD0     		beq	.L393
3360:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5411              		.loc 1 3360 36 view .LVU1760
 5412 0114 0824     		movs	r4, #8
 5413              	.LVL638:
3360:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5414              		.loc 1 3360 36 view .LVU1761
 5415 0116 0EE0     		b	.L394
 5416              	.LVL639:
 5417              	.L390:
3412:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.obj.attr & AM_DIR) {		/* It is a directory */
 5418              		.loc 1 3412 4 is_stmt 1 view .LVU1762
3412:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.obj.attr & AM_DIR) {		/* It is a directory */
 5419              		.loc 1 3412 7 is_stmt 0 view .LVU1763
 5420 0118 6CB9     		cbnz	r4, .L394
3413:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_FILE;
 5421              		.loc 1 3413 5 is_stmt 1 view .LVU1764
3413:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_FILE;
 5422              		.loc 1 3413 15 is_stmt 0 view .LVU1765
 5423 011a 9DF81630 		ldrb	r3, [sp, #22]	@ zero_extendqisi2
3413:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_FILE;
 5424              		.loc 1 3413 8 view .LVU1766
 5425 011e 13F0100F 		tst	r3, #16
 5426 0122 4CD1     		bne	.L407
3416:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_DENIED;
 5427              		.loc 1 3416 6 is_stmt 1 view .LVU1767
3416:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_DENIED;
 5428              		.loc 1 3416 9 is_stmt 0 view .LVU1768
 5429 0124 15F0020F 		tst	r5, #2
 5430 0128 05D0     		beq	.L394
3416:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_DENIED;
 5431              		.loc 1 3416 28 discriminator 1 view .LVU1769
 5432 012a 13F0010F 		tst	r3, #1
 5433 012e 02D0     		beq	.L394
3417:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 5434              		.loc 1 3417 11 view .LVU1770
 5435 0130 0724     		movs	r4, #7
 5436              	.LVL640:
3417:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 5437              		.loc 1 3417 11 view .LVU1771
 5438 0132 16E0     		b	.L395
ARM GAS  /tmp/ccWTW02a.s 			page 225


 5439              	.LVL641:
 5440              	.L405:
3358:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
 5441              		.loc 1 3358 10 view .LVU1772
 5442 0134 0724     		movs	r4, #7
 5443              	.LVL642:
 5444              	.L394:
3422:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (mode & FA_CREATE_ALWAYS)		/* Set file change flag if created or overwritten */
 5445              		.loc 1 3422 3 is_stmt 1 view .LVU1773
3422:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (mode & FA_CREATE_ALWAYS)		/* Set file change flag if created or overwritten */
 5446              		.loc 1 3422 6 is_stmt 0 view .LVU1774
 5447 0136 A4B9     		cbnz	r4, .L395
3423:Middlewares/Third_Party/FatFs/src/ff.c **** 				mode |= FA_MODIFIED;
 5448              		.loc 1 3423 4 is_stmt 1 view .LVU1775
3423:Middlewares/Third_Party/FatFs/src/ff.c **** 				mode |= FA_MODIFIED;
 5449              		.loc 1 3423 7 is_stmt 0 view .LVU1776
 5450 0138 17F0080F 		tst	r7, #8
 5451 013c 01D0     		beq	.L396
3424:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_sect = fs->winsect;			/* Pointer to the directory entry */
 5452              		.loc 1 3424 5 is_stmt 1 view .LVU1777
3424:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_sect = fs->winsect;			/* Pointer to the directory entry */
 5453              		.loc 1 3424 10 is_stmt 0 view .LVU1778
 5454 013e 47F04007 		orr	r7, r7, #64
 5455              	.LVL643:
 5456              	.L396:
3425:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_ptr = dj.dir;
 5457              		.loc 1 3425 4 is_stmt 1 view .LVU1779
3425:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_ptr = dj.dir;
 5458              		.loc 1 3425 21 is_stmt 0 view .LVU1780
 5459 0142 039B     		ldr	r3, [sp, #12]
 5460 0144 DB6A     		ldr	r3, [r3, #44]
3425:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_ptr = dj.dir;
 5461              		.loc 1 3425 17 view .LVU1781
 5462 0146 7362     		str	r3, [r6, #36]
3426:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 5463              		.loc 1 3426 4 is_stmt 1 view .LVU1782
3426:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 5464              		.loc 1 3426 20 is_stmt 0 view .LVU1783
 5465 0148 0C9B     		ldr	r3, [sp, #48]
3426:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 5466              		.loc 1 3426 16 view .LVU1784
 5467 014a B362     		str	r3, [r6, #40]
3428:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!fp->obj.lockid) res = FR_INT_ERR;
 5468              		.loc 1 3428 4 is_stmt 1 view .LVU1785
3428:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!fp->obj.lockid) res = FR_INT_ERR;
 5469              		.loc 1 3428 21 is_stmt 0 view .LVU1786
 5470 014c 37F00103 		bics	r3, r7, #1
 5471 0150 14BF     		ite	ne
 5472 0152 0121     		movne	r1, #1
 5473 0154 0021     		moveq	r1, #0
 5474 0156 04A8     		add	r0, sp, #16
 5475 0158 FFF7FEFF 		bl	inc_lock
 5476              	.LVL644:
3428:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!fp->obj.lockid) res = FR_INT_ERR;
 5477              		.loc 1 3428 19 view .LVU1787
 5478 015c 3061     		str	r0, [r6, #16]
3429:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  /tmp/ccWTW02a.s 			page 226


 5479              		.loc 1 3429 4 is_stmt 1 view .LVU1788
3429:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5480              		.loc 1 3429 7 is_stmt 0 view .LVU1789
 5481 015e 0028     		cmp	r0, #0
 5482 0160 62D0     		beq	.L409
 5483              	.LVL645:
 5484              	.L395:
3444:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 5485              		.loc 1 3444 3 is_stmt 1 view .LVU1790
3444:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 5486              		.loc 1 3444 6 is_stmt 0 view .LVU1791
 5487 0162 002C     		cmp	r4, #0
 5488 0164 7FF45EAF 		bne	.L388
3456:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.objsize = ld_dword(dj.dir + DIR_FileSize);
 5489              		.loc 1 3456 5 is_stmt 1 view .LVU1792
3456:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.objsize = ld_dword(dj.dir + DIR_FileSize);
 5490              		.loc 1 3456 22 is_stmt 0 view .LVU1793
 5491 0168 039D     		ldr	r5, [sp, #12]
3456:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.objsize = ld_dword(dj.dir + DIR_FileSize);
 5492              		.loc 1 3456 37 view .LVU1794
 5493 016a DDF83080 		ldr	r8, [sp, #48]
3456:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.objsize = ld_dword(dj.dir + DIR_FileSize);
 5494              		.loc 1 3456 22 view .LVU1795
 5495 016e 4146     		mov	r1, r8
 5496 0170 2846     		mov	r0, r5
 5497 0172 FFF7FEFF 		bl	ld_clust
 5498              	.LVL646:
3456:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.objsize = ld_dword(dj.dir + DIR_FileSize);
 5499              		.loc 1 3456 20 view .LVU1796
 5500 0176 B060     		str	r0, [r6, #8]
3457:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5501              		.loc 1 3457 5 is_stmt 1 view .LVU1797
3457:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5502              		.loc 1 3457 23 is_stmt 0 view .LVU1798
 5503 0178 08F11C00 		add	r0, r8, #28
 5504 017c FFF7FEFF 		bl	ld_dword
 5505              	.LVL647:
3457:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5506              		.loc 1 3457 21 view .LVU1799
 5507 0180 F060     		str	r0, [r6, #12]
3460:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5508              		.loc 1 3460 4 is_stmt 1 view .LVU1800
3460:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5509              		.loc 1 3460 14 is_stmt 0 view .LVU1801
 5510 0182 0021     		movs	r1, #0
 5511 0184 F162     		str	r1, [r6, #44]
3462:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.id = fs->id;
 5512              		.loc 1 3462 4 is_stmt 1 view .LVU1802
3462:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.id = fs->id;
 5513              		.loc 1 3462 15 is_stmt 0 view .LVU1803
 5514 0186 3560     		str	r5, [r6]
3463:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag = mode;		/* Set file access mode */
 5515              		.loc 1 3463 4 is_stmt 1 view .LVU1804
3463:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag = mode;		/* Set file access mode */
 5516              		.loc 1 3463 19 is_stmt 0 view .LVU1805
 5517 0188 EB88     		ldrh	r3, [r5, #6]
3463:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag = mode;		/* Set file access mode */
ARM GAS  /tmp/ccWTW02a.s 			page 227


 5518              		.loc 1 3463 15 view .LVU1806
 5519 018a B380     		strh	r3, [r6, #4]	@ movhi
3464:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->err = 0;			/* Clear error flag */
 5520              		.loc 1 3464 4 is_stmt 1 view .LVU1807
3464:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->err = 0;			/* Clear error flag */
 5521              		.loc 1 3464 13 is_stmt 0 view .LVU1808
 5522 018c 3775     		strb	r7, [r6, #20]
3465:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->sect = 0;			/* Invalidate current data sector */
 5523              		.loc 1 3465 4 is_stmt 1 view .LVU1809
3465:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->sect = 0;			/* Invalidate current data sector */
 5524              		.loc 1 3465 12 is_stmt 0 view .LVU1810
 5525 018e 7175     		strb	r1, [r6, #21]
3466:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = 0;			/* Set file pointer top of the file */
 5526              		.loc 1 3466 4 is_stmt 1 view .LVU1811
3466:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = 0;			/* Set file pointer top of the file */
 5527              		.loc 1 3466 13 is_stmt 0 view .LVU1812
 5528 0190 3162     		str	r1, [r6, #32]
3467:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 5529              		.loc 1 3467 4 is_stmt 1 view .LVU1813
3467:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 5530              		.loc 1 3467 13 is_stmt 0 view .LVU1814
 5531 0192 B161     		str	r1, [r6, #24]
3470:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5532              		.loc 1 3470 4 is_stmt 1 view .LVU1815
3470:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5533              		.loc 1 3470 14 is_stmt 0 view .LVU1816
 5534 0194 06F13008 		add	r8, r6, #48
3470:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5535              		.loc 1 3470 4 view .LVU1817
 5536 0198 4FF40072 		mov	r2, #512
 5537 019c 4046     		mov	r0, r8
 5538 019e FFF7FEFF 		bl	mem_set
 5539              	.LVL648:
3472:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = fp->obj.objsize;			/* Offset to seek */
 5540              		.loc 1 3472 4 is_stmt 1 view .LVU1818
3472:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = fp->obj.objsize;			/* Offset to seek */
 5541              		.loc 1 3472 7 is_stmt 0 view .LVU1819
 5542 01a2 17F0200F 		tst	r7, #32
 5543 01a6 3FF43DAF 		beq	.L388
3472:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = fp->obj.objsize;			/* Offset to seek */
 5544              		.loc 1 3472 38 discriminator 1 view .LVU1820
 5545 01aa F568     		ldr	r5, [r6, #12]
3472:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = fp->obj.objsize;			/* Offset to seek */
 5546              		.loc 1 3472 28 discriminator 1 view .LVU1821
 5547 01ac 002D     		cmp	r5, #0
 5548 01ae 3FF439AF 		beq	.L388
3473:Middlewares/Third_Party/FatFs/src/ff.c **** 				bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size in byte */
 5549              		.loc 1 3473 5 is_stmt 1 view .LVU1822
3473:Middlewares/Third_Party/FatFs/src/ff.c **** 				bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size in byte */
 5550              		.loc 1 3473 14 is_stmt 0 view .LVU1823
 5551 01b2 B561     		str	r5, [r6, #24]
3474:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->obj.sclust;				/* Follow the cluster chain */
 5552              		.loc 1 3474 5 is_stmt 1 view .LVU1824
3474:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->obj.sclust;				/* Follow the cluster chain */
 5553              		.loc 1 3474 20 is_stmt 0 view .LVU1825
 5554 01b4 039B     		ldr	r3, [sp, #12]
 5555 01b6 5F89     		ldrh	r7, [r3, #10]
ARM GAS  /tmp/ccWTW02a.s 			page 228


 5556              	.LVL649:
3474:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->obj.sclust;				/* Follow the cluster chain */
 5557              		.loc 1 3474 9 view .LVU1826
 5558 01b8 7F02     		lsls	r7, r7, #9
 5559              	.LVL650:
3475:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (ofs = fp->obj.objsize; res == FR_OK && ofs > bcs; ofs -= bcs) {
 5560              		.loc 1 3475 5 is_stmt 1 view .LVU1827
3475:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (ofs = fp->obj.objsize; res == FR_OK && ofs > bcs; ofs -= bcs) {
 5561              		.loc 1 3475 10 is_stmt 0 view .LVU1828
 5562 01ba B168     		ldr	r1, [r6, #8]
 5563              	.LVL651:
3476:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = get_fat(&fp->obj, clst);
 5564              		.loc 1 3476 5 is_stmt 1 view .LVU1829
3476:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = get_fat(&fp->obj, clst);
 5565              		.loc 1 3476 5 is_stmt 0 view .LVU1830
 5566 01bc 05E0     		b	.L397
 5567              	.LVL652:
 5568              	.L407:
3414:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
 5569              		.loc 1 3414 10 view .LVU1831
 5570 01be 0424     		movs	r4, #4
 5571              	.LVL653:
3414:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
 5572              		.loc 1 3414 10 view .LVU1832
 5573 01c0 CFE7     		b	.L395
 5574              	.LVL654:
 5575              	.L398:
3479:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5576              		.loc 1 3479 6 is_stmt 1 view .LVU1833
3479:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5577              		.loc 1 3479 9 is_stmt 0 view .LVU1834
 5578 01c2 B1F1FF3F 		cmp	r1, #-1
 5579 01c6 10D0     		beq	.L418
 5580              	.LVL655:
 5581              	.L399:
3476:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = get_fat(&fp->obj, clst);
 5582              		.loc 1 3476 60 is_stmt 1 discriminator 2 view .LVU1835
3476:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = get_fat(&fp->obj, clst);
 5583              		.loc 1 3476 64 is_stmt 0 discriminator 2 view .LVU1836
 5584 01c8 ED1B     		subs	r5, r5, r7
 5585              	.LVL656:
 5586              	.L397:
3476:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = get_fat(&fp->obj, clst);
 5587              		.loc 1 3476 33 is_stmt 1 discriminator 1 view .LVU1837
3476:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = get_fat(&fp->obj, clst);
 5588              		.loc 1 3476 53 is_stmt 0 discriminator 1 view .LVU1838
 5589 01ca BD42     		cmp	r5, r7
 5590 01cc 94BF     		ite	ls
 5591 01ce 0023     		movls	r3, #0
 5592 01d0 0123     		movhi	r3, #1
3476:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = get_fat(&fp->obj, clst);
 5593              		.loc 1 3476 46 discriminator 1 view .LVU1839
 5594 01d2 002C     		cmp	r4, #0
 5595 01d4 18BF     		it	ne
 5596 01d6 0023     		movne	r3, #0
3476:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = get_fat(&fp->obj, clst);
 5597              		.loc 1 3476 5 discriminator 1 view .LVU1840
ARM GAS  /tmp/ccWTW02a.s 			page 229


 5598 01d8 4BB1     		cbz	r3, .L419
3477:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1) res = FR_INT_ERR;
 5599              		.loc 1 3477 6 is_stmt 1 view .LVU1841
3477:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1) res = FR_INT_ERR;
 5600              		.loc 1 3477 13 is_stmt 0 view .LVU1842
 5601 01da 3046     		mov	r0, r6
 5602 01dc FFF7FEFF 		bl	get_fat
 5603              	.LVL657:
3477:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1) res = FR_INT_ERR;
 5604              		.loc 1 3477 13 view .LVU1843
 5605 01e0 0146     		mov	r1, r0
 5606              	.LVL658:
3478:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) res = FR_DISK_ERR;
 5607              		.loc 1 3478 6 is_stmt 1 view .LVU1844
3478:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) res = FR_DISK_ERR;
 5608              		.loc 1 3478 9 is_stmt 0 view .LVU1845
 5609 01e2 0128     		cmp	r0, #1
 5610 01e4 EDD8     		bhi	.L398
3478:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) res = FR_DISK_ERR;
 5611              		.loc 1 3478 25 view .LVU1846
 5612 01e6 0224     		movs	r4, #2
 5613              	.LVL659:
3478:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) res = FR_DISK_ERR;
 5614              		.loc 1 3478 25 view .LVU1847
 5615 01e8 EBE7     		b	.L398
 5616              	.LVL660:
 5617              	.L418:
3479:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5618              		.loc 1 3479 34 view .LVU1848
 5619 01ea 0124     		movs	r4, #1
 5620              	.LVL661:
3479:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5621              		.loc 1 3479 34 view .LVU1849
 5622 01ec ECE7     		b	.L399
 5623              	.LVL662:
 5624              	.L419:
3481:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && ofs % SS(fs)) {	/* Fill sector buffer if not on the sector boundary */
 5625              		.loc 1 3481 5 is_stmt 1 view .LVU1850
3481:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && ofs % SS(fs)) {	/* Fill sector buffer if not on the sector boundary */
 5626              		.loc 1 3481 15 is_stmt 0 view .LVU1851
 5627 01ee F161     		str	r1, [r6, #28]
3482:Middlewares/Third_Party/FatFs/src/ff.c **** 					if ((sc = clust2sect(fs, clst)) == 0) {
 5628              		.loc 1 3482 5 is_stmt 1 view .LVU1852
3482:Middlewares/Third_Party/FatFs/src/ff.c **** 					if ((sc = clust2sect(fs, clst)) == 0) {
 5629              		.loc 1 3482 8 is_stmt 0 view .LVU1853
 5630 01f0 002C     		cmp	r4, #0
 5631 01f2 7FF417AF 		bne	.L388
3482:Middlewares/Third_Party/FatFs/src/ff.c **** 					if ((sc = clust2sect(fs, clst)) == 0) {
 5632              		.loc 1 3482 29 discriminator 1 view .LVU1854
 5633 01f6 C5F30803 		ubfx	r3, r5, #0, #9
3482:Middlewares/Third_Party/FatFs/src/ff.c **** 					if ((sc = clust2sect(fs, clst)) == 0) {
 5634              		.loc 1 3482 22 discriminator 1 view .LVU1855
 5635 01fa 002B     		cmp	r3, #0
 5636 01fc 3FF412AF 		beq	.L388
3483:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_INT_ERR;
 5637              		.loc 1 3483 6 is_stmt 1 view .LVU1856
3483:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_INT_ERR;
ARM GAS  /tmp/ccWTW02a.s 			page 230


 5638              		.loc 1 3483 16 is_stmt 0 view .LVU1857
 5639 0200 039F     		ldr	r7, [sp, #12]
 5640              	.LVL663:
3483:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_INT_ERR;
 5641              		.loc 1 3483 16 view .LVU1858
 5642 0202 3846     		mov	r0, r7
 5643 0204 FFF7FEFF 		bl	clust2sect
 5644              	.LVL664:
3483:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_INT_ERR;
 5645              		.loc 1 3483 9 view .LVU1859
 5646 0208 08B9     		cbnz	r0, .L420
3484:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
 5647              		.loc 1 3484 11 view .LVU1860
 5648 020a 0224     		movs	r4, #2
 5649              	.LVL665:
3484:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
 5650              		.loc 1 3484 11 view .LVU1861
 5651 020c 0BE7     		b	.L401
 5652              	.LVL666:
 5653              	.L420:
3486:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 5654              		.loc 1 3486 7 is_stmt 1 view .LVU1862
3486:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 5655              		.loc 1 3486 21 is_stmt 0 view .LVU1863
 5656 020e 00EB5522 		add	r2, r0, r5, lsr #9
3486:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 5657              		.loc 1 3486 16 view .LVU1864
 5658 0212 3262     		str	r2, [r6, #32]
3488:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5659              		.loc 1 3488 7 is_stmt 1 view .LVU1865
3488:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5660              		.loc 1 3488 11 is_stmt 0 view .LVU1866
 5661 0214 0123     		movs	r3, #1
 5662 0216 4146     		mov	r1, r8
 5663 0218 7878     		ldrb	r0, [r7, #1]	@ zero_extendqisi2
 5664              	.LVL667:
3488:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5665              		.loc 1 3488 11 view .LVU1867
 5666 021a FFF7FEFF 		bl	disk_read
 5667              	.LVL668:
3488:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5668              		.loc 1 3488 10 view .LVU1868
 5669 021e 0028     		cmp	r0, #0
 5670 0220 3FF400AF 		beq	.L388
3488:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5671              		.loc 1 3488 67 view .LVU1869
 5672 0224 0124     		movs	r4, #1
 5673              	.LVL669:
3488:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5674              		.loc 1 3488 67 view .LVU1870
 5675 0226 FEE6     		b	.L401
 5676              	.LVL670:
 5677              	.L409:
3429:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5678              		.loc 1 3429 29 view .LVU1871
 5679 0228 0224     		movs	r4, #2
 5680              	.LVL671:
ARM GAS  /tmp/ccWTW02a.s 			page 231


3429:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5681              		.loc 1 3429 29 view .LVU1872
 5682 022a FBE6     		b	.L388
 5683              	.LVL672:
 5684              	.L402:
3324:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5685              		.loc 1 3324 18 view .LVU1873
 5686 022c 0924     		movs	r4, #9
 5687 022e FCE6     		b	.L387
 5688              		.cfi_endproc
 5689              	.LFE180:
 5691              		.section	.text.f_read,"ax",%progbits
 5692              		.align	1
 5693              		.global	f_read
 5694              		.syntax unified
 5695              		.thumb
 5696              		.thumb_func
 5697              		.fpu fpv5-d16
 5699              	f_read:
 5700              	.LVL673:
 5701              	.LFB181:
3517:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 5702              		.loc 1 3517 1 is_stmt 1 view -0
 5703              		.cfi_startproc
 5704              		@ args = 0, pretend = 0, frame = 16
 5705              		@ frame_needed = 0, uses_anonymous_args = 0
3517:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 5706              		.loc 1 3517 1 is_stmt 0 view .LVU1875
 5707 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 5708              	.LCFI50:
 5709              		.cfi_def_cfa_offset 36
 5710              		.cfi_offset 4, -36
 5711              		.cfi_offset 5, -32
 5712              		.cfi_offset 6, -28
 5713              		.cfi_offset 7, -24
 5714              		.cfi_offset 8, -20
 5715              		.cfi_offset 9, -16
 5716              		.cfi_offset 10, -12
 5717              		.cfi_offset 11, -8
 5718              		.cfi_offset 14, -4
 5719 0004 85B0     		sub	sp, sp, #20
 5720              	.LCFI51:
 5721              		.cfi_def_cfa_offset 56
 5722 0006 0446     		mov	r4, r0
 5723 0008 0E46     		mov	r6, r1
 5724 000a 1746     		mov	r7, r2
 5725 000c 9846     		mov	r8, r3
3518:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 5726              		.loc 1 3518 2 is_stmt 1 view .LVU1876
3519:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, sect;
 5727              		.loc 1 3519 2 view .LVU1877
3520:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t remain;
 5728              		.loc 1 3520 2 view .LVU1878
3521:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT rcnt, cc, csect;
 5729              		.loc 1 3521 2 view .LVU1879
3522:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *rbuff = (BYTE*)buff;
 5730              		.loc 1 3522 2 view .LVU1880
ARM GAS  /tmp/ccWTW02a.s 			page 232


3523:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5731              		.loc 1 3523 2 view .LVU1881
 5732              	.LVL674:
3526:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);				/* Check validity of the file object */
 5733              		.loc 1 3526 2 view .LVU1882
3526:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);				/* Check validity of the file object */
 5734              		.loc 1 3526 6 is_stmt 0 view .LVU1883
 5735 000e 0023     		movs	r3, #0
 5736              	.LVL675:
3526:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);				/* Check validity of the file object */
 5737              		.loc 1 3526 6 view .LVU1884
 5738 0010 C8F80030 		str	r3, [r8]
3527:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 5739              		.loc 1 3527 2 is_stmt 1 view .LVU1885
3527:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 5740              		.loc 1 3527 8 is_stmt 0 view .LVU1886
 5741 0014 0190     		str	r0, [sp, #4]
 5742 0016 03A9     		add	r1, sp, #12
 5743              	.LVL676:
3527:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 5744              		.loc 1 3527 8 view .LVU1887
 5745 0018 FFF7FEFF 		bl	validate
 5746              	.LVL677:
3528:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
 5747              		.loc 1 3528 2 is_stmt 1 view .LVU1888
3528:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
 5748              		.loc 1 3528 5 is_stmt 0 view .LVU1889
 5749 001c 0090     		str	r0, [sp]
 5750 001e 0028     		cmp	r0, #0
 5751 0020 40F0AE80 		bne	.L424
3528:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
 5752              		.loc 1 3528 27 discriminator 2 view .LVU1890
 5753 0024 637D     		ldrb	r3, [r4, #21]	@ zero_extendqisi2
 5754 0026 0093     		str	r3, [sp]
 5755              	.LVL678:
3528:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
 5756              		.loc 1 3528 19 discriminator 2 view .LVU1891
 5757 0028 002B     		cmp	r3, #0
 5758 002a 40F0A980 		bne	.L424
3529:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 5759              		.loc 1 3529 2 is_stmt 1 view .LVU1892
3529:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 5760              		.loc 1 3529 10 is_stmt 0 view .LVU1893
 5761 002e 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 5762              	.LVL679:
3529:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 5763              		.loc 1 3529 5 view .LVU1894
 5764 0030 13F0010F 		tst	r3, #1
 5765 0034 00F0C380 		beq	.L446
3530:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
 5766              		.loc 1 3530 2 is_stmt 1 view .LVU1895
3530:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
 5767              		.loc 1 3530 18 is_stmt 0 view .LVU1896
 5768 0038 E568     		ldr	r5, [r4, #12]
3530:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
 5769              		.loc 1 3530 31 view .LVU1897
 5770 003a A369     		ldr	r3, [r4, #24]
ARM GAS  /tmp/ccWTW02a.s 			page 233


3530:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
 5771              		.loc 1 3530 9 view .LVU1898
 5772 003c ED1A     		subs	r5, r5, r3
 5773              	.LVL680:
3531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5774              		.loc 1 3531 2 is_stmt 1 view .LVU1899
3531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5775              		.loc 1 3531 5 is_stmt 0 view .LVU1900
 5776 003e BD42     		cmp	r5, r7
 5777 0040 62D3     		bcc	.L444
 5778 0042 3D46     		mov	r5, r7
 5779              	.LVL681:
3531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5780              		.loc 1 3531 5 view .LVU1901
 5781 0044 60E0     		b	.L444
 5782              	.LVL682:
 5783              	.L429:
3542:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
 5784              		.loc 1 3542 6 is_stmt 1 view .LVU1902
3542:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
 5785              		.loc 1 3542 12 is_stmt 0 view .LVU1903
 5786 0046 E36A     		ldr	r3, [r4, #44]
3542:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
 5787              		.loc 1 3542 9 view .LVU1904
 5788 0048 1BB1     		cbz	r3, .L431
3543:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
 5789              		.loc 1 3543 7 is_stmt 1 view .LVU1905
3543:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
 5790              		.loc 1 3543 14 is_stmt 0 view .LVU1906
 5791 004a 2046     		mov	r0, r4
 5792 004c FFF7FEFF 		bl	clmt_clust
 5793              	.LVL683:
3543:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
 5794              		.loc 1 3543 14 view .LVU1907
 5795 0050 6AE0     		b	.L430
 5796              	.LVL684:
 5797              	.L431:
3547:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 5798              		.loc 1 3547 7 is_stmt 1 view .LVU1908
3547:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 5799              		.loc 1 3547 14 is_stmt 0 view .LVU1909
 5800 0052 E169     		ldr	r1, [r4, #28]
 5801 0054 0198     		ldr	r0, [sp, #4]
 5802 0056 FFF7FEFF 		bl	get_fat
 5803              	.LVL685:
3547:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 5804              		.loc 1 3547 14 view .LVU1910
 5805 005a 65E0     		b	.L430
 5806              	.L453:
3550:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 5807              		.loc 1 3550 19 is_stmt 1 discriminator 1 view .LVU1911
 5808 005c 4FF0020A 		mov	r10, #2
 5809 0060 84F815A0 		strb	r10, [r4, #21]
3550:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 5810              		.loc 1 3550 19 discriminator 1 view .LVU1912
 5811 0064 CDF800A0 		str	r10, [sp]
 5812              	.LVL686:
ARM GAS  /tmp/ccWTW02a.s 			page 234


3550:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 5813              		.loc 1 3550 19 is_stmt 0 discriminator 1 view .LVU1913
 5814 0068 8AE0     		b	.L424
 5815              	.LVL687:
 5816              	.L454:
3551:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 5817              		.loc 1 3551 29 is_stmt 1 discriminator 1 view .LVU1914
 5818 006a 4FF0010A 		mov	r10, #1
 5819 006e 84F815A0 		strb	r10, [r4, #21]
3551:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 5820              		.loc 1 3551 29 discriminator 1 view .LVU1915
 5821 0072 CDF800A0 		str	r10, [sp]
 5822              	.LVL688:
3551:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 5823              		.loc 1 3551 29 is_stmt 0 discriminator 1 view .LVU1916
 5824 0076 83E0     		b	.L424
 5825              	.LVL689:
 5826              	.L455:
3555:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 5827              		.loc 1 3555 15 is_stmt 1 discriminator 1 view .LVU1917
 5828 0078 4FF0020A 		mov	r10, #2
 5829 007c 84F815A0 		strb	r10, [r4, #21]
3555:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 5830              		.loc 1 3555 15 discriminator 1 view .LVU1918
 5831 0080 CDF800A0 		str	r10, [sp]
 5832              	.LVL690:
3555:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 5833              		.loc 1 3555 15 is_stmt 0 discriminator 1 view .LVU1919
 5834 0084 7CE0     		b	.L424
 5835              	.LVL691:
 5836              	.L437:
3562:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 5837              		.loc 1 3562 78 is_stmt 1 discriminator 2 view .LVU1920
3569:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 5838              		.loc 1 3569 5 discriminator 2 view .LVU1921
3569:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 5839              		.loc 1 3569 9 is_stmt 0 discriminator 2 view .LVU1922
 5840 0086 94F91430 		ldrsb	r3, [r4, #20]
3569:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 5841              		.loc 1 3569 8 discriminator 2 view .LVU1923
 5842 008a 002B     		cmp	r3, #0
 5843 008c 02DB     		blt	.L450
 5844              	.L438:
3574:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
 5845              		.loc 1 3574 5 is_stmt 1 view .LVU1924
3574:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
 5846              		.loc 1 3574 10 is_stmt 0 view .LVU1925
 5847 008e 4FEA4A27 		lsl	r7, r10, #9
 5848              	.LVL692:
3575:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5849              		.loc 1 3575 5 is_stmt 1 view .LVU1926
 5850 0092 2FE0     		b	.L439
 5851              	.LVL693:
 5852              	.L450:
3569:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 5853              		.loc 1 3569 36 is_stmt 0 discriminator 1 view .LVU1927
 5854 0094 206A     		ldr	r0, [r4, #32]
ARM GAS  /tmp/ccWTW02a.s 			page 235


3569:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 5855              		.loc 1 3569 43 discriminator 1 view .LVU1928
 5856 0096 A0EB0900 		sub	r0, r0, r9
3569:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 5857              		.loc 1 3569 31 discriminator 1 view .LVU1929
 5858 009a 5045     		cmp	r0, r10
 5859 009c F7D2     		bcs	.L438
3570:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5860              		.loc 1 3570 6 is_stmt 1 view .LVU1930
 5861 009e 4FF40072 		mov	r2, #512
 5862 00a2 04F13001 		add	r1, r4, #48
 5863 00a6 06EB4020 		add	r0, r6, r0, lsl #9
 5864 00aa FFF7FEFF 		bl	mem_cpy
 5865              	.LVL694:
 5866 00ae EEE7     		b	.L438
 5867              	.L435:
3578:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 5868              		.loc 1 3578 4 view .LVU1931
3578:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 5869              		.loc 1 3578 10 is_stmt 0 view .LVU1932
 5870 00b0 226A     		ldr	r2, [r4, #32]
3578:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 5871              		.loc 1 3578 7 view .LVU1933
 5872 00b2 4A45     		cmp	r2, r9
 5873 00b4 0DD0     		beq	.L440
3580:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 5874              		.loc 1 3580 5 is_stmt 1 view .LVU1934
3580:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 5875              		.loc 1 3580 9 is_stmt 0 view .LVU1935
 5876 00b6 94F91430 		ldrsb	r3, [r4, #20]
3580:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 5877              		.loc 1 3580 8 view .LVU1936
 5878 00ba 002B     		cmp	r3, #0
 5879 00bc 64DB     		blt	.L451
 5880              	.L441:
3585:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5881              		.loc 1 3585 5 is_stmt 1 view .LVU1937
3585:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5882              		.loc 1 3585 9 is_stmt 0 view .LVU1938
 5883 00be 0123     		movs	r3, #1
 5884 00c0 4A46     		mov	r2, r9
 5885 00c2 04F13001 		add	r1, r4, #48
 5886 00c6 0398     		ldr	r0, [sp, #12]
 5887 00c8 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 5888 00ca FFF7FEFF 		bl	disk_read
 5889              	.LVL695:
3585:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5890              		.loc 1 3585 8 view .LVU1939
 5891 00ce 0028     		cmp	r0, #0
 5892 00d0 6ED1     		bne	.L452
 5893              	.L440:
3585:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5894              		.loc 1 3585 79 is_stmt 1 discriminator 2 view .LVU1940
3588:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 5895              		.loc 1 3588 4 discriminator 2 view .LVU1941
3588:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 5896              		.loc 1 3588 13 is_stmt 0 discriminator 2 view .LVU1942
ARM GAS  /tmp/ccWTW02a.s 			page 236


 5897 00d2 C4F82090 		str	r9, [r4, #32]
 5898              	.LVL696:
 5899              	.L427:
3590:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
 5900              		.loc 1 3590 3 is_stmt 1 view .LVU1943
3590:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
 5901              		.loc 1 3590 27 is_stmt 0 view .LVU1944
 5902 00d6 A369     		ldr	r3, [r4, #24]
3590:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
 5903              		.loc 1 3590 34 view .LVU1945
 5904 00d8 C3F30803 		ubfx	r3, r3, #0, #9
3590:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
 5905              		.loc 1 3590 8 view .LVU1946
 5906 00dc C3F50077 		rsb	r7, r3, #512
 5907              	.LVL697:
3591:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
 5908              		.loc 1 3591 3 is_stmt 1 view .LVU1947
3591:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
 5909              		.loc 1 3591 6 is_stmt 0 view .LVU1948
 5910 00e0 BD42     		cmp	r5, r7
 5911 00e2 00D2     		bcs	.L443
3591:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
 5912              		.loc 1 3591 24 view .LVU1949
 5913 00e4 2F46     		mov	r7, r5
 5914              	.LVL698:
 5915              	.L443:
3596:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5916              		.loc 1 3596 3 is_stmt 1 view .LVU1950
3596:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5917              		.loc 1 3596 18 is_stmt 0 view .LVU1951
 5918 00e6 04F13001 		add	r1, r4, #48
3596:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5919              		.loc 1 3596 3 view .LVU1952
 5920 00ea 3A46     		mov	r2, r7
 5921 00ec 1944     		add	r1, r1, r3
 5922 00ee 3046     		mov	r0, r6
 5923 00f0 FFF7FEFF 		bl	mem_cpy
 5924              	.LVL699:
 5925              	.L439:
3534:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 5926              		.loc 1 3534 3 is_stmt 1 view .LVU1953
3534:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 5927              		.loc 1 3534 9 is_stmt 0 view .LVU1954
 5928 00f4 3E44     		add	r6, r6, r7
 5929              	.LVL700:
3534:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 5930              		.loc 1 3534 27 view .LVU1955
 5931 00f6 A369     		ldr	r3, [r4, #24]
 5932 00f8 3B44     		add	r3, r3, r7
 5933 00fa A361     		str	r3, [r4, #24]
3534:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 5934              		.loc 1 3534 40 view .LVU1956
 5935 00fc D8F80030 		ldr	r3, [r8]
 5936 0100 3B44     		add	r3, r3, r7
 5937 0102 C8F80030 		str	r3, [r8]
3534:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 5938              		.loc 1 3534 53 view .LVU1957
ARM GAS  /tmp/ccWTW02a.s 			page 237


 5939 0106 ED1B     		subs	r5, r5, r7
 5940              	.LVL701:
 5941              	.L444:
3533:Middlewares/Third_Party/FatFs/src/ff.c **** 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
 5942              		.loc 1 3533 11 is_stmt 1 view .LVU1958
3533:Middlewares/Third_Party/FatFs/src/ff.c **** 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
 5943              		.loc 1 3533 2 is_stmt 0 view .LVU1959
 5944 0108 002D     		cmp	r5, #0
 5945 010a 39D0     		beq	.L424
3535:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
 5946              		.loc 1 3535 3 is_stmt 1 view .LVU1960
3535:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
 5947              		.loc 1 3535 9 is_stmt 0 view .LVU1961
 5948 010c A169     		ldr	r1, [r4, #24]
3535:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
 5949              		.loc 1 3535 16 view .LVU1962
 5950 010e C1F30803 		ubfx	r3, r1, #0, #9
3535:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
 5951              		.loc 1 3535 6 view .LVU1963
 5952 0112 002B     		cmp	r3, #0
 5953 0114 DFD1     		bne	.L427
3536:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (csect == 0) {					/* On the cluster boundary? */
 5954              		.loc 1 3536 4 is_stmt 1 view .LVU1964
3536:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (csect == 0) {					/* On the cluster boundary? */
 5955              		.loc 1 3536 42 is_stmt 0 view .LVU1965
 5956 0116 039B     		ldr	r3, [sp, #12]
 5957 0118 5F89     		ldrh	r7, [r3, #10]
3536:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (csect == 0) {					/* On the cluster boundary? */
 5958              		.loc 1 3536 50 view .LVU1966
 5959 011a 013F     		subs	r7, r7, #1
 5960              	.LVL702:
3537:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
 5961              		.loc 1 3537 4 is_stmt 1 view .LVU1967
3537:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
 5962              		.loc 1 3537 7 is_stmt 0 view .LVU1968
 5963 011c 17EA5127 		ands	r7, r7, r1, lsr #9
 5964              	.LVL703:
3537:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
 5965              		.loc 1 3537 7 view .LVU1969
 5966 0120 08D1     		bne	.L428
3538:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->obj.sclust;		/* Follow cluster chain from the origin */
 5967              		.loc 1 3538 5 is_stmt 1 view .LVU1970
3538:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->obj.sclust;		/* Follow cluster chain from the origin */
 5968              		.loc 1 3538 8 is_stmt 0 view .LVU1971
 5969 0122 0029     		cmp	r1, #0
 5970 0124 8FD1     		bne	.L429
3539:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {						/* Middle or end of the file */
 5971              		.loc 1 3539 6 is_stmt 1 view .LVU1972
3539:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {						/* Middle or end of the file */
 5972              		.loc 1 3539 11 is_stmt 0 view .LVU1973
 5973 0126 A068     		ldr	r0, [r4, #8]
 5974              	.LVL704:
 5975              	.L430:
3550:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 5976              		.loc 1 3550 5 is_stmt 1 view .LVU1974
3550:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 5977              		.loc 1 3550 8 is_stmt 0 view .LVU1975
ARM GAS  /tmp/ccWTW02a.s 			page 238


 5978 0128 0128     		cmp	r0, #1
 5979 012a 97D9     		bls	.L453
3550:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 5980              		.loc 1 3550 40 is_stmt 1 discriminator 2 view .LVU1976
3551:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 5981              		.loc 1 3551 5 discriminator 2 view .LVU1977
3551:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 5982              		.loc 1 3551 8 is_stmt 0 discriminator 2 view .LVU1978
 5983 012c B0F1FF3F 		cmp	r0, #-1
 5984 0130 9BD0     		beq	.L454
3551:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 5985              		.loc 1 3551 51 is_stmt 1 discriminator 2 view .LVU1979
3552:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5986              		.loc 1 3552 5 discriminator 2 view .LVU1980
3552:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5987              		.loc 1 3552 15 is_stmt 0 discriminator 2 view .LVU1981
 5988 0132 E061     		str	r0, [r4, #28]
 5989              	.LVL705:
 5990              	.L428:
3554:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!sect) ABORT(fs, FR_INT_ERR);
 5991              		.loc 1 3554 4 is_stmt 1 view .LVU1982
3554:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!sect) ABORT(fs, FR_INT_ERR);
 5992              		.loc 1 3554 11 is_stmt 0 view .LVU1983
 5993 0134 DDF80CB0 		ldr	fp, [sp, #12]
 5994 0138 E169     		ldr	r1, [r4, #28]
 5995 013a 5846     		mov	r0, fp
 5996 013c FFF7FEFF 		bl	clust2sect
 5997              	.LVL706:
3555:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 5998              		.loc 1 3555 4 is_stmt 1 view .LVU1984
3555:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 5999              		.loc 1 3555 7 is_stmt 0 view .LVU1985
 6000 0140 8146     		mov	r9, r0
 6001 0142 0028     		cmp	r0, #0
 6002 0144 98D0     		beq	.L455
3555:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6003              		.loc 1 3555 36 is_stmt 1 discriminator 2 view .LVU1986
3556:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btr / SS(fs);					/* When remaining bytes >= sector size, */
 6004              		.loc 1 3556 4 discriminator 2 view .LVU1987
3556:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btr / SS(fs);					/* When remaining bytes >= sector size, */
 6005              		.loc 1 3556 9 is_stmt 0 discriminator 2 view .LVU1988
 6006 0146 B944     		add	r9, r9, r7
 6007              	.LVL707:
3557:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cc) {							/* Read maximum contiguous sectors directly */
 6008              		.loc 1 3557 4 is_stmt 1 discriminator 2 view .LVU1989
3557:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cc) {							/* Read maximum contiguous sectors directly */
 6009              		.loc 1 3557 7 is_stmt 0 discriminator 2 view .LVU1990
 6010 0148 4FEA552A 		lsr	r10, r5, #9
 6011              	.LVL708:
3558:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
 6012              		.loc 1 3558 4 is_stmt 1 discriminator 2 view .LVU1991
3558:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
 6013              		.loc 1 3558 7 is_stmt 0 discriminator 2 view .LVU1992
 6014 014c B5F5007F 		cmp	r5, #512
 6015 0150 AED3     		bcc	.L435
3559:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
 6016              		.loc 1 3559 5 is_stmt 1 view .LVU1993
ARM GAS  /tmp/ccWTW02a.s 			page 239


3559:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
 6017              		.loc 1 3559 15 is_stmt 0 view .LVU1994
 6018 0152 07EB0A03 		add	r3, r7, r10
3559:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
 6019              		.loc 1 3559 24 view .LVU1995
 6020 0156 BBF80A20 		ldrh	r2, [fp, #10]
3559:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
 6021              		.loc 1 3559 8 view .LVU1996
 6022 015a 9342     		cmp	r3, r2
 6023 015c 01D9     		bls	.L436
3560:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6024              		.loc 1 3560 6 is_stmt 1 view .LVU1997
3560:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6025              		.loc 1 3560 9 is_stmt 0 view .LVU1998
 6026 015e A2EB070A 		sub	r10, r2, r7
 6027              	.LVL709:
 6028              	.L436:
3562:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 6029              		.loc 1 3562 5 is_stmt 1 view .LVU1999
3562:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 6030              		.loc 1 3562 9 is_stmt 0 view .LVU2000
 6031 0162 5346     		mov	r3, r10
 6032 0164 4A46     		mov	r2, r9
 6033 0166 3146     		mov	r1, r6
 6034 0168 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 6035 016c FFF7FEFF 		bl	disk_read
 6036              	.LVL710:
3562:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 6037              		.loc 1 3562 8 view .LVU2001
 6038 0170 0028     		cmp	r0, #0
 6039 0172 88D0     		beq	.L437
3562:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 6040              		.loc 1 3562 56 is_stmt 1 discriminator 1 view .LVU2002
 6041 0174 4FF0010A 		mov	r10, #1
 6042              	.LVL711:
3562:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 6043              		.loc 1 3562 56 is_stmt 0 discriminator 1 view .LVU2003
 6044 0178 84F815A0 		strb	r10, [r4, #21]
3562:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 6045              		.loc 1 3562 56 is_stmt 1 discriminator 1 view .LVU2004
 6046 017c CDF800A0 		str	r10, [sp]
 6047              	.LVL712:
 6048              	.L424:
3601:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6049              		.loc 1 3601 1 is_stmt 0 view .LVU2005
 6050 0180 0098     		ldr	r0, [sp]
 6051 0182 05B0     		add	sp, sp, #20
 6052              	.LCFI52:
 6053              		.cfi_remember_state
 6054              		.cfi_def_cfa_offset 36
 6055              		@ sp needed
 6056 0184 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 6057              	.LVL713:
 6058              	.L451:
 6059              	.LCFI53:
 6060              		.cfi_restore_state
3581:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
ARM GAS  /tmp/ccWTW02a.s 			page 240


 6061              		.loc 1 3581 6 is_stmt 1 view .LVU2006
3581:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 6062              		.loc 1 3581 10 is_stmt 0 view .LVU2007
 6063 0188 0123     		movs	r3, #1
 6064 018a 04F13001 		add	r1, r4, #48
 6065 018e 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 6066 0192 FFF7FEFF 		bl	disk_write
 6067              	.LVL714:
3581:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 6068              		.loc 1 3581 9 view .LVU2008
 6069 0196 20B9     		cbnz	r0, .L456
3581:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 6070              		.loc 1 3581 85 is_stmt 1 discriminator 2 view .LVU2009
3582:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6071              		.loc 1 3582 6 discriminator 2 view .LVU2010
3582:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6072              		.loc 1 3582 15 is_stmt 0 discriminator 2 view .LVU2011
 6073 0198 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 6074 019a 03F07F03 		and	r3, r3, #127
 6075 019e 2375     		strb	r3, [r4, #20]
 6076 01a0 8DE7     		b	.L441
 6077              	.L456:
3581:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 6078              		.loc 1 3581 63 is_stmt 1 discriminator 1 view .LVU2012
 6079 01a2 4FF0010A 		mov	r10, #1
 6080              	.LVL715:
3581:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 6081              		.loc 1 3581 63 is_stmt 0 discriminator 1 view .LVU2013
 6082 01a6 84F815A0 		strb	r10, [r4, #21]
3581:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 6083              		.loc 1 3581 63 is_stmt 1 discriminator 1 view .LVU2014
 6084 01aa CDF800A0 		str	r10, [sp]
 6085              	.LVL716:
3581:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 6086              		.loc 1 3581 63 is_stmt 0 discriminator 1 view .LVU2015
 6087 01ae E7E7     		b	.L424
 6088              	.LVL717:
 6089              	.L452:
3585:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6090              		.loc 1 3585 57 is_stmt 1 discriminator 1 view .LVU2016
 6091 01b0 4FF0010A 		mov	r10, #1
 6092              	.LVL718:
3585:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6093              		.loc 1 3585 57 is_stmt 0 discriminator 1 view .LVU2017
 6094 01b4 84F815A0 		strb	r10, [r4, #21]
3585:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6095              		.loc 1 3585 57 is_stmt 1 discriminator 1 view .LVU2018
 6096 01b8 CDF800A0 		str	r10, [sp]
 6097              	.LVL719:
3585:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6098              		.loc 1 3585 57 is_stmt 0 discriminator 1 view .LVU2019
 6099 01bc E0E7     		b	.L424
 6100              	.LVL720:
 6101              	.L446:
3529:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 6102              		.loc 1 3529 29 view .LVU2020
 6103 01be 0723     		movs	r3, #7
ARM GAS  /tmp/ccWTW02a.s 			page 241


 6104 01c0 0093     		str	r3, [sp]
 6105              	.LVL721:
3529:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 6106              		.loc 1 3529 29 view .LVU2021
 6107 01c2 DDE7     		b	.L424
 6108              		.cfi_endproc
 6109              	.LFE181:
 6111              		.section	.text.f_write,"ax",%progbits
 6112              		.align	1
 6113              		.global	f_write
 6114              		.syntax unified
 6115              		.thumb
 6116              		.thumb_func
 6117              		.fpu fpv5-d16
 6119              	f_write:
 6120              	.LVL722:
 6121              	.LFB182:
3617:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6122              		.loc 1 3617 1 is_stmt 1 view -0
 6123              		.cfi_startproc
 6124              		@ args = 0, pretend = 0, frame = 16
 6125              		@ frame_needed = 0, uses_anonymous_args = 0
3617:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6126              		.loc 1 3617 1 is_stmt 0 view .LVU2023
 6127 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 6128              	.LCFI54:
 6129              		.cfi_def_cfa_offset 36
 6130              		.cfi_offset 4, -36
 6131              		.cfi_offset 5, -32
 6132              		.cfi_offset 6, -28
 6133              		.cfi_offset 7, -24
 6134              		.cfi_offset 8, -20
 6135              		.cfi_offset 9, -16
 6136              		.cfi_offset 10, -12
 6137              		.cfi_offset 11, -8
 6138              		.cfi_offset 14, -4
 6139 0004 85B0     		sub	sp, sp, #20
 6140              	.LCFI55:
 6141              		.cfi_def_cfa_offset 56
 6142 0006 0446     		mov	r4, r0
 6143 0008 0E46     		mov	r6, r1
 6144 000a 1546     		mov	r5, r2
 6145 000c 9846     		mov	r8, r3
3618:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 6146              		.loc 1 3618 2 is_stmt 1 view .LVU2024
3619:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, sect;
 6147              		.loc 1 3619 2 view .LVU2025
3620:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT wcnt, cc, csect;
 6148              		.loc 1 3620 2 view .LVU2026
3621:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE *wbuff = (const BYTE*)buff;
 6149              		.loc 1 3621 2 view .LVU2027
3622:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6150              		.loc 1 3622 2 view .LVU2028
 6151              	.LVL723:
3625:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);			/* Check validity of the file object */
 6152              		.loc 1 3625 2 view .LVU2029
3625:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);			/* Check validity of the file object */
ARM GAS  /tmp/ccWTW02a.s 			page 242


 6153              		.loc 1 3625 6 is_stmt 0 view .LVU2030
 6154 000e 0023     		movs	r3, #0
 6155              	.LVL724:
3625:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);			/* Check validity of the file object */
 6156              		.loc 1 3625 6 view .LVU2031
 6157 0010 C8F80030 		str	r3, [r8]
3626:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 6158              		.loc 1 3626 2 is_stmt 1 view .LVU2032
3626:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 6159              		.loc 1 3626 8 is_stmt 0 view .LVU2033
 6160 0014 0190     		str	r0, [sp, #4]
 6161 0016 03A9     		add	r1, sp, #12
 6162              	.LVL725:
3626:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 6163              		.loc 1 3626 8 view .LVU2034
 6164 0018 FFF7FEFF 		bl	validate
 6165              	.LVL726:
3627:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 6166              		.loc 1 3627 2 is_stmt 1 view .LVU2035
3627:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 6167              		.loc 1 3627 5 is_stmt 0 view .LVU2036
 6168 001c 0090     		str	r0, [sp]
 6169 001e 0028     		cmp	r0, #0
 6170 0020 4AD1     		bne	.L460
3627:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 6171              		.loc 1 3627 27 discriminator 2 view .LVU2037
 6172 0022 637D     		ldrb	r3, [r4, #21]	@ zero_extendqisi2
 6173 0024 0093     		str	r3, [sp]
 6174              	.LVL727:
3627:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 6175              		.loc 1 3627 19 discriminator 2 view .LVU2038
 6176 0026 002B     		cmp	r3, #0
 6177 0028 46D1     		bne	.L460
3628:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6178              		.loc 1 3628 2 is_stmt 1 view .LVU2039
3628:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6179              		.loc 1 3628 10 is_stmt 0 view .LVU2040
 6180 002a 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 6181              	.LVL728:
3628:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6182              		.loc 1 3628 5 view .LVU2041
 6183 002c 13F0020F 		tst	r3, #2
 6184 0030 00F0E380 		beq	.L482
3631:Middlewares/Third_Party/FatFs/src/ff.c **** 		btw = (UINT)(0xFFFFFFFF - (DWORD)fp->fptr);
 6185              		.loc 1 3631 2 is_stmt 1 view .LVU2042
3631:Middlewares/Third_Party/FatFs/src/ff.c **** 		btw = (UINT)(0xFFFFFFFF - (DWORD)fp->fptr);
 6186              		.loc 1 3631 59 is_stmt 0 view .LVU2043
 6187 0034 A369     		ldr	r3, [r4, #24]
3631:Middlewares/Third_Party/FatFs/src/ff.c **** 		btw = (UINT)(0xFFFFFFFF - (DWORD)fp->fptr);
 6188              		.loc 1 3631 5 view .LVU2044
 6189 0036 EB42     		cmn	r3, r5
 6190 0038 C0F0B180 		bcc	.L480
3632:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6191              		.loc 1 3632 3 is_stmt 1 view .LVU2045
3632:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6192              		.loc 1 3632 7 is_stmt 0 view .LVU2046
 6193 003c DD43     		mvns	r5, r3
ARM GAS  /tmp/ccWTW02a.s 			page 243


 6194              	.LVL729:
3632:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6195              		.loc 1 3632 7 view .LVU2047
 6196 003e AEE0     		b	.L480
 6197              	.LVL730:
 6198              	.L464:
3647:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
 6199              		.loc 1 3647 6 is_stmt 1 view .LVU2048
3647:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
 6200              		.loc 1 3647 12 is_stmt 0 view .LVU2049
 6201 0040 E36A     		ldr	r3, [r4, #44]
3647:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
 6202              		.loc 1 3647 9 view .LVU2050
 6203 0042 002B     		cmp	r3, #0
 6204 0044 3CD0     		beq	.L466
3648:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
 6205              		.loc 1 3648 7 is_stmt 1 view .LVU2051
3648:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
 6206              		.loc 1 3648 14 is_stmt 0 view .LVU2052
 6207 0046 2046     		mov	r0, r4
 6208 0048 FFF7FEFF 		bl	clmt_clust
 6209              	.LVL731:
 6210              	.L465:
3655:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 1) ABORT(fs, FR_INT_ERR);
 6211              		.loc 1 3655 5 is_stmt 1 view .LVU2053
3655:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 1) ABORT(fs, FR_INT_ERR);
 6212              		.loc 1 3655 8 is_stmt 0 view .LVU2054
 6213 004c 0028     		cmp	r0, #0
 6214 004e 00F0CF80 		beq	.L467
3656:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 6215              		.loc 1 3656 5 is_stmt 1 view .LVU2055
3656:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 6216              		.loc 1 3656 8 is_stmt 0 view .LVU2056
 6217 0052 0128     		cmp	r0, #1
 6218 0054 39D0     		beq	.L485
3656:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 6219              		.loc 1 3656 41 is_stmt 1 discriminator 2 view .LVU2057
3657:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 6220              		.loc 1 3657 5 discriminator 2 view .LVU2058
3657:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 6221              		.loc 1 3657 8 is_stmt 0 discriminator 2 view .LVU2059
 6222 0056 B0F1FF3F 		cmp	r0, #-1
 6223 005a 3DD0     		beq	.L486
3657:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 6224              		.loc 1 3657 51 is_stmt 1 discriminator 2 view .LVU2060
3658:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->obj.sclust == 0) fp->obj.sclust = clst;	/* Set start cluster if the first write */
 6225              		.loc 1 3658 5 discriminator 2 view .LVU2061
3658:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->obj.sclust == 0) fp->obj.sclust = clst;	/* Set start cluster if the first write */
 6226              		.loc 1 3658 15 is_stmt 0 discriminator 2 view .LVU2062
 6227 005c E061     		str	r0, [r4, #28]
3659:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6228              		.loc 1 3659 5 is_stmt 1 discriminator 2 view .LVU2063
3659:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6229              		.loc 1 3659 16 is_stmt 0 discriminator 2 view .LVU2064
 6230 005e A368     		ldr	r3, [r4, #8]
3659:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6231              		.loc 1 3659 8 discriminator 2 view .LVU2065
ARM GAS  /tmp/ccWTW02a.s 			page 244


 6232 0060 03B9     		cbnz	r3, .L463
3659:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6233              		.loc 1 3659 30 is_stmt 1 discriminator 1 view .LVU2066
3659:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6234              		.loc 1 3659 45 is_stmt 0 discriminator 1 view .LVU2067
 6235 0062 A060     		str	r0, [r4, #8]
 6236              	.LVL732:
 6237              	.L463:
3664:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 6238              		.loc 1 3664 4 is_stmt 1 view .LVU2068
3664:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 6239              		.loc 1 3664 8 is_stmt 0 view .LVU2069
 6240 0064 94F91430 		ldrsb	r3, [r4, #20]
3664:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 6241              		.loc 1 3664 7 view .LVU2070
 6242 0068 002B     		cmp	r3, #0
 6243 006a 3CDB     		blt	.L487
 6244              	.L470:
3669:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!sect) ABORT(fs, FR_INT_ERR);
 6245              		.loc 1 3669 4 is_stmt 1 view .LVU2071
3669:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!sect) ABORT(fs, FR_INT_ERR);
 6246              		.loc 1 3669 11 is_stmt 0 view .LVU2072
 6247 006c DDF80CB0 		ldr	fp, [sp, #12]
 6248 0070 E169     		ldr	r1, [r4, #28]
 6249 0072 5846     		mov	r0, fp
 6250 0074 FFF7FEFF 		bl	clust2sect
 6251              	.LVL733:
3670:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6252              		.loc 1 3670 4 is_stmt 1 view .LVU2073
3670:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6253              		.loc 1 3670 7 is_stmt 0 view .LVU2074
 6254 0078 8146     		mov	r9, r0
 6255 007a 0028     		cmp	r0, #0
 6256 007c 48D0     		beq	.L488
3670:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6257              		.loc 1 3670 36 is_stmt 1 discriminator 2 view .LVU2075
3671:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btw / SS(fs);				/* When remaining bytes >= sector size, */
 6258              		.loc 1 3671 4 discriminator 2 view .LVU2076
3671:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btw / SS(fs);				/* When remaining bytes >= sector size, */
 6259              		.loc 1 3671 9 is_stmt 0 discriminator 2 view .LVU2077
 6260 007e B944     		add	r9, r9, r7
 6261              	.LVL734:
3672:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cc) {						/* Write maximum contiguous sectors directly */
 6262              		.loc 1 3672 4 is_stmt 1 discriminator 2 view .LVU2078
3672:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cc) {						/* Write maximum contiguous sectors directly */
 6263              		.loc 1 3672 7 is_stmt 0 discriminator 2 view .LVU2079
 6264 0080 4FEA552A 		lsr	r10, r5, #9
 6265              	.LVL735:
3673:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
 6266              		.loc 1 3673 4 is_stmt 1 discriminator 2 view .LVU2080
3673:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
 6267              		.loc 1 3673 7 is_stmt 0 discriminator 2 view .LVU2081
 6268 0084 B5F5007F 		cmp	r5, #512
 6269 0088 5ED3     		bcc	.L473
3674:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
 6270              		.loc 1 3674 5 is_stmt 1 view .LVU2082
3674:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
ARM GAS  /tmp/ccWTW02a.s 			page 245


 6271              		.loc 1 3674 15 is_stmt 0 view .LVU2083
 6272 008a 07EB0A03 		add	r3, r7, r10
3674:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
 6273              		.loc 1 3674 24 view .LVU2084
 6274 008e BBF80A20 		ldrh	r2, [fp, #10]
3674:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
 6275              		.loc 1 3674 8 view .LVU2085
 6276 0092 9342     		cmp	r3, r2
 6277 0094 01D9     		bls	.L474
3675:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6278              		.loc 1 3675 6 is_stmt 1 view .LVU2086
3675:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6279              		.loc 1 3675 9 is_stmt 0 view .LVU2087
 6280 0096 A2EB070A 		sub	r10, r2, r7
 6281              	.LVL736:
 6282              	.L474:
3677:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
 6283              		.loc 1 3677 5 is_stmt 1 view .LVU2088
3677:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
 6284              		.loc 1 3677 9 is_stmt 0 view .LVU2089
 6285 009a 5346     		mov	r3, r10
 6286 009c 4A46     		mov	r2, r9
 6287 009e 3146     		mov	r1, r6
 6288 00a0 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 6289 00a4 FFF7FEFF 		bl	disk_write
 6290              	.LVL737:
3677:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
 6291              		.loc 1 3677 8 view .LVU2090
 6292 00a8 0028     		cmp	r0, #0
 6293 00aa 38D0     		beq	.L475
3677:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
 6294              		.loc 1 3677 57 is_stmt 1 discriminator 1 view .LVU2091
 6295 00ac 4FF0010A 		mov	r10, #1
 6296              	.LVL738:
3677:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
 6297              		.loc 1 3677 57 is_stmt 0 discriminator 1 view .LVU2092
 6298 00b0 84F815A0 		strb	r10, [r4, #21]
3677:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
 6299              		.loc 1 3677 57 is_stmt 1 discriminator 1 view .LVU2093
 6300 00b4 CDF800A0 		str	r10, [sp]
 6301              	.LVL739:
 6302              	.L460:
3723:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6303              		.loc 1 3723 1 is_stmt 0 view .LVU2094
 6304 00b8 0098     		ldr	r0, [sp]
 6305 00ba 05B0     		add	sp, sp, #20
 6306              	.LCFI56:
 6307              		.cfi_remember_state
 6308              		.cfi_def_cfa_offset 36
 6309              		@ sp needed
 6310 00bc BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 6311              	.LVL740:
 6312              	.L466:
 6313              	.LCFI57:
 6314              		.cfi_restore_state
3652:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6315              		.loc 1 3652 7 is_stmt 1 view .LVU2095
ARM GAS  /tmp/ccWTW02a.s 			page 246


3652:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6316              		.loc 1 3652 14 is_stmt 0 view .LVU2096
 6317 00c0 E169     		ldr	r1, [r4, #28]
 6318 00c2 0198     		ldr	r0, [sp, #4]
 6319 00c4 FFF7FEFF 		bl	create_chain
 6320              	.LVL741:
3652:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6321              		.loc 1 3652 14 view .LVU2097
 6322 00c8 C0E7     		b	.L465
 6323              	.L485:
3656:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 6324              		.loc 1 3656 20 is_stmt 1 discriminator 1 view .LVU2098
 6325 00ca 4FF0020A 		mov	r10, #2
 6326 00ce 84F815A0 		strb	r10, [r4, #21]
3656:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 6327              		.loc 1 3656 20 discriminator 1 view .LVU2099
 6328 00d2 CDF800A0 		str	r10, [sp]
 6329              	.LVL742:
3656:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 6330              		.loc 1 3656 20 is_stmt 0 discriminator 1 view .LVU2100
 6331 00d6 EFE7     		b	.L460
 6332              	.LVL743:
 6333              	.L486:
3657:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 6334              		.loc 1 3657 29 is_stmt 1 discriminator 1 view .LVU2101
 6335 00d8 4FF0010A 		mov	r10, #1
 6336 00dc 84F815A0 		strb	r10, [r4, #21]
3657:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 6337              		.loc 1 3657 29 discriminator 1 view .LVU2102
 6338 00e0 CDF800A0 		str	r10, [sp]
 6339              	.LVL744:
3657:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 6340              		.loc 1 3657 29 is_stmt 0 discriminator 1 view .LVU2103
 6341 00e4 E8E7     		b	.L460
 6342              	.LVL745:
 6343              	.L487:
3665:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 6344              		.loc 1 3665 5 is_stmt 1 view .LVU2104
3665:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 6345              		.loc 1 3665 9 is_stmt 0 view .LVU2105
 6346 00e6 0123     		movs	r3, #1
 6347 00e8 226A     		ldr	r2, [r4, #32]
 6348 00ea 04F13001 		add	r1, r4, #48
 6349 00ee 0398     		ldr	r0, [sp, #12]
 6350 00f0 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 6351 00f2 FFF7FEFF 		bl	disk_write
 6352              	.LVL746:
3665:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 6353              		.loc 1 3665 8 view .LVU2106
 6354 00f6 20B9     		cbnz	r0, .L489
3665:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 6355              		.loc 1 3665 84 is_stmt 1 discriminator 2 view .LVU2107
3666:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6356              		.loc 1 3666 5 discriminator 2 view .LVU2108
3666:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6357              		.loc 1 3666 14 is_stmt 0 discriminator 2 view .LVU2109
 6358 00f8 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
ARM GAS  /tmp/ccWTW02a.s 			page 247


 6359 00fa 03F07F03 		and	r3, r3, #127
 6360 00fe 2375     		strb	r3, [r4, #20]
 6361 0100 B4E7     		b	.L470
 6362              	.L489:
3665:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 6363              		.loc 1 3665 62 is_stmt 1 discriminator 1 view .LVU2110
 6364 0102 4FF0010A 		mov	r10, #1
 6365 0106 84F815A0 		strb	r10, [r4, #21]
3665:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 6366              		.loc 1 3665 62 discriminator 1 view .LVU2111
 6367 010a CDF800A0 		str	r10, [sp]
 6368              	.LVL747:
3665:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 6369              		.loc 1 3665 62 is_stmt 0 discriminator 1 view .LVU2112
 6370 010e D3E7     		b	.L460
 6371              	.LVL748:
 6372              	.L488:
3670:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6373              		.loc 1 3670 15 is_stmt 1 discriminator 1 view .LVU2113
 6374 0110 4FF0020A 		mov	r10, #2
 6375 0114 84F815A0 		strb	r10, [r4, #21]
3670:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6376              		.loc 1 3670 15 discriminator 1 view .LVU2114
 6377 0118 CDF800A0 		str	r10, [sp]
 6378              	.LVL749:
3670:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6379              		.loc 1 3670 15 is_stmt 0 discriminator 1 view .LVU2115
 6380 011c CCE7     		b	.L460
 6381              	.LVL750:
 6382              	.L475:
3677:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
 6383              		.loc 1 3677 79 is_stmt 1 discriminator 2 view .LVU2116
3685:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(fp->buf, wbuff + ((fp->sect - sect) * SS(fs)), SS(fs));
 6384              		.loc 1 3685 5 discriminator 2 view .LVU2117
3685:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(fp->buf, wbuff + ((fp->sect - sect) * SS(fs)), SS(fs));
 6385              		.loc 1 3685 11 is_stmt 0 discriminator 2 view .LVU2118
 6386 011e 216A     		ldr	r1, [r4, #32]
3685:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(fp->buf, wbuff + ((fp->sect - sect) * SS(fs)), SS(fs));
 6387              		.loc 1 3685 18 discriminator 2 view .LVU2119
 6388 0120 A1EB0901 		sub	r1, r1, r9
3685:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(fp->buf, wbuff + ((fp->sect - sect) * SS(fs)), SS(fs));
 6389              		.loc 1 3685 8 discriminator 2 view .LVU2120
 6390 0124 5145     		cmp	r1, r10
 6391 0126 02D3     		bcc	.L490
 6392              	.L476:
3691:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
 6393              		.loc 1 3691 5 is_stmt 1 view .LVU2121
3691:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
 6394              		.loc 1 3691 10 is_stmt 0 view .LVU2122
 6395 0128 4FEA4A27 		lsl	r7, r10, #9
 6396              	.LVL751:
3692:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6397              		.loc 1 3692 5 is_stmt 1 view .LVU2123
 6398 012c 28E0     		b	.L477
 6399              	.LVL752:
 6400              	.L490:
3686:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
ARM GAS  /tmp/ccWTW02a.s 			page 248


 6401              		.loc 1 3686 6 view .LVU2124
 6402 012e 4FF40072 		mov	r2, #512
 6403 0132 06EB4121 		add	r1, r6, r1, lsl #9
 6404 0136 04F13000 		add	r0, r4, #48
 6405 013a FFF7FEFF 		bl	mem_cpy
 6406              	.LVL753:
3687:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6407              		.loc 1 3687 6 view .LVU2125
3687:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6408              		.loc 1 3687 15 is_stmt 0 view .LVU2126
 6409 013e 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 6410 0140 03F07F03 		and	r3, r3, #127
 6411 0144 2375     		strb	r3, [r4, #20]
 6412 0146 EFE7     		b	.L476
 6413              	.L473:
3700:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr < fp->obj.objsize &&
 6414              		.loc 1 3700 4 is_stmt 1 view .LVU2127
3700:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr < fp->obj.objsize &&
 6415              		.loc 1 3700 10 is_stmt 0 view .LVU2128
 6416 0148 236A     		ldr	r3, [r4, #32]
3700:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr < fp->obj.objsize &&
 6417              		.loc 1 3700 7 view .LVU2129
 6418 014a 4B45     		cmp	r3, r9
 6419 014c 03D0     		beq	.L478
3701:Middlewares/Third_Party/FatFs/src/ff.c **** 				disk_read(fs->drv, fp->buf, sect, 1) != RES_OK) {
 6420              		.loc 1 3701 7 discriminator 1 view .LVU2130
 6421 014e A269     		ldr	r2, [r4, #24]
3701:Middlewares/Third_Party/FatFs/src/ff.c **** 				disk_read(fs->drv, fp->buf, sect, 1) != RES_OK) {
 6422              		.loc 1 3701 23 discriminator 1 view .LVU2131
 6423 0150 E368     		ldr	r3, [r4, #12]
3700:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr < fp->obj.objsize &&
 6424              		.loc 1 3700 25 discriminator 1 view .LVU2132
 6425 0152 9A42     		cmp	r2, r3
 6426 0154 3BD3     		bcc	.L491
 6427              	.L478:
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6428              		.loc 1 3703 28 is_stmt 1 view .LVU2133
3706:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 6429              		.loc 1 3706 4 view .LVU2134
3706:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 6430              		.loc 1 3706 13 is_stmt 0 view .LVU2135
 6431 0156 C4F82090 		str	r9, [r4, #32]
 6432              	.LVL754:
 6433              	.L462:
3708:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
 6434              		.loc 1 3708 3 is_stmt 1 view .LVU2136
3708:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
 6435              		.loc 1 3708 27 is_stmt 0 view .LVU2137
 6436 015a A369     		ldr	r3, [r4, #24]
3708:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
 6437              		.loc 1 3708 34 view .LVU2138
 6438 015c C3F30803 		ubfx	r3, r3, #0, #9
3708:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
 6439              		.loc 1 3708 8 view .LVU2139
 6440 0160 C3F50077 		rsb	r7, r3, #512
 6441              	.LVL755:
3709:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
ARM GAS  /tmp/ccWTW02a.s 			page 249


 6442              		.loc 1 3709 3 is_stmt 1 view .LVU2140
3709:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
 6443              		.loc 1 3709 6 is_stmt 0 view .LVU2141
 6444 0164 BD42     		cmp	r5, r7
 6445 0166 00D2     		bcs	.L479
3709:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
 6446              		.loc 1 3709 24 view .LVU2142
 6447 0168 2F46     		mov	r7, r5
 6448              	.LVL756:
 6449              	.L479:
3715:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->flag |= FA_DIRTY;
 6450              		.loc 1 3715 3 is_stmt 1 view .LVU2143
3715:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->flag |= FA_DIRTY;
 6451              		.loc 1 3715 11 is_stmt 0 view .LVU2144
 6452 016a 04F13000 		add	r0, r4, #48
3715:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->flag |= FA_DIRTY;
 6453              		.loc 1 3715 3 view .LVU2145
 6454 016e 3A46     		mov	r2, r7
 6455 0170 3146     		mov	r1, r6
 6456 0172 1844     		add	r0, r0, r3
 6457 0174 FFF7FEFF 		bl	mem_cpy
 6458              	.LVL757:
3716:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6459              		.loc 1 3716 3 is_stmt 1 view .LVU2146
3716:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6460              		.loc 1 3716 12 is_stmt 0 view .LVU2147
 6461 0178 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 6462 017a 63F07F03 		orn	r3, r3, #127
 6463 017e 2375     		strb	r3, [r4, #20]
 6464              	.L477:
3636:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 6465              		.loc 1 3636 3 is_stmt 1 view .LVU2148
3636:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 6466              		.loc 1 3636 9 is_stmt 0 view .LVU2149
 6467 0180 3E44     		add	r6, r6, r7
 6468              	.LVL758:
3636:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 6469              		.loc 1 3636 27 view .LVU2150
 6470 0182 A369     		ldr	r3, [r4, #24]
 6471 0184 3B44     		add	r3, r3, r7
 6472 0186 A361     		str	r3, [r4, #24]
3636:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 6473              		.loc 1 3636 73 view .LVU2151
 6474 0188 E268     		ldr	r2, [r4, #12]
3636:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 6475              		.loc 1 3636 94 view .LVU2152
 6476 018a 9342     		cmp	r3, r2
 6477 018c 38BF     		it	cc
 6478 018e 1346     		movcc	r3, r2
3636:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 6479              		.loc 1 3636 52 view .LVU2153
 6480 0190 E360     		str	r3, [r4, #12]
3636:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 6481              		.loc 1 3636 117 view .LVU2154
 6482 0192 D8F80030 		ldr	r3, [r8]
 6483 0196 3B44     		add	r3, r3, r7
 6484 0198 C8F80030 		str	r3, [r8]
ARM GAS  /tmp/ccWTW02a.s 			page 250


3636:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 6485              		.loc 1 3636 130 view .LVU2155
 6486 019c ED1B     		subs	r5, r5, r7
 6487              	.LVL759:
 6488              	.L480:
3635:Middlewares/Third_Party/FatFs/src/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, fp->obj.objsize = (fp->fptr > fp->obj.objsize) ? fp->fptr : fp->
 6489              		.loc 1 3635 11 is_stmt 1 view .LVU2156
3635:Middlewares/Third_Party/FatFs/src/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, fp->obj.objsize = (fp->fptr > fp->obj.objsize) ? fp->fptr : fp->
 6490              		.loc 1 3635 2 is_stmt 0 view .LVU2157
 6491 019e 3DB3     		cbz	r5, .L467
3637:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
 6492              		.loc 1 3637 3 is_stmt 1 view .LVU2158
3637:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
 6493              		.loc 1 3637 9 is_stmt 0 view .LVU2159
 6494 01a0 A169     		ldr	r1, [r4, #24]
3637:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
 6495              		.loc 1 3637 16 view .LVU2160
 6496 01a2 C1F30803 		ubfx	r3, r1, #0, #9
3637:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
 6497              		.loc 1 3637 6 view .LVU2161
 6498 01a6 002B     		cmp	r3, #0
 6499 01a8 D7D1     		bne	.L462
3638:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (csect == 0) {				/* On the cluster boundary? */
 6500              		.loc 1 3638 4 is_stmt 1 view .LVU2162
3638:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (csect == 0) {				/* On the cluster boundary? */
 6501              		.loc 1 3638 43 is_stmt 0 view .LVU2163
 6502 01aa 039B     		ldr	r3, [sp, #12]
 6503 01ac 5F89     		ldrh	r7, [r3, #10]
3638:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (csect == 0) {				/* On the cluster boundary? */
 6504              		.loc 1 3638 51 view .LVU2164
 6505 01ae 013F     		subs	r7, r7, #1
 6506              	.LVL760:
3639:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 6507              		.loc 1 3639 4 is_stmt 1 view .LVU2165
3639:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 6508              		.loc 1 3639 7 is_stmt 0 view .LVU2166
 6509 01b0 17EA5127 		ands	r7, r7, r1, lsr #9
 6510              	.LVL761:
3639:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 6511              		.loc 1 3639 7 view .LVU2167
 6512 01b4 7FF456AF 		bne	.L463
3640:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->obj.sclust;	/* Follow from the origin */
 6513              		.loc 1 3640 5 is_stmt 1 view .LVU2168
3640:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->obj.sclust;	/* Follow from the origin */
 6514              		.loc 1 3640 8 is_stmt 0 view .LVU2169
 6515 01b8 0029     		cmp	r1, #0
 6516 01ba 7FF441AF 		bne	.L464
3641:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0) {		/* If no cluster is allocated, */
 6517              		.loc 1 3641 6 is_stmt 1 view .LVU2170
3641:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0) {		/* If no cluster is allocated, */
 6518              		.loc 1 3641 11 is_stmt 0 view .LVU2171
 6519 01be A068     		ldr	r0, [r4, #8]
 6520              	.LVL762:
3642:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(&fp->obj, 0);	/* create a new cluster chain */
 6521              		.loc 1 3642 6 is_stmt 1 view .LVU2172
3642:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(&fp->obj, 0);	/* create a new cluster chain */
 6522              		.loc 1 3642 9 is_stmt 0 view .LVU2173
ARM GAS  /tmp/ccWTW02a.s 			page 251


 6523 01c0 0028     		cmp	r0, #0
 6524 01c2 7FF443AF 		bne	.L465
3643:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6525              		.loc 1 3643 7 is_stmt 1 view .LVU2174
3643:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6526              		.loc 1 3643 14 is_stmt 0 view .LVU2175
 6527 01c6 0198     		ldr	r0, [sp, #4]
 6528              	.LVL763:
3643:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6529              		.loc 1 3643 14 view .LVU2176
 6530 01c8 FFF7FEFF 		bl	create_chain
 6531              	.LVL764:
3643:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6532              		.loc 1 3643 14 view .LVU2177
 6533 01cc 3EE7     		b	.L465
 6534              	.LVL765:
 6535              	.L491:
3702:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fs, FR_DISK_ERR);
 6536              		.loc 1 3702 5 view .LVU2178
 6537 01ce 0123     		movs	r3, #1
 6538 01d0 4A46     		mov	r2, r9
 6539 01d2 04F13001 		add	r1, r4, #48
 6540 01d6 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 6541 01da FFF7FEFF 		bl	disk_read
 6542              	.LVL766:
3701:Middlewares/Third_Party/FatFs/src/ff.c **** 				disk_read(fs->drv, fp->buf, sect, 1) != RES_OK) {
 6543              		.loc 1 3701 32 view .LVU2179
 6544 01de 0028     		cmp	r0, #0
 6545 01e0 B9D0     		beq	.L478
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6546              		.loc 1 3703 6 is_stmt 1 view .LVU2180
 6547 01e2 4FF0010A 		mov	r10, #1
 6548              	.LVL767:
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6549              		.loc 1 3703 6 is_stmt 0 view .LVU2181
 6550 01e6 84F815A0 		strb	r10, [r4, #21]
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6551              		.loc 1 3703 6 is_stmt 1 view .LVU2182
 6552 01ea CDF800A0 		str	r10, [sp]
 6553              	.LVL768:
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6554              		.loc 1 3703 6 is_stmt 0 view .LVU2183
 6555 01ee 63E7     		b	.L460
 6556              	.LVL769:
 6557              	.L467:
3720:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6558              		.loc 1 3720 2 is_stmt 1 view .LVU2184
3720:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6559              		.loc 1 3720 11 is_stmt 0 view .LVU2185
 6560 01f0 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 6561 01f2 43F04003 		orr	r3, r3, #64
 6562 01f6 2375     		strb	r3, [r4, #20]
3722:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6563              		.loc 1 3722 2 is_stmt 1 view .LVU2186
 6564 01f8 5EE7     		b	.L460
 6565              	.LVL770:
 6566              	.L482:
ARM GAS  /tmp/ccWTW02a.s 			page 252


3628:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6567              		.loc 1 3628 30 is_stmt 0 view .LVU2187
 6568 01fa 0723     		movs	r3, #7
 6569 01fc 0093     		str	r3, [sp]
 6570              	.LVL771:
3628:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6571              		.loc 1 3628 30 view .LVU2188
 6572 01fe 5BE7     		b	.L460
 6573              		.cfi_endproc
 6574              	.LFE182:
 6576              		.section	.text.putc_bfd,"ax",%progbits
 6577              		.align	1
 6578              		.syntax unified
 6579              		.thumb
 6580              		.thumb_func
 6581              		.fpu fpv5-d16
 6583              	putc_bfd:
 6584              	.LVL772:
 6585              	.LFB197:
5921:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bw;
 6586              		.loc 1 5921 1 is_stmt 1 view -0
 6587              		.cfi_startproc
 6588              		@ args = 0, pretend = 0, frame = 8
 6589              		@ frame_needed = 0, uses_anonymous_args = 0
5921:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bw;
 6590              		.loc 1 5921 1 is_stmt 0 view .LVU2190
 6591 0000 70B5     		push	{r4, r5, r6, lr}
 6592              	.LCFI58:
 6593              		.cfi_def_cfa_offset 16
 6594              		.cfi_offset 4, -16
 6595              		.cfi_offset 5, -12
 6596              		.cfi_offset 6, -8
 6597              		.cfi_offset 14, -4
 6598 0002 82B0     		sub	sp, sp, #8
 6599              	.LCFI59:
 6600              		.cfi_def_cfa_offset 24
 6601 0004 0446     		mov	r4, r0
 6602 0006 0D46     		mov	r5, r1
5922:Middlewares/Third_Party/FatFs/src/ff.c **** 	int i;
 6603              		.loc 1 5922 2 is_stmt 1 view .LVU2191
5923:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6604              		.loc 1 5923 2 view .LVU2192
5926:Middlewares/Third_Party/FatFs/src/ff.c **** 		putc_bfd(pb, '\r');
 6605              		.loc 1 5926 2 view .LVU2193
5926:Middlewares/Third_Party/FatFs/src/ff.c **** 		putc_bfd(pb, '\r');
 6606              		.loc 1 5926 5 is_stmt 0 view .LVU2194
 6607 0008 0A29     		cmp	r1, #10
 6608 000a 0DD0     		beq	.L499
 6609              	.LVL773:
 6610              	.L493:
5930:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i < 0) return;
 6611              		.loc 1 5930 2 is_stmt 1 view .LVU2195
5930:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i < 0) return;
 6612              		.loc 1 5930 4 is_stmt 0 view .LVU2196
 6613 000c 6368     		ldr	r3, [r4, #4]
 6614              	.LVL774:
5931:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  /tmp/ccWTW02a.s 			page 253


 6615              		.loc 1 5931 2 is_stmt 1 view .LVU2197
5931:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6616              		.loc 1 5931 5 is_stmt 0 view .LVU2198
 6617 000e 002B     		cmp	r3, #0
 6618 0010 08DB     		blt	.L492
5960:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6619              		.loc 1 5960 2 is_stmt 1 view .LVU2199
5960:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6620              		.loc 1 5960 11 is_stmt 0 view .LVU2200
 6621 0012 5E1C     		adds	r6, r3, #1
 6622              	.LVL775:
5960:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6623              		.loc 1 5960 15 view .LVU2201
 6624 0014 2344     		add	r3, r3, r4
 6625 0016 1D73     		strb	r5, [r3, #12]
5963:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_write(pb->fp, pb->buf, (UINT)i, &bw);
 6626              		.loc 1 5963 2 is_stmt 1 view .LVU2202
5963:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_write(pb->fp, pb->buf, (UINT)i, &bw);
 6627              		.loc 1 5963 5 is_stmt 0 view .LVU2203
 6628 0018 3C2E     		cmp	r6, #60
 6629 001a 09DC     		bgt	.L500
 6630              	.LVL776:
 6631              	.L496:
5967:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->nchr++;
 6632              		.loc 1 5967 2 is_stmt 1 view .LVU2204
5967:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->nchr++;
 6633              		.loc 1 5967 10 is_stmt 0 view .LVU2205
 6634 001c 6660     		str	r6, [r4, #4]
5968:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6635              		.loc 1 5968 2 is_stmt 1 view .LVU2206
5968:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6636              		.loc 1 5968 4 is_stmt 0 view .LVU2207
 6637 001e A368     		ldr	r3, [r4, #8]
5968:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6638              		.loc 1 5968 10 view .LVU2208
 6639 0020 0133     		adds	r3, r3, #1
 6640 0022 A360     		str	r3, [r4, #8]
 6641              	.LVL777:
 6642              	.L492:
5969:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6643              		.loc 1 5969 1 view .LVU2209
 6644 0024 02B0     		add	sp, sp, #8
 6645              	.LCFI60:
 6646              		.cfi_remember_state
 6647              		.cfi_def_cfa_offset 16
 6648              		@ sp needed
 6649 0026 70BD     		pop	{r4, r5, r6, pc}
 6650              	.LVL778:
 6651              	.L499:
 6652              	.LCFI61:
 6653              		.cfi_restore_state
5927:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6654              		.loc 1 5927 3 is_stmt 1 view .LVU2210
 6655 0028 0D21     		movs	r1, #13
 6656              	.LVL779:
5927:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6657              		.loc 1 5927 3 is_stmt 0 view .LVU2211
ARM GAS  /tmp/ccWTW02a.s 			page 254


 6658 002a FFF7E9FF 		bl	putc_bfd
 6659              	.LVL780:
5927:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6660              		.loc 1 5927 3 view .LVU2212
 6661 002e EDE7     		b	.L493
 6662              	.LVL781:
 6663              	.L500:
5964:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = (bw == (UINT)i) ? 0 : -1;
 6664              		.loc 1 5964 3 is_stmt 1 view .LVU2213
5964:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = (bw == (UINT)i) ? 0 : -1;
 6665              		.loc 1 5964 21 is_stmt 0 view .LVU2214
 6666 0030 2146     		mov	r1, r4
5964:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = (bw == (UINT)i) ? 0 : -1;
 6667              		.loc 1 5964 3 view .LVU2215
 6668 0032 51F80C0B 		ldr	r0, [r1], #12
 6669 0036 01AB     		add	r3, sp, #4
 6670 0038 3246     		mov	r2, r6
 6671 003a FFF7FEFF 		bl	f_write
 6672              	.LVL782:
5965:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6673              		.loc 1 5965 3 is_stmt 1 view .LVU2216
5965:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6674              		.loc 1 5965 11 is_stmt 0 view .LVU2217
 6675 003e 019B     		ldr	r3, [sp, #4]
5965:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6676              		.loc 1 5965 27 view .LVU2218
 6677 0040 9E42     		cmp	r6, r3
 6678 0042 02D0     		beq	.L501
 6679 0044 4FF0FF36 		mov	r6, #-1
 6680              	.LVL783:
5965:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6681              		.loc 1 5965 27 view .LVU2219
 6682 0048 E8E7     		b	.L496
 6683              	.LVL784:
 6684              	.L501:
5965:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6685              		.loc 1 5965 27 view .LVU2220
 6686 004a 0026     		movs	r6, #0
 6687              	.LVL785:
5965:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6688              		.loc 1 5965 27 view .LVU2221
 6689 004c E6E7     		b	.L496
 6690              		.cfi_endproc
 6691              	.LFE197:
 6693              		.section	.text.putc_flush,"ax",%progbits
 6694              		.align	1
 6695              		.syntax unified
 6696              		.thumb
 6697              		.thumb_func
 6698              		.fpu fpv5-d16
 6700              	putc_flush:
 6701              	.LVL786:
 6702              	.LFB198:
5976:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nw;
 6703              		.loc 1 5976 1 is_stmt 1 view -0
 6704              		.cfi_startproc
 6705              		@ args = 0, pretend = 0, frame = 8
ARM GAS  /tmp/ccWTW02a.s 			page 255


 6706              		@ frame_needed = 0, uses_anonymous_args = 0
5977:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6707              		.loc 1 5977 2 view .LVU2223
5979:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& f_write(pb->fp, pb->buf, (UINT)pb->idx, &nw) == FR_OK
 6708              		.loc 1 5979 2 view .LVU2224
5979:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& f_write(pb->fp, pb->buf, (UINT)pb->idx, &nw) == FR_OK
 6709              		.loc 1 5979 11 is_stmt 0 view .LVU2225
 6710 0000 4268     		ldr	r2, [r0, #4]
5979:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& f_write(pb->fp, pb->buf, (UINT)pb->idx, &nw) == FR_OK
 6711              		.loc 1 5979 5 view .LVU2226
 6712 0002 002A     		cmp	r2, #0
 6713 0004 10DB     		blt	.L504
5976:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nw;
 6714              		.loc 1 5976 1 view .LVU2227
 6715 0006 10B5     		push	{r4, lr}
 6716              	.LCFI62:
 6717              		.cfi_def_cfa_offset 8
 6718              		.cfi_offset 4, -8
 6719              		.cfi_offset 14, -4
 6720 0008 82B0     		sub	sp, sp, #8
 6721              	.LCFI63:
 6722              		.cfi_def_cfa_offset 16
 6723 000a 0446     		mov	r4, r0
5980:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& (UINT)pb->idx == nw) return pb->nchr;
 6724              		.loc 1 5980 24 view .LVU2228
 6725 000c 0146     		mov	r1, r0
5980:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& (UINT)pb->idx == nw) return pb->nchr;
 6726              		.loc 1 5980 6 view .LVU2229
 6727 000e 51F80C0B 		ldr	r0, [r1], #12
 6728              	.LVL787:
5980:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& (UINT)pb->idx == nw) return pb->nchr;
 6729              		.loc 1 5980 6 view .LVU2230
 6730 0012 01AB     		add	r3, sp, #4
 6731 0014 FFF7FEFF 		bl	f_write
 6732              	.LVL788:
5980:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& (UINT)pb->idx == nw) return pb->nchr;
 6733              		.loc 1 5980 3 view .LVU2231
 6734 0018 48B9     		cbnz	r0, .L505
5981:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
 6735              		.loc 1 5981 14 view .LVU2232
 6736 001a 6268     		ldr	r2, [r4, #4]
5981:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
 6737              		.loc 1 5981 20 view .LVU2233
 6738 001c 019B     		ldr	r3, [sp, #4]
5981:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
 6739              		.loc 1 5981 3 view .LVU2234
 6740 001e 9A42     		cmp	r2, r3
 6741 0020 08D1     		bne	.L506
5981:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
 6742              		.loc 1 5981 27 is_stmt 1 discriminator 1 view .LVU2235
5981:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
 6743              		.loc 1 5981 36 is_stmt 0 discriminator 1 view .LVU2236
 6744 0022 A068     		ldr	r0, [r4, #8]
 6745              	.L502:
5983:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6746              		.loc 1 5983 1 view .LVU2237
 6747 0024 02B0     		add	sp, sp, #8
ARM GAS  /tmp/ccWTW02a.s 			page 256


 6748              	.LCFI64:
 6749              		.cfi_def_cfa_offset 8
 6750              		@ sp needed
 6751 0026 10BD     		pop	{r4, pc}
 6752              	.LVL789:
 6753              	.L504:
 6754              	.LCFI65:
 6755              		.cfi_def_cfa_offset 0
 6756              		.cfi_restore 4
 6757              		.cfi_restore 14
5982:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6758              		.loc 1 5982 9 view .LVU2238
 6759 0028 4FF0FF30 		mov	r0, #-1
 6760              	.LVL790:
5983:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6761              		.loc 1 5983 1 view .LVU2239
 6762 002c 7047     		bx	lr
 6763              	.LVL791:
 6764              	.L505:
 6765              	.LCFI66:
 6766              		.cfi_def_cfa_offset 16
 6767              		.cfi_offset 4, -8
 6768              		.cfi_offset 14, -4
5982:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6769              		.loc 1 5982 9 view .LVU2240
 6770 002e 4FF0FF30 		mov	r0, #-1
 6771 0032 F7E7     		b	.L502
 6772              	.L506:
 6773 0034 4FF0FF30 		mov	r0, #-1
 6774 0038 F4E7     		b	.L502
 6775              		.cfi_endproc
 6776              	.LFE198:
 6778              		.section	.text.f_sync,"ax",%progbits
 6779              		.align	1
 6780              		.global	f_sync
 6781              		.syntax unified
 6782              		.thumb
 6783              		.thumb_func
 6784              		.fpu fpv5-d16
 6786              	f_sync:
 6787              	.LVL792:
 6788              	.LFB183:
3735:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6789              		.loc 1 3735 1 is_stmt 1 view -0
 6790              		.cfi_startproc
 6791              		@ args = 0, pretend = 0, frame = 8
 6792              		@ frame_needed = 0, uses_anonymous_args = 0
3735:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6793              		.loc 1 3735 1 is_stmt 0 view .LVU2242
 6794 0000 70B5     		push	{r4, r5, r6, lr}
 6795              	.LCFI67:
 6796              		.cfi_def_cfa_offset 16
 6797              		.cfi_offset 4, -16
 6798              		.cfi_offset 5, -12
 6799              		.cfi_offset 6, -8
 6800              		.cfi_offset 14, -4
 6801 0002 82B0     		sub	sp, sp, #8
ARM GAS  /tmp/ccWTW02a.s 			page 257


 6802              	.LCFI68:
 6803              		.cfi_def_cfa_offset 24
 6804 0004 0446     		mov	r4, r0
3736:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 6805              		.loc 1 3736 2 is_stmt 1 view .LVU2243
3737:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD tm;
 6806              		.loc 1 3737 2 view .LVU2244
3738:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir;
 6807              		.loc 1 3738 2 view .LVU2245
3739:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 6808              		.loc 1 3739 2 view .LVU2246
3745:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 6809              		.loc 1 3745 2 view .LVU2247
3745:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 6810              		.loc 1 3745 8 is_stmt 0 view .LVU2248
 6811 0006 01A9     		add	r1, sp, #4
 6812 0008 FFF7FEFF 		bl	validate
 6813              	.LVL793:
3746:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->flag & FA_MODIFIED) {	/* Is there any change to the file? */
 6814              		.loc 1 3746 2 is_stmt 1 view .LVU2249
3746:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->flag & FA_MODIFIED) {	/* Is there any change to the file? */
 6815              		.loc 1 3746 5 is_stmt 0 view .LVU2250
 6816 000c 70B9     		cbnz	r0, .L512
3747:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 6817              		.loc 1 3747 3 is_stmt 1 view .LVU2251
3747:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 6818              		.loc 1 3747 9 is_stmt 0 view .LVU2252
 6819 000e 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
3747:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 6820              		.loc 1 3747 6 view .LVU2253
 6821 0010 13F0400F 		tst	r3, #64
 6822 0014 0AD0     		beq	.L512
3749:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) LEAVE_FF(fs, FR_DISK_ERR);
 6823              		.loc 1 3749 4 is_stmt 1 view .LVU2254
3749:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) LEAVE_FF(fs, FR_DISK_ERR);
 6824              		.loc 1 3749 7 is_stmt 0 view .LVU2255
 6825 0016 13F0800F 		tst	r3, #128
 6826 001a 09D1     		bne	.L516
 6827              	.L513:
3755:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 6828              		.loc 1 3755 4 is_stmt 1 view .LVU2256
3755:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 6829              		.loc 1 3755 9 is_stmt 0 view .LVU2257
 6830 001c FFF7FEFF 		bl	get_fattime
 6831              	.LVL794:
 6832 0020 0546     		mov	r5, r0
 6833              	.LVL795:
3785:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
 6834              		.loc 1 3785 5 is_stmt 1 view .LVU2258
3785:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
 6835              		.loc 1 3785 11 is_stmt 0 view .LVU2259
 6836 0022 616A     		ldr	r1, [r4, #36]
 6837 0024 0198     		ldr	r0, [sp, #4]
 6838              	.LVL796:
3785:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
 6839              		.loc 1 3785 11 view .LVU2260
 6840 0026 FFF7FEFF 		bl	move_window
ARM GAS  /tmp/ccWTW02a.s 			page 258


 6841              	.LVL797:
3786:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir = fp->dir_ptr;
 6842              		.loc 1 3786 5 is_stmt 1 view .LVU2261
3786:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir = fp->dir_ptr;
 6843              		.loc 1 3786 8 is_stmt 0 view .LVU2262
 6844 002a 78B1     		cbz	r0, .L517
 6845              	.LVL798:
 6846              	.L512:
3802:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6847              		.loc 1 3802 1 view .LVU2263
 6848 002c 02B0     		add	sp, sp, #8
 6849              	.LCFI69:
 6850              		.cfi_remember_state
 6851              		.cfi_def_cfa_offset 16
 6852              		@ sp needed
 6853 002e 70BD     		pop	{r4, r5, r6, pc}
 6854              	.LVL799:
 6855              	.L516:
 6856              	.LCFI70:
 6857              		.cfi_restore_state
3750:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 6858              		.loc 1 3750 5 is_stmt 1 view .LVU2264
3750:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 6859              		.loc 1 3750 9 is_stmt 0 view .LVU2265
 6860 0030 0123     		movs	r3, #1
 6861 0032 226A     		ldr	r2, [r4, #32]
 6862 0034 04F13001 		add	r1, r4, #48
 6863 0038 0198     		ldr	r0, [sp, #4]
 6864 003a 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 6865 003c FFF7FEFF 		bl	disk_write
 6866              	.LVL800:
3750:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 6867              		.loc 1 3750 8 view .LVU2266
 6868 0040 40BB     		cbnz	r0, .L514
3751:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6869              		.loc 1 3751 5 is_stmt 1 view .LVU2267
3751:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6870              		.loc 1 3751 14 is_stmt 0 view .LVU2268
 6871 0042 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 6872 0044 03F07F03 		and	r3, r3, #127
 6873 0048 2375     		strb	r3, [r4, #20]
 6874 004a E7E7     		b	.L513
 6875              	.LVL801:
 6876              	.L517:
3787:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Attr] |= AM_ARC;						/* Set archive bit */
 6877              		.loc 1 3787 6 is_stmt 1 view .LVU2269
3787:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Attr] |= AM_ARC;						/* Set archive bit */
 6878              		.loc 1 3787 10 is_stmt 0 view .LVU2270
 6879 004c A66A     		ldr	r6, [r4, #40]
 6880              	.LVL802:
3788:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fp->obj.fs, dir, fp->obj.sclust);		/* Update file allocation info  */
 6881              		.loc 1 3788 6 is_stmt 1 view .LVU2271
3788:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fp->obj.fs, dir, fp->obj.sclust);		/* Update file allocation info  */
 6882              		.loc 1 3788 20 is_stmt 0 view .LVU2272
 6883 004e F37A     		ldrb	r3, [r6, #11]	@ zero_extendqisi2
 6884 0050 43F02003 		orr	r3, r3, #32
 6885 0054 F372     		strb	r3, [r6, #11]
ARM GAS  /tmp/ccWTW02a.s 			page 259


3789:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_FileSize, (DWORD)fp->obj.objsize);	/* Update file size */
 6886              		.loc 1 3789 6 is_stmt 1 view .LVU2273
 6887 0056 A268     		ldr	r2, [r4, #8]
 6888 0058 3146     		mov	r1, r6
 6889 005a 2068     		ldr	r0, [r4]
 6890              	.LVL803:
3789:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_FileSize, (DWORD)fp->obj.objsize);	/* Update file size */
 6891              		.loc 1 3789 6 is_stmt 0 view .LVU2274
 6892 005c FFF7FEFF 		bl	st_clust
 6893              	.LVL804:
3790:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_ModTime, tm);				/* Update modified time */
 6894              		.loc 1 3790 6 is_stmt 1 view .LVU2275
 6895 0060 E168     		ldr	r1, [r4, #12]
 6896 0062 06F11C00 		add	r0, r6, #28
 6897 0066 FFF7FEFF 		bl	st_dword
 6898              	.LVL805:
3791:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_word(dir + DIR_LstAccDate, 0);
 6899              		.loc 1 3791 6 view .LVU2276
 6900 006a 2946     		mov	r1, r5
 6901 006c 06F11600 		add	r0, r6, #22
 6902 0070 FFF7FEFF 		bl	st_dword
 6903              	.LVL806:
3792:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
 6904              		.loc 1 3792 6 view .LVU2277
 6905 0074 0021     		movs	r1, #0
 6906 0076 06F11200 		add	r0, r6, #18
 6907 007a FFF7FEFF 		bl	st_word
 6908              	.LVL807:
3793:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_fs(fs);					/* Restore it to the directory */
 6909              		.loc 1 3793 6 view .LVU2278
3793:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_fs(fs);					/* Restore it to the directory */
 6910              		.loc 1 3793 16 is_stmt 0 view .LVU2279
 6911 007e 019B     		ldr	r3, [sp, #4]
 6912 0080 0122     		movs	r2, #1
 6913 0082 DA70     		strb	r2, [r3, #3]
3794:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_MODIFIED;
 6914              		.loc 1 3794 6 is_stmt 1 view .LVU2280
3794:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_MODIFIED;
 6915              		.loc 1 3794 12 is_stmt 0 view .LVU2281
 6916 0084 0198     		ldr	r0, [sp, #4]
 6917 0086 FFF7FEFF 		bl	sync_fs
 6918              	.LVL808:
3795:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6919              		.loc 1 3795 6 is_stmt 1 view .LVU2282
3795:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6920              		.loc 1 3795 15 is_stmt 0 view .LVU2283
 6921 008a 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 6922 008c 23F04003 		bic	r3, r3, #64
 6923 0090 2375     		strb	r3, [r4, #20]
 6924 0092 CBE7     		b	.L512
 6925              	.LVL809:
 6926              	.L514:
3750:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 6927              		.loc 1 3750 62 view .LVU2284
 6928 0094 0120     		movs	r0, #1
 6929 0096 C9E7     		b	.L512
 6930              		.cfi_endproc
ARM GAS  /tmp/ccWTW02a.s 			page 260


 6931              	.LFE183:
 6933              		.section	.text.f_close,"ax",%progbits
 6934              		.align	1
 6935              		.global	f_close
 6936              		.syntax unified
 6937              		.thumb
 6938              		.thumb_func
 6939              		.fpu fpv5-d16
 6941              	f_close:
 6942              	.LVL810:
 6943              	.LFB184:
3816:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6944              		.loc 1 3816 1 is_stmt 1 view -0
 6945              		.cfi_startproc
 6946              		@ args = 0, pretend = 0, frame = 8
 6947              		@ frame_needed = 0, uses_anonymous_args = 0
3816:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6948              		.loc 1 3816 1 is_stmt 0 view .LVU2286
 6949 0000 10B5     		push	{r4, lr}
 6950              	.LCFI71:
 6951              		.cfi_def_cfa_offset 8
 6952              		.cfi_offset 4, -8
 6953              		.cfi_offset 14, -4
 6954 0002 82B0     		sub	sp, sp, #8
 6955              	.LCFI72:
 6956              		.cfi_def_cfa_offset 16
 6957 0004 0446     		mov	r4, r0
3817:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 6958              		.loc 1 3817 2 is_stmt 1 view .LVU2287
3818:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6959              		.loc 1 3818 2 view .LVU2288
3821:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK)
 6960              		.loc 1 3821 2 view .LVU2289
3821:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK)
 6961              		.loc 1 3821 8 is_stmt 0 view .LVU2290
 6962 0006 FFF7FEFF 		bl	f_sync
 6963              	.LVL811:
3822:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6964              		.loc 1 3822 2 is_stmt 1 view .LVU2291
3822:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6965              		.loc 1 3822 5 is_stmt 0 view .LVU2292
 6966 000a 08B1     		cbz	r0, .L521
 6967              	.L519:
 6968              	.LVL812:
3839:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6969              		.loc 1 3839 2 is_stmt 1 view .LVU2293
3840:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6970              		.loc 1 3840 1 is_stmt 0 view .LVU2294
 6971 000c 02B0     		add	sp, sp, #8
 6972              	.LCFI73:
 6973              		.cfi_remember_state
 6974              		.cfi_def_cfa_offset 8
 6975              		@ sp needed
 6976 000e 10BD     		pop	{r4, pc}
 6977              	.LVL813:
 6978              	.L521:
 6979              	.LCFI74:
ARM GAS  /tmp/ccWTW02a.s 			page 261


 6980              		.cfi_restore_state
3825:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
 6981              		.loc 1 3825 3 is_stmt 1 view .LVU2295
3825:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
 6982              		.loc 1 3825 9 is_stmt 0 view .LVU2296
 6983 0010 01A9     		add	r1, sp, #4
 6984 0012 2046     		mov	r0, r4
 6985 0014 FFF7FEFF 		bl	validate
 6986              	.LVL814:
3826:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 6987              		.loc 1 3826 3 is_stmt 1 view .LVU2297
3826:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 6988              		.loc 1 3826 6 is_stmt 0 view .LVU2298
 6989 0018 0028     		cmp	r0, #0
 6990 001a F7D1     		bne	.L519
3828:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK)
 6991              		.loc 1 3828 4 is_stmt 1 view .LVU2299
3828:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK)
 6992              		.loc 1 3828 10 is_stmt 0 view .LVU2300
 6993 001c 2069     		ldr	r0, [r4, #16]
 6994              	.LVL815:
3828:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK)
 6995              		.loc 1 3828 10 view .LVU2301
 6996 001e FFF7FEFF 		bl	dec_lock
 6997              	.LVL816:
3829:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6998              		.loc 1 3829 4 is_stmt 1 view .LVU2302
3829:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6999              		.loc 1 3829 7 is_stmt 0 view .LVU2303
 7000 0022 0028     		cmp	r0, #0
 7001 0024 F2D1     		bne	.L519
3832:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7002              		.loc 1 3832 5 is_stmt 1 view .LVU2304
3832:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7003              		.loc 1 3832 16 is_stmt 0 view .LVU2305
 7004 0026 2060     		str	r0, [r4]
 7005 0028 F0E7     		b	.L519
 7006              		.cfi_endproc
 7007              	.LFE184:
 7009              		.section	.text.f_lseek,"ax",%progbits
 7010              		.align	1
 7011              		.global	f_lseek
 7012              		.syntax unified
 7013              		.thumb
 7014              		.thumb_func
 7015              		.fpu fpv5-d16
 7017              	f_lseek:
 7018              	.LVL817:
 7019              	.LFB185:
4005:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7020              		.loc 1 4005 1 is_stmt 1 view -0
 7021              		.cfi_startproc
 7022              		@ args = 0, pretend = 0, frame = 16
 7023              		@ frame_needed = 0, uses_anonymous_args = 0
4005:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7024              		.loc 1 4005 1 is_stmt 0 view .LVU2307
 7025 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
ARM GAS  /tmp/ccWTW02a.s 			page 262


 7026              	.LCFI75:
 7027              		.cfi_def_cfa_offset 36
 7028              		.cfi_offset 4, -36
 7029              		.cfi_offset 5, -32
 7030              		.cfi_offset 6, -28
 7031              		.cfi_offset 7, -24
 7032              		.cfi_offset 8, -20
 7033              		.cfi_offset 9, -16
 7034              		.cfi_offset 10, -12
 7035              		.cfi_offset 11, -8
 7036              		.cfi_offset 14, -4
 7037 0004 85B0     		sub	sp, sp, #20
 7038              	.LCFI76:
 7039              		.cfi_def_cfa_offset 56
 7040 0006 0446     		mov	r4, r0
 7041 0008 0E46     		mov	r6, r1
4006:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 7042              		.loc 1 4006 2 is_stmt 1 view .LVU2308
4007:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, bcs, nsect;
 7043              		.loc 1 4007 2 view .LVU2309
4008:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t ifptr;
 7044              		.loc 1 4008 2 view .LVU2310
4009:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
 7045              		.loc 1 4009 2 view .LVU2311
4011:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7046              		.loc 1 4011 2 view .LVU2312
4014:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) res = (FRESULT)fp->err;
 7047              		.loc 1 4014 2 view .LVU2313
4014:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) res = (FRESULT)fp->err;
 7048              		.loc 1 4014 8 is_stmt 0 view .LVU2314
 7049 000a 0746     		mov	r7, r0
 7050 000c 03A9     		add	r1, sp, #12
 7051              	.LVL818:
4014:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) res = (FRESULT)fp->err;
 7052              		.loc 1 4014 8 view .LVU2315
 7053 000e FFF7FEFF 		bl	validate
 7054              	.LVL819:
4015:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT && !_FS_READONLY
 7055              		.loc 1 4015 2 is_stmt 1 view .LVU2316
4015:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT && !_FS_READONLY
 7056              		.loc 1 4015 5 is_stmt 0 view .LVU2317
 7057 0012 0546     		mov	r5, r0
 7058 0014 00B9     		cbnz	r0, .L523
4015:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT && !_FS_READONLY
 7059              		.loc 1 4015 20 is_stmt 1 discriminator 1 view .LVU2318
4015:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT && !_FS_READONLY
 7060              		.loc 1 4015 24 is_stmt 0 discriminator 1 view .LVU2319
 7061 0016 657D     		ldrb	r5, [r4, #21]	@ zero_extendqisi2
 7062              	.LVL820:
 7063              	.L523:
4021:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7064              		.loc 1 4021 2 is_stmt 1 view .LVU2320
4021:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7065              		.loc 1 4021 5 is_stmt 0 view .LVU2321
 7066 0018 6DB9     		cbnz	r5, .L524
4024:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs == CREATE_LINKMAP) {	/* Create CLMT */
 7067              		.loc 1 4024 2 is_stmt 1 view .LVU2322
ARM GAS  /tmp/ccWTW02a.s 			page 263


4024:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs == CREATE_LINKMAP) {	/* Create CLMT */
 7068              		.loc 1 4024 8 is_stmt 0 view .LVU2323
 7069 001a E36A     		ldr	r3, [r4, #44]
4024:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs == CREATE_LINKMAP) {	/* Create CLMT */
 7070              		.loc 1 4024 5 view .LVU2324
 7071 001c 002B     		cmp	r3, #0
 7072 001e 00F08E80 		beq	.L525
4025:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl = fp->cltbl;
 7073              		.loc 1 4025 3 is_stmt 1 view .LVU2325
4025:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl = fp->cltbl;
 7074              		.loc 1 4025 6 is_stmt 0 view .LVU2326
 7075 0022 B6F1FF3F 		cmp	r6, #-1
 7076 0026 0AD0     		beq	.L565
4051:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = ofs;				/* Set file pointer */
 7077              		.loc 1 4051 4 is_stmt 1 view .LVU2327
4051:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = ofs;				/* Set file pointer */
 7078              		.loc 1 4051 21 is_stmt 0 view .LVU2328
 7079 0028 E768     		ldr	r7, [r4, #12]
4051:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = ofs;				/* Set file pointer */
 7080              		.loc 1 4051 7 view .LVU2329
 7081 002a B742     		cmp	r7, r6
 7082 002c 00D3     		bcc	.L533
 7083 002e 3746     		mov	r7, r6
 7084              	.L533:
 7085              	.LVL821:
4052:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs) {
 7086              		.loc 1 4052 4 is_stmt 1 view .LVU2330
4052:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs) {
 7087              		.loc 1 4052 13 is_stmt 0 view .LVU2331
 7088 0030 A761     		str	r7, [r4, #24]
4053:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clmt_clust(fp, ofs - 1);
 7089              		.loc 1 4053 4 is_stmt 1 view .LVU2332
4053:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clmt_clust(fp, ofs - 1);
 7090              		.loc 1 4053 7 is_stmt 0 view .LVU2333
 7091 0032 002F     		cmp	r7, #0
 7092 0034 44D1     		bne	.L566
 7093              	.LVL822:
 7094              	.L524:
4153:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7095              		.loc 1 4153 1 view .LVU2334
 7096 0036 2846     		mov	r0, r5
 7097 0038 05B0     		add	sp, sp, #20
 7098              	.LCFI77:
 7099              		.cfi_remember_state
 7100              		.cfi_def_cfa_offset 36
 7101              		@ sp needed
 7102 003a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 7103              	.LVL823:
 7104              	.L565:
 7105              	.LCFI78:
 7106              		.cfi_restore_state
4026:Middlewares/Third_Party/FatFs/src/ff.c **** 			tlen = *tbl++; ulen = 2;	/* Given table size and required table size */
 7107              		.loc 1 4026 4 is_stmt 1 view .LVU2335
4027:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->obj.sclust;		/* Origin of the chain */
 7108              		.loc 1 4027 4 view .LVU2336
4027:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->obj.sclust;		/* Origin of the chain */
 7109              		.loc 1 4027 15 is_stmt 0 view .LVU2337
ARM GAS  /tmp/ccWTW02a.s 			page 264


 7110 003e 9946     		mov	r9, r3
 7111              	.LVL824:
4027:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->obj.sclust;		/* Origin of the chain */
 7112              		.loc 1 4027 9 view .LVU2338
 7113 0040 59F8043B 		ldr	r3, [r9], #4
 7114              	.LVL825:
4027:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->obj.sclust;		/* Origin of the chain */
 7115              		.loc 1 4027 9 view .LVU2339
 7116 0044 0193     		str	r3, [sp, #4]
 7117              	.LVL826:
4027:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->obj.sclust;		/* Origin of the chain */
 7118              		.loc 1 4027 19 is_stmt 1 view .LVU2340
4028:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cl) {
 7119              		.loc 1 4028 4 view .LVU2341
4028:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cl) {
 7120              		.loc 1 4028 7 is_stmt 0 view .LVU2342
 7121 0046 D4F808B0 		ldr	fp, [r4, #8]
 7122              	.LVL827:
4029:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
 7123              		.loc 1 4029 4 is_stmt 1 view .LVU2343
4029:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
 7124              		.loc 1 4029 7 is_stmt 0 view .LVU2344
 7125 004a BBF1000F 		cmp	fp, #0
 7126 004e 2AD0     		beq	.L558
4027:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->obj.sclust;		/* Origin of the chain */
 7127              		.loc 1 4027 24 view .LVU2345
 7128 0050 4FF0020A 		mov	r10, #2
 7129              	.LVL828:
 7130              	.L532:
4030:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Get a fragment */
 7131              		.loc 1 4030 5 is_stmt 1 view .LVU2346
4032:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 7132              		.loc 1 4032 6 view .LVU2347
4032:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 7133              		.loc 1 4032 16 view .LVU2348
4032:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 7134              		.loc 1 4032 25 view .LVU2349
4032:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 7135              		.loc 1 4032 30 is_stmt 0 view .LVU2350
 7136 0054 0AF1020A 		add	r10, r10, #2
 7137              	.LVL829:
4032:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 7138              		.loc 1 4032 30 view .LVU2351
 7139 0058 5946     		mov	r1, fp
4032:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 7140              		.loc 1 4032 20 view .LVU2352
 7141 005a 4FF00008 		mov	r8, #0
 7142              	.LVL830:
 7143              	.L530:
4033:Middlewares/Third_Party/FatFs/src/ff.c **** 						pcl = cl; ncl++;
 7144              		.loc 1 4033 6 is_stmt 1 view .LVU2353
4034:Middlewares/Third_Party/FatFs/src/ff.c **** 						cl = get_fat(&fp->obj, cl);
 7145              		.loc 1 4034 7 view .LVU2354
4034:Middlewares/Third_Party/FatFs/src/ff.c **** 						cl = get_fat(&fp->obj, cl);
 7146              		.loc 1 4034 17 view .LVU2355
4034:Middlewares/Third_Party/FatFs/src/ff.c **** 						cl = get_fat(&fp->obj, cl);
 7147              		.loc 1 4034 20 is_stmt 0 view .LVU2356
ARM GAS  /tmp/ccWTW02a.s 			page 265


 7148 005e 08F10108 		add	r8, r8, #1
 7149              	.LVL831:
4035:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl <= 1) ABORT(fs, FR_INT_ERR);
 7150              		.loc 1 4035 7 is_stmt 1 view .LVU2357
 7151 0062 0E46     		mov	r6, r1
4035:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl <= 1) ABORT(fs, FR_INT_ERR);
 7152              		.loc 1 4035 12 is_stmt 0 view .LVU2358
 7153 0064 3846     		mov	r0, r7
 7154 0066 FFF7FEFF 		bl	get_fat
 7155              	.LVL832:
4035:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl <= 1) ABORT(fs, FR_INT_ERR);
 7156              		.loc 1 4035 12 view .LVU2359
 7157 006a 0146     		mov	r1, r0
 7158              	.LVL833:
4036:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7159              		.loc 1 4036 7 is_stmt 1 view .LVU2360
4036:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7160              		.loc 1 4036 10 is_stmt 0 view .LVU2361
 7161 006c 0128     		cmp	r0, #1
 7162 006e 14D9     		bls	.L567
4036:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7163              		.loc 1 4036 41 is_stmt 1 discriminator 2 view .LVU2362
4037:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
 7164              		.loc 1 4037 7 discriminator 2 view .LVU2363
4037:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
 7165              		.loc 1 4037 10 is_stmt 0 discriminator 2 view .LVU2364
 7166 0070 B0F1FF3F 		cmp	r0, #-1
 7167 0074 14D0     		beq	.L568
4037:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
 7168              		.loc 1 4037 51 is_stmt 1 discriminator 2 view .LVU2365
4038:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
 7169              		.loc 1 4038 14 discriminator 2 view .LVU2366
4038:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
 7170              		.loc 1 4038 25 is_stmt 0 discriminator 2 view .LVU2367
 7171 0076 0136     		adds	r6, r6, #1
 7172              	.LVL834:
4038:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
 7173              		.loc 1 4038 6 discriminator 2 view .LVU2368
 7174 0078 8642     		cmp	r6, r0
 7175 007a F0D0     		beq	.L530
4039:Middlewares/Third_Party/FatFs/src/ff.c **** 						*tbl++ = ncl; *tbl++ = tcl;
 7176              		.loc 1 4039 6 is_stmt 1 view .LVU2369
4039:Middlewares/Third_Party/FatFs/src/ff.c **** 						*tbl++ = ncl; *tbl++ = tcl;
 7177              		.loc 1 4039 9 is_stmt 0 view .LVU2370
 7178 007c 019B     		ldr	r3, [sp, #4]
 7179 007e 5345     		cmp	r3, r10
 7180 0080 05D3     		bcc	.L531
4040:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7181              		.loc 1 4040 7 is_stmt 1 view .LVU2371
 7182              	.LVL835:
4040:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7183              		.loc 1 4040 14 is_stmt 0 view .LVU2372
 7184 0082 4B46     		mov	r3, r9
 7185 0084 43F8088B 		str	r8, [r3], #8
4040:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7186              		.loc 1 4040 21 is_stmt 1 view .LVU2373
 7187              	.LVL836:
ARM GAS  /tmp/ccWTW02a.s 			page 266


4040:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7188              		.loc 1 4040 28 is_stmt 0 view .LVU2374
 7189 0088 C9F804B0 		str	fp, [r9, #4]
4040:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7190              		.loc 1 4040 25 view .LVU2375
 7191 008c 9946     		mov	r9, r3
 7192              	.LVL837:
 7193              	.L531:
4042:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7194              		.loc 1 4042 13 is_stmt 1 view .LVU2376
4042:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7195              		.loc 1 4042 21 is_stmt 0 view .LVU2377
 7196 008e 039B     		ldr	r3, [sp, #12]
 7197 0090 5B69     		ldr	r3, [r3, #20]
4042:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7198              		.loc 1 4042 5 view .LVU2378
 7199 0092 8B42     		cmp	r3, r1
 7200 0094 09D9     		bls	.L527
4035:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl <= 1) ABORT(fs, FR_INT_ERR);
 7201              		.loc 1 4035 12 view .LVU2379
 7202 0096 8B46     		mov	fp, r1
 7203              	.LVL838:
4035:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl <= 1) ABORT(fs, FR_INT_ERR);
 7204              		.loc 1 4035 12 view .LVU2380
 7205 0098 DCE7     		b	.L532
 7206              	.LVL839:
 7207              	.L567:
4036:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7208              		.loc 1 4036 20 is_stmt 1 discriminator 1 view .LVU2381
 7209 009a 0225     		movs	r5, #2
 7210              	.LVL840:
4036:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7211              		.loc 1 4036 20 is_stmt 0 discriminator 1 view .LVU2382
 7212 009c 6575     		strb	r5, [r4, #21]
4036:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7213              		.loc 1 4036 20 is_stmt 1 discriminator 1 view .LVU2383
 7214 009e CAE7     		b	.L524
 7215              	.LVL841:
 7216              	.L568:
4037:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
 7217              		.loc 1 4037 29 discriminator 1 view .LVU2384
 7218 00a0 0125     		movs	r5, #1
 7219              	.LVL842:
4037:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
 7220              		.loc 1 4037 29 is_stmt 0 discriminator 1 view .LVU2385
 7221 00a2 6575     		strb	r5, [r4, #21]
4037:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
 7222              		.loc 1 4037 29 is_stmt 1 discriminator 1 view .LVU2386
 7223 00a4 C7E7     		b	.L524
 7224              	.LVL843:
 7225              	.L558:
4027:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->obj.sclust;		/* Origin of the chain */
 7226              		.loc 1 4027 24 is_stmt 0 view .LVU2387
 7227 00a6 4FF0020A 		mov	r10, #2
 7228              	.LVL844:
 7229              	.L527:
4044:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ulen <= tlen) {
ARM GAS  /tmp/ccWTW02a.s 			page 267


 7230              		.loc 1 4044 4 is_stmt 1 view .LVU2388
4044:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ulen <= tlen) {
 7231              		.loc 1 4044 7 is_stmt 0 view .LVU2389
 7232 00aa E36A     		ldr	r3, [r4, #44]
4044:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ulen <= tlen) {
 7233              		.loc 1 4044 15 view .LVU2390
 7234 00ac C3F800A0 		str	r10, [r3]
4045:Middlewares/Third_Party/FatFs/src/ff.c **** 				*tbl = 0;		/* Terminate table */
 7235              		.loc 1 4045 4 is_stmt 1 view .LVU2391
4045:Middlewares/Third_Party/FatFs/src/ff.c **** 				*tbl = 0;		/* Terminate table */
 7236              		.loc 1 4045 7 is_stmt 0 view .LVU2392
 7237 00b0 019B     		ldr	r3, [sp, #4]
 7238 00b2 9A45     		cmp	r10, r3
 7239 00b4 00F2EE80 		bhi	.L560
4046:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 7240              		.loc 1 4046 5 is_stmt 1 view .LVU2393
4046:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 7241              		.loc 1 4046 10 is_stmt 0 view .LVU2394
 7242 00b8 0023     		movs	r3, #0
 7243 00ba C9F80030 		str	r3, [r9]
 7244 00be BAE7     		b	.L524
 7245              	.LVL845:
 7246              	.L566:
4054:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(fs, fp->clust);
 7247              		.loc 1 4054 5 is_stmt 1 view .LVU2395
4054:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(fs, fp->clust);
 7248              		.loc 1 4054 17 is_stmt 0 view .LVU2396
 7249 00c0 07F1FF38 		add	r8, r7, #-1
 7250 00c4 4146     		mov	r1, r8
 7251 00c6 2046     		mov	r0, r4
 7252 00c8 FFF7FEFF 		bl	clmt_clust
 7253              	.LVL846:
 7254 00cc 0146     		mov	r1, r0
4054:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(fs, fp->clust);
 7255              		.loc 1 4054 15 view .LVU2397
 7256 00ce E061     		str	r0, [r4, #28]
4055:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!dsc) ABORT(fs, FR_INT_ERR);
 7257              		.loc 1 4055 5 is_stmt 1 view .LVU2398
4055:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!dsc) ABORT(fs, FR_INT_ERR);
 7258              		.loc 1 4055 11 is_stmt 0 view .LVU2399
 7259 00d0 039E     		ldr	r6, [sp, #12]
 7260 00d2 3046     		mov	r0, r6
 7261 00d4 FFF7FEFF 		bl	clust2sect
 7262              	.LVL847:
4056:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (DWORD)((ofs - 1) / SS(fs)) & (fs->csize - 1);
 7263              		.loc 1 4056 5 is_stmt 1 view .LVU2400
4056:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (DWORD)((ofs - 1) / SS(fs)) & (fs->csize - 1);
 7264              		.loc 1 4056 8 is_stmt 0 view .LVU2401
 7265 00d8 E0B1     		cbz	r0, .L569
4056:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (DWORD)((ofs - 1) / SS(fs)) & (fs->csize - 1);
 7266              		.loc 1 4056 36 is_stmt 1 discriminator 2 view .LVU2402
4057:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr % SS(fs) && dsc != fp->sect) {	/* Refill sector cache if needed */
 7267              		.loc 1 4057 5 discriminator 2 view .LVU2403
4057:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr % SS(fs) && dsc != fp->sect) {	/* Refill sector cache if needed */
 7268              		.loc 1 4057 45 is_stmt 0 discriminator 2 view .LVU2404
 7269 00da 7189     		ldrh	r1, [r6, #10]
4057:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr % SS(fs) && dsc != fp->sect) {	/* Refill sector cache if needed */
ARM GAS  /tmp/ccWTW02a.s 			page 268


 7270              		.loc 1 4057 53 discriminator 2 view .LVU2405
 7271 00dc 0139     		subs	r1, r1, #1
4057:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr % SS(fs) && dsc != fp->sect) {	/* Refill sector cache if needed */
 7272              		.loc 1 4057 40 discriminator 2 view .LVU2406
 7273 00de 01EA5821 		and	r1, r1, r8, lsr #9
4057:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr % SS(fs) && dsc != fp->sect) {	/* Refill sector cache if needed */
 7274              		.loc 1 4057 9 discriminator 2 view .LVU2407
 7275 00e2 01EB0008 		add	r8, r1, r0
 7276              	.LVL848:
4058:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7277              		.loc 1 4058 5 is_stmt 1 discriminator 2 view .LVU2408
4058:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7278              		.loc 1 4058 18 is_stmt 0 discriminator 2 view .LVU2409
 7279 00e6 C7F30807 		ubfx	r7, r7, #0, #9
 7280              	.LVL849:
4058:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7281              		.loc 1 4058 8 discriminator 2 view .LVU2410
 7282 00ea 002F     		cmp	r7, #0
 7283 00ec A3D0     		beq	.L524
4058:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7284              		.loc 1 4058 39 discriminator 1 view .LVU2411
 7285 00ee 226A     		ldr	r2, [r4, #32]
4058:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7286              		.loc 1 4058 27 discriminator 1 view .LVU2412
 7287 00f0 4245     		cmp	r2, r8
 7288 00f2 A0D0     		beq	.L524
4061:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 7289              		.loc 1 4061 6 is_stmt 1 view .LVU2413
4061:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 7290              		.loc 1 4061 10 is_stmt 0 view .LVU2414
 7291 00f4 94F91430 		ldrsb	r3, [r4, #20]
4061:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 7292              		.loc 1 4061 9 view .LVU2415
 7293 00f8 002B     		cmp	r3, #0
 7294 00fa 0EDB     		blt	.L570
 7295              	.L535:
4066:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7296              		.loc 1 4066 6 is_stmt 1 view .LVU2416
4066:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7297              		.loc 1 4066 10 is_stmt 0 view .LVU2417
 7298 00fc 0123     		movs	r3, #1
 7299 00fe 4246     		mov	r2, r8
 7300 0100 04F13001 		add	r1, r4, #48
 7301 0104 0398     		ldr	r0, [sp, #12]
 7302 0106 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 7303 0108 FFF7FEFF 		bl	disk_read
 7304              	.LVL850:
4066:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7305              		.loc 1 4066 9 view .LVU2418
 7306 010c A0B9     		cbnz	r0, .L571
4066:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7307              		.loc 1 4066 79 is_stmt 1 discriminator 2 view .LVU2419
4068:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7308              		.loc 1 4068 6 discriminator 2 view .LVU2420
4068:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7309              		.loc 1 4068 15 is_stmt 0 discriminator 2 view .LVU2421
 7310 010e C4F82080 		str	r8, [r4, #32]
ARM GAS  /tmp/ccWTW02a.s 			page 269


 7311 0112 90E7     		b	.L524
 7312              	.LVL851:
 7313              	.L569:
4056:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (DWORD)((ofs - 1) / SS(fs)) & (fs->csize - 1);
 7314              		.loc 1 4056 15 is_stmt 1 discriminator 1 view .LVU2422
 7315 0114 0225     		movs	r5, #2
 7316              	.LVL852:
4056:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (DWORD)((ofs - 1) / SS(fs)) & (fs->csize - 1);
 7317              		.loc 1 4056 15 is_stmt 0 discriminator 1 view .LVU2423
 7318 0116 6575     		strb	r5, [r4, #21]
4056:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (DWORD)((ofs - 1) / SS(fs)) & (fs->csize - 1);
 7319              		.loc 1 4056 15 is_stmt 1 discriminator 1 view .LVU2424
 7320 0118 8DE7     		b	.L524
 7321              	.LVL853:
 7322              	.L570:
4062:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
 7323              		.loc 1 4062 7 view .LVU2425
4062:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
 7324              		.loc 1 4062 11 is_stmt 0 view .LVU2426
 7325 011a 0123     		movs	r3, #1
 7326 011c 04F13001 		add	r1, r4, #48
 7327 0120 7078     		ldrb	r0, [r6, #1]	@ zero_extendqisi2
 7328 0122 FFF7FEFF 		bl	disk_write
 7329              	.LVL854:
4062:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
 7330              		.loc 1 4062 10 view .LVU2427
 7331 0126 20B9     		cbnz	r0, .L572
4062:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
 7332              		.loc 1 4062 86 is_stmt 1 discriminator 2 view .LVU2428
4063:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7333              		.loc 1 4063 7 discriminator 2 view .LVU2429
4063:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7334              		.loc 1 4063 16 is_stmt 0 discriminator 2 view .LVU2430
 7335 0128 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 7336 012a 03F07F03 		and	r3, r3, #127
 7337 012e 2375     		strb	r3, [r4, #20]
 7338 0130 E4E7     		b	.L535
 7339              	.L572:
4062:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
 7340              		.loc 1 4062 64 is_stmt 1 discriminator 1 view .LVU2431
 7341 0132 0125     		movs	r5, #1
 7342              	.LVL855:
4062:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
 7343              		.loc 1 4062 64 is_stmt 0 discriminator 1 view .LVU2432
 7344 0134 6575     		strb	r5, [r4, #21]
4062:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
 7345              		.loc 1 4062 64 is_stmt 1 discriminator 1 view .LVU2433
 7346 0136 7EE7     		b	.L524
 7347              	.LVL856:
 7348              	.L571:
4066:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7349              		.loc 1 4066 57 discriminator 1 view .LVU2434
 7350 0138 0125     		movs	r5, #1
 7351              	.LVL857:
4066:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7352              		.loc 1 4066 57 is_stmt 0 discriminator 1 view .LVU2435
 7353 013a 6575     		strb	r5, [r4, #21]
ARM GAS  /tmp/ccWTW02a.s 			page 270


4066:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7354              		.loc 1 4066 57 is_stmt 1 discriminator 1 view .LVU2436
 7355 013c 7BE7     		b	.L524
 7356              	.LVL858:
 7357              	.L525:
4080:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs = fp->obj.objsize;
 7358              		.loc 1 4080 3 view .LVU2437
4080:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs = fp->obj.objsize;
 7359              		.loc 1 4080 20 is_stmt 0 view .LVU2438
 7360 013e E368     		ldr	r3, [r4, #12]
4080:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs = fp->obj.objsize;
 7361              		.loc 1 4080 6 view .LVU2439
 7362 0140 B342     		cmp	r3, r6
 7363 0142 04D2     		bcs	.L538
4080:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs = fp->obj.objsize;
 7364              		.loc 1 4080 53 discriminator 1 view .LVU2440
 7365 0144 227D     		ldrb	r2, [r4, #20]	@ zero_extendqisi2
4080:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs = fp->obj.objsize;
 7366              		.loc 1 4080 29 discriminator 1 view .LVU2441
 7367 0146 12F0020F 		tst	r2, #2
 7368 014a 00D1     		bne	.L538
4081:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 7369              		.loc 1 4081 8 view .LVU2442
 7370 014c 1E46     		mov	r6, r3
 7371              	.LVL859:
 7372              	.L538:
4083:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->fptr = nsect = 0;
 7373              		.loc 1 4083 3 is_stmt 1 view .LVU2443
4083:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->fptr = nsect = 0;
 7374              		.loc 1 4083 9 is_stmt 0 view .LVU2444
 7375 014e A369     		ldr	r3, [r4, #24]
 7376              	.LVL860:
4084:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs) {
 7377              		.loc 1 4084 3 is_stmt 1 view .LVU2445
4084:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs) {
 7378              		.loc 1 4084 12 is_stmt 0 view .LVU2446
 7379 0150 0022     		movs	r2, #0
 7380 0152 A261     		str	r2, [r4, #24]
4085:Middlewares/Third_Party/FatFs/src/ff.c **** 			bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size (byte) */
 7381              		.loc 1 4085 3 is_stmt 1 view .LVU2447
4085:Middlewares/Third_Party/FatFs/src/ff.c **** 			bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size (byte) */
 7382              		.loc 1 4085 6 is_stmt 0 view .LVU2448
 7383 0154 EEB1     		cbz	r6, .L539
4086:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ifptr > 0 &&
 7384              		.loc 1 4086 4 is_stmt 1 view .LVU2449
4086:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ifptr > 0 &&
 7385              		.loc 1 4086 19 is_stmt 0 view .LVU2450
 7386 0156 039A     		ldr	r2, [sp, #12]
 7387 0158 B2F80A90 		ldrh	r9, [r2, #10]
4086:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ifptr > 0 &&
 7388              		.loc 1 4086 8 view .LVU2451
 7389 015c 4FEA4929 		lsl	r9, r9, #9
 7390              	.LVL861:
4087:Middlewares/Third_Party/FatFs/src/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
 7391              		.loc 1 4087 4 is_stmt 1 view .LVU2452
4087:Middlewares/Third_Party/FatFs/src/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
 7392              		.loc 1 4087 7 is_stmt 0 view .LVU2453
ARM GAS  /tmp/ccWTW02a.s 			page 271


 7393 0160 83B1     		cbz	r3, .L540
4088:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = (ifptr - 1) & ~(FSIZE_t)(bcs - 1);	/* start from the current cluster */
 7394              		.loc 1 4088 10 discriminator 1 view .LVU2454
 7395 0162 721E     		subs	r2, r6, #1
4088:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = (ifptr - 1) & ~(FSIZE_t)(bcs - 1);	/* start from the current cluster */
 7396              		.loc 1 4088 15 discriminator 1 view .LVU2455
 7397 0164 B2FBF9F2 		udiv	r2, r2, r9
4088:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = (ifptr - 1) & ~(FSIZE_t)(bcs - 1);	/* start from the current cluster */
 7398              		.loc 1 4088 31 discriminator 1 view .LVU2456
 7399 0168 013B     		subs	r3, r3, #1
 7400              	.LVL862:
4088:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = (ifptr - 1) & ~(FSIZE_t)(bcs - 1);	/* start from the current cluster */
 7401              		.loc 1 4088 36 discriminator 1 view .LVU2457
 7402 016a B3FBF9F1 		udiv	r1, r3, r9
4087:Middlewares/Third_Party/FatFs/src/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
 7403              		.loc 1 4087 18 discriminator 1 view .LVU2458
 7404 016e 8A42     		cmp	r2, r1
 7405 0170 08D3     		bcc	.L540
4089:Middlewares/Third_Party/FatFs/src/ff.c **** 				ofs -= fp->fptr;
 7406              		.loc 1 4089 5 is_stmt 1 view .LVU2459
4089:Middlewares/Third_Party/FatFs/src/ff.c **** 				ofs -= fp->fptr;
 7407              		.loc 1 4089 30 is_stmt 0 view .LVU2460
 7408 0172 C9F10008 		rsb	r8, r9, #0
4089:Middlewares/Third_Party/FatFs/src/ff.c **** 				ofs -= fp->fptr;
 7409              		.loc 1 4089 28 view .LVU2461
 7410 0176 03EA0803 		and	r3, r3, r8
 7411              	.LVL863:
4089:Middlewares/Third_Party/FatFs/src/ff.c **** 				ofs -= fp->fptr;
 7412              		.loc 1 4089 14 view .LVU2462
 7413 017a A361     		str	r3, [r4, #24]
4090:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->clust;
 7414              		.loc 1 4090 5 is_stmt 1 view .LVU2463
4090:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->clust;
 7415              		.loc 1 4090 9 is_stmt 0 view .LVU2464
 7416 017c A6EB0308 		sub	r8, r6, r3
 7417              	.LVL864:
4091:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {									/* When seek to back cluster, */
 7418              		.loc 1 4091 5 is_stmt 1 view .LVU2465
4091:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {									/* When seek to back cluster, */
 7419              		.loc 1 4091 10 is_stmt 0 view .LVU2466
 7420 0180 E669     		ldr	r6, [r4, #28]
 7421              	.LVL865:
4091:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {									/* When seek to back cluster, */
 7422              		.loc 1 4091 10 view .LVU2467
 7423 0182 04E0     		b	.L541
 7424              	.LVL866:
 7425              	.L540:
4093:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 7426              		.loc 1 4093 5 is_stmt 1 view .LVU2468
4093:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 7427              		.loc 1 4093 10 is_stmt 0 view .LVU2469
 7428 0184 A068     		ldr	r0, [r4, #8]
 7429              	.LVL867:
4095:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = create_chain(&fp->obj, 0);
 7430              		.loc 1 4095 5 is_stmt 1 view .LVU2470
4095:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = create_chain(&fp->obj, 0);
 7431              		.loc 1 4095 8 is_stmt 0 view .LVU2471
ARM GAS  /tmp/ccWTW02a.s 			page 272


 7432 0186 30B3     		cbz	r0, .L573
 7433              	.L542:
4102:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7434              		.loc 1 4102 5 is_stmt 1 view .LVU2472
4102:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7435              		.loc 1 4102 15 is_stmt 0 view .LVU2473
 7436 0188 E061     		str	r0, [r4, #28]
 7437 018a B046     		mov	r8, r6
 7438 018c 0646     		mov	r6, r0
 7439              	.LVL868:
 7440              	.L541:
4104:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
 7441              		.loc 1 4104 4 is_stmt 1 view .LVU2474
4104:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
 7442              		.loc 1 4104 7 is_stmt 0 view .LVU2475
 7443 018e 002E     		cmp	r6, #0
 7444 0190 41D1     		bne	.L545
 7445              	.LVL869:
 7446              	.L539:
4134:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.objsize = fp->fptr;
 7447              		.loc 1 4134 3 is_stmt 1 view .LVU2476
4134:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.objsize = fp->fptr;
 7448              		.loc 1 4134 26 is_stmt 0 view .LVU2477
 7449 0192 A369     		ldr	r3, [r4, #24]
4134:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.objsize = fp->fptr;
 7450              		.loc 1 4134 42 view .LVU2478
 7451 0194 E268     		ldr	r2, [r4, #12]
4134:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.objsize = fp->fptr;
 7452              		.loc 1 4134 6 view .LVU2479
 7453 0196 9342     		cmp	r3, r2
 7454 0198 04D9     		bls	.L554
4135:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag |= FA_MODIFIED;
 7455              		.loc 1 4135 4 is_stmt 1 view .LVU2480
4135:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag |= FA_MODIFIED;
 7456              		.loc 1 4135 20 is_stmt 0 view .LVU2481
 7457 019a E360     		str	r3, [r4, #12]
4136:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 7458              		.loc 1 4136 4 is_stmt 1 view .LVU2482
4136:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 7459              		.loc 1 4136 13 is_stmt 0 view .LVU2483
 7460 019c 227D     		ldrb	r2, [r4, #20]	@ zero_extendqisi2
 7461 019e 42F04002 		orr	r2, r2, #64
 7462 01a2 2275     		strb	r2, [r4, #20]
 7463              	.L554:
4138:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7464              		.loc 1 4138 3 is_stmt 1 view .LVU2484
4138:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7465              		.loc 1 4138 16 is_stmt 0 view .LVU2485
 7466 01a4 C3F30803 		ubfx	r3, r3, #0, #9
4138:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7467              		.loc 1 4138 6 view .LVU2486
 7468 01a8 002B     		cmp	r3, #0
 7469 01aa 3FF444AF 		beq	.L524
4138:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7470              		.loc 1 4138 39 discriminator 1 view .LVU2487
 7471 01ae 226A     		ldr	r2, [r4, #32]
4138:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
ARM GAS  /tmp/ccWTW02a.s 			page 273


 7472              		.loc 1 4138 25 discriminator 1 view .LVU2488
 7473 01b0 B242     		cmp	r2, r6
 7474 01b2 3FF440AF 		beq	.L524
4141:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 7475              		.loc 1 4141 4 is_stmt 1 view .LVU2489
4141:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 7476              		.loc 1 4141 8 is_stmt 0 view .LVU2490
 7477 01b6 94F91430 		ldrsb	r3, [r4, #20]
4141:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 7478              		.loc 1 4141 7 view .LVU2491
 7479 01ba 002B     		cmp	r3, #0
 7480 01bc 57DB     		blt	.L574
 7481              	.L555:
4146:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7482              		.loc 1 4146 4 is_stmt 1 view .LVU2492
4146:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7483              		.loc 1 4146 8 is_stmt 0 view .LVU2493
 7484 01be 0123     		movs	r3, #1
 7485 01c0 3246     		mov	r2, r6
 7486 01c2 04F13001 		add	r1, r4, #48
 7487 01c6 0398     		ldr	r0, [sp, #12]
 7488 01c8 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 7489 01ca FFF7FEFF 		bl	disk_read
 7490              	.LVL870:
4146:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7491              		.loc 1 4146 7 view .LVU2494
 7492 01ce 0028     		cmp	r0, #0
 7493 01d0 5DD1     		bne	.L575
4146:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7494              		.loc 1 4146 79 is_stmt 1 discriminator 2 view .LVU2495
4148:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 7495              		.loc 1 4148 4 discriminator 2 view .LVU2496
4148:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 7496              		.loc 1 4148 13 is_stmt 0 discriminator 2 view .LVU2497
 7497 01d2 2662     		str	r6, [r4, #32]
 7498 01d4 2FE7     		b	.L524
 7499              	.LVL871:
 7500              	.L573:
4096:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) ABORT(fs, FR_INT_ERR);
 7501              		.loc 1 4096 6 is_stmt 1 view .LVU2498
4096:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) ABORT(fs, FR_INT_ERR);
 7502              		.loc 1 4096 13 is_stmt 0 view .LVU2499
 7503 01d6 0021     		movs	r1, #0
 7504 01d8 2046     		mov	r0, r4
 7505              	.LVL872:
4096:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) ABORT(fs, FR_INT_ERR);
 7506              		.loc 1 4096 13 view .LVU2500
 7507 01da FFF7FEFF 		bl	create_chain
 7508              	.LVL873:
4097:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7509              		.loc 1 4097 6 is_stmt 1 view .LVU2501
4097:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7510              		.loc 1 4097 9 is_stmt 0 view .LVU2502
 7511 01de 0128     		cmp	r0, #1
 7512 01e0 04D0     		beq	.L576
4097:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7513              		.loc 1 4097 42 is_stmt 1 discriminator 2 view .LVU2503
ARM GAS  /tmp/ccWTW02a.s 			page 274


4098:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = clst;
 7514              		.loc 1 4098 6 discriminator 2 view .LVU2504
4098:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = clst;
 7515              		.loc 1 4098 9 is_stmt 0 discriminator 2 view .LVU2505
 7516 01e2 B0F1FF3F 		cmp	r0, #-1
 7517 01e6 04D0     		beq	.L577
4098:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = clst;
 7518              		.loc 1 4098 52 is_stmt 1 discriminator 2 view .LVU2506
4099:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7519              		.loc 1 4099 6 discriminator 2 view .LVU2507
4099:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7520              		.loc 1 4099 21 is_stmt 0 discriminator 2 view .LVU2508
 7521 01e8 A060     		str	r0, [r4, #8]
 7522 01ea CDE7     		b	.L542
 7523              	.L576:
4097:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7524              		.loc 1 4097 21 is_stmt 1 discriminator 1 view .LVU2509
 7525 01ec 0225     		movs	r5, #2
 7526              	.LVL874:
4097:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7527              		.loc 1 4097 21 is_stmt 0 discriminator 1 view .LVU2510
 7528 01ee 6575     		strb	r5, [r4, #21]
4097:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7529              		.loc 1 4097 21 is_stmt 1 discriminator 1 view .LVU2511
 7530 01f0 21E7     		b	.L524
 7531              	.LVL875:
 7532              	.L577:
4098:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = clst;
 7533              		.loc 1 4098 30 discriminator 1 view .LVU2512
 7534 01f2 0125     		movs	r5, #1
 7535              	.LVL876:
4098:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = clst;
 7536              		.loc 1 4098 30 is_stmt 0 discriminator 1 view .LVU2513
 7537 01f4 6575     		strb	r5, [r4, #21]
4098:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = clst;
 7538              		.loc 1 4098 30 is_stmt 1 discriminator 1 view .LVU2514
 7539 01f6 1EE7     		b	.L524
 7540              	.LVL877:
 7541              	.L546:
4120:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7542              		.loc 1 4120 7 view .LVU2515
4120:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7543              		.loc 1 4120 14 is_stmt 0 view .LVU2516
 7544 01f8 3146     		mov	r1, r6
 7545 01fa 3846     		mov	r0, r7
 7546 01fc FFF7FEFF 		bl	get_fat
 7547              	.LVL878:
 7548 0200 0646     		mov	r6, r0
 7549              	.LVL879:
 7550              	.L548:
4122:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 7551              		.loc 1 4122 6 is_stmt 1 view .LVU2517
4122:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 7552              		.loc 1 4122 9 is_stmt 0 view .LVU2518
 7553 0202 B6F1FF3F 		cmp	r6, #-1
 7554 0206 27D0     		beq	.L578
4122:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
ARM GAS  /tmp/ccWTW02a.s 			page 275


 7555              		.loc 1 4122 52 is_stmt 1 discriminator 2 view .LVU2519
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 7556              		.loc 1 4123 6 discriminator 2 view .LVU2520
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 7557              		.loc 1 4123 9 is_stmt 0 discriminator 2 view .LVU2521
 7558 0208 012E     		cmp	r6, #1
 7559 020a 28D9     		bls	.L550
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 7560              		.loc 1 4123 33 discriminator 2 view .LVU2522
 7561 020c 039B     		ldr	r3, [sp, #12]
 7562 020e 5B69     		ldr	r3, [r3, #20]
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 7563              		.loc 1 4123 20 discriminator 2 view .LVU2523
 7564 0210 B342     		cmp	r3, r6
 7565 0212 24D9     		bls	.L550
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 7566              		.loc 1 4123 66 is_stmt 1 discriminator 4 view .LVU2524
4124:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7567              		.loc 1 4124 6 discriminator 4 view .LVU2525
4124:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7568              		.loc 1 4124 16 is_stmt 0 discriminator 4 view .LVU2526
 7569 0214 E661     		str	r6, [r4, #28]
 7570              	.LVL880:
 7571              	.L545:
4105:Middlewares/Third_Party/FatFs/src/ff.c **** 					ofs -= bcs; fp->fptr += bcs;
 7572              		.loc 1 4105 11 is_stmt 1 view .LVU2527
 7573 0216 C845     		cmp	r8, r9
 7574 0218 10D9     		bls	.L547
4106:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 7575              		.loc 1 4106 6 view .LVU2528
4106:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 7576              		.loc 1 4106 10 is_stmt 0 view .LVU2529
 7577 021a A8EB0908 		sub	r8, r8, r9
 7578              	.LVL881:
4106:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 7579              		.loc 1 4106 18 is_stmt 1 view .LVU2530
4106:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 7580              		.loc 1 4106 27 is_stmt 0 view .LVU2531
 7581 021e A369     		ldr	r3, [r4, #24]
 7582 0220 4B44     		add	r3, r3, r9
 7583 0222 A361     		str	r3, [r4, #24]
4108:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (_FS_EXFAT && fp->fptr > fp->obj.objsize) {	/* No FAT chain object needs correct objsize t
 7584              		.loc 1 4108 6 is_stmt 1 view .LVU2532
4108:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (_FS_EXFAT && fp->fptr > fp->obj.objsize) {	/* No FAT chain object needs correct objsize t
 7585              		.loc 1 4108 12 is_stmt 0 view .LVU2533
 7586 0224 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
4108:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (_FS_EXFAT && fp->fptr > fp->obj.objsize) {	/* No FAT chain object needs correct objsize t
 7587              		.loc 1 4108 9 view .LVU2534
 7588 0226 13F0020F 		tst	r3, #2
 7589 022a E5D0     		beq	.L546
4109:Middlewares/Third_Party/FatFs/src/ff.c **** 							fp->obj.objsize = fp->fptr;
 7590              		.loc 1 4109 7 is_stmt 1 view .LVU2535
4113:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (clst == 0) {				/* Clip file size in case of disk full */
 7591              		.loc 1 4113 7 view .LVU2536
4113:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (clst == 0) {				/* Clip file size in case of disk full */
 7592              		.loc 1 4113 14 is_stmt 0 view .LVU2537
 7593 022c 3146     		mov	r1, r6
ARM GAS  /tmp/ccWTW02a.s 			page 276


 7594 022e 3846     		mov	r0, r7
 7595 0230 FFF7FEFF 		bl	create_chain
 7596              	.LVL882:
4114:Middlewares/Third_Party/FatFs/src/ff.c **** 							ofs = 0; break;
 7597              		.loc 1 4114 7 is_stmt 1 view .LVU2538
4114:Middlewares/Third_Party/FatFs/src/ff.c **** 							ofs = 0; break;
 7598              		.loc 1 4114 10 is_stmt 0 view .LVU2539
 7599 0234 0646     		mov	r6, r0
 7600 0236 0028     		cmp	r0, #0
 7601 0238 E3D1     		bne	.L548
4115:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 7602              		.loc 1 4115 12 view .LVU2540
 7603 023a 8046     		mov	r8, r0
 7604              	.LVL883:
 7605              	.L547:
4126:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ofs % SS(fs)) {
 7606              		.loc 1 4126 5 is_stmt 1 view .LVU2541
4126:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ofs % SS(fs)) {
 7607              		.loc 1 4126 14 is_stmt 0 view .LVU2542
 7608 023c A369     		ldr	r3, [r4, #24]
 7609 023e 4344     		add	r3, r3, r8
 7610 0240 A361     		str	r3, [r4, #24]
4127:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect = clust2sect(fs, clst);	/* Current sector */
 7611              		.loc 1 4127 5 is_stmt 1 view .LVU2543
4127:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect = clust2sect(fs, clst);	/* Current sector */
 7612              		.loc 1 4127 13 is_stmt 0 view .LVU2544
 7613 0242 C8F30803 		ubfx	r3, r8, #0, #9
4127:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect = clust2sect(fs, clst);	/* Current sector */
 7614              		.loc 1 4127 8 view .LVU2545
 7615 0246 83B1     		cbz	r3, .L563
4128:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!nsect) ABORT(fs, FR_INT_ERR);
 7616              		.loc 1 4128 6 is_stmt 1 view .LVU2546
4128:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!nsect) ABORT(fs, FR_INT_ERR);
 7617              		.loc 1 4128 14 is_stmt 0 view .LVU2547
 7618 0248 3146     		mov	r1, r6
 7619 024a 0398     		ldr	r0, [sp, #12]
 7620 024c FFF7FEFF 		bl	clust2sect
 7621              	.LVL884:
4129:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 7622              		.loc 1 4129 6 is_stmt 1 view .LVU2548
4129:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 7623              		.loc 1 4129 9 is_stmt 0 view .LVU2549
 7624 0250 40B1     		cbz	r0, .L579
4129:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 7625              		.loc 1 4129 39 is_stmt 1 discriminator 2 view .LVU2550
4130:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7626              		.loc 1 4130 6 discriminator 2 view .LVU2551
4130:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7627              		.loc 1 4130 12 is_stmt 0 discriminator 2 view .LVU2552
 7628 0252 00EB5826 		add	r6, r0, r8, lsr #9
 7629              	.LVL885:
4130:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7630              		.loc 1 4130 12 discriminator 2 view .LVU2553
 7631 0256 9CE7     		b	.L539
 7632              	.LVL886:
 7633              	.L578:
4122:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
ARM GAS  /tmp/ccWTW02a.s 			page 277


 7634              		.loc 1 4122 30 is_stmt 1 discriminator 1 view .LVU2554
 7635 0258 0125     		movs	r5, #1
 7636              	.LVL887:
4122:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 7637              		.loc 1 4122 30 is_stmt 0 discriminator 1 view .LVU2555
 7638 025a 6575     		strb	r5, [r4, #21]
4122:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 7639              		.loc 1 4122 30 is_stmt 1 discriminator 1 view .LVU2556
 7640 025c EBE6     		b	.L524
 7641              	.LVL888:
 7642              	.L550:
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 7643              		.loc 1 4123 45 discriminator 3 view .LVU2557
 7644 025e 0225     		movs	r5, #2
 7645              	.LVL889:
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 7646              		.loc 1 4123 45 is_stmt 0 discriminator 3 view .LVU2558
 7647 0260 6575     		strb	r5, [r4, #21]
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 7648              		.loc 1 4123 45 is_stmt 1 discriminator 3 view .LVU2559
 7649 0262 E8E6     		b	.L524
 7650              	.LVL890:
 7651              	.L579:
4129:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 7652              		.loc 1 4129 18 discriminator 1 view .LVU2560
 7653 0264 0225     		movs	r5, #2
 7654              	.LVL891:
4129:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 7655              		.loc 1 4129 18 is_stmt 0 discriminator 1 view .LVU2561
 7656 0266 6575     		strb	r5, [r4, #21]
4129:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 7657              		.loc 1 4129 18 is_stmt 1 discriminator 1 view .LVU2562
 7658 0268 E5E6     		b	.L524
 7659              	.LVL892:
 7660              	.L563:
4084:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs) {
 7661              		.loc 1 4084 20 is_stmt 0 view .LVU2563
 7662 026a 1E46     		mov	r6, r3
 7663              	.LVL893:
4084:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs) {
 7664              		.loc 1 4084 20 view .LVU2564
 7665 026c 91E7     		b	.L539
 7666              	.LVL894:
 7667              	.L574:
4142:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 7668              		.loc 1 4142 5 is_stmt 1 view .LVU2565
4142:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 7669              		.loc 1 4142 9 is_stmt 0 view .LVU2566
 7670 026e 0123     		movs	r3, #1
 7671 0270 04F13001 		add	r1, r4, #48
 7672 0274 0398     		ldr	r0, [sp, #12]
 7673 0276 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 7674 0278 FFF7FEFF 		bl	disk_write
 7675              	.LVL895:
4142:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 7676              		.loc 1 4142 8 view .LVU2567
 7677 027c 20B9     		cbnz	r0, .L580
ARM GAS  /tmp/ccWTW02a.s 			page 278


4142:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 7678              		.loc 1 4142 84 is_stmt 1 discriminator 2 view .LVU2568
4143:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7679              		.loc 1 4143 5 discriminator 2 view .LVU2569
4143:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7680              		.loc 1 4143 14 is_stmt 0 discriminator 2 view .LVU2570
 7681 027e 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 7682 0280 03F07F03 		and	r3, r3, #127
 7683 0284 2375     		strb	r3, [r4, #20]
 7684 0286 9AE7     		b	.L555
 7685              	.L580:
4142:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 7686              		.loc 1 4142 62 is_stmt 1 discriminator 1 view .LVU2571
 7687 0288 0125     		movs	r5, #1
 7688              	.LVL896:
4142:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 7689              		.loc 1 4142 62 is_stmt 0 discriminator 1 view .LVU2572
 7690 028a 6575     		strb	r5, [r4, #21]
4142:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 7691              		.loc 1 4142 62 is_stmt 1 discriminator 1 view .LVU2573
 7692 028c D3E6     		b	.L524
 7693              	.LVL897:
 7694              	.L575:
4146:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7695              		.loc 1 4146 57 discriminator 1 view .LVU2574
 7696 028e 0125     		movs	r5, #1
 7697              	.LVL898:
4146:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7698              		.loc 1 4146 57 is_stmt 0 discriminator 1 view .LVU2575
 7699 0290 6575     		strb	r5, [r4, #21]
4146:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7700              		.loc 1 4146 57 is_stmt 1 discriminator 1 view .LVU2576
 7701 0292 D0E6     		b	.L524
 7702              	.LVL899:
 7703              	.L560:
4048:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7704              		.loc 1 4048 9 is_stmt 0 view .LVU2577
 7705 0294 1125     		movs	r5, #17
 7706              	.LVL900:
4048:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7707              		.loc 1 4048 9 view .LVU2578
 7708 0296 CEE6     		b	.L524
 7709              		.cfi_endproc
 7710              	.LFE185:
 7712              		.section	.text.f_opendir,"ax",%progbits
 7713              		.align	1
 7714              		.global	f_opendir
 7715              		.syntax unified
 7716              		.thumb
 7717              		.thumb_func
 7718              		.fpu fpv5-d16
 7720              	f_opendir:
 7721              	.LVL901:
 7722              	.LFB186:
4166:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7723              		.loc 1 4166 1 is_stmt 1 view -0
 7724              		.cfi_startproc
ARM GAS  /tmp/ccWTW02a.s 			page 279


 7725              		@ args = 0, pretend = 0, frame = 16
 7726              		@ frame_needed = 0, uses_anonymous_args = 0
4166:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7727              		.loc 1 4166 1 is_stmt 0 view .LVU2580
 7728 0000 30B5     		push	{r4, r5, lr}
 7729              	.LCFI79:
 7730              		.cfi_def_cfa_offset 12
 7731              		.cfi_offset 4, -12
 7732              		.cfi_offset 5, -8
 7733              		.cfi_offset 14, -4
 7734 0002 85B0     		sub	sp, sp, #20
 7735              	.LCFI80:
 7736              		.cfi_def_cfa_offset 32
 7737 0004 0191     		str	r1, [sp, #4]
4167:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 7738              		.loc 1 4167 2 is_stmt 1 view .LVU2581
4168:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID *obj;
 7739              		.loc 1 4168 2 view .LVU2582
4169:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
 7740              		.loc 1 4169 2 view .LVU2583
4173:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7741              		.loc 1 4173 2 view .LVU2584
4173:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7742              		.loc 1 4173 5 is_stmt 0 view .LVU2585
 7743 0006 0028     		cmp	r0, #0
 7744 0008 3DD0     		beq	.L588
 7745 000a 0546     		mov	r5, r0
4176:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, 0);
 7746              		.loc 1 4176 2 is_stmt 1 view .LVU2586
 7747              	.LVL902:
4177:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7748              		.loc 1 4177 2 view .LVU2587
4177:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7749              		.loc 1 4177 8 is_stmt 0 view .LVU2588
 7750 000c 0022     		movs	r2, #0
 7751 000e 03A9     		add	r1, sp, #12
 7752              	.LVL903:
4177:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7753              		.loc 1 4177 8 view .LVU2589
 7754 0010 01A8     		add	r0, sp, #4
 7755              	.LVL904:
4177:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7756              		.loc 1 4177 8 view .LVU2590
 7757 0012 FFF7FEFF 		bl	find_volume
 7758              	.LVL905:
4178:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->fs = fs;
 7759              		.loc 1 4178 2 is_stmt 1 view .LVU2591
4178:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->fs = fs;
 7760              		.loc 1 4178 5 is_stmt 0 view .LVU2592
 7761 0016 0446     		mov	r4, r0
 7762 0018 28B1     		cbz	r0, .L593
 7763              	.L583:
4220:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7764              		.loc 1 4220 2 is_stmt 1 view .LVU2593
4220:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7765              		.loc 1 4220 5 is_stmt 0 view .LVU2594
 7766 001a 0CB1     		cbz	r4, .L582
ARM GAS  /tmp/ccWTW02a.s 			page 280


 7767              	.L587:
4220:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7768              		.loc 1 4220 20 is_stmt 1 discriminator 1 view .LVU2595
4220:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7769              		.loc 1 4220 28 is_stmt 0 discriminator 1 view .LVU2596
 7770 001c 0023     		movs	r3, #0
 7771 001e 2B60     		str	r3, [r5]
 7772              	.LVL906:
 7773              	.L582:
4223:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7774              		.loc 1 4223 1 view .LVU2597
 7775 0020 2046     		mov	r0, r4
 7776 0022 05B0     		add	sp, sp, #20
 7777              	.LCFI81:
 7778              		.cfi_remember_state
 7779              		.cfi_def_cfa_offset 12
 7780              		@ sp needed
 7781 0024 30BD     		pop	{r4, r5, pc}
 7782              	.LVL907:
 7783              	.L593:
 7784              	.LCFI82:
 7785              		.cfi_restore_state
4179:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 7786              		.loc 1 4179 3 is_stmt 1 view .LVU2598
4179:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 7787              		.loc 1 4179 11 is_stmt 0 view .LVU2599
 7788 0026 039B     		ldr	r3, [sp, #12]
 7789 0028 2B60     		str	r3, [r5]
4180:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
 7790              		.loc 1 4180 18 is_stmt 1 view .LVU2600
4181:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
 7791              		.loc 1 4181 3 view .LVU2601
4181:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
 7792              		.loc 1 4181 9 is_stmt 0 view .LVU2602
 7793 002a 0199     		ldr	r1, [sp, #4]
 7794 002c 2846     		mov	r0, r5
 7795 002e FFF7FEFF 		bl	follow_path
 7796              	.LVL908:
4182:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(dp->fn[NSFLAG] & NS_NONAME)) {	/* It is not the origin directory itself */
 7797              		.loc 1 4182 3 is_stmt 1 view .LVU2603
4182:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(dp->fn[NSFLAG] & NS_NONAME)) {	/* It is not the origin directory itself */
 7798              		.loc 1 4182 6 is_stmt 0 view .LVU2604
 7799 0032 0446     		mov	r4, r0
 7800 0034 18BB     		cbnz	r0, .L584
4183:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (obj->attr & AM_DIR) {		/* This object is a sub-directory */
 7801              		.loc 1 4183 4 is_stmt 1 view .LVU2605
4183:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (obj->attr & AM_DIR) {		/* This object is a sub-directory */
 7802              		.loc 1 4183 8 is_stmt 0 view .LVU2606
 7803 0036 95F92F30 		ldrsb	r3, [r5, #47]
4183:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (obj->attr & AM_DIR) {		/* This object is a sub-directory */
 7804              		.loc 1 4183 7 view .LVU2607
 7805 003a 002B     		cmp	r3, #0
 7806 003c 08DB     		blt	.L585
4184:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 7807              		.loc 1 4184 5 is_stmt 1 view .LVU2608
4184:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 7808              		.loc 1 4184 12 is_stmt 0 view .LVU2609
ARM GAS  /tmp/ccWTW02a.s 			page 281


 7809 003e AB79     		ldrb	r3, [r5, #6]	@ zero_extendqisi2
4184:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 7810              		.loc 1 4184 8 view .LVU2610
 7811 0040 13F0100F 		tst	r3, #16
 7812 0044 1AD0     		beq	.L589
4196:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7813              		.loc 1 4196 7 is_stmt 1 view .LVU2611
4196:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7814              		.loc 1 4196 21 is_stmt 0 view .LVU2612
 7815 0046 296A     		ldr	r1, [r5, #32]
 7816 0048 0398     		ldr	r0, [sp, #12]
 7817 004a FFF7FEFF 		bl	ld_clust
 7818              	.LVL909:
4196:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7819              		.loc 1 4196 19 view .LVU2613
 7820 004e A860     		str	r0, [r5, #8]
 7821              	.L585:
4202:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->id = fs->id;
 7822              		.loc 1 4202 4 is_stmt 1 view .LVU2614
4203:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
 7823              		.loc 1 4203 5 view .LVU2615
4203:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
 7824              		.loc 1 4203 17 is_stmt 0 view .LVU2616
 7825 0050 039B     		ldr	r3, [sp, #12]
 7826 0052 DB88     		ldrh	r3, [r3, #6]
4203:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
 7827              		.loc 1 4203 13 view .LVU2617
 7828 0054 AB80     		strh	r3, [r5, #4]	@ movhi
4204:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 7829              		.loc 1 4204 5 is_stmt 1 view .LVU2618
4204:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 7830              		.loc 1 4204 11 is_stmt 0 view .LVU2619
 7831 0056 0021     		movs	r1, #0
 7832 0058 2846     		mov	r0, r5
 7833 005a FFF7FEFF 		bl	dir_sdi
 7834              	.LVL910:
4206:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (obj->sclust) {
 7835              		.loc 1 4206 5 is_stmt 1 view .LVU2620
4206:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (obj->sclust) {
 7836              		.loc 1 4206 8 is_stmt 0 view .LVU2621
 7837 005e 0446     		mov	r4, r0
 7838 0060 68B9     		cbnz	r0, .L584
4207:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->lockid = inc_lock(dp, 0);	/* Lock the sub directory */
 7839              		.loc 1 4207 6 is_stmt 1 view .LVU2622
4207:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->lockid = inc_lock(dp, 0);	/* Lock the sub directory */
 7840              		.loc 1 4207 13 is_stmt 0 view .LVU2623
 7841 0062 AB68     		ldr	r3, [r5, #8]
4207:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->lockid = inc_lock(dp, 0);	/* Lock the sub directory */
 7842              		.loc 1 4207 9 view .LVU2624
 7843 0064 13B9     		cbnz	r3, .L594
4211:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7844              		.loc 1 4211 7 is_stmt 1 view .LVU2625
4211:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7845              		.loc 1 4211 19 is_stmt 0 view .LVU2626
 7846 0066 0023     		movs	r3, #0
 7847 0068 2B61     		str	r3, [r5, #16]
 7848 006a 08E0     		b	.L584
ARM GAS  /tmp/ccWTW02a.s 			page 282


 7849              	.L594:
4208:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!obj->lockid) res = FR_TOO_MANY_OPEN_FILES;
 7850              		.loc 1 4208 7 is_stmt 1 view .LVU2627
4208:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!obj->lockid) res = FR_TOO_MANY_OPEN_FILES;
 7851              		.loc 1 4208 21 is_stmt 0 view .LVU2628
 7852 006c 0021     		movs	r1, #0
 7853 006e 2846     		mov	r0, r5
 7854 0070 FFF7FEFF 		bl	inc_lock
 7855              	.LVL911:
4208:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!obj->lockid) res = FR_TOO_MANY_OPEN_FILES;
 7856              		.loc 1 4208 19 view .LVU2629
 7857 0074 2861     		str	r0, [r5, #16]
4209:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
 7858              		.loc 1 4209 7 is_stmt 1 view .LVU2630
4209:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
 7859              		.loc 1 4209 10 is_stmt 0 view .LVU2631
 7860 0076 10B9     		cbnz	r0, .L584
 7861              	.LVL912:
4209:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
 7862              		.loc 1 4209 29 view .LVU2632
 7863 0078 1224     		movs	r4, #18
 7864 007a CEE7     		b	.L583
 7865              	.LVL913:
 7866              	.L589:
4199:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7867              		.loc 1 4199 10 view .LVU2633
 7868 007c 0524     		movs	r4, #5
 7869              	.LVL914:
 7870              	.L584:
4217:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
 7871              		.loc 1 4217 16 is_stmt 1 view .LVU2634
4218:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 7872              		.loc 1 4218 3 view .LVU2635
4218:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 7873              		.loc 1 4218 6 is_stmt 0 view .LVU2636
 7874 007e 042C     		cmp	r4, #4
 7875 0080 CBD1     		bne	.L583
 7876              	.LVL915:
4218:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 7877              		.loc 1 4218 30 view .LVU2637
 7878 0082 0524     		movs	r4, #5
 7879 0084 CAE7     		b	.L587
 7880              	.LVL916:
 7881              	.L588:
4173:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7882              		.loc 1 4173 18 view .LVU2638
 7883 0086 0924     		movs	r4, #9
 7884 0088 CAE7     		b	.L582
 7885              		.cfi_endproc
 7886              	.LFE186:
 7888              		.section	.text.f_closedir,"ax",%progbits
 7889              		.align	1
 7890              		.global	f_closedir
 7891              		.syntax unified
 7892              		.thumb
 7893              		.thumb_func
 7894              		.fpu fpv5-d16
ARM GAS  /tmp/ccWTW02a.s 			page 283


 7896              	f_closedir:
 7897              	.LVL917:
 7898              	.LFB187:
4235:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7899              		.loc 1 4235 1 is_stmt 1 view -0
 7900              		.cfi_startproc
 7901              		@ args = 0, pretend = 0, frame = 8
 7902              		@ frame_needed = 0, uses_anonymous_args = 0
4235:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7903              		.loc 1 4235 1 is_stmt 0 view .LVU2640
 7904 0000 10B5     		push	{r4, lr}
 7905              	.LCFI83:
 7906              		.cfi_def_cfa_offset 8
 7907              		.cfi_offset 4, -8
 7908              		.cfi_offset 14, -4
 7909 0002 82B0     		sub	sp, sp, #8
 7910              	.LCFI84:
 7911              		.cfi_def_cfa_offset 16
 7912 0004 0446     		mov	r4, r0
4236:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 7913              		.loc 1 4236 2 is_stmt 1 view .LVU2641
4237:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7914              		.loc 1 4237 2 view .LVU2642
4240:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7915              		.loc 1 4240 2 view .LVU2643
4240:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7916              		.loc 1 4240 8 is_stmt 0 view .LVU2644
 7917 0006 01A9     		add	r1, sp, #4
 7918 0008 FFF7FEFF 		bl	validate
 7919              	.LVL918:
4241:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 7920              		.loc 1 4241 2 is_stmt 1 view .LVU2645
4241:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 7921              		.loc 1 4241 5 is_stmt 0 view .LVU2646
 7922 000c 20B9     		cbnz	r0, .L596
4243:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dec_lock(dp->obj.lockid);
 7923              		.loc 1 4243 3 is_stmt 1 view .LVU2647
4243:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dec_lock(dp->obj.lockid);
 7924              		.loc 1 4243 14 is_stmt 0 view .LVU2648
 7925 000e 2369     		ldr	r3, [r4, #16]
4243:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dec_lock(dp->obj.lockid);
 7926              		.loc 1 4243 6 view .LVU2649
 7927 0010 23B9     		cbnz	r3, .L599
 7928              	.L597:
 7929              	.LVL919:
4246:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7930              		.loc 1 4246 3 is_stmt 1 view .LVU2650
4246:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7931              		.loc 1 4246 6 is_stmt 0 view .LVU2651
 7932 0012 08B9     		cbnz	r0, .L596
4249:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 7933              		.loc 1 4249 4 is_stmt 1 view .LVU2652
4249:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 7934              		.loc 1 4249 15 is_stmt 0 view .LVU2653
 7935 0014 0023     		movs	r3, #0
 7936 0016 2360     		str	r3, [r4]
 7937              	.LVL920:
ARM GAS  /tmp/ccWTW02a.s 			page 284


 7938              	.L596:
4255:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7939              		.loc 1 4255 2 is_stmt 1 view .LVU2654
4256:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7940              		.loc 1 4256 1 is_stmt 0 view .LVU2655
 7941 0018 02B0     		add	sp, sp, #8
 7942              	.LCFI85:
 7943              		.cfi_remember_state
 7944              		.cfi_def_cfa_offset 8
 7945              		@ sp needed
 7946 001a 10BD     		pop	{r4, pc}
 7947              	.LVL921:
 7948              	.L599:
 7949              	.LCFI86:
 7950              		.cfi_restore_state
4244:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 7951              		.loc 1 4244 4 is_stmt 1 view .LVU2656
4244:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 7952              		.loc 1 4244 10 is_stmt 0 view .LVU2657
 7953 001c 1846     		mov	r0, r3
 7954 001e FFF7FEFF 		bl	dec_lock
 7955              	.LVL922:
4244:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 7956              		.loc 1 4244 10 view .LVU2658
 7957 0022 F6E7     		b	.L597
 7958              		.cfi_endproc
 7959              	.LFE187:
 7961              		.section	.text.f_readdir,"ax",%progbits
 7962              		.align	1
 7963              		.global	f_readdir
 7964              		.syntax unified
 7965              		.thumb
 7966              		.thumb_func
 7967              		.fpu fpv5-d16
 7969              	f_readdir:
 7970              	.LVL923:
 7971              	.LFB188:
4269:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7972              		.loc 1 4269 1 is_stmt 1 view -0
 7973              		.cfi_startproc
 7974              		@ args = 0, pretend = 0, frame = 8
 7975              		@ frame_needed = 0, uses_anonymous_args = 0
4269:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7976              		.loc 1 4269 1 is_stmt 0 view .LVU2660
 7977 0000 70B5     		push	{r4, r5, r6, lr}
 7978              	.LCFI87:
 7979              		.cfi_def_cfa_offset 16
 7980              		.cfi_offset 4, -16
 7981              		.cfi_offset 5, -12
 7982              		.cfi_offset 6, -8
 7983              		.cfi_offset 14, -4
 7984 0002 82B0     		sub	sp, sp, #8
 7985              	.LCFI88:
 7986              		.cfi_def_cfa_offset 24
 7987 0004 0446     		mov	r4, r0
 7988 0006 0D46     		mov	r5, r1
4270:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
ARM GAS  /tmp/ccWTW02a.s 			page 285


 7989              		.loc 1 4270 2 is_stmt 1 view .LVU2661
4271:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
 7990              		.loc 1 4271 2 view .LVU2662
4275:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7991              		.loc 1 4275 2 view .LVU2663
4275:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7992              		.loc 1 4275 8 is_stmt 0 view .LVU2664
 7993 0008 01A9     		add	r1, sp, #4
 7994              	.LVL924:
4275:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7995              		.loc 1 4275 8 view .LVU2665
 7996 000a FFF7FEFF 		bl	validate
 7997              	.LVL925:
4276:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!fno) {
 7998              		.loc 1 4276 2 is_stmt 1 view .LVU2666
4276:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!fno) {
 7999              		.loc 1 4276 5 is_stmt 0 view .LVU2667
 8000 000e 0646     		mov	r6, r0
 8001 0010 C0B9     		cbnz	r0, .L601
4277:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_sdi(dp, 0);			/* Rewind the directory object */
 8002              		.loc 1 4277 3 is_stmt 1 view .LVU2668
4277:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_sdi(dp, 0);			/* Rewind the directory object */
 8003              		.loc 1 4277 6 is_stmt 0 view .LVU2669
 8004 0012 95B1     		cbz	r5, .L606
4280:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_read(dp, 0);			/* Read an item */
 8005              		.loc 1 4280 19 is_stmt 1 view .LVU2670
4281:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory */
 8006              		.loc 1 4281 4 view .LVU2671
4281:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory */
 8007              		.loc 1 4281 10 is_stmt 0 view .LVU2672
 8008 0014 0021     		movs	r1, #0
 8009 0016 2046     		mov	r0, r4
 8010              	.LVL926:
4281:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory */
 8011              		.loc 1 4281 10 view .LVU2673
 8012 0018 FFF7FEFF 		bl	dir_read
 8013              	.LVL927:
4282:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {				/* A valid entry is found */
 8014              		.loc 1 4282 4 is_stmt 1 view .LVU2674
4282:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {				/* A valid entry is found */
 8015              		.loc 1 4282 7 is_stmt 0 view .LVU2675
 8016 001c 0428     		cmp	r0, #4
 8017 001e 00D0     		beq	.L603
4283:Middlewares/Third_Party/FatFs/src/ff.c **** 				get_fileinfo(dp, fno);		/* Get the object information */
 8018              		.loc 1 4283 4 is_stmt 1 view .LVU2676
4283:Middlewares/Third_Party/FatFs/src/ff.c **** 				get_fileinfo(dp, fno);		/* Get the object information */
 8019              		.loc 1 4283 7 is_stmt 0 view .LVU2677
 8020 0020 98B9     		cbnz	r0, .L604
 8021              	.L603:
 8022              	.LVL928:
4284:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_next(dp, 0);		/* Increment index for next */
 8023              		.loc 1 4284 5 is_stmt 1 view .LVU2678
 8024 0022 2946     		mov	r1, r5
 8025 0024 2046     		mov	r0, r4
 8026 0026 FFF7FEFF 		bl	get_fileinfo
 8027              	.LVL929:
4285:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory now */
ARM GAS  /tmp/ccWTW02a.s 			page 286


 8028              		.loc 1 4285 5 view .LVU2679
4285:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory now */
 8029              		.loc 1 4285 11 is_stmt 0 view .LVU2680
 8030 002a 0021     		movs	r1, #0
 8031 002c 2046     		mov	r0, r4
 8032 002e FFF7FEFF 		bl	dir_next
 8033              	.LVL930:
4286:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8034              		.loc 1 4286 5 is_stmt 1 view .LVU2681
4286:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8035              		.loc 1 4286 8 is_stmt 0 view .LVU2682
 8036 0032 0428     		cmp	r0, #4
 8037 0034 06D0     		beq	.L601
4285:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory now */
 8038              		.loc 1 4285 11 view .LVU2683
 8039 0036 0646     		mov	r6, r0
 8040 0038 04E0     		b	.L601
 8041              	.L606:
4278:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 8042              		.loc 1 4278 4 is_stmt 1 view .LVU2684
4278:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 8043              		.loc 1 4278 10 is_stmt 0 view .LVU2685
 8044 003a 0021     		movs	r1, #0
 8045 003c 2046     		mov	r0, r4
 8046              	.LVL931:
4278:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 8047              		.loc 1 4278 10 view .LVU2686
 8048 003e FFF7FEFF 		bl	dir_sdi
 8049              	.LVL932:
 8050 0042 0646     		mov	r6, r0
 8051              	.LVL933:
 8052              	.L601:
4288:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8053              		.loc 1 4288 17 is_stmt 1 view .LVU2687
4291:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8054              		.loc 1 4291 2 view .LVU2688
4292:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8055              		.loc 1 4292 1 is_stmt 0 view .LVU2689
 8056 0044 3046     		mov	r0, r6
 8057 0046 02B0     		add	sp, sp, #8
 8058              	.LCFI89:
 8059              		.cfi_remember_state
 8060              		.cfi_def_cfa_offset 16
 8061              		@ sp needed
 8062 0048 70BD     		pop	{r4, r5, r6, pc}
 8063              	.LVL934:
 8064              	.L604:
 8065              	.LCFI90:
 8066              		.cfi_restore_state
4281:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory */
 8067              		.loc 1 4281 10 view .LVU2690
 8068 004a 0646     		mov	r6, r0
 8069 004c FAE7     		b	.L601
 8070              		.cfi_endproc
 8071              	.LFE188:
 8073              		.section	.text.f_stat,"ax",%progbits
 8074              		.align	1
ARM GAS  /tmp/ccWTW02a.s 			page 287


 8075              		.global	f_stat
 8076              		.syntax unified
 8077              		.thumb
 8078              		.thumb_func
 8079              		.fpu fpv5-d16
 8081              	f_stat:
 8082              	.LVL935:
 8083              	.LFB189:
4357:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8084              		.loc 1 4357 1 is_stmt 1 view -0
 8085              		.cfi_startproc
 8086              		@ args = 0, pretend = 0, frame = 56
 8087              		@ frame_needed = 0, uses_anonymous_args = 0
4357:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8088              		.loc 1 4357 1 is_stmt 0 view .LVU2692
 8089 0000 30B5     		push	{r4, r5, lr}
 8090              	.LCFI91:
 8091              		.cfi_def_cfa_offset 12
 8092              		.cfi_offset 4, -12
 8093              		.cfi_offset 5, -8
 8094              		.cfi_offset 14, -4
 8095 0002 8FB0     		sub	sp, sp, #60
 8096              	.LCFI92:
 8097              		.cfi_def_cfa_offset 72
 8098 0004 0190     		str	r0, [sp, #4]
 8099 0006 0C46     		mov	r4, r1
4358:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
 8100              		.loc 1 4358 2 is_stmt 1 view .LVU2693
4359:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
 8101              		.loc 1 4359 2 view .LVU2694
4364:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8102              		.loc 1 4364 2 view .LVU2695
4364:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8103              		.loc 1 4364 8 is_stmt 0 view .LVU2696
 8104 0008 0022     		movs	r2, #0
 8105 000a 02A9     		add	r1, sp, #8
 8106              	.LVL936:
4364:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8107              		.loc 1 4364 8 view .LVU2697
 8108 000c 01A8     		add	r0, sp, #4
 8109              	.LVL937:
4364:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8110              		.loc 1 4364 8 view .LVU2698
 8111 000e FFF7FEFF 		bl	find_volume
 8112              	.LVL938:
4365:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(dj.obj.fs);
 8113              		.loc 1 4365 2 is_stmt 1 view .LVU2699
4365:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(dj.obj.fs);
 8114              		.loc 1 4365 5 is_stmt 0 view .LVU2700
 8115 0012 0546     		mov	r5, r0
 8116 0014 10B1     		cbz	r0, .L611
 8117              	.LVL939:
 8118              	.L608:
4375:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8119              		.loc 1 4375 16 is_stmt 1 view .LVU2701
4378:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8120              		.loc 1 4378 2 view .LVU2702
ARM GAS  /tmp/ccWTW02a.s 			page 288


4379:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8121              		.loc 1 4379 1 is_stmt 0 view .LVU2703
 8122 0016 2846     		mov	r0, r5
 8123 0018 0FB0     		add	sp, sp, #60
 8124              	.LCFI93:
 8125              		.cfi_remember_state
 8126              		.cfi_def_cfa_offset 12
 8127              		@ sp needed
 8128 001a 30BD     		pop	{r4, r5, pc}
 8129              	.LVL940:
 8130              	.L611:
 8131              	.LCFI94:
 8132              		.cfi_restore_state
4366:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 8133              		.loc 1 4366 25 is_stmt 1 view .LVU2704
4367:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
 8134              		.loc 1 4367 3 view .LVU2705
4367:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
 8135              		.loc 1 4367 9 is_stmt 0 view .LVU2706
 8136 001c 0199     		ldr	r1, [sp, #4]
 8137 001e 02A8     		add	r0, sp, #8
 8138              	.LVL941:
4367:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
 8139              		.loc 1 4367 9 view .LVU2707
 8140 0020 FFF7FEFF 		bl	follow_path
 8141              	.LVL942:
4368:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* It is origin directory */
 8142              		.loc 1 4368 3 is_stmt 1 view .LVU2708
4368:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* It is origin directory */
 8143              		.loc 1 4368 6 is_stmt 0 view .LVU2709
 8144 0024 0546     		mov	r5, r0
 8145 0026 0028     		cmp	r0, #0
 8146 0028 F5D1     		bne	.L608
4369:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
 8147              		.loc 1 4369 4 is_stmt 1 view .LVU2710
4369:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
 8148              		.loc 1 4369 8 is_stmt 0 view .LVU2711
 8149 002a 9DF93730 		ldrsb	r3, [sp, #55]
4369:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
 8150              		.loc 1 4369 7 view .LVU2712
 8151 002e 002B     		cmp	r3, #0
 8152 0030 06DB     		blt	.L609
4372:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8153              		.loc 1 4372 5 is_stmt 1 view .LVU2713
4372:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8154              		.loc 1 4372 8 is_stmt 0 view .LVU2714
 8155 0032 002C     		cmp	r4, #0
 8156 0034 EFD0     		beq	.L608
4372:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8157              		.loc 1 4372 14 is_stmt 1 discriminator 1 view .LVU2715
 8158 0036 2146     		mov	r1, r4
 8159 0038 02A8     		add	r0, sp, #8
 8160              	.LVL943:
4372:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8161              		.loc 1 4372 14 is_stmt 0 discriminator 1 view .LVU2716
 8162 003a FFF7FEFF 		bl	get_fileinfo
 8163              	.LVL944:
ARM GAS  /tmp/ccWTW02a.s 			page 289


 8164 003e EAE7     		b	.L608
 8165              	.LVL945:
 8166              	.L609:
4370:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {							/* Found an object */
 8167              		.loc 1 4370 9 view .LVU2717
 8168 0040 0625     		movs	r5, #6
 8169 0042 E8E7     		b	.L608
 8170              		.cfi_endproc
 8171              	.LFE189:
 8173              		.section	.text.f_getfree,"ax",%progbits
 8174              		.align	1
 8175              		.global	f_getfree
 8176              		.syntax unified
 8177              		.thumb
 8178              		.thumb_func
 8179              		.fpu fpv5-d16
 8181              	f_getfree:
 8182              	.LVL946:
 8183              	.LFB190:
4393:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8184              		.loc 1 4393 1 is_stmt 1 view -0
 8185              		.cfi_startproc
 8186              		@ args = 0, pretend = 0, frame = 32
 8187              		@ frame_needed = 0, uses_anonymous_args = 0
4393:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8188              		.loc 1 4393 1 is_stmt 0 view .LVU2719
 8189 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 8190              	.LCFI95:
 8191              		.cfi_def_cfa_offset 32
 8192              		.cfi_offset 4, -32
 8193              		.cfi_offset 5, -28
 8194              		.cfi_offset 6, -24
 8195              		.cfi_offset 7, -20
 8196              		.cfi_offset 8, -16
 8197              		.cfi_offset 9, -12
 8198              		.cfi_offset 10, -8
 8199              		.cfi_offset 14, -4
 8200 0004 88B0     		sub	sp, sp, #32
 8201              	.LCFI96:
 8202              		.cfi_def_cfa_offset 64
 8203 0006 0190     		str	r0, [sp, #4]
 8204 0008 8846     		mov	r8, r1
 8205 000a 1446     		mov	r4, r2
4394:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 8206              		.loc 1 4394 2 is_stmt 1 view .LVU2720
4395:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD nfree, clst, sect, stat;
 8207              		.loc 1 4395 2 view .LVU2721
4396:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 8208              		.loc 1 4396 2 view .LVU2722
4397:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *p;
 8209              		.loc 1 4397 2 view .LVU2723
4398:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID obj;
 8210              		.loc 1 4398 2 view .LVU2724
4399:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8211              		.loc 1 4399 2 view .LVU2725
4403:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8212              		.loc 1 4403 2 view .LVU2726
ARM GAS  /tmp/ccWTW02a.s 			page 290


4403:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8213              		.loc 1 4403 8 is_stmt 0 view .LVU2727
 8214 000c 0022     		movs	r2, #0
 8215              	.LVL947:
4403:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8216              		.loc 1 4403 8 view .LVU2728
 8217 000e 07A9     		add	r1, sp, #28
 8218              	.LVL948:
4403:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8219              		.loc 1 4403 8 view .LVU2729
 8220 0010 01A8     		add	r0, sp, #4
 8221              	.LVL949:
4403:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8222              		.loc 1 4403 8 view .LVU2730
 8223 0012 FFF7FEFF 		bl	find_volume
 8224              	.LVL950:
4404:Middlewares/Third_Party/FatFs/src/ff.c **** 		*fatfs = fs;				/* Return ptr to the fs object */
 8225              		.loc 1 4404 2 is_stmt 1 view .LVU2731
4404:Middlewares/Third_Party/FatFs/src/ff.c **** 		*fatfs = fs;				/* Return ptr to the fs object */
 8226              		.loc 1 4404 5 is_stmt 0 view .LVU2732
 8227 0016 8146     		mov	r9, r0
 8228 0018 40B9     		cbnz	r0, .L613
4405:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* If free_clst is valid, return it without full cluster scan */
 8229              		.loc 1 4405 3 is_stmt 1 view .LVU2733
4405:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* If free_clst is valid, return it without full cluster scan */
 8230              		.loc 1 4405 10 is_stmt 0 view .LVU2734
 8231 001a 079B     		ldr	r3, [sp, #28]
 8232 001c 2360     		str	r3, [r4]
4407:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = fs->free_clst;
 8233              		.loc 1 4407 3 is_stmt 1 view .LVU2735
4407:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = fs->free_clst;
 8234              		.loc 1 4407 9 is_stmt 0 view .LVU2736
 8235 001e 1A69     		ldr	r2, [r3, #16]
4407:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = fs->free_clst;
 8236              		.loc 1 4407 26 view .LVU2737
 8237 0020 5D69     		ldr	r5, [r3, #20]
4407:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = fs->free_clst;
 8238              		.loc 1 4407 37 view .LVU2738
 8239 0022 A91E     		subs	r1, r5, #2
4407:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = fs->free_clst;
 8240              		.loc 1 4407 6 view .LVU2739
 8241 0024 8A42     		cmp	r2, r1
 8242 0026 05D8     		bhi	.L614
4408:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 8243              		.loc 1 4408 4 is_stmt 1 view .LVU2740
4408:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 8244              		.loc 1 4408 11 is_stmt 0 view .LVU2741
 8245 0028 C8F80020 		str	r2, [r8]
 8246              	.LVL951:
 8247              	.L613:
4465:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8248              		.loc 1 4465 2 is_stmt 1 view .LVU2742
4466:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8249              		.loc 1 4466 1 is_stmt 0 view .LVU2743
 8250 002c 4846     		mov	r0, r9
 8251 002e 08B0     		add	sp, sp, #32
 8252              	.LCFI97:
ARM GAS  /tmp/ccWTW02a.s 			page 291


 8253              		.cfi_remember_state
 8254              		.cfi_def_cfa_offset 32
 8255              		@ sp needed
 8256 0030 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 8257              	.LVL952:
 8258              	.L614:
 8259              	.LCFI98:
 8260              		.cfi_restore_state
4411:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_FAT12) {	/* FAT12: Sector unalighed FAT entries */
 8261              		.loc 1 4411 4 is_stmt 1 view .LVU2744
4412:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = 2; obj.fs = fs;
 8262              		.loc 1 4412 4 view .LVU2745
4412:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = 2; obj.fs = fs;
 8263              		.loc 1 4412 10 is_stmt 0 view .LVU2746
 8264 0034 1E78     		ldrb	r6, [r3]	@ zero_extendqisi2
4412:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = 2; obj.fs = fs;
 8265              		.loc 1 4412 7 view .LVU2747
 8266 0036 012E     		cmp	r6, #1
 8267 0038 05D0     		beq	.L628
4440:Middlewares/Third_Party/FatFs/src/ff.c **** 					i = 0; p = 0;
 8268              		.loc 1 4440 6 is_stmt 1 view .LVU2748
 8269              	.LVL953:
4440:Middlewares/Third_Party/FatFs/src/ff.c **** 					i = 0; p = 0;
 8270              		.loc 1 4440 27 view .LVU2749
4440:Middlewares/Third_Party/FatFs/src/ff.c **** 					i = 0; p = 0;
 8271              		.loc 1 4440 32 is_stmt 0 view .LVU2750
 8272 003a D3F820A0 		ldr	r10, [r3, #32]
 8273              	.LVL954:
4441:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 8274              		.loc 1 4441 6 is_stmt 1 view .LVU2751
4441:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 8275              		.loc 1 4441 13 view .LVU2752
4441:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 8276              		.loc 1 4441 15 is_stmt 0 view .LVU2753
 8277 003e 0024     		movs	r4, #0
 8278              	.LVL955:
4441:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 8279              		.loc 1 4441 8 view .LVU2754
 8280 0040 2646     		mov	r6, r4
4411:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_FAT12) {	/* FAT12: Sector unalighed FAT entries */
 8281              		.loc 1 4411 10 view .LVU2755
 8282 0042 2746     		mov	r7, r4
 8283 0044 2FE0     		b	.L624
 8284              	.LVL956:
 8285              	.L628:
4413:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
 8286              		.loc 1 4413 5 is_stmt 1 view .LVU2756
4413:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
 8287              		.loc 1 4413 15 view .LVU2757
4413:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
 8288              		.loc 1 4413 22 is_stmt 0 view .LVU2758
 8289 0046 0293     		str	r3, [sp, #8]
4413:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
 8290              		.loc 1 4413 10 view .LVU2759
 8291 0048 0224     		movs	r4, #2
 8292              	.LVL957:
4411:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_FAT12) {	/* FAT12: Sector unalighed FAT entries */
ARM GAS  /tmp/ccWTW02a.s 			page 292


 8293              		.loc 1 4411 10 view .LVU2760
 8294 004a 0027     		movs	r7, #0
 8295 004c 04E0     		b	.L618
 8296              	.LVL958:
 8297              	.L617:
4419:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 8298              		.loc 1 4419 13 is_stmt 1 view .LVU2761
4419:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 8299              		.loc 1 4419 5 is_stmt 0 view .LVU2762
 8300 004e 0134     		adds	r4, r4, #1
 8301              	.LVL959:
4419:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 8302              		.loc 1 4419 25 view .LVU2763
 8303 0050 079B     		ldr	r3, [sp, #28]
 8304 0052 5B69     		ldr	r3, [r3, #20]
4419:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 8305              		.loc 1 4419 5 view .LVU2764
 8306 0054 A342     		cmp	r3, r4
 8307 0056 35D9     		bls	.L616
 8308              	.LVL960:
 8309              	.L618:
4414:Middlewares/Third_Party/FatFs/src/ff.c **** 					stat = get_fat(&obj, clst);
 8310              		.loc 1 4414 5 is_stmt 1 view .LVU2765
4415:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
 8311              		.loc 1 4415 6 view .LVU2766
4415:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
 8312              		.loc 1 4415 13 is_stmt 0 view .LVU2767
 8313 0058 2146     		mov	r1, r4
 8314 005a 02A8     		add	r0, sp, #8
 8315 005c FFF7FEFF 		bl	get_fat
 8316              	.LVL961:
4416:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
 8317              		.loc 1 4416 6 is_stmt 1 view .LVU2768
4416:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
 8318              		.loc 1 4416 9 is_stmt 0 view .LVU2769
 8319 0060 B0F1FF3F 		cmp	r0, #-1
 8320 0064 2DD0     		beq	.L625
4417:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0) nfree++;
 8321              		.loc 1 4417 6 is_stmt 1 view .LVU2770
4417:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0) nfree++;
 8322              		.loc 1 4417 9 is_stmt 0 view .LVU2771
 8323 0066 0128     		cmp	r0, #1
 8324 0068 35D0     		beq	.L626
4418:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (++clst < fs->n_fatent);
 8325              		.loc 1 4418 6 is_stmt 1 view .LVU2772
4418:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (++clst < fs->n_fatent);
 8326              		.loc 1 4418 9 is_stmt 0 view .LVU2773
 8327 006a 0028     		cmp	r0, #0
 8328 006c EFD1     		bne	.L617
4418:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (++clst < fs->n_fatent);
 8329              		.loc 1 4418 21 is_stmt 1 discriminator 1 view .LVU2774
4418:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (++clst < fs->n_fatent);
 8330              		.loc 1 4418 26 is_stmt 0 discriminator 1 view .LVU2775
 8331 006e 0137     		adds	r7, r7, #1
 8332              	.LVL962:
4418:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (++clst < fs->n_fatent);
 8333              		.loc 1 4418 26 discriminator 1 view .LVU2776
ARM GAS  /tmp/ccWTW02a.s 			page 293


 8334 0070 EDE7     		b	.L617
 8335              	.LVL963:
 8336              	.L629:
4444:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res != FR_OK) break;
 8337              		.loc 1 4444 8 is_stmt 1 view .LVU2777
4444:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res != FR_OK) break;
 8338              		.loc 1 4444 14 is_stmt 0 view .LVU2778
 8339 0072 0AF10106 		add	r6, r10, #1
 8340              	.LVL964:
4444:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res != FR_OK) break;
 8341              		.loc 1 4444 14 view .LVU2779
 8342 0076 5146     		mov	r1, r10
 8343 0078 0798     		ldr	r0, [sp, #28]
 8344 007a FFF7FEFF 		bl	move_window
 8345              	.LVL965:
4445:Middlewares/Third_Party/FatFs/src/ff.c **** 							p = fs->win;
 8346              		.loc 1 4445 8 is_stmt 1 view .LVU2780
4445:Middlewares/Third_Party/FatFs/src/ff.c **** 							p = fs->win;
 8347              		.loc 1 4445 11 is_stmt 0 view .LVU2781
 8348 007e 8146     		mov	r9, r0
 8349 0080 00BB     		cbnz	r0, .L616
4446:Middlewares/Third_Party/FatFs/src/ff.c **** 							i = SS(fs);
 8350              		.loc 1 4446 8 is_stmt 1 view .LVU2782
4446:Middlewares/Third_Party/FatFs/src/ff.c **** 							i = SS(fs);
 8351              		.loc 1 4446 14 is_stmt 0 view .LVU2783
 8352 0082 079C     		ldr	r4, [sp, #28]
 8353              	.LVL966:
4446:Middlewares/Third_Party/FatFs/src/ff.c **** 							i = SS(fs);
 8354              		.loc 1 4446 10 view .LVU2784
 8355 0084 3034     		adds	r4, r4, #48
 8356              	.LVL967:
4447:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 8357              		.loc 1 4447 8 is_stmt 1 view .LVU2785
4444:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res != FR_OK) break;
 8358              		.loc 1 4444 14 is_stmt 0 view .LVU2786
 8359 0086 B246     		mov	r10, r6
4447:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 8360              		.loc 1 4447 10 view .LVU2787
 8361 0088 4FF40076 		mov	r6, #512
 8362              	.LVL968:
4447:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 8363              		.loc 1 4447 10 view .LVU2788
 8364 008c 0DE0     		b	.L619
 8365              	.LVL969:
 8366              	.L630:
4450:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 2; i -= 2;
 8367              		.loc 1 4450 8 is_stmt 1 view .LVU2789
4450:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 2; i -= 2;
 8368              		.loc 1 4450 12 is_stmt 0 view .LVU2790
 8369 008e 2046     		mov	r0, r4
 8370 0090 FFF7FEFF 		bl	ld_word
 8371              	.LVL970:
4450:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 2; i -= 2;
 8372              		.loc 1 4450 11 view .LVU2791
 8373 0094 00B9     		cbnz	r0, .L621
4450:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 2; i -= 2;
 8374              		.loc 1 4450 29 is_stmt 1 discriminator 1 view .LVU2792
ARM GAS  /tmp/ccWTW02a.s 			page 294


4450:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 2; i -= 2;
 8375              		.loc 1 4450 34 is_stmt 0 discriminator 1 view .LVU2793
 8376 0096 0137     		adds	r7, r7, #1
 8377              	.LVL971:
 8378              	.L621:
4451:Middlewares/Third_Party/FatFs/src/ff.c **** 						} else {
 8379              		.loc 1 4451 8 is_stmt 1 view .LVU2794
4451:Middlewares/Third_Party/FatFs/src/ff.c **** 						} else {
 8380              		.loc 1 4451 10 is_stmt 0 view .LVU2795
 8381 0098 0234     		adds	r4, r4, #2
 8382              	.LVL972:
4451:Middlewares/Third_Party/FatFs/src/ff.c **** 						} else {
 8383              		.loc 1 4451 16 is_stmt 1 view .LVU2796
4451:Middlewares/Third_Party/FatFs/src/ff.c **** 						} else {
 8384              		.loc 1 4451 18 is_stmt 0 view .LVU2797
 8385 009a 023E     		subs	r6, r6, #2
 8386              	.LVL973:
4451:Middlewares/Third_Party/FatFs/src/ff.c **** 						} else {
 8387              		.loc 1 4451 18 view .LVU2798
 8388 009c 01E0     		b	.L622
 8389              	.L623:
4454:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 8390              		.loc 1 4454 8 is_stmt 1 view .LVU2799
4454:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 8391              		.loc 1 4454 10 is_stmt 0 view .LVU2800
 8392 009e 0434     		adds	r4, r4, #4
 8393              	.LVL974:
4454:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 8394              		.loc 1 4454 16 is_stmt 1 view .LVU2801
4454:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 8395              		.loc 1 4454 18 is_stmt 0 view .LVU2802
 8396 00a0 043E     		subs	r6, r6, #4
 8397              	.LVL975:
 8398              	.L622:
4456:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 8399              		.loc 1 4456 14 is_stmt 1 view .LVU2803
4456:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 8400              		.loc 1 4456 6 is_stmt 0 view .LVU2804
 8401 00a2 013D     		subs	r5, r5, #1
 8402              	.LVL976:
4456:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 8403              		.loc 1 4456 6 view .LVU2805
 8404 00a4 0ED0     		beq	.L616
 8405              	.LVL977:
 8406              	.L624:
4442:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (i == 0) {
 8407              		.loc 1 4442 6 is_stmt 1 view .LVU2806
4443:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = move_window(fs, sect++);
 8408              		.loc 1 4443 7 view .LVU2807
4443:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = move_window(fs, sect++);
 8409              		.loc 1 4443 10 is_stmt 0 view .LVU2808
 8410 00a6 002E     		cmp	r6, #0
 8411 00a8 E3D0     		beq	.L629
 8412              	.LVL978:
 8413              	.L619:
4449:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (ld_word(p) == 0) nfree++;
 8414              		.loc 1 4449 7 is_stmt 1 view .LVU2809
ARM GAS  /tmp/ccWTW02a.s 			page 295


4449:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (ld_word(p) == 0) nfree++;
 8415              		.loc 1 4449 13 is_stmt 0 view .LVU2810
 8416 00aa 079B     		ldr	r3, [sp, #28]
 8417 00ac 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
4449:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (ld_word(p) == 0) nfree++;
 8418              		.loc 1 4449 10 view .LVU2811
 8419 00ae 022B     		cmp	r3, #2
 8420 00b0 EDD0     		beq	.L630
4453:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 4; i -= 4;
 8421              		.loc 1 4453 8 is_stmt 1 view .LVU2812
4453:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 4; i -= 4;
 8422              		.loc 1 4453 13 is_stmt 0 view .LVU2813
 8423 00b2 2046     		mov	r0, r4
 8424 00b4 FFF7FEFF 		bl	ld_dword
 8425              	.LVL979:
4453:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 4; i -= 4;
 8426              		.loc 1 4453 11 view .LVU2814
 8427 00b8 30F07043 		bics	r3, r0, #-268435456
 8428 00bc EFD1     		bne	.L623
4453:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 4; i -= 4;
 8429              		.loc 1 4453 45 is_stmt 1 discriminator 1 view .LVU2815
4453:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 4; i -= 4;
 8430              		.loc 1 4453 50 is_stmt 0 discriminator 1 view .LVU2816
 8431 00be 0137     		adds	r7, r7, #1
 8432              	.LVL980:
4453:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 4; i -= 4;
 8433              		.loc 1 4453 50 discriminator 1 view .LVU2817
 8434 00c0 EDE7     		b	.L623
 8435              	.LVL981:
 8436              	.L625:
4416:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
 8437              		.loc 1 4416 36 view .LVU2818
 8438 00c2 B146     		mov	r9, r6
 8439              	.LVL982:
 8440              	.L616:
4459:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clst = nfree;	/* Now free_clst is valid */
 8441              		.loc 1 4459 4 is_stmt 1 view .LVU2819
4459:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clst = nfree;	/* Now free_clst is valid */
 8442              		.loc 1 4459 11 is_stmt 0 view .LVU2820
 8443 00c4 C8F80070 		str	r7, [r8]
4460:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;		/* FSInfo is to be updated */
 8444              		.loc 1 4460 4 is_stmt 1 view .LVU2821
4460:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;		/* FSInfo is to be updated */
 8445              		.loc 1 4460 6 is_stmt 0 view .LVU2822
 8446 00c8 079B     		ldr	r3, [sp, #28]
4460:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;		/* FSInfo is to be updated */
 8447              		.loc 1 4460 18 view .LVU2823
 8448 00ca 1F61     		str	r7, [r3, #16]
4461:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8449              		.loc 1 4461 4 is_stmt 1 view .LVU2824
4461:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8450              		.loc 1 4461 17 is_stmt 0 view .LVU2825
 8451 00cc 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
 8452 00ce 42F00102 		orr	r2, r2, #1
 8453 00d2 1A71     		strb	r2, [r3, #4]
 8454 00d4 AAE7     		b	.L613
 8455              	.LVL983:
ARM GAS  /tmp/ccWTW02a.s 			page 296


 8456              	.L626:
4417:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0) nfree++;
 8457              		.loc 1 4417 27 view .LVU2826
 8458 00d6 4FF00209 		mov	r9, #2
 8459 00da F3E7     		b	.L616
 8460              		.cfi_endproc
 8461              	.LFE190:
 8463              		.section	.text.f_truncate,"ax",%progbits
 8464              		.align	1
 8465              		.global	f_truncate
 8466              		.syntax unified
 8467              		.thumb
 8468              		.thumb_func
 8469              		.fpu fpv5-d16
 8471              	f_truncate:
 8472              	.LVL984:
 8473              	.LFB191:
4478:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8474              		.loc 1 4478 1 is_stmt 1 view -0
 8475              		.cfi_startproc
 8476              		@ args = 0, pretend = 0, frame = 8
 8477              		@ frame_needed = 0, uses_anonymous_args = 0
4478:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8478              		.loc 1 4478 1 is_stmt 0 view .LVU2828
 8479 0000 30B5     		push	{r4, r5, lr}
 8480              	.LCFI99:
 8481              		.cfi_def_cfa_offset 12
 8482              		.cfi_offset 4, -12
 8483              		.cfi_offset 5, -8
 8484              		.cfi_offset 14, -4
 8485 0002 83B0     		sub	sp, sp, #12
 8486              	.LCFI100:
 8487              		.cfi_def_cfa_offset 24
 8488 0004 0446     		mov	r4, r0
4479:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 8489              		.loc 1 4479 2 is_stmt 1 view .LVU2829
4480:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ncl;
 8490              		.loc 1 4480 2 view .LVU2830
4481:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8491              		.loc 1 4481 2 view .LVU2831
4484:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
 8492              		.loc 1 4484 2 view .LVU2832
4484:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
 8493              		.loc 1 4484 8 is_stmt 0 view .LVU2833
 8494 0006 01A9     		add	r1, sp, #4
 8495 0008 FFF7FEFF 		bl	validate
 8496              	.LVL985:
4485:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 8497              		.loc 1 4485 2 is_stmt 1 view .LVU2834
4485:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 8498              		.loc 1 4485 5 is_stmt 0 view .LVU2835
 8499 000c 0546     		mov	r5, r0
 8500 000e E8B9     		cbnz	r0, .L634
4485:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 8501              		.loc 1 4485 27 discriminator 2 view .LVU2836
 8502 0010 657D     		ldrb	r5, [r4, #21]	@ zero_extendqisi2
 8503              	.LVL986:
ARM GAS  /tmp/ccWTW02a.s 			page 297


4485:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 8504              		.loc 1 4485 19 discriminator 2 view .LVU2837
 8505 0012 DDB9     		cbnz	r5, .L634
4486:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8506              		.loc 1 4486 2 is_stmt 1 view .LVU2838
4486:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8507              		.loc 1 4486 10 is_stmt 0 view .LVU2839
 8508 0014 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
4486:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8509              		.loc 1 4486 5 view .LVU2840
 8510 0016 13F0020F 		tst	r3, #2
 8511 001a 45D0     		beq	.L640
4488:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
 8512              		.loc 1 4488 2 is_stmt 1 view .LVU2841
4488:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
 8513              		.loc 1 4488 8 is_stmt 0 view .LVU2842
 8514 001c A369     		ldr	r3, [r4, #24]
4488:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
 8515              		.loc 1 4488 24 view .LVU2843
 8516 001e E268     		ldr	r2, [r4, #12]
4488:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
 8517              		.loc 1 4488 5 view .LVU2844
 8518 0020 9342     		cmp	r3, r2
 8519 0022 13D2     		bcs	.L634
4489:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = remove_chain(&fp->obj, fp->obj.sclust, 0);
 8520              		.loc 1 4489 3 is_stmt 1 view .LVU2845
4489:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = remove_chain(&fp->obj, fp->obj.sclust, 0);
 8521              		.loc 1 4489 6 is_stmt 0 view .LVU2846
 8522 0024 ABB9     		cbnz	r3, .L635
4490:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.sclust = 0;
 8523              		.loc 1 4490 4 is_stmt 1 view .LVU2847
4490:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.sclust = 0;
 8524              		.loc 1 4490 10 is_stmt 0 view .LVU2848
 8525 0026 0022     		movs	r2, #0
 8526 0028 A168     		ldr	r1, [r4, #8]
 8527 002a 2046     		mov	r0, r4
 8528 002c FFF7FEFF 		bl	remove_chain
 8529              	.LVL987:
 8530 0030 0546     		mov	r5, r0
 8531              	.LVL988:
4491:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {				/* When truncate a part of the file, remove remaining clusters */
 8532              		.loc 1 4491 4 is_stmt 1 view .LVU2849
4491:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {				/* When truncate a part of the file, remove remaining clusters */
 8533              		.loc 1 4491 19 is_stmt 0 view .LVU2850
 8534 0032 0023     		movs	r3, #0
 8535 0034 A360     		str	r3, [r4, #8]
 8536              	.LVL989:
 8537              	.L636:
4501:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->flag |= FA_MODIFIED;
 8538              		.loc 1 4501 3 is_stmt 1 view .LVU2851
4501:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->flag |= FA_MODIFIED;
 8539              		.loc 1 4501 23 is_stmt 0 view .LVU2852
 8540 0036 A369     		ldr	r3, [r4, #24]
4501:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->flag |= FA_MODIFIED;
 8541              		.loc 1 4501 19 view .LVU2853
 8542 0038 E360     		str	r3, [r4, #12]
4502:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
ARM GAS  /tmp/ccWTW02a.s 			page 298


 8543              		.loc 1 4502 3 is_stmt 1 view .LVU2854
4502:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 8544              		.loc 1 4502 12 is_stmt 0 view .LVU2855
 8545 003a 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 8546 003c 43F04003 		orr	r3, r3, #64
 8547 0040 2375     		strb	r3, [r4, #20]
4504:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) {
 8548              		.loc 1 4504 3 is_stmt 1 view .LVU2856
4504:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) {
 8549              		.loc 1 4504 6 is_stmt 0 view .LVU2857
 8550 0042 15B9     		cbnz	r5, .L638
4504:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) {
 8551              		.loc 1 4504 20 discriminator 1 view .LVU2858
 8552 0044 13F0800F 		tst	r3, #128
 8553 0048 1DD1     		bne	.L645
 8554              	.L638:
4512:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8555              		.loc 1 4512 3 is_stmt 1 view .LVU2859
4512:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8556              		.loc 1 4512 6 is_stmt 0 view .LVU2860
 8557 004a 5DBB     		cbnz	r5, .L639
 8558              	.LVL990:
 8559              	.L634:
4516:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8560              		.loc 1 4516 1 view .LVU2861
 8561 004c 2846     		mov	r0, r5
 8562 004e 03B0     		add	sp, sp, #12
 8563              	.LCFI101:
 8564              		.cfi_remember_state
 8565              		.cfi_def_cfa_offset 12
 8566              		@ sp needed
 8567 0050 30BD     		pop	{r4, r5, pc}
 8568              	.LVL991:
 8569              	.L635:
 8570              	.LCFI102:
 8571              		.cfi_restore_state
4493:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
 8572              		.loc 1 4493 4 is_stmt 1 view .LVU2862
4493:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
 8573              		.loc 1 4493 10 is_stmt 0 view .LVU2863
 8574 0052 E169     		ldr	r1, [r4, #28]
 8575 0054 2046     		mov	r0, r4
 8576 0056 FFF7FEFF 		bl	get_fat
 8577              	.LVL992:
4494:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == 0xFFFFFFFF) res = FR_DISK_ERR;
 8578              		.loc 1 4494 4 is_stmt 1 view .LVU2864
4495:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == 1) res = FR_INT_ERR;
 8579              		.loc 1 4495 4 view .LVU2865
4495:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == 1) res = FR_INT_ERR;
 8580              		.loc 1 4495 7 is_stmt 0 view .LVU2866
 8581 005a B0F1FF3F 		cmp	r0, #-1
 8582 005e 0ED0     		beq	.L646
 8583              	.L637:
 8584              	.LVL993:
4496:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK && ncl < fs->n_fatent) {
 8585              		.loc 1 4496 4 is_stmt 1 view .LVU2867
4496:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK && ncl < fs->n_fatent) {
ARM GAS  /tmp/ccWTW02a.s 			page 299


 8586              		.loc 1 4496 7 is_stmt 0 view .LVU2868
 8587 0060 0128     		cmp	r0, #1
 8588 0062 0ED0     		beq	.L642
4497:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = remove_chain(&fp->obj, ncl, fp->clust);
 8589              		.loc 1 4497 4 is_stmt 1 view .LVU2869
4497:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = remove_chain(&fp->obj, ncl, fp->clust);
 8590              		.loc 1 4497 7 is_stmt 0 view .LVU2870
 8591 0064 002D     		cmp	r5, #0
 8592 0066 E6D1     		bne	.L636
4497:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = remove_chain(&fp->obj, ncl, fp->clust);
 8593              		.loc 1 4497 32 discriminator 1 view .LVU2871
 8594 0068 019B     		ldr	r3, [sp, #4]
 8595 006a 5B69     		ldr	r3, [r3, #20]
4497:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = remove_chain(&fp->obj, ncl, fp->clust);
 8596              		.loc 1 4497 21 discriminator 1 view .LVU2872
 8597 006c 8342     		cmp	r3, r0
 8598 006e E2D9     		bls	.L636
4498:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8599              		.loc 1 4498 5 is_stmt 1 view .LVU2873
4498:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8600              		.loc 1 4498 11 is_stmt 0 view .LVU2874
 8601 0070 E269     		ldr	r2, [r4, #28]
 8602 0072 0146     		mov	r1, r0
 8603 0074 2046     		mov	r0, r4
 8604              	.LVL994:
4498:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8605              		.loc 1 4498 11 view .LVU2875
 8606 0076 FFF7FEFF 		bl	remove_chain
 8607              	.LVL995:
4498:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8608              		.loc 1 4498 11 view .LVU2876
 8609 007a 0546     		mov	r5, r0
 8610              	.LVL996:
4498:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8611              		.loc 1 4498 11 view .LVU2877
 8612 007c DBE7     		b	.L636
 8613              	.LVL997:
 8614              	.L646:
4495:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == 1) res = FR_INT_ERR;
 8615              		.loc 1 4495 31 view .LVU2878
 8616 007e 0125     		movs	r5, #1
 8617 0080 EEE7     		b	.L637
 8618              	.LVL998:
 8619              	.L642:
4496:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK && ncl < fs->n_fatent) {
 8620              		.loc 1 4496 22 view .LVU2879
 8621 0082 0225     		movs	r5, #2
 8622              	.LVL999:
4496:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK && ncl < fs->n_fatent) {
 8623              		.loc 1 4496 22 view .LVU2880
 8624 0084 D7E7     		b	.L636
 8625              	.LVL1000:
 8626              	.L645:
4505:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_DISK_ERR;
 8627              		.loc 1 4505 4 is_stmt 1 view .LVU2881
4505:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_DISK_ERR;
 8628              		.loc 1 4505 8 is_stmt 0 view .LVU2882
ARM GAS  /tmp/ccWTW02a.s 			page 300


 8629 0086 0123     		movs	r3, #1
 8630 0088 226A     		ldr	r2, [r4, #32]
 8631 008a 04F13001 		add	r1, r4, #48
 8632 008e 0198     		ldr	r0, [sp, #4]
 8633 0090 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 8634 0092 FFF7FEFF 		bl	disk_write
 8635              	.LVL1001:
4505:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_DISK_ERR;
 8636              		.loc 1 4505 7 view .LVU2883
 8637 0096 20B9     		cbnz	r0, .L643
4508:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8638              		.loc 1 4508 5 is_stmt 1 view .LVU2884
4508:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8639              		.loc 1 4508 14 is_stmt 0 view .LVU2885
 8640 0098 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 8641 009a 03F07F03 		and	r3, r3, #127
 8642 009e 2375     		strb	r3, [r4, #20]
 8643 00a0 D3E7     		b	.L638
 8644              	.L643:
4506:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 8645              		.loc 1 4506 9 view .LVU2886
 8646 00a2 0125     		movs	r5, #1
 8647              	.LVL1002:
 8648              	.L639:
4512:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8649              		.loc 1 4512 21 is_stmt 1 discriminator 1 view .LVU2887
 8650 00a4 6575     		strb	r5, [r4, #21]
4512:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8651              		.loc 1 4512 21 discriminator 1 view .LVU2888
 8652 00a6 D1E7     		b	.L634
 8653              	.LVL1003:
 8654              	.L640:
4486:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8655              		.loc 1 4486 30 is_stmt 0 view .LVU2889
 8656 00a8 0725     		movs	r5, #7
 8657              	.LVL1004:
4486:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8658              		.loc 1 4486 30 view .LVU2890
 8659 00aa CFE7     		b	.L634
 8660              		.cfi_endproc
 8661              	.LFE191:
 8663              		.section	.text.f_unlink,"ax",%progbits
 8664              		.align	1
 8665              		.global	f_unlink
 8666              		.syntax unified
 8667              		.thumb
 8668              		.thumb_func
 8669              		.fpu fpv5-d16
 8671              	f_unlink:
 8672              	.LVL1005:
 8673              	.LFB192:
4528:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8674              		.loc 1 4528 1 is_stmt 1 view -0
 8675              		.cfi_startproc
 8676              		@ args = 0, pretend = 0, frame = 112
 8677              		@ frame_needed = 0, uses_anonymous_args = 0
4528:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
ARM GAS  /tmp/ccWTW02a.s 			page 301


 8678              		.loc 1 4528 1 is_stmt 0 view .LVU2892
 8679 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 8680              	.LCFI103:
 8681              		.cfi_def_cfa_offset 20
 8682              		.cfi_offset 4, -20
 8683              		.cfi_offset 5, -16
 8684              		.cfi_offset 6, -12
 8685              		.cfi_offset 7, -8
 8686              		.cfi_offset 14, -4
 8687 0002 9DB0     		sub	sp, sp, #116
 8688              	.LCFI104:
 8689              		.cfi_def_cfa_offset 136
 8690 0004 0190     		str	r0, [sp, #4]
4529:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj, sdj;
 8691              		.loc 1 4529 2 is_stmt 1 view .LVU2893
4530:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dclst = 0;
 8692              		.loc 1 4530 2 view .LVU2894
4531:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 8693              		.loc 1 4531 2 view .LVU2895
 8694              	.LVL1006:
4532:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 8695              		.loc 1 4532 2 view .LVU2896
4540:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
 8696              		.loc 1 4540 2 view .LVU2897
4540:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
 8697              		.loc 1 4540 8 is_stmt 0 view .LVU2898
 8698 0006 0222     		movs	r2, #2
 8699 0008 03A9     		add	r1, sp, #12
 8700 000a 01A8     		add	r0, sp, #4
 8701              	.LVL1007:
4540:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
 8702              		.loc 1 4540 8 view .LVU2899
 8703 000c FFF7FEFF 		bl	find_volume
 8704              	.LVL1008:
4541:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8705              		.loc 1 4541 2 is_stmt 1 view .LVU2900
4541:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8706              		.loc 1 4541 12 is_stmt 0 view .LVU2901
 8707 0010 039B     		ldr	r3, [sp, #12]
 8708 0012 1093     		str	r3, [sp, #64]
4542:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 8709              		.loc 1 4542 2 is_stmt 1 view .LVU2902
4542:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 8710              		.loc 1 4542 5 is_stmt 0 view .LVU2903
 8711 0014 0446     		mov	r4, r0
 8712 0016 10B1     		cbz	r0, .L657
 8713              	.LVL1009:
 8714              	.L648:
4607:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8715              		.loc 1 4607 16 is_stmt 1 view .LVU2904
4610:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8716              		.loc 1 4610 2 view .LVU2905
4611:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8717              		.loc 1 4611 1 is_stmt 0 view .LVU2906
 8718 0018 2046     		mov	r0, r4
 8719 001a 1DB0     		add	sp, sp, #116
 8720              	.LCFI105:
ARM GAS  /tmp/ccWTW02a.s 			page 302


 8721              		.cfi_remember_state
 8722              		.cfi_def_cfa_offset 20
 8723              		@ sp needed
 8724 001c F0BD     		pop	{r4, r5, r6, r7, pc}
 8725              	.LVL1010:
 8726              	.L657:
 8727              	.LCFI106:
 8728              		.cfi_restore_state
4543:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 8729              		.loc 1 4543 18 is_stmt 1 view .LVU2907
4544:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT)) {
 8730              		.loc 1 4544 3 view .LVU2908
4544:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT)) {
 8731              		.loc 1 4544 9 is_stmt 0 view .LVU2909
 8732 001e 0199     		ldr	r1, [sp, #4]
 8733 0020 10A8     		add	r0, sp, #64
 8734              	.LVL1011:
4544:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT)) {
 8735              		.loc 1 4544 9 view .LVU2910
 8736 0022 FFF7FEFF 		bl	follow_path
 8737              	.LVL1012:
4545:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;			/* Cannot remove dot entry */
 8738              		.loc 1 4545 3 is_stmt 1 view .LVU2911
4549:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8739              		.loc 1 4549 3 view .LVU2912
4549:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8740              		.loc 1 4549 6 is_stmt 0 view .LVU2913
 8741 0026 0446     		mov	r4, r0
 8742 0028 20B9     		cbnz	r0, .L649
4549:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8743              		.loc 1 4549 21 is_stmt 1 discriminator 1 view .LVU2914
4549:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8744              		.loc 1 4549 27 is_stmt 0 discriminator 1 view .LVU2915
 8745 002a 0221     		movs	r1, #2
 8746 002c 10A8     		add	r0, sp, #64
 8747              	.LVL1013:
4549:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8748              		.loc 1 4549 27 discriminator 1 view .LVU2916
 8749 002e FFF7FEFF 		bl	chk_lock
 8750              	.LVL1014:
 8751 0032 0446     		mov	r4, r0
 8752              	.LVL1015:
 8753              	.L649:
4551:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {
 8754              		.loc 1 4551 3 is_stmt 1 view .LVU2917
4551:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {
 8755              		.loc 1 4551 6 is_stmt 0 view .LVU2918
 8756 0034 002C     		cmp	r4, #0
 8757 0036 EFD1     		bne	.L648
4552:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
 8758              		.loc 1 4552 4 is_stmt 1 view .LVU2919
4552:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
 8759              		.loc 1 4552 8 is_stmt 0 view .LVU2920
 8760 0038 9DF96F30 		ldrsb	r3, [sp, #111]
4552:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
 8761              		.loc 1 4552 7 view .LVU2921
 8762 003c 002B     		cmp	r3, #0
ARM GAS  /tmp/ccWTW02a.s 			page 303


 8763 003e 1EDB     		blt	.L653
4555:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
 8764              		.loc 1 4555 5 is_stmt 1 view .LVU2922
4555:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
 8765              		.loc 1 4555 15 is_stmt 0 view .LVU2923
 8766 0040 9DF84660 		ldrb	r6, [sp, #70]	@ zero_extendqisi2
4555:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
 8767              		.loc 1 4555 8 view .LVU2924
 8768 0044 16F0010F 		tst	r6, #1
 8769 0048 2FD1     		bne	.L654
4559:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 8770              		.loc 1 4559 4 is_stmt 1 view .LVU2925
4569:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 8771              		.loc 1 4569 6 view .LVU2926
4569:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 8772              		.loc 1 4569 14 is_stmt 0 view .LVU2927
 8773 004a 039F     		ldr	r7, [sp, #12]
 8774 004c 1899     		ldr	r1, [sp, #96]
 8775 004e 3846     		mov	r0, r7
 8776 0050 FFF7FEFF 		bl	ld_clust
 8777              	.LVL1016:
 8778 0054 0546     		mov	r5, r0
 8779              	.LVL1017:
4571:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
 8780              		.loc 1 4571 5 is_stmt 1 view .LVU2928
4571:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
 8781              		.loc 1 4571 8 is_stmt 0 view .LVU2929
 8782 0056 16F0100F 		tst	r6, #16
 8783 005a 12D0     		beq	.L650
4578:Middlewares/Third_Party/FatFs/src/ff.c **** 						sdj.obj.sclust = dclst;
 8784              		.loc 1 4578 7 is_stmt 1 view .LVU2930
4578:Middlewares/Third_Party/FatFs/src/ff.c **** 						sdj.obj.sclust = dclst;
 8785              		.loc 1 4578 18 is_stmt 0 view .LVU2931
 8786 005c 0497     		str	r7, [sp, #16]
4579:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 8787              		.loc 1 4579 7 is_stmt 1 view .LVU2932
4579:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 8788              		.loc 1 4579 22 is_stmt 0 view .LVU2933
 8789 005e 0690     		str	r0, [sp, #24]
4586:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
 8790              		.loc 1 4586 7 is_stmt 1 view .LVU2934
4586:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
 8791              		.loc 1 4586 13 is_stmt 0 view .LVU2935
 8792 0060 0021     		movs	r1, #0
 8793 0062 04A8     		add	r0, sp, #16
 8794              	.LVL1018:
4586:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
 8795              		.loc 1 4586 13 view .LVU2936
 8796 0064 FFF7FEFF 		bl	dir_sdi
 8797              	.LVL1019:
4587:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = dir_read(&sdj, 0);			/* Read an item */
 8798              		.loc 1 4587 7 is_stmt 1 view .LVU2937
4587:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = dir_read(&sdj, 0);			/* Read an item */
 8799              		.loc 1 4587 10 is_stmt 0 view .LVU2938
 8800 0068 0446     		mov	r4, r0
 8801 006a 50B9     		cbnz	r0, .L650
4588:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? */
ARM GAS  /tmp/ccWTW02a.s 			page 304


 8802              		.loc 1 4588 8 is_stmt 1 view .LVU2939
4588:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? */
 8803              		.loc 1 4588 14 is_stmt 0 view .LVU2940
 8804 006c 0021     		movs	r1, #0
 8805 006e 04A8     		add	r0, sp, #16
 8806              	.LVL1020:
4588:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? */
 8807              		.loc 1 4588 14 view .LVU2941
 8808 0070 FFF7FEFF 		bl	dir_read
 8809              	.LVL1021:
4589:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? */
 8810              		.loc 1 4589 8 is_stmt 1 view .LVU2942
4589:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? */
 8811              		.loc 1 4589 11 is_stmt 0 view .LVU2943
 8812 0074 0446     		mov	r4, r0
 8813 0076 D8B1     		cbz	r0, .L655
4590:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 8814              		.loc 1 4590 8 is_stmt 1 view .LVU2944
4590:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 8815              		.loc 1 4590 11 is_stmt 0 view .LVU2945
 8816 0078 0428     		cmp	r0, #4
 8817 007a 02D1     		bne	.L650
 8818 007c 03E0     		b	.L651
 8819              	.LVL1022:
 8820              	.L653:
4531:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 8821              		.loc 1 4531 8 view .LVU2946
 8822 007e 0025     		movs	r5, #0
4553:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 8823              		.loc 1 4553 9 view .LVU2947
 8824 0080 0624     		movs	r4, #6
 8825              	.LVL1023:
 8826              	.L650:
4595:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_remove(&dj);			/* Remove the directory entry */
 8827              		.loc 1 4595 4 is_stmt 1 view .LVU2948
4595:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_remove(&dj);			/* Remove the directory entry */
 8828              		.loc 1 4595 7 is_stmt 0 view .LVU2949
 8829 0082 002C     		cmp	r4, #0
 8830 0084 C8D1     		bne	.L648
 8831              	.LVL1024:
 8832              	.L651:
4596:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && dclst) {	/* Remove the cluster chain if exist */
 8833              		.loc 1 4596 5 is_stmt 1 view .LVU2950
4596:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && dclst) {	/* Remove the cluster chain if exist */
 8834              		.loc 1 4596 11 is_stmt 0 view .LVU2951
 8835 0086 10A8     		add	r0, sp, #64
 8836 0088 FFF7FEFF 		bl	dir_remove
 8837              	.LVL1025:
4597:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 8838              		.loc 1 4597 5 is_stmt 1 view .LVU2952
4597:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 8839              		.loc 1 4597 13 is_stmt 0 view .LVU2953
 8840 008c 0446     		mov	r4, r0
4597:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 8841              		.loc 1 4597 22 view .LVU2954
 8842 008e 2B1E     		subs	r3, r5, #0
 8843 0090 18BF     		it	ne
ARM GAS  /tmp/ccWTW02a.s 			page 305


 8844 0092 0123     		movne	r3, #1
 8845 0094 0028     		cmp	r0, #0
 8846 0096 18BF     		it	ne
 8847 0098 0023     		movne	r3, #0
4597:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 8848              		.loc 1 4597 8 view .LVU2955
 8849 009a 5BB9     		cbnz	r3, .L658
 8850              	.LVL1026:
 8851              	.L652:
4604:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8852              		.loc 1 4604 5 is_stmt 1 view .LVU2956
4604:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8853              		.loc 1 4604 8 is_stmt 0 view .LVU2957
 8854 009c 002C     		cmp	r4, #0
 8855 009e BBD1     		bne	.L648
4604:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8856              		.loc 1 4604 23 is_stmt 1 discriminator 1 view .LVU2958
4604:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8857              		.loc 1 4604 29 is_stmt 0 discriminator 1 view .LVU2959
 8858 00a0 0398     		ldr	r0, [sp, #12]
 8859 00a2 FFF7FEFF 		bl	sync_fs
 8860              	.LVL1027:
 8861 00a6 0446     		mov	r4, r0
 8862              	.LVL1028:
4604:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8863              		.loc 1 4604 29 discriminator 1 view .LVU2960
 8864 00a8 B6E7     		b	.L648
 8865              	.LVL1029:
 8866              	.L654:
4531:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 8867              		.loc 1 4531 8 view .LVU2961
 8868 00aa 0025     		movs	r5, #0
4556:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 8869              		.loc 1 4556 10 view .LVU2962
 8870 00ac 0724     		movs	r4, #7
 8871              	.LVL1030:
4556:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 8872              		.loc 1 4556 10 view .LVU2963
 8873 00ae E8E7     		b	.L650
 8874              	.LVL1031:
 8875              	.L655:
4589:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? */
 8876              		.loc 1 4589 30 view .LVU2964
 8877 00b0 0724     		movs	r4, #7
 8878 00b2 E6E7     		b	.L650
 8879              	.LVL1032:
 8880              	.L658:
4601:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8881              		.loc 1 4601 6 is_stmt 1 view .LVU2965
4601:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8882              		.loc 1 4601 12 is_stmt 0 view .LVU2966
 8883 00b4 0022     		movs	r2, #0
 8884 00b6 2946     		mov	r1, r5
 8885 00b8 10A8     		add	r0, sp, #64
 8886              	.LVL1033:
4601:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8887              		.loc 1 4601 12 view .LVU2967
ARM GAS  /tmp/ccWTW02a.s 			page 306


 8888 00ba FFF7FEFF 		bl	remove_chain
 8889              	.LVL1034:
 8890 00be 0446     		mov	r4, r0
 8891              	.LVL1035:
4601:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8892              		.loc 1 4601 12 view .LVU2968
 8893 00c0 ECE7     		b	.L652
 8894              		.cfi_endproc
 8895              	.LFE192:
 8897              		.section	.text.f_mkdir,"ax",%progbits
 8898              		.align	1
 8899              		.global	f_mkdir
 8900              		.syntax unified
 8901              		.thumb
 8902              		.thumb_func
 8903              		.fpu fpv5-d16
 8905              	f_mkdir:
 8906              	.LVL1036:
 8907              	.LFB193:
4623:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8908              		.loc 1 4623 1 is_stmt 1 view -0
 8909              		.cfi_startproc
 8910              		@ args = 0, pretend = 0, frame = 64
 8911              		@ frame_needed = 0, uses_anonymous_args = 0
4623:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8912              		.loc 1 4623 1 is_stmt 0 view .LVU2970
 8913 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 8914              	.LCFI107:
 8915              		.cfi_def_cfa_offset 36
 8916              		.cfi_offset 4, -36
 8917              		.cfi_offset 5, -32
 8918              		.cfi_offset 6, -28
 8919              		.cfi_offset 7, -24
 8920              		.cfi_offset 8, -20
 8921              		.cfi_offset 9, -16
 8922              		.cfi_offset 10, -12
 8923              		.cfi_offset 11, -8
 8924              		.cfi_offset 14, -4
 8925 0004 91B0     		sub	sp, sp, #68
 8926              	.LCFI108:
 8927              		.cfi_def_cfa_offset 104
 8928 0006 0190     		str	r0, [sp, #4]
4624:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
 8929              		.loc 1 4624 2 is_stmt 1 view .LVU2971
4625:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 8930              		.loc 1 4625 2 view .LVU2972
4626:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir;
 8931              		.loc 1 4626 2 view .LVU2973
4627:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n;
 8932              		.loc 1 4627 2 view .LVU2974
4628:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dsc, dcl, pcl, tm;
 8933              		.loc 1 4628 2 view .LVU2975
4629:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
 8934              		.loc 1 4629 2 view .LVU2976
4634:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
 8935              		.loc 1 4634 2 view .LVU2977
4634:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
ARM GAS  /tmp/ccWTW02a.s 			page 307


 8936              		.loc 1 4634 8 is_stmt 0 view .LVU2978
 8937 0008 0222     		movs	r2, #2
 8938 000a 03A9     		add	r1, sp, #12
 8939 000c 01A8     		add	r0, sp, #4
 8940              	.LVL1037:
4634:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
 8941              		.loc 1 4634 8 view .LVU2979
 8942 000e FFF7FEFF 		bl	find_volume
 8943              	.LVL1038:
4635:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8944              		.loc 1 4635 2 is_stmt 1 view .LVU2980
4635:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8945              		.loc 1 4635 12 is_stmt 0 view .LVU2981
 8946 0012 039B     		ldr	r3, [sp, #12]
 8947 0014 0493     		str	r3, [sp, #16]
4636:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 8948              		.loc 1 4636 2 is_stmt 1 view .LVU2982
4636:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 8949              		.loc 1 4636 5 is_stmt 0 view .LVU2983
 8950 0016 0446     		mov	r4, r0
 8951 0018 18B1     		cbz	r0, .L677
 8952              	.LVL1039:
 8953              	.L660:
4704:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8954              		.loc 1 4704 16 is_stmt 1 view .LVU2984
4707:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8955              		.loc 1 4707 2 view .LVU2985
4708:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8956              		.loc 1 4708 1 is_stmt 0 view .LVU2986
 8957 001a 2046     		mov	r0, r4
 8958 001c 11B0     		add	sp, sp, #68
 8959              	.LCFI109:
 8960              		.cfi_remember_state
 8961              		.cfi_def_cfa_offset 36
 8962              		@ sp needed
 8963 001e BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 8964              	.LVL1040:
 8965              	.L677:
 8966              	.LCFI110:
 8967              		.cfi_restore_state
4637:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
 8968              		.loc 1 4637 18 is_stmt 1 view .LVU2987
4638:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
 8969              		.loc 1 4638 3 view .LVU2988
4638:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
 8970              		.loc 1 4638 9 is_stmt 0 view .LVU2989
 8971 0022 0199     		ldr	r1, [sp, #4]
 8972 0024 04A8     		add	r0, sp, #16
 8973              	.LVL1041:
4638:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
 8974              		.loc 1 4638 9 view .LVU2990
 8975 0026 FFF7FEFF 		bl	follow_path
 8976              	.LVL1042:
4639:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT)) {
 8977              		.loc 1 4639 3 is_stmt 1 view .LVU2991
4639:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT)) {
 8978              		.loc 1 4639 6 is_stmt 0 view .LVU2992
ARM GAS  /tmp/ccWTW02a.s 			page 308


 8979 002a 0028     		cmp	r0, #0
 8980 002c 00F09980 		beq	.L670
4640:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;
 8981              		.loc 1 4640 3 is_stmt 1 view .LVU2993
4643:Middlewares/Third_Party/FatFs/src/ff.c **** 			dcl = create_chain(&dj.obj, 0);		/* Allocate a cluster for the new directory table */
 8982              		.loc 1 4643 3 view .LVU2994
4643:Middlewares/Third_Party/FatFs/src/ff.c **** 			dcl = create_chain(&dj.obj, 0);		/* Allocate a cluster for the new directory table */
 8983              		.loc 1 4643 6 is_stmt 0 view .LVU2995
 8984 0030 0428     		cmp	r0, #4
 8985 0032 01D0     		beq	.L678
4638:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
 8986              		.loc 1 4638 9 view .LVU2996
 8987 0034 0446     		mov	r4, r0
 8988 0036 F0E7     		b	.L660
 8989              	.L678:
4644:Middlewares/Third_Party/FatFs/src/ff.c **** 			dj.obj.objsize = (DWORD)fs->csize * SS(fs);
 8990              		.loc 1 4644 4 is_stmt 1 view .LVU2997
4644:Middlewares/Third_Party/FatFs/src/ff.c **** 			dj.obj.objsize = (DWORD)fs->csize * SS(fs);
 8991              		.loc 1 4644 10 is_stmt 0 view .LVU2998
 8992 0038 0021     		movs	r1, #0
 8993 003a 04A8     		add	r0, sp, #16
 8994              	.LVL1043:
4644:Middlewares/Third_Party/FatFs/src/ff.c **** 			dj.obj.objsize = (DWORD)fs->csize * SS(fs);
 8995              		.loc 1 4644 10 view .LVU2999
 8996 003c FFF7FEFF 		bl	create_chain
 8997              	.LVL1044:
4645:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
 8998              		.loc 1 4645 4 is_stmt 1 view .LVU3000
4645:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
 8999              		.loc 1 4645 30 is_stmt 0 view .LVU3001
 9000 0040 039A     		ldr	r2, [sp, #12]
 9001 0042 5389     		ldrh	r3, [r2, #10]
4645:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
 9002              		.loc 1 4645 38 view .LVU3002
 9003 0044 5B02     		lsls	r3, r3, #9
4645:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
 9004              		.loc 1 4645 19 view .LVU3003
 9005 0046 0793     		str	r3, [sp, #28]
4646:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0) res = FR_DENIED;		/* No space to allocate a new cluster */
 9006              		.loc 1 4646 4 is_stmt 1 view .LVU3004
 9007              	.LVL1045:
4647:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;
 9008              		.loc 1 4647 4 view .LVU3005
4647:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;
 9009              		.loc 1 4647 7 is_stmt 0 view .LVU3006
 9010 0048 8046     		mov	r8, r0
 9011 004a 00B9     		cbnz	r0, .L661
4647:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;
 9012              		.loc 1 4647 22 view .LVU3007
 9013 004c 0724     		movs	r4, #7
 9014              	.L661:
 9015              	.LVL1046:
4648:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
 9016              		.loc 1 4648 4 is_stmt 1 view .LVU3008
4648:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
 9017              		.loc 1 4648 7 is_stmt 0 view .LVU3009
 9018 004e B8F1010F 		cmp	r8, #1
ARM GAS  /tmp/ccWTW02a.s 			page 309


 9019 0052 20D0     		beq	.L679
 9020              	.LVL1047:
 9021              	.L662:
4649:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) res = sync_window(fs);	/* Flush FAT */
 9022              		.loc 1 4649 4 is_stmt 1 view .LVU3010
4649:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) res = sync_window(fs);	/* Flush FAT */
 9023              		.loc 1 4649 7 is_stmt 0 view .LVU3011
 9024 0054 B8F1FF3F 		cmp	r8, #-1
 9025 0058 24D0     		beq	.L674
4650:Middlewares/Third_Party/FatFs/src/ff.c **** 			tm = GET_FATTIME();
 9026              		.loc 1 4650 4 is_stmt 1 view .LVU3012
4650:Middlewares/Third_Party/FatFs/src/ff.c **** 			tm = GET_FATTIME();
 9027              		.loc 1 4650 7 is_stmt 0 view .LVU3013
 9028 005a F4B1     		cbz	r4, .L680
 9029              	.LVL1048:
 9030              	.L663:
4651:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {					/* Initialize the new directory table */
 9031              		.loc 1 4651 4 is_stmt 1 view .LVU3014
4651:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {					/* Initialize the new directory table */
 9032              		.loc 1 4651 9 is_stmt 0 view .LVU3015
 9033 005c FFF7FEFF 		bl	get_fattime
 9034              	.LVL1049:
 9035 0060 8246     		mov	r10, r0
 9036              	.LVL1050:
4652:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(fs, dcl);
 9037              		.loc 1 4652 4 is_stmt 1 view .LVU3016
4652:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(fs, dcl);
 9038              		.loc 1 4652 7 is_stmt 0 view .LVU3017
 9039 0062 0CB3     		cbz	r4, .L681
 9040              	.LVL1051:
 9041              	.L664:
4675:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_register(&dj);	/* Register the object to the directoy */
 9042              		.loc 1 4675 4 is_stmt 1 view .LVU3018
4675:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_register(&dj);	/* Register the object to the directoy */
 9043              		.loc 1 4675 7 is_stmt 0 view .LVU3019
 9044 0064 002C     		cmp	r4, #0
 9045 0066 71D0     		beq	.L682
 9046              	.L668:
4678:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 9047              		.loc 1 4678 4 is_stmt 1 view .LVU3020
4678:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 9048              		.loc 1 4678 7 is_stmt 0 view .LVU3021
 9049 0068 002C     		cmp	r4, #0
 9050 006a 74D1     		bne	.L669
4691:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_ModTime, tm);	/* Created time */
 9051              		.loc 1 4691 6 is_stmt 1 view .LVU3022
4691:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_ModTime, tm);	/* Created time */
 9052              		.loc 1 4691 10 is_stmt 0 view .LVU3023
 9053 006c 0C9C     		ldr	r4, [sp, #48]
 9054              	.LVL1052:
4692:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir, dcl);				/* Table start cluster */
 9055              		.loc 1 4692 6 is_stmt 1 view .LVU3024
 9056 006e 5146     		mov	r1, r10
 9057 0070 04F11600 		add	r0, r4, #22
 9058 0074 FFF7FEFF 		bl	st_dword
 9059              	.LVL1053:
4693:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Attr] = AM_DIR;				/* Attribute */
ARM GAS  /tmp/ccWTW02a.s 			page 310


 9060              		.loc 1 4693 6 view .LVU3025
 9061 0078 4246     		mov	r2, r8
 9062 007a 2146     		mov	r1, r4
 9063 007c 0398     		ldr	r0, [sp, #12]
 9064 007e FFF7FEFF 		bl	st_clust
 9065              	.LVL1054:
4694:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
 9066              		.loc 1 4694 6 view .LVU3026
4694:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
 9067              		.loc 1 4694 20 is_stmt 0 view .LVU3027
 9068 0082 1023     		movs	r3, #16
 9069 0084 E372     		strb	r3, [r4, #11]
4695:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9070              		.loc 1 4695 6 is_stmt 1 view .LVU3028
4695:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9071              		.loc 1 4695 16 is_stmt 0 view .LVU3029
 9072 0086 039B     		ldr	r3, [sp, #12]
 9073 0088 0122     		movs	r2, #1
 9074 008a DA70     		strb	r2, [r3, #3]
4697:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_fs(fs);
 9075              		.loc 1 4697 5 is_stmt 1 view .LVU3030
4698:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9076              		.loc 1 4698 6 view .LVU3031
4698:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9077              		.loc 1 4698 12 is_stmt 0 view .LVU3032
 9078 008c 0398     		ldr	r0, [sp, #12]
 9079 008e FFF7FEFF 		bl	sync_fs
 9080              	.LVL1055:
 9081 0092 0446     		mov	r4, r0
 9082              	.LVL1056:
4698:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9083              		.loc 1 4698 12 view .LVU3033
 9084 0094 C1E7     		b	.L660
 9085              	.LVL1057:
 9086              	.L679:
4648:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
 9087              		.loc 1 4648 22 view .LVU3034
 9088 0096 0224     		movs	r4, #2
 9089              	.LVL1058:
4648:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
 9090              		.loc 1 4648 22 view .LVU3035
 9091 0098 DCE7     		b	.L662
 9092              	.LVL1059:
 9093              	.L680:
4650:Middlewares/Third_Party/FatFs/src/ff.c **** 			tm = GET_FATTIME();
 9094              		.loc 1 4650 22 is_stmt 1 discriminator 1 view .LVU3036
4650:Middlewares/Third_Party/FatFs/src/ff.c **** 			tm = GET_FATTIME();
 9095              		.loc 1 4650 28 is_stmt 0 discriminator 1 view .LVU3037
 9096 009a 1046     		mov	r0, r2
 9097              	.LVL1060:
4650:Middlewares/Third_Party/FatFs/src/ff.c **** 			tm = GET_FATTIME();
 9098              		.loc 1 4650 28 discriminator 1 view .LVU3038
 9099 009c FFF7FEFF 		bl	sync_window
 9100              	.LVL1061:
 9101 00a0 0446     		mov	r4, r0
 9102              	.LVL1062:
4650:Middlewares/Third_Party/FatFs/src/ff.c **** 			tm = GET_FATTIME();
ARM GAS  /tmp/ccWTW02a.s 			page 311


 9103              		.loc 1 4650 28 discriminator 1 view .LVU3039
 9104 00a2 DBE7     		b	.L663
 9105              	.LVL1063:
 9106              	.L674:
4649:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) res = sync_window(fs);	/* Flush FAT */
 9107              		.loc 1 4649 31 view .LVU3040
 9108 00a4 0124     		movs	r4, #1
 9109              	.LVL1064:
4649:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) res = sync_window(fs);	/* Flush FAT */
 9110              		.loc 1 4649 31 view .LVU3041
 9111 00a6 D9E7     		b	.L663
 9112              	.LVL1065:
 9113              	.L681:
4653:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir = fs->win;
 9114              		.loc 1 4653 5 is_stmt 1 view .LVU3042
4653:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir = fs->win;
 9115              		.loc 1 4653 11 is_stmt 0 view .LVU3043
 9116 00a8 039E     		ldr	r6, [sp, #12]
 9117 00aa 4146     		mov	r1, r8
 9118 00ac 3046     		mov	r0, r6
 9119              	.LVL1066:
4653:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir = fs->win;
 9120              		.loc 1 4653 11 view .LVU3044
 9121 00ae FFF7FEFF 		bl	clust2sect
 9122              	.LVL1067:
 9123 00b2 0546     		mov	r5, r0
 9124              	.LVL1068:
4654:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(dir, 0, SS(fs));
 9125              		.loc 1 4654 5 is_stmt 1 view .LVU3045
4654:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(dir, 0, SS(fs));
 9126              		.loc 1 4654 9 is_stmt 0 view .LVU3046
 9127 00b4 06F13009 		add	r9, r6, #48
 9128              	.LVL1069:
4655:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 9129              		.loc 1 4655 5 is_stmt 1 view .LVU3047
 9130 00b8 4FF40072 		mov	r2, #512
 9131 00bc 0021     		movs	r1, #0
 9132 00be 4846     		mov	r0, r9
 9133              	.LVL1070:
4655:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 9134              		.loc 1 4655 5 is_stmt 0 view .LVU3048
 9135 00c0 FFF7FEFF 		bl	mem_set
 9136              	.LVL1071:
4656:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(dir + DIR_Name, ' ', 11);	/* Create "." entry */
 9137              		.loc 1 4656 5 is_stmt 1 view .LVU3049
4657:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Name] = '.';
 9138              		.loc 1 4657 6 view .LVU3050
 9139 00c4 0B22     		movs	r2, #11
 9140 00c6 2021     		movs	r1, #32
 9141 00c8 4846     		mov	r0, r9
 9142 00ca FFF7FEFF 		bl	mem_set
 9143              	.LVL1072:
4658:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Attr] = AM_DIR;
 9144              		.loc 1 4658 6 view .LVU3051
4658:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Attr] = AM_DIR;
 9145              		.loc 1 4658 20 is_stmt 0 view .LVU3052
 9146 00ce 4FF02E0B 		mov	fp, #46
ARM GAS  /tmp/ccWTW02a.s 			page 312


 9147 00d2 86F830B0 		strb	fp, [r6, #48]
4659:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_ModTime, tm);
 9148              		.loc 1 4659 6 is_stmt 1 view .LVU3053
4659:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_ModTime, tm);
 9149              		.loc 1 4659 20 is_stmt 0 view .LVU3054
 9150 00d6 1023     		movs	r3, #16
 9151 00d8 86F83B30 		strb	r3, [r6, #59]
4660:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir, dcl);
 9152              		.loc 1 4660 6 is_stmt 1 view .LVU3055
 9153 00dc 5146     		mov	r1, r10
 9154 00de 06F14600 		add	r0, r6, #70
 9155 00e2 FFF7FEFF 		bl	st_dword
 9156              	.LVL1073:
4661:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(dir + SZDIRE, dir, SZDIRE); 	/* Create ".." entry */
 9157              		.loc 1 4661 6 view .LVU3056
 9158 00e6 4246     		mov	r2, r8
 9159 00e8 4946     		mov	r1, r9
 9160 00ea 0398     		ldr	r0, [sp, #12]
 9161 00ec FFF7FEFF 		bl	st_clust
 9162              	.LVL1074:
4662:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[SZDIRE + 1] = '.'; pcl = dj.obj.sclust;
 9163              		.loc 1 4662 6 view .LVU3057
4662:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[SZDIRE + 1] = '.'; pcl = dj.obj.sclust;
 9164              		.loc 1 4662 18 is_stmt 0 view .LVU3058
 9165 00f0 06F15007 		add	r7, r6, #80
4662:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[SZDIRE + 1] = '.'; pcl = dj.obj.sclust;
 9166              		.loc 1 4662 6 view .LVU3059
 9167 00f4 2022     		movs	r2, #32
 9168 00f6 4946     		mov	r1, r9
 9169 00f8 3846     		mov	r0, r7
 9170 00fa FFF7FEFF 		bl	mem_cpy
 9171              	.LVL1075:
4663:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fs->fs_type == FS_FAT32 && pcl == fs->dirbase) pcl = 0;
 9172              		.loc 1 4663 6 is_stmt 1 view .LVU3060
4663:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fs->fs_type == FS_FAT32 && pcl == fs->dirbase) pcl = 0;
 9173              		.loc 1 4663 22 is_stmt 0 view .LVU3061
 9174 00fe 86F851B0 		strb	fp, [r6, #81]
4663:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fs->fs_type == FS_FAT32 && pcl == fs->dirbase) pcl = 0;
 9175              		.loc 1 4663 29 is_stmt 1 view .LVU3062
4663:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fs->fs_type == FS_FAT32 && pcl == fs->dirbase) pcl = 0;
 9176              		.loc 1 4663 33 is_stmt 0 view .LVU3063
 9177 0102 069A     		ldr	r2, [sp, #24]
 9178              	.LVL1076:
4664:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir + SZDIRE, pcl);
 9179              		.loc 1 4664 6 is_stmt 1 view .LVU3064
4664:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir + SZDIRE, pcl);
 9180              		.loc 1 4664 12 is_stmt 0 view .LVU3065
 9181 0104 0398     		ldr	r0, [sp, #12]
 9182 0106 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
4664:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir + SZDIRE, pcl);
 9183              		.loc 1 4664 9 view .LVU3066
 9184 0108 032B     		cmp	r3, #3
 9185 010a 1AD0     		beq	.L683
 9186              	.LVL1077:
 9187              	.L665:
4665:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9188              		.loc 1 4665 6 is_stmt 1 view .LVU3067
ARM GAS  /tmp/ccWTW02a.s 			page 313


 9189 010c 3946     		mov	r1, r7
 9190 010e FFF7FEFF 		bl	st_clust
 9191              	.LVL1078:
4667:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->winsect = dsc++;
 9192              		.loc 1 4667 5 view .LVU3068
4667:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->winsect = dsc++;
 9193              		.loc 1 4667 16 is_stmt 0 view .LVU3069
 9194 0112 039B     		ldr	r3, [sp, #12]
 9195 0114 5E89     		ldrh	r6, [r3, #10]
 9196              	.LVL1079:
 9197              	.L666:
4667:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->winsect = dsc++;
 9198              		.loc 1 4667 25 is_stmt 1 discriminator 1 view .LVU3070
4667:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->winsect = dsc++;
 9199              		.loc 1 4667 5 is_stmt 0 discriminator 1 view .LVU3071
 9200 0116 002E     		cmp	r6, #0
 9201 0118 A4D0     		beq	.L664
4668:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
 9202              		.loc 1 4668 6 is_stmt 1 view .LVU3072
4668:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
 9203              		.loc 1 4668 23 is_stmt 0 view .LVU3073
 9204 011a 6F1C     		adds	r7, r5, #1
 9205              	.LVL1080:
4668:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
 9206              		.loc 1 4668 8 view .LVU3074
 9207 011c 039B     		ldr	r3, [sp, #12]
4668:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
 9208              		.loc 1 4668 18 view .LVU3075
 9209 011e DD62     		str	r5, [r3, #44]
4669:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_window(fs);
 9210              		.loc 1 4669 6 is_stmt 1 view .LVU3076
4669:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_window(fs);
 9211              		.loc 1 4669 16 is_stmt 0 view .LVU3077
 9212 0120 0122     		movs	r2, #1
 9213 0122 DA70     		strb	r2, [r3, #3]
4670:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res != FR_OK) break;
 9214              		.loc 1 4670 6 is_stmt 1 view .LVU3078
4670:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res != FR_OK) break;
 9215              		.loc 1 4670 12 is_stmt 0 view .LVU3079
 9216 0124 0398     		ldr	r0, [sp, #12]
 9217 0126 FFF7FEFF 		bl	sync_window
 9218              	.LVL1081:
4671:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(dir, 0, SS(fs));
 9219              		.loc 1 4671 6 is_stmt 1 view .LVU3080
4671:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(dir, 0, SS(fs));
 9220              		.loc 1 4671 9 is_stmt 0 view .LVU3081
 9221 012a 0446     		mov	r4, r0
 9222 012c 0028     		cmp	r0, #0
 9223 012e 99D1     		bne	.L664
4672:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9224              		.loc 1 4672 6 is_stmt 1 discriminator 2 view .LVU3082
 9225 0130 4FF40072 		mov	r2, #512
 9226 0134 0021     		movs	r1, #0
 9227 0136 4846     		mov	r0, r9
 9228              	.LVL1082:
4672:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9229              		.loc 1 4672 6 is_stmt 0 discriminator 2 view .LVU3083
ARM GAS  /tmp/ccWTW02a.s 			page 314


 9230 0138 FFF7FEFF 		bl	mem_set
 9231              	.LVL1083:
4667:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->winsect = dsc++;
 9232              		.loc 1 4667 28 is_stmt 1 discriminator 2 view .LVU3084
4667:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->winsect = dsc++;
 9233              		.loc 1 4667 29 is_stmt 0 discriminator 2 view .LVU3085
 9234 013c 013E     		subs	r6, r6, #1
 9235              	.LVL1084:
4668:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
 9236              		.loc 1 4668 23 discriminator 2 view .LVU3086
 9237 013e 3D46     		mov	r5, r7
 9238 0140 E9E7     		b	.L666
 9239              	.LVL1085:
 9240              	.L683:
4664:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir + SZDIRE, pcl);
 9241              		.loc 1 4664 46 discriminator 1 view .LVU3087
 9242 0142 436A     		ldr	r3, [r0, #36]
4664:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir + SZDIRE, pcl);
 9243              		.loc 1 4664 34 discriminator 1 view .LVU3088
 9244 0144 9342     		cmp	r3, r2
 9245 0146 E1D1     		bne	.L665
4664:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir + SZDIRE, pcl);
 9246              		.loc 1 4664 61 view .LVU3089
 9247 0148 0022     		movs	r2, #0
 9248              	.LVL1086:
4664:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir + SZDIRE, pcl);
 9249              		.loc 1 4664 61 view .LVU3090
 9250 014a DFE7     		b	.L665
 9251              	.LVL1087:
 9252              	.L682:
4676:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9253              		.loc 1 4676 5 is_stmt 1 view .LVU3091
4676:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9254              		.loc 1 4676 11 is_stmt 0 view .LVU3092
 9255 014c 04A8     		add	r0, sp, #16
 9256 014e FFF7FEFF 		bl	dir_register
 9257              	.LVL1088:
 9258 0152 0446     		mov	r4, r0
 9259              	.LVL1089:
4676:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9260              		.loc 1 4676 11 view .LVU3093
 9261 0154 88E7     		b	.L668
 9262              	.L669:
4701:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9263              		.loc 1 4701 5 is_stmt 1 view .LVU3094
 9264 0156 0022     		movs	r2, #0
 9265 0158 4146     		mov	r1, r8
 9266 015a 04A8     		add	r0, sp, #16
 9267 015c FFF7FEFF 		bl	remove_chain
 9268              	.LVL1090:
 9269 0160 5BE7     		b	.L660
 9270              	.LVL1091:
 9271              	.L670:
4639:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT)) {
 9272              		.loc 1 4639 25 is_stmt 0 view .LVU3095
 9273 0162 0824     		movs	r4, #8
 9274 0164 59E7     		b	.L660
ARM GAS  /tmp/ccWTW02a.s 			page 315


 9275              		.cfi_endproc
 9276              	.LFE193:
 9278              		.section	.text.f_rename,"ax",%progbits
 9279              		.align	1
 9280              		.global	f_rename
 9281              		.syntax unified
 9282              		.thumb
 9283              		.thumb_func
 9284              		.fpu fpv5-d16
 9286              	f_rename:
 9287              	.LVL1092:
 9288              	.LFB194:
4721:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 9289              		.loc 1 4721 1 is_stmt 1 view -0
 9290              		.cfi_startproc
 9291              		@ args = 0, pretend = 0, frame = 136
 9292              		@ frame_needed = 0, uses_anonymous_args = 0
4721:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 9293              		.loc 1 4721 1 is_stmt 0 view .LVU3097
 9294 0000 30B5     		push	{r4, r5, lr}
 9295              	.LCFI111:
 9296              		.cfi_def_cfa_offset 12
 9297              		.cfi_offset 4, -12
 9298              		.cfi_offset 5, -8
 9299              		.cfi_offset 14, -4
 9300 0002 A3B0     		sub	sp, sp, #140
 9301              	.LCFI112:
 9302              		.cfi_def_cfa_offset 152
 9303 0004 0190     		str	r0, [sp, #4]
 9304 0006 0091     		str	r1, [sp]
4722:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR djo, djn;
 9305              		.loc 1 4722 2 is_stmt 1 view .LVU3098
4723:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 9306              		.loc 1 4723 2 view .LVU3099
4724:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE buf[_FS_EXFAT ? SZDIRE * 2 : 24], *dir;
 9307              		.loc 1 4724 2 view .LVU3100
4725:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dw;
 9308              		.loc 1 4725 2 view .LVU3101
4726:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
 9309              		.loc 1 4726 2 view .LVU3102
4730:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path_old, &fs, FA_WRITE);	/* Get logical drive of the old object */
 9310              		.loc 1 4730 2 view .LVU3103
 9311 0008 6846     		mov	r0, sp
 9312              	.LVL1093:
4730:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path_old, &fs, FA_WRITE);	/* Get logical drive of the old object */
 9313              		.loc 1 4730 2 is_stmt 0 view .LVU3104
 9314 000a FFF7FEFF 		bl	get_ldnumber
 9315              	.LVL1094:
4731:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 9316              		.loc 1 4731 2 is_stmt 1 view .LVU3105
4731:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 9317              		.loc 1 4731 8 is_stmt 0 view .LVU3106
 9318 000e 0222     		movs	r2, #2
 9319 0010 09A9     		add	r1, sp, #36
 9320 0012 01A8     		add	r0, sp, #4
 9321 0014 FFF7FEFF 		bl	find_volume
 9322              	.LVL1095:
ARM GAS  /tmp/ccWTW02a.s 			page 316


4732:Middlewares/Third_Party/FatFs/src/ff.c **** 		djo.obj.fs = fs;
 9323              		.loc 1 4732 2 is_stmt 1 view .LVU3107
4732:Middlewares/Third_Party/FatFs/src/ff.c **** 		djo.obj.fs = fs;
 9324              		.loc 1 4732 5 is_stmt 0 view .LVU3108
 9325 0018 0446     		mov	r4, r0
 9326 001a 10B1     		cbz	r0, .L695
 9327              	.LVL1096:
 9328              	.L685:
4807:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 9329              		.loc 1 4807 16 is_stmt 1 view .LVU3109
4810:Middlewares/Third_Party/FatFs/src/ff.c **** }
 9330              		.loc 1 4810 2 view .LVU3110
4811:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9331              		.loc 1 4811 1 is_stmt 0 view .LVU3111
 9332 001c 2046     		mov	r0, r4
 9333 001e 23B0     		add	sp, sp, #140
 9334              	.LCFI113:
 9335              		.cfi_remember_state
 9336              		.cfi_def_cfa_offset 12
 9337              		@ sp needed
 9338 0020 30BD     		pop	{r4, r5, pc}
 9339              	.LVL1097:
 9340              	.L695:
 9341              	.LCFI114:
 9342              		.cfi_restore_state
4733:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 9343              		.loc 1 4733 3 is_stmt 1 view .LVU3112
4733:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 9344              		.loc 1 4733 14 is_stmt 0 view .LVU3113
 9345 0022 099B     		ldr	r3, [sp, #36]
 9346 0024 1693     		str	r3, [sp, #88]
4734:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
 9347              		.loc 1 4734 18 is_stmt 1 view .LVU3114
4735:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && (djo.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check vali
 9348              		.loc 1 4735 3 view .LVU3115
4735:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && (djo.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check vali
 9349              		.loc 1 4735 9 is_stmt 0 view .LVU3116
 9350 0026 0199     		ldr	r1, [sp, #4]
 9351 0028 16A8     		add	r0, sp, #88
 9352              	.LVL1098:
4735:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && (djo.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check vali
 9353              		.loc 1 4735 9 view .LVU3117
 9354 002a FFF7FEFF 		bl	follow_path
 9355              	.LVL1099:
4736:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 9356              		.loc 1 4736 3 is_stmt 1 view .LVU3118
4736:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 9357              		.loc 1 4736 6 is_stmt 0 view .LVU3119
 9358 002e 0446     		mov	r4, r0
 9359 0030 20B9     		cbnz	r0, .L686
4736:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 9360              		.loc 1 4736 30 discriminator 1 view .LVU3120
 9361 0032 9DF88730 		ldrb	r3, [sp, #135]	@ zero_extendqisi2
4736:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 9362              		.loc 1 4736 20 discriminator 1 view .LVU3121
 9363 0036 13F0A00F 		tst	r3, #160
 9364 003a 1ED1     		bne	.L691
ARM GAS  /tmp/ccWTW02a.s 			page 317


 9365              	.L686:
 9366              	.LVL1100:
4738:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = chk_lock(&djo, 2);
 9367              		.loc 1 4738 3 is_stmt 1 view .LVU3122
4738:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = chk_lock(&djo, 2);
 9368              		.loc 1 4738 6 is_stmt 0 view .LVU3123
 9369 003c 24B9     		cbnz	r4, .L687
4739:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 9370              		.loc 1 4739 4 is_stmt 1 view .LVU3124
4739:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 9371              		.loc 1 4739 10 is_stmt 0 view .LVU3125
 9372 003e 0221     		movs	r1, #2
 9373 0040 16A8     		add	r0, sp, #88
 9374 0042 FFF7FEFF 		bl	chk_lock
 9375              	.LVL1101:
 9376 0046 0446     		mov	r4, r0
 9377              	.LVL1102:
 9378              	.L687:
4742:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 9379              		.loc 1 4742 3 is_stmt 1 view .LVU3126
4742:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 9380              		.loc 1 4742 6 is_stmt 0 view .LVU3127
 9381 0048 002C     		cmp	r4, #0
 9382 004a E7D1     		bne	.L685
4769:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
 9383              		.loc 1 4769 5 is_stmt 1 view .LVU3128
 9384 004c 1522     		movs	r2, #21
 9385 004e 1E99     		ldr	r1, [sp, #120]
 9386 0050 0B31     		adds	r1, r1, #11
 9387 0052 03A8     		add	r0, sp, #12
 9388 0054 FFF7FEFF 		bl	mem_cpy
 9389              	.LVL1103:
4770:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = follow_path(&djn, path_new);		/* Make sure if new object name is not in use */
 9390              		.loc 1 4770 5 view .LVU3129
 9391 0058 3022     		movs	r2, #48
 9392 005a 16A9     		add	r1, sp, #88
 9393 005c 0AA8     		add	r0, sp, #40
 9394 005e FFF7FEFF 		bl	mem_cpy
 9395              	.LVL1104:
4771:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {						/* Is new name already in use by any other object? */
 9396              		.loc 1 4771 5 view .LVU3130
4771:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {						/* Is new name already in use by any other object? */
 9397              		.loc 1 4771 11 is_stmt 0 view .LVU3131
 9398 0062 0099     		ldr	r1, [sp]
 9399 0064 0AA8     		add	r0, sp, #40
 9400 0066 FFF7FEFF 		bl	follow_path
 9401              	.LVL1105:
4772:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = (djn.obj.sclust == djo.obj.sclust && djn.dptr == djo.dptr) ? FR_NO_FILE : FR_EXIST;
 9402              		.loc 1 4772 5 is_stmt 1 view .LVU3132
4772:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = (djn.obj.sclust == djo.obj.sclust && djn.dptr == djo.dptr) ? FR_NO_FILE : FR_EXIST;
 9403              		.loc 1 4772 8 is_stmt 0 view .LVU3133
 9404 006a 0446     		mov	r4, r0
 9405 006c 68B9     		cbnz	r0, .L688
4773:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9406              		.loc 1 4773 6 is_stmt 1 view .LVU3134
4773:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9407              		.loc 1 4773 84 is_stmt 0 view .LVU3135
ARM GAS  /tmp/ccWTW02a.s 			page 318


 9408 006e 0C9A     		ldr	r2, [sp, #48]
 9409 0070 189B     		ldr	r3, [sp, #96]
 9410 0072 9A42     		cmp	r2, r3
 9411 0074 03D0     		beq	.L696
 9412 0076 0824     		movs	r4, #8
 9413 0078 09E0     		b	.L689
 9414              	.L691:
4736:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 9415              		.loc 1 4736 68 view .LVU3136
 9416 007a 0624     		movs	r4, #6
 9417 007c E4E7     		b	.L687
 9418              	.L696:
4773:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9419              		.loc 1 4773 46 discriminator 1 view .LVU3137
 9420 007e 0F9A     		ldr	r2, [sp, #60]
 9421 0080 1B9B     		ldr	r3, [sp, #108]
 9422 0082 9A42     		cmp	r2, r3
 9423 0084 10D0     		beq	.L690
4773:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9424              		.loc 1 4773 84 view .LVU3138
 9425 0086 0824     		movs	r4, #8
 9426 0088 01E0     		b	.L689
 9427              	.L688:
4775:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
 9428              		.loc 1 4775 5 is_stmt 1 view .LVU3139
4775:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
 9429              		.loc 1 4775 8 is_stmt 0 view .LVU3140
 9430 008a 0428     		cmp	r0, #4
 9431 008c 0CD0     		beq	.L690
 9432              	.LVL1106:
 9433              	.L689:
4799:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_remove(&djo);		/* Remove old entry */
 9434              		.loc 1 4799 4 is_stmt 1 view .LVU3141
4799:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_remove(&djo);		/* Remove old entry */
 9435              		.loc 1 4799 7 is_stmt 0 view .LVU3142
 9436 008e 002C     		cmp	r4, #0
 9437 0090 C4D1     		bne	.L685
4800:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
 9438              		.loc 1 4800 5 is_stmt 1 view .LVU3143
4800:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
 9439              		.loc 1 4800 11 is_stmt 0 view .LVU3144
 9440 0092 16A8     		add	r0, sp, #88
 9441 0094 FFF7FEFF 		bl	dir_remove
 9442              	.LVL1107:
4801:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_fs(fs);
 9443              		.loc 1 4801 5 is_stmt 1 view .LVU3145
4801:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_fs(fs);
 9444              		.loc 1 4801 8 is_stmt 0 view .LVU3146
 9445 0098 0446     		mov	r4, r0
 9446 009a 0028     		cmp	r0, #0
 9447 009c BED1     		bne	.L685
4802:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9448              		.loc 1 4802 6 is_stmt 1 view .LVU3147
4802:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9449              		.loc 1 4802 12 is_stmt 0 view .LVU3148
 9450 009e 0998     		ldr	r0, [sp, #36]
 9451              	.LVL1108:
ARM GAS  /tmp/ccWTW02a.s 			page 319


4802:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9452              		.loc 1 4802 12 view .LVU3149
 9453 00a0 FFF7FEFF 		bl	sync_fs
 9454              	.LVL1109:
 9455 00a4 0446     		mov	r4, r0
 9456              	.LVL1110:
4802:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9457              		.loc 1 4802 12 view .LVU3150
 9458 00a6 B9E7     		b	.L685
 9459              	.LVL1111:
 9460              	.L690:
4776:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
 9461              		.loc 1 4776 6 is_stmt 1 view .LVU3151
4776:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
 9462              		.loc 1 4776 12 is_stmt 0 view .LVU3152
 9463 00a8 0AA8     		add	r0, sp, #40
 9464 00aa FFF7FEFF 		bl	dir_register
 9465              	.LVL1112:
4777:Middlewares/Third_Party/FatFs/src/ff.c **** 						dir = djn.dir;					/* Copy information about object except name */
 9466              		.loc 1 4777 6 is_stmt 1 view .LVU3153
4777:Middlewares/Third_Party/FatFs/src/ff.c **** 						dir = djn.dir;					/* Copy information about object except name */
 9467              		.loc 1 4777 9 is_stmt 0 view .LVU3154
 9468 00ae 0446     		mov	r4, r0
 9469 00b0 0028     		cmp	r0, #0
 9470 00b2 ECD1     		bne	.L689
4778:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_cpy(dir + 13, buf + 2, 19);
 9471              		.loc 1 4778 7 is_stmt 1 view .LVU3155
4778:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_cpy(dir + 13, buf + 2, 19);
 9472              		.loc 1 4778 11 is_stmt 0 view .LVU3156
 9473 00b4 129D     		ldr	r5, [sp, #72]
 9474              	.LVL1113:
4779:Middlewares/Third_Party/FatFs/src/ff.c **** 						dir[DIR_Attr] = buf[0] | AM_ARC;
 9475              		.loc 1 4779 7 is_stmt 1 view .LVU3157
 9476 00b6 1322     		movs	r2, #19
 9477 00b8 0DF10E01 		add	r1, sp, #14
 9478 00bc 05F10D00 		add	r0, r5, #13
 9479              	.LVL1114:
4779:Middlewares/Third_Party/FatFs/src/ff.c **** 						dir[DIR_Attr] = buf[0] | AM_ARC;
 9480              		.loc 1 4779 7 is_stmt 0 view .LVU3158
 9481 00c0 FFF7FEFF 		bl	mem_cpy
 9482              	.LVL1115:
4780:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 9483              		.loc 1 4780 7 is_stmt 1 view .LVU3159
4780:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 9484              		.loc 1 4780 26 is_stmt 0 view .LVU3160
 9485 00c4 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
4780:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 9486              		.loc 1 4780 21 view .LVU3161
 9487 00c8 43F02003 		orr	r3, r3, #32
 9488 00cc EB72     		strb	r3, [r5, #11]
4781:Middlewares/Third_Party/FatFs/src/ff.c **** 						if ((dir[DIR_Attr] & AM_DIR) && djo.obj.sclust != djn.obj.sclust) {	/* Update .. entry in the
 9489              		.loc 1 4781 7 is_stmt 1 view .LVU3162
4781:Middlewares/Third_Party/FatFs/src/ff.c **** 						if ((dir[DIR_Attr] & AM_DIR) && djo.obj.sclust != djn.obj.sclust) {	/* Update .. entry in the
 9490              		.loc 1 4781 17 is_stmt 0 view .LVU3163
 9491 00ce 099B     		ldr	r3, [sp, #36]
 9492 00d0 0122     		movs	r2, #1
 9493 00d2 DA70     		strb	r2, [r3, #3]
ARM GAS  /tmp/ccWTW02a.s 			page 320


4782:Middlewares/Third_Party/FatFs/src/ff.c **** 							dw = clust2sect(fs, ld_clust(fs, dir));
 9494              		.loc 1 4782 7 is_stmt 1 view .LVU3164
4782:Middlewares/Third_Party/FatFs/src/ff.c **** 							dw = clust2sect(fs, ld_clust(fs, dir));
 9495              		.loc 1 4782 15 is_stmt 0 view .LVU3165
 9496 00d4 EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
4782:Middlewares/Third_Party/FatFs/src/ff.c **** 							dw = clust2sect(fs, ld_clust(fs, dir));
 9497              		.loc 1 4782 10 view .LVU3166
 9498 00d6 13F0100F 		tst	r3, #16
 9499 00da D8D0     		beq	.L689
4782:Middlewares/Third_Party/FatFs/src/ff.c **** 							dw = clust2sect(fs, ld_clust(fs, dir));
 9500              		.loc 1 4782 36 discriminator 1 view .LVU3167
 9501 00dc 189A     		ldr	r2, [sp, #96]
 9502 00de 0C9B     		ldr	r3, [sp, #48]
 9503 00e0 9A42     		cmp	r2, r3
 9504 00e2 D4D0     		beq	.L689
4783:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (!dw) {
 9505              		.loc 1 4783 8 is_stmt 1 view .LVU3168
4783:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (!dw) {
 9506              		.loc 1 4783 13 is_stmt 0 view .LVU3169
 9507 00e4 099C     		ldr	r4, [sp, #36]
 9508 00e6 2946     		mov	r1, r5
 9509 00e8 2046     		mov	r0, r4
 9510 00ea FFF7FEFF 		bl	ld_clust
 9511              	.LVL1116:
 9512 00ee 0146     		mov	r1, r0
 9513 00f0 2046     		mov	r0, r4
 9514 00f2 FFF7FEFF 		bl	clust2sect
 9515              	.LVL1117:
4784:Middlewares/Third_Party/FatFs/src/ff.c **** 								res = FR_INT_ERR;
 9516              		.loc 1 4784 8 is_stmt 1 view .LVU3170
4784:Middlewares/Third_Party/FatFs/src/ff.c **** 								res = FR_INT_ERR;
 9517              		.loc 1 4784 11 is_stmt 0 view .LVU3171
 9518 00f6 0146     		mov	r1, r0
 9519 00f8 08B9     		cbnz	r0, .L697
4785:Middlewares/Third_Party/FatFs/src/ff.c **** 							} else {
 9520              		.loc 1 4785 13 view .LVU3172
 9521 00fa 0224     		movs	r4, #2
 9522 00fc 8EE7     		b	.L685
 9523              	.L697:
4788:Middlewares/Third_Party/FatFs/src/ff.c **** 								dir = fs->win + SZDIRE * 1;	/* Ptr to .. entry */
 9524              		.loc 1 4788 9 is_stmt 1 view .LVU3173
4788:Middlewares/Third_Party/FatFs/src/ff.c **** 								dir = fs->win + SZDIRE * 1;	/* Ptr to .. entry */
 9525              		.loc 1 4788 15 is_stmt 0 view .LVU3174
 9526 00fe 2046     		mov	r0, r4
 9527              	.LVL1118:
4788:Middlewares/Third_Party/FatFs/src/ff.c **** 								dir = fs->win + SZDIRE * 1;	/* Ptr to .. entry */
 9528              		.loc 1 4788 15 view .LVU3175
 9529 0100 FFF7FEFF 		bl	move_window
 9530              	.LVL1119:
4789:Middlewares/Third_Party/FatFs/src/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
 9531              		.loc 1 4789 9 is_stmt 1 view .LVU3176
4789:Middlewares/Third_Party/FatFs/src/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
 9532              		.loc 1 4789 17 is_stmt 0 view .LVU3177
 9533 0104 099B     		ldr	r3, [sp, #36]
4789:Middlewares/Third_Party/FatFs/src/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
 9534              		.loc 1 4789 13 view .LVU3178
 9535 0106 03F15001 		add	r1, r3, #80
ARM GAS  /tmp/ccWTW02a.s 			page 321


 9536              	.LVL1120:
4790:Middlewares/Third_Party/FatFs/src/ff.c **** 									st_clust(fs, dir, djn.obj.sclust);
 9537              		.loc 1 4790 9 is_stmt 1 view .LVU3179
4790:Middlewares/Third_Party/FatFs/src/ff.c **** 									st_clust(fs, dir, djn.obj.sclust);
 9538              		.loc 1 4790 12 is_stmt 0 view .LVU3180
 9539 010a 0446     		mov	r4, r0
 9540 010c 0028     		cmp	r0, #0
 9541 010e BED1     		bne	.L689
4790:Middlewares/Third_Party/FatFs/src/ff.c **** 									st_clust(fs, dir, djn.obj.sclust);
 9542              		.loc 1 4790 32 discriminator 1 view .LVU3181
 9543 0110 93F85120 		ldrb	r2, [r3, #81]	@ zero_extendqisi2
4790:Middlewares/Third_Party/FatFs/src/ff.c **** 									st_clust(fs, dir, djn.obj.sclust);
 9544              		.loc 1 4790 26 discriminator 1 view .LVU3182
 9545 0114 2E2A     		cmp	r2, #46
 9546 0116 BAD1     		bne	.L689
4791:Middlewares/Third_Party/FatFs/src/ff.c **** 									fs->wflag = 1;
 9547              		.loc 1 4791 10 is_stmt 1 view .LVU3183
 9548 0118 0C9A     		ldr	r2, [sp, #48]
 9549 011a 1846     		mov	r0, r3
 9550              	.LVL1121:
4791:Middlewares/Third_Party/FatFs/src/ff.c **** 									fs->wflag = 1;
 9551              		.loc 1 4791 10 is_stmt 0 view .LVU3184
 9552 011c FFF7FEFF 		bl	st_clust
 9553              	.LVL1122:
4792:Middlewares/Third_Party/FatFs/src/ff.c **** 								}
 9554              		.loc 1 4792 10 is_stmt 1 view .LVU3185
4792:Middlewares/Third_Party/FatFs/src/ff.c **** 								}
 9555              		.loc 1 4792 20 is_stmt 0 view .LVU3186
 9556 0120 099B     		ldr	r3, [sp, #36]
 9557 0122 0122     		movs	r2, #1
 9558 0124 DA70     		strb	r2, [r3, #3]
 9559 0126 B2E7     		b	.L689
 9560              		.cfi_endproc
 9561              	.LFE194:
 9563              		.section	.rodata.f_mkfs.str1.4,"aMS",%progbits,1
 9564              		.align	2
 9565              	.LC1:
 9566 0000 EBFE904D 		.ascii	"\353\376\220MSDOS5.0\000"
 9566      53444F53 
 9566      352E3000 
 9567              		.align	2
 9568              	.LC2:
 9569 000c 4E4F204E 		.ascii	"NO NAME    FAT32   \000"
 9569      414D4520 
 9569      20202046 
 9569      41543332 
 9569      20202000 
 9570              		.align	2
 9571              	.LC3:
 9572 0020 4E4F204E 		.ascii	"NO NAME    FAT     \000"
 9572      414D4520 
 9572      20202046 
 9572      41542020 
 9572      20202000 
 9573              		.section	.text.f_mkfs,"ax",%progbits
 9574              		.align	1
 9575              		.global	f_mkfs
ARM GAS  /tmp/ccWTW02a.s 			page 322


 9576              		.syntax unified
 9577              		.thumb
 9578              		.thumb_func
 9579              		.fpu fpv5-d16
 9581              	f_mkfs:
 9582              	.LVL1123:
 9583              	.LFB195:
5308:Middlewares/Third_Party/FatFs/src/ff.c **** 	const UINT n_fats = 1;		/* Number of FATs for FAT12/16/32 volume (1 or 2) */
 9584              		.loc 1 5308 1 is_stmt 1 view -0
 9585              		.cfi_startproc
 9586              		@ args = 4, pretend = 0, frame = 48
 9587              		@ frame_needed = 0, uses_anonymous_args = 0
5308:Middlewares/Third_Party/FatFs/src/ff.c **** 	const UINT n_fats = 1;		/* Number of FATs for FAT12/16/32 volume (1 or 2) */
 9588              		.loc 1 5308 1 is_stmt 0 view .LVU3188
 9589 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 9590              	.LCFI115:
 9591              		.cfi_def_cfa_offset 36
 9592              		.cfi_offset 4, -36
 9593              		.cfi_offset 5, -32
 9594              		.cfi_offset 6, -28
 9595              		.cfi_offset 7, -24
 9596              		.cfi_offset 8, -20
 9597              		.cfi_offset 9, -16
 9598              		.cfi_offset 10, -12
 9599              		.cfi_offset 11, -8
 9600              		.cfi_offset 14, -4
 9601 0004 8DB0     		sub	sp, sp, #52
 9602              	.LCFI116:
 9603              		.cfi_def_cfa_offset 88
 9604 0006 0990     		str	r0, [sp, #36]
 9605 0008 0F46     		mov	r7, r1
 9606 000a 1546     		mov	r5, r2
 9607 000c 0093     		str	r3, [sp]
5309:Middlewares/Third_Party/FatFs/src/ff.c **** 	const UINT n_rootdir = 512;	/* Number of root directory entries for FAT12/16 volume */
 9608              		.loc 1 5309 2 is_stmt 1 view .LVU3189
 9609              	.LVL1124:
5310:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const WORD cst[] = {1, 4, 16, 64, 256, 512, 0};	/* Cluster size boundary for FAT12/16 volum
 9610              		.loc 1 5310 2 view .LVU3190
5311:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const WORD cst32[] = {1, 2, 4, 8, 16, 32, 0};	/* Cluster size boundary for FAT32 volume (12
 9611              		.loc 1 5311 2 view .LVU3191
5312:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE fmt, sys, *buf, *pte, pdrv, part;
 9612              		.loc 1 5312 2 view .LVU3192
5313:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD ss;
 9613              		.loc 1 5313 2 view .LVU3193
5314:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD szb_buf, sz_buf, sz_blk, n_clst, pau, sect, nsect, n;
 9614              		.loc 1 5314 2 view .LVU3194
5315:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD b_vol, b_fat, b_data;				/* Base LBA for volume, fat, data */
 9615              		.loc 1 5315 2 view .LVU3195
5316:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sz_vol, sz_rsv, sz_fat, sz_dir;	/* Size for volume, fat, dir, data */
 9616              		.loc 1 5316 2 view .LVU3196
5317:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 9617              		.loc 1 5317 2 view .LVU3197
5318:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
 9618              		.loc 1 5318 2 view .LVU3198
5319:Middlewares/Third_Party/FatFs/src/ff.c **** 	DSTATUS stat;
 9619              		.loc 1 5319 2 view .LVU3199
5320:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM || _FS_EXFAT
ARM GAS  /tmp/ccWTW02a.s 			page 323


 9620              		.loc 1 5320 2 view .LVU3200
5327:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 9621              		.loc 1 5327 2 view .LVU3201
5327:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 9622              		.loc 1 5327 8 is_stmt 0 view .LVU3202
 9623 000e 09A8     		add	r0, sp, #36
 9624              	.LVL1125:
5327:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 9625              		.loc 1 5327 8 view .LVU3203
 9626 0010 FFF7FEFF 		bl	get_ldnumber
 9627              	.LVL1126:
5328:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (FatFs[vol]) FatFs[vol]->fs_type = 0;	/* Clear the volume */
 9628              		.loc 1 5328 2 is_stmt 1 view .LVU3204
5328:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (FatFs[vol]) FatFs[vol]->fs_type = 0;	/* Clear the volume */
 9629              		.loc 1 5328 5 is_stmt 0 view .LVU3205
 9630 0014 0028     		cmp	r0, #0
5328:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (FatFs[vol]) FatFs[vol]->fs_type = 0;	/* Clear the volume */
 9631              		.loc 1 5328 5 view .LVU3206
 9632 0016 C0F20783 		blt	.L742
5329:Middlewares/Third_Party/FatFs/src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
 9633              		.loc 1 5329 2 is_stmt 1 view .LVU3207
5329:Middlewares/Third_Party/FatFs/src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
 9634              		.loc 1 5329 11 is_stmt 0 view .LVU3208
 9635 001a 8E4B     		ldr	r3, .L792
 9636 001c 53F82030 		ldr	r3, [r3, r0, lsl #2]
5329:Middlewares/Third_Party/FatFs/src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
 9637              		.loc 1 5329 5 view .LVU3209
 9638 0020 0BB1     		cbz	r3, .L700
5329:Middlewares/Third_Party/FatFs/src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
 9639              		.loc 1 5329 18 is_stmt 1 discriminator 1 view .LVU3210
5329:Middlewares/Third_Party/FatFs/src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
 9640              		.loc 1 5329 38 is_stmt 0 discriminator 1 view .LVU3211
 9641 0022 0022     		movs	r2, #0
 9642 0024 1A70     		strb	r2, [r3]
 9643              	.L700:
5330:Middlewares/Third_Party/FatFs/src/ff.c **** 	part = LD2PT(vol);	/* Partition (0:create as new, 1-4:get from partition table) */
 9644              		.loc 1 5330 2 is_stmt 1 view .LVU3212
5330:Middlewares/Third_Party/FatFs/src/ff.c **** 	part = LD2PT(vol);	/* Partition (0:create as new, 1-4:get from partition table) */
 9645              		.loc 1 5330 7 is_stmt 0 view .LVU3213
 9646 0026 C4B2     		uxtb	r4, r0
 9647              	.LVL1127:
5331:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9648              		.loc 1 5331 2 is_stmt 1 view .LVU3214
5334:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
 9649              		.loc 1 5334 2 view .LVU3215
5334:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
 9650              		.loc 1 5334 9 is_stmt 0 view .LVU3216
 9651 0028 2046     		mov	r0, r4
 9652              	.LVL1128:
5334:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
 9653              		.loc 1 5334 9 view .LVU3217
 9654 002a FFF7FEFF 		bl	disk_initialize
 9655              	.LVL1129:
5335:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
 9656              		.loc 1 5335 2 is_stmt 1 view .LVU3218
5335:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
 9657              		.loc 1 5335 5 is_stmt 0 view .LVU3219
ARM GAS  /tmp/ccWTW02a.s 			page 324


 9658 002e 10F0010F 		tst	r0, #1
 9659 0032 40F0FB82 		bne	.L743
5336:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, GET_BLOCK_SIZE, &sz_blk) != RES_OK || !sz_blk || sz_blk > 32768 || (sz_blk & 
 9660              		.loc 1 5336 2 is_stmt 1 view .LVU3220
5336:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, GET_BLOCK_SIZE, &sz_blk) != RES_OK || !sz_blk || sz_blk > 32768 || (sz_blk & 
 9661              		.loc 1 5336 5 is_stmt 0 view .LVU3221
 9662 0036 10F0040F 		tst	r0, #4
 9663 003a 40F0F982 		bne	.L744
5337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 9664              		.loc 1 5337 2 is_stmt 1 view .LVU3222
5337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 9665              		.loc 1 5337 6 is_stmt 0 view .LVU3223
 9666 003e 0BAA     		add	r2, sp, #44
 9667 0040 0321     		movs	r1, #3
 9668 0042 2046     		mov	r0, r4
 9669              	.LVL1130:
5337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 9670              		.loc 1 5337 6 view .LVU3224
 9671 0044 FFF7FEFF 		bl	disk_ioctl
 9672              	.LVL1131:
5337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 9673              		.loc 1 5337 5 view .LVU3225
 9674 0048 38B9     		cbnz	r0, .L701
5337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 9675              		.loc 1 5337 61 discriminator 2 view .LVU3226
 9676 004a 0B9B     		ldr	r3, [sp, #44]
5337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 9677              		.loc 1 5337 58 discriminator 2 view .LVU3227
 9678 004c 2BB1     		cbz	r3, .L701
5337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 9679              		.loc 1 5337 69 discriminator 4 view .LVU3228
 9680 004e B3F5004F 		cmp	r3, #32768
 9681 0052 02D8     		bhi	.L701
5337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 9682              		.loc 1 5337 108 discriminator 6 view .LVU3229
 9683 0054 5A1E     		subs	r2, r3, #1
5337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 9684              		.loc 1 5337 87 discriminator 6 view .LVU3230
 9685 0056 1342     		tst	r3, r2
 9686 0058 01D0     		beq	.L702
 9687              	.L701:
5337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 9688              		.loc 1 5337 115 is_stmt 1 discriminator 7 view .LVU3231
5337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 9689              		.loc 1 5337 122 is_stmt 0 discriminator 7 view .LVU3232
 9690 005a 0123     		movs	r3, #1
 9691 005c 0B93     		str	r3, [sp, #44]
 9692              	.L702:
5342:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 9693              		.loc 1 5342 2 is_stmt 1 view .LVU3233
 9694              	.LVL1132:
5344:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
 9695              		.loc 1 5344 2 view .LVU3234
5344:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
 9696              		.loc 1 5344 5 is_stmt 0 view .LVU3235
 9697 005e 1DB1     		cbz	r5, .L703
5344:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
ARM GAS  /tmp/ccWTW02a.s 			page 325


 9698              		.loc 1 5344 15 discriminator 1 view .LVU3236
 9699 0060 B5F5007F 		cmp	r5, #512
 9700 0064 C0F0E882 		bcc	.L745
 9701              	.L703:
5344:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
 9702              		.loc 1 5344 27 discriminator 4 view .LVU3237
 9703 0068 B5F1807F 		cmp	r5, #16777216
 9704 006c 00F2E682 		bhi	.L746
5344:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
 9705              		.loc 1 5344 58 discriminator 6 view .LVU3238
 9706 0070 6B1E     		subs	r3, r5, #1
5344:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
 9707              		.loc 1 5344 45 discriminator 6 view .LVU3239
 9708 0072 13EA050B 		ands	fp, r3, r5
 9709 0076 40F0E382 		bne	.L747
5345:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9710              		.loc 1 5345 2 is_stmt 1 view .LVU3240
5345:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9711              		.loc 1 5345 5 is_stmt 0 view .LVU3241
 9712 007a 4FEA5528 		lsr	r8, r5, #9
 9713              	.LVL1133:
5348:Middlewares/Third_Party/FatFs/src/ff.c **** 	sz_buf = len / ss;		/* Size of working buffer (sector) */
 9714              		.loc 1 5348 2 is_stmt 1 view .LVU3242
5349:Middlewares/Third_Party/FatFs/src/ff.c **** 	szb_buf = sz_buf * ss;	/* Size of working buffer (byte) */
 9715              		.loc 1 5349 2 view .LVU3243
5349:Middlewares/Third_Party/FatFs/src/ff.c **** 	szb_buf = sz_buf * ss;	/* Size of working buffer (byte) */
 9716              		.loc 1 5349 9 is_stmt 0 view .LVU3244
 9717 007e 169B     		ldr	r3, [sp, #88]
 9718 0080 5B0A     		lsrs	r3, r3, #9
 9719 0082 0193     		str	r3, [sp, #4]
 9720              	.LVL1134:
5350:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!szb_buf) return FR_MKFS_ABORTED;
 9721              		.loc 1 5350 2 is_stmt 1 view .LVU3245
5350:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!szb_buf) return FR_MKFS_ABORTED;
 9722              		.loc 1 5350 10 is_stmt 0 view .LVU3246
 9723 0084 744E     		ldr	r6, .L792+4
 9724 0086 169B     		ldr	r3, [sp, #88]
 9725              	.LVL1135:
5350:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!szb_buf) return FR_MKFS_ABORTED;
 9726              		.loc 1 5350 10 view .LVU3247
 9727 0088 1E40     		ands	r6, r6, r3
 9728              	.LVL1136:
5351:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9729              		.loc 1 5351 2 is_stmt 1 view .LVU3248
5351:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9730              		.loc 1 5351 5 is_stmt 0 view .LVU3249
 9731 008a 002E     		cmp	r6, #0
 9732 008c 00F0DA82 		beq	.L748
5354:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Get partition information from partition table in the MBR */
 9733              		.loc 1 5354 2 is_stmt 1 view .LVU3250
5364:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_vol = (opt & FM_SFD) ? 0 : 63;		/* Volume start sector */
 9734              		.loc 1 5364 3 view .LVU3251
5364:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_vol = (opt & FM_SFD) ? 0 : 63;		/* Volume start sector */
 9735              		.loc 1 5364 7 is_stmt 0 view .LVU3252
 9736 0090 0AAA     		add	r2, sp, #40
 9737 0092 0121     		movs	r1, #1
 9738 0094 2046     		mov	r0, r4
ARM GAS  /tmp/ccWTW02a.s 			page 326


 9739 0096 FFF7FEFF 		bl	disk_ioctl
 9740              	.LVL1137:
5364:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_vol = (opt & FM_SFD) ? 0 : 63;		/* Volume start sector */
 9741              		.loc 1 5364 6 view .LVU3253
 9742 009a 0028     		cmp	r0, #0
 9743 009c 40F0D482 		bne	.L749
5365:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < b_vol) return FR_MKFS_ABORTED;
 9744              		.loc 1 5365 3 is_stmt 1 view .LVU3254
5365:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < b_vol) return FR_MKFS_ABORTED;
 9745              		.loc 1 5365 30 is_stmt 0 view .LVU3255
 9746 00a0 17F00803 		ands	r3, r7, #8
 9747 00a4 0293     		str	r3, [sp, #8]
 9748 00a6 6CD0     		beq	.L750
 9749 00a8 D946     		mov	r9, fp
 9750              	.L704:
 9751              	.LVL1138:
5366:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_vol -= b_vol;						/* Volume size */
 9752              		.loc 1 5366 3 is_stmt 1 discriminator 4 view .LVU3256
5366:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_vol -= b_vol;						/* Volume size */
 9753              		.loc 1 5366 14 is_stmt 0 discriminator 4 view .LVU3257
 9754 00aa 0A9A     		ldr	r2, [sp, #40]
5366:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_vol -= b_vol;						/* Volume size */
 9755              		.loc 1 5366 6 discriminator 4 view .LVU3258
 9756 00ac 4A45     		cmp	r2, r9
 9757 00ae C0F0CD82 		bcc	.L751
5367:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 9758              		.loc 1 5367 3 is_stmt 1 view .LVU3259
5367:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 9759              		.loc 1 5367 10 is_stmt 0 view .LVU3260
 9760 00b2 A2EB0902 		sub	r2, r2, r9
 9761 00b6 0A92     		str	r2, [sp, #40]
5369:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9762              		.loc 1 5369 2 is_stmt 1 view .LVU3261
5369:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9763              		.loc 1 5369 5 is_stmt 0 view .LVU3262
 9764 00b8 7F2A     		cmp	r2, #127
 9765 00ba 40F2C982 		bls	.L752
5372:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_EXFAT && (opt & FM_EXFAT)) {	/* exFAT possible? */
 9766              		.loc 1 5372 2 is_stmt 1 view .LVU3263
5373:Middlewares/Third_Party/FatFs/src/ff.c **** 			if ((opt & FM_ANY) == FM_EXFAT || sz_vol >= 0x4000000 || au > 128) {	/* exFAT only, vol >= 64Ms 
 9767              		.loc 1 5373 3 view .LVU3264
5378:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (opt & FM_FAT32) {	/* FAT32 possible? */
 9768              		.loc 1 5378 3 view .LVU3265
5378:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (opt & FM_FAT32) {	/* FAT32 possible? */
 9769              		.loc 1 5378 6 is_stmt 0 view .LVU3266
 9770 00be B5F5813F 		cmp	r5, #66048
 9771 00c2 80F0C782 		bcs	.L753
5379:Middlewares/Third_Party/FatFs/src/ff.c **** 			if ((opt & FM_ANY) == FM_FAT32 || !(opt & FM_FAT)) {	/* FAT32 only or no-FAT? */
 9772              		.loc 1 5379 3 is_stmt 1 view .LVU3267
5379:Middlewares/Third_Party/FatFs/src/ff.c **** 			if ((opt & FM_ANY) == FM_FAT32 || !(opt & FM_FAT)) {	/* FAT32 only or no-FAT? */
 9773              		.loc 1 5379 6 is_stmt 0 view .LVU3268
 9774 00c6 17F00200 		ands	r0, r7, #2
 9775 00ca 06D0     		beq	.L705
5380:Middlewares/Third_Party/FatFs/src/ff.c **** 				fmt = FS_FAT32; break;
 9776              		.loc 1 5380 4 is_stmt 1 view .LVU3269
5380:Middlewares/Third_Party/FatFs/src/ff.c **** 				fmt = FS_FAT32; break;
 9777              		.loc 1 5380 7 is_stmt 0 view .LVU3270
ARM GAS  /tmp/ccWTW02a.s 			page 327


 9778 00cc 07F00703 		and	r3, r7, #7
 9779 00d0 022B     		cmp	r3, #2
 9780 00d2 59D0     		beq	.L754
5380:Middlewares/Third_Party/FatFs/src/ff.c **** 				fmt = FS_FAT32; break;
 9781              		.loc 1 5380 35 discriminator 1 view .LVU3271
 9782 00d4 17F0010F 		tst	r7, #1
 9783 00d8 5CD0     		beq	.L755
 9784              	.L705:
5384:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_FAT16;
 9785              		.loc 1 5384 3 is_stmt 1 view .LVU3272
5384:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_FAT16;
 9786              		.loc 1 5384 6 is_stmt 0 view .LVU3273
 9787 00da 17F0010F 		tst	r7, #1
 9788 00de 00F0BB82 		beq	.L756
5385:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (0);
 9789              		.loc 1 5385 7 view .LVU3274
 9790 00e2 4FF0020A 		mov	r10, #2
 9791 00e6 0394     		str	r4, [sp, #12]
 9792 00e8 0496     		str	r6, [sp, #16]
 9793 00ea 4646     		mov	r6, r8
 9794              	.LVL1139:
 9795              	.L707:
5386:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9796              		.loc 1 5386 10 is_stmt 1 view .LVU3275
5552:Middlewares/Third_Party/FatFs/src/ff.c **** 			pau = au;
 9797              		.loc 1 5552 3 view .LVU3276
5553:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Pre-determine number of clusters and FAT sub-type */
 9798              		.loc 1 5553 4 view .LVU3277
5555:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!pau) {	/* au auto-selection */
 9799              		.loc 1 5555 4 view .LVU3278
5555:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!pau) {	/* au auto-selection */
 9800              		.loc 1 5555 7 is_stmt 0 view .LVU3279
 9801 00ec BAF1030F 		cmp	r10, #3
 9802 00f0 5AD0     		beq	.L725
5566:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = sz_vol / 0x1000;	/* Volume size in unit of 4KS */
 9803              		.loc 1 5566 5 is_stmt 1 view .LVU3280
5566:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = sz_vol / 0x1000;	/* Volume size in unit of 4KS */
 9804              		.loc 1 5566 8 is_stmt 0 view .LVU3281
 9805 00f2 002E     		cmp	r6, #0
 9806 00f4 79D0     		beq	.L781
 9807 00f6 3746     		mov	r7, r6
 9808              	.LVL1140:
 9809              	.L713:
5570:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst > MAX_FAT12) {
 9810              		.loc 1 5570 5 is_stmt 1 view .LVU3282
5570:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst > MAX_FAT12) {
 9811              		.loc 1 5570 12 is_stmt 0 view .LVU3283
 9812 00f8 B2FBF7F3 		udiv	r3, r2, r7
 9813              	.LVL1141:
5571:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = n_clst * 2 + 4;		/* FAT size [byte] */
 9814              		.loc 1 5571 5 is_stmt 1 view .LVU3284
5571:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = n_clst * 2 + 4;		/* FAT size [byte] */
 9815              		.loc 1 5571 8 is_stmt 0 view .LVU3285
 9816 00fc 40F6F571 		movw	r1, #4085
 9817 0100 8B42     		cmp	r3, r1
 9818 0102 40F28180 		bls	.L716
5572:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
ARM GAS  /tmp/ccWTW02a.s 			page 328


 9819              		.loc 1 5572 6 is_stmt 1 view .LVU3286
5572:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
 9820              		.loc 1 5572 21 is_stmt 0 view .LVU3287
 9821 0106 9D1C     		adds	r5, r3, #2
5572:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
 9822              		.loc 1 5572 8 view .LVU3288
 9823 0108 6D00     		lsls	r5, r5, #1
 9824              	.LVL1142:
 9825              	.L717:
5577:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv = 1;						/* Number of reserved sectors */
 9826              		.loc 1 5577 5 is_stmt 1 view .LVU3289
5577:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv = 1;						/* Number of reserved sectors */
 9827              		.loc 1 5577 22 is_stmt 0 view .LVU3290
 9828 010a 05F2FF15 		addw	r5, r5, #511
 9829              	.LVL1143:
5577:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv = 1;						/* Number of reserved sectors */
 9830              		.loc 1 5577 12 view .LVU3291
 9831 010e 6D0A     		lsrs	r5, r5, #9
 9832              	.LVL1144:
5578:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_dir = (DWORD)n_rootdir * SZDIRE / ss;	/* Rootdir size [sector] */
 9833              		.loc 1 5578 5 is_stmt 1 view .LVU3292
5579:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9834              		.loc 1 5579 5 view .LVU3293
5579:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9835              		.loc 1 5579 12 is_stmt 0 view .LVU3294
 9836 0110 4FF0200E 		mov	lr, #32
5578:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_dir = (DWORD)n_rootdir * SZDIRE / ss;	/* Rootdir size [sector] */
 9837              		.loc 1 5578 12 view .LVU3295
 9838 0114 4FF0010C 		mov	ip, #1
 9839              	.LVL1145:
 9840              	.L712:
5581:Middlewares/Third_Party/FatFs/src/ff.c **** 			b_data = b_fat + sz_fat * n_fats + sz_dir;	/* Data base */
 9841              		.loc 1 5581 4 is_stmt 1 view .LVU3296
5581:Middlewares/Third_Party/FatFs/src/ff.c **** 			b_data = b_fat + sz_fat * n_fats + sz_dir;	/* Data base */
 9842              		.loc 1 5581 10 is_stmt 0 view .LVU3297
 9843 0118 0CEB0908 		add	r8, ip, r9
 9844              	.LVL1146:
5582:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9845              		.loc 1 5582 4 is_stmt 1 view .LVU3298
5582:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9846              		.loc 1 5582 19 is_stmt 0 view .LVU3299
 9847 011c 05EB0803 		add	r3, r5, r8
5582:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9848              		.loc 1 5582 11 view .LVU3300
 9849 0120 7344     		add	r3, r3, lr
 9850              	.LVL1147:
5585:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {		/* FAT32: Move FAT base */
 9851              		.loc 1 5585 4 is_stmt 1 view .LVU3301
5585:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {		/* FAT32: Move FAT base */
 9852              		.loc 1 5585 17 is_stmt 0 view .LVU3302
 9853 0122 0B9C     		ldr	r4, [sp, #44]
 9854 0124 E118     		adds	r1, r4, r3
5585:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {		/* FAT32: Move FAT base */
 9855              		.loc 1 5585 26 view .LVU3303
 9856 0126 0139     		subs	r1, r1, #1
5585:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {		/* FAT32: Move FAT base */
 9857              		.loc 1 5585 33 view .LVU3304
ARM GAS  /tmp/ccWTW02a.s 			page 329


 9858 0128 6442     		rsbs	r4, r4, #0
5585:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {		/* FAT32: Move FAT base */
 9859              		.loc 1 5585 31 view .LVU3305
 9860 012a 0C40     		ands	r4, r4, r1
5585:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {		/* FAT32: Move FAT base */
 9861              		.loc 1 5585 6 view .LVU3306
 9862 012c E41A     		subs	r4, r4, r3
 9863              	.LVL1148:
5586:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv += n; b_fat += n;
 9864              		.loc 1 5586 4 is_stmt 1 view .LVU3307
5586:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv += n; b_fat += n;
 9865              		.loc 1 5586 7 is_stmt 0 view .LVU3308
 9866 012e BAF1030F 		cmp	r10, #3
 9867 0132 71D0     		beq	.L782
5589:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9868              		.loc 1 5589 5 is_stmt 1 view .LVU3309
5589:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9869              		.loc 1 5589 12 is_stmt 0 view .LVU3310
 9870 0134 2544     		add	r5, r5, r4
 9871              	.LVL1149:
 9872              	.L719:
5593:Middlewares/Third_Party/FatFs/src/ff.c **** 			n_clst = (sz_vol - sz_rsv - sz_fat * n_fats - sz_dir) / pau;
 9873              		.loc 1 5593 4 is_stmt 1 view .LVU3311
5593:Middlewares/Third_Party/FatFs/src/ff.c **** 			n_clst = (sz_vol - sz_rsv - sz_fat * n_fats - sz_dir) / pau;
 9874              		.loc 1 5593 24 is_stmt 0 view .LVU3312
 9875 0136 03EB0713 		add	r3, r3, r7, lsl #4
 9876              	.LVL1150:
5593:Middlewares/Third_Party/FatFs/src/ff.c **** 			n_clst = (sz_vol - sz_rsv - sz_fat * n_fats - sz_dir) / pau;
 9877              		.loc 1 5593 35 view .LVU3313
 9878 013a A3EB0903 		sub	r3, r3, r9
5593:Middlewares/Third_Party/FatFs/src/ff.c **** 			n_clst = (sz_vol - sz_rsv - sz_fat * n_fats - sz_dir) / pau;
 9879              		.loc 1 5593 7 view .LVU3314
 9880 013e 9A42     		cmp	r2, r3
 9881 0140 C0F08E82 		bcc	.L760
5594:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 9882              		.loc 1 5594 4 is_stmt 1 view .LVU3315
5594:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 9883              		.loc 1 5594 21 is_stmt 0 view .LVU3316
 9884 0144 A2EB0C03 		sub	r3, r2, ip
5594:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 9885              		.loc 1 5594 30 view .LVU3317
 9886 0148 5B1B     		subs	r3, r3, r5
5594:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 9887              		.loc 1 5594 48 view .LVU3318
 9888 014a A3EB0E03 		sub	r3, r3, lr
5594:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 9889              		.loc 1 5594 11 view .LVU3319
 9890 014e B3FBF7F3 		udiv	r3, r3, r7
 9891              	.LVL1151:
5595:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst <= MAX_FAT16) {	/* Too few clusters for FAT32 */
 9892              		.loc 1 5595 4 is_stmt 1 view .LVU3320
5595:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst <= MAX_FAT16) {	/* Too few clusters for FAT32 */
 9893              		.loc 1 5595 7 is_stmt 0 view .LVU3321
 9894 0152 BAF1030F 		cmp	r10, #3
 9895 0156 62D0     		beq	.L783
 9896              	.L720:
5601:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst > MAX_FAT16) {	/* Too many clusters for FAT16 */
ARM GAS  /tmp/ccWTW02a.s 			page 330


 9897              		.loc 1 5601 4 is_stmt 1 view .LVU3322
5601:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst > MAX_FAT16) {	/* Too many clusters for FAT16 */
 9898              		.loc 1 5601 7 is_stmt 0 view .LVU3323
 9899 0158 BAF1020F 		cmp	r10, #2
 9900 015c 40F08680 		bne	.L722
5602:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (pau * 2) <= 64) {
 9901              		.loc 1 5602 5 is_stmt 1 view .LVU3324
5602:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (pau * 2) <= 64) {
 9902              		.loc 1 5602 8 is_stmt 0 view .LVU3325
 9903 0160 4FF6F571 		movw	r1, #65525
 9904 0164 8B42     		cmp	r3, r1
 9905 0166 67D9     		bls	.L723
5603:Middlewares/Third_Party/FatFs/src/ff.c **** 						au = pau * 2; continue;		/* Adjust cluster size and retry */
 9906              		.loc 1 5603 6 is_stmt 1 view .LVU3326
5603:Middlewares/Third_Party/FatFs/src/ff.c **** 						au = pau * 2; continue;		/* Adjust cluster size and retry */
 9907              		.loc 1 5603 9 is_stmt 0 view .LVU3327
 9908 0168 16B9     		cbnz	r6, .L724
5603:Middlewares/Third_Party/FatFs/src/ff.c **** 						au = pau * 2; continue;		/* Adjust cluster size and retry */
 9909              		.loc 1 5603 22 discriminator 1 view .LVU3328
 9910 016a 7B00     		lsls	r3, r7, #1
 9911              	.LVL1152:
5603:Middlewares/Third_Party/FatFs/src/ff.c **** 						au = pau * 2; continue;		/* Adjust cluster size and retry */
 9912              		.loc 1 5603 14 discriminator 1 view .LVU3329
 9913 016c 402B     		cmp	r3, #64
 9914 016e 17D9     		bls	.L762
 9915              	.L724:
5606:Middlewares/Third_Party/FatFs/src/ff.c **** 						fmt = FS_FAT32; continue;	/* Switch type to FAT32 and retry */
 9916              		.loc 1 5606 6 is_stmt 1 view .LVU3330
5606:Middlewares/Third_Party/FatFs/src/ff.c **** 						fmt = FS_FAT32; continue;	/* Switch type to FAT32 and retry */
 9917              		.loc 1 5606 9 is_stmt 0 view .LVU3331
 9918 0170 C0B9     		cbnz	r0, .L763
5609:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 9919              		.loc 1 5609 6 is_stmt 1 view .LVU3332
5609:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 9920              		.loc 1 5609 9 is_stmt 0 view .LVU3333
 9921 0172 002E     		cmp	r6, #0
 9922 0174 40F07882 		bne	.L764
5609:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 9923              		.loc 1 5609 21 discriminator 1 view .LVU3334
 9924 0178 7E00     		lsls	r6, r7, #1
 9925              	.LVL1153:
5609:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 9926              		.loc 1 5609 14 discriminator 1 view .LVU3335
 9927 017a 802E     		cmp	r6, #128
 9928 017c B6D9     		bls	.L707
5610:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9929              		.loc 1 5610 13 view .LVU3336
 9930 017e 0E20     		movs	r0, #14
 9931 0180 57E2     		b	.L699
 9932              	.LVL1154:
 9933              	.L750:
5365:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < b_vol) return FR_MKFS_ABORTED;
 9934              		.loc 1 5365 30 view .LVU3337
 9935 0182 4FF03F09 		mov	r9, #63
 9936 0186 90E7     		b	.L704
 9937              	.LVL1155:
 9938              	.L754:
ARM GAS  /tmp/ccWTW02a.s 			page 331


5381:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9939              		.loc 1 5381 9 view .LVU3338
 9940 0188 4FF0030A 		mov	r10, #3
 9941 018c 0394     		str	r4, [sp, #12]
 9942 018e 0496     		str	r6, [sp, #16]
 9943 0190 4646     		mov	r6, r8
 9944              	.LVL1156:
5381:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9945              		.loc 1 5381 9 view .LVU3339
 9946 0192 ABE7     		b	.L707
 9947              	.LVL1157:
 9948              	.L755:
5381:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9949              		.loc 1 5381 9 view .LVU3340
 9950 0194 4FF0030A 		mov	r10, #3
 9951 0198 0394     		str	r4, [sp, #12]
 9952 019a 0496     		str	r6, [sp, #16]
 9953 019c 4646     		mov	r6, r8
 9954              	.LVL1158:
5381:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9955              		.loc 1 5381 9 view .LVU3341
 9956 019e A5E7     		b	.L707
 9957              	.LVL1159:
 9958              	.L762:
5604:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 9959              		.loc 1 5604 10 view .LVU3342
 9960 01a0 1E46     		mov	r6, r3
 9961 01a2 A3E7     		b	.L707
 9962              	.L763:
5607:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 9963              		.loc 1 5607 11 view .LVU3343
 9964 01a4 4FF0030A 		mov	r10, #3
 9965              	.LVL1160:
 9966              	.L725:
5556:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = sz_vol / 0x20000;	/* Volume size in unit of 128KS */
 9967              		.loc 1 5556 5 is_stmt 1 view .LVU3344
5556:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = sz_vol / 0x20000;	/* Volume size in unit of 128KS */
 9968              		.loc 1 5556 8 is_stmt 0 view .LVU3345
 9969 01a8 8EB1     		cbz	r6, .L784
 9970 01aa 3746     		mov	r7, r6
 9971              	.L709:
 9972              	.LVL1161:
5560:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_fat = (n_clst * 4 + 8 + ss - 1) / ss;	/* FAT size [sector] */
 9973              		.loc 1 5560 5 is_stmt 1 view .LVU3346
5560:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_fat = (n_clst * 4 + 8 + ss - 1) / ss;	/* FAT size [sector] */
 9974              		.loc 1 5560 12 is_stmt 0 view .LVU3347
 9975 01ac B2FBF7F3 		udiv	r3, r2, r7
 9976              	.LVL1162:
5561:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv = 32;	/* Number of reserved sectors */
 9977              		.loc 1 5561 5 is_stmt 1 view .LVU3348
5561:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv = 32;	/* Number of reserved sectors */
 9978              		.loc 1 5561 26 is_stmt 0 view .LVU3349
 9979 01b0 9D1C     		adds	r5, r3, #2
 9980 01b2 AD00     		lsls	r5, r5, #2
5561:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv = 32;	/* Number of reserved sectors */
 9981              		.loc 1 5561 35 view .LVU3350
 9982 01b4 05F2FF15 		addw	r5, r5, #511
ARM GAS  /tmp/ccWTW02a.s 			page 332


5561:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv = 32;	/* Number of reserved sectors */
 9983              		.loc 1 5561 12 view .LVU3351
 9984 01b8 6D0A     		lsrs	r5, r5, #9
 9985              	.LVL1163:
5562:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_dir = 0;		/* No static directory */
 9986              		.loc 1 5562 5 is_stmt 1 view .LVU3352
5563:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst <= MAX_FAT16 || n_clst > MAX_FAT32) return FR_MKFS_ABORTED;
 9987              		.loc 1 5563 5 view .LVU3353
5564:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* FAT12/16 volume */
 9988              		.loc 1 5564 5 view .LVU3354
5564:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* FAT12/16 volume */
 9989              		.loc 1 5564 29 is_stmt 0 view .LVU3355
 9990 01ba 2849     		ldr	r1, .L792+8
 9991 01bc 1944     		add	r1, r1, r3
5564:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* FAT12/16 volume */
 9992              		.loc 1 5564 8 view .LVU3356
 9993 01be 284B     		ldr	r3, .L792+12
 9994              	.LVL1164:
5564:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* FAT12/16 volume */
 9995              		.loc 1 5564 8 view .LVU3357
 9996 01c0 9942     		cmp	r1, r3
 9997 01c2 00F24B82 		bhi	.L758
5563:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst <= MAX_FAT16 || n_clst > MAX_FAT32) return FR_MKFS_ABORTED;
 9998              		.loc 1 5563 12 view .LVU3358
 9999 01c6 DE46     		mov	lr, fp
5562:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_dir = 0;		/* No static directory */
 10000              		.loc 1 5562 12 view .LVU3359
 10001 01c8 4FF0200C 		mov	ip, #32
 10002 01cc A4E7     		b	.L712
 10003              	.LVL1165:
 10004              	.L784:
5557:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (i = 0, pau = 1; cst32[i] && cst32[i] <= n; i++, pau <<= 1) ;	/* Get from table */
 10005              		.loc 1 5557 6 is_stmt 1 view .LVU3360
5557:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (i = 0, pau = 1; cst32[i] && cst32[i] <= n; i++, pau <<= 1) ;	/* Get from table */
 10006              		.loc 1 5557 8 is_stmt 0 view .LVU3361
 10007 01ce 540C     		lsrs	r4, r2, #17
 10008              	.LVL1166:
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10009              		.loc 1 5558 6 is_stmt 1 view .LVU3362
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10010              		.loc 1 5558 13 is_stmt 0 view .LVU3363
 10011 01d0 3146     		mov	r1, r6
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10012              		.loc 1 5558 22 view .LVU3364
 10013 01d2 0127     		movs	r7, #1
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10014              		.loc 1 5558 6 view .LVU3365
 10015 01d4 01E0     		b	.L710
 10016              	.LVL1167:
 10017              	.L711:
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10018              		.loc 1 5558 70 is_stmt 1 discriminator 4 view .LVU3366
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10019              		.loc 1 5558 54 discriminator 4 view .LVU3367
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10020              		.loc 1 5558 55 is_stmt 0 discriminator 4 view .LVU3368
 10021 01d6 0131     		adds	r1, r1, #1
ARM GAS  /tmp/ccWTW02a.s 			page 333


 10022              	.LVL1168:
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10023              		.loc 1 5558 63 discriminator 4 view .LVU3369
 10024 01d8 7F00     		lsls	r7, r7, #1
 10025              	.LVL1169:
 10026              	.L710:
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10027              		.loc 1 5558 27 is_stmt 1 discriminator 1 view .LVU3370
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10028              		.loc 1 5558 32 is_stmt 0 discriminator 1 view .LVU3371
 10029 01da 224B     		ldr	r3, .L792+16
 10030 01dc 33F81130 		ldrh	r3, [r3, r1, lsl #1]
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10031              		.loc 1 5558 6 discriminator 1 view .LVU3372
 10032 01e0 002B     		cmp	r3, #0
 10033 01e2 E3D0     		beq	.L709
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10034              		.loc 1 5558 36 discriminator 3 view .LVU3373
 10035 01e4 A342     		cmp	r3, r4
 10036 01e6 F6D9     		bls	.L711
 10037 01e8 E0E7     		b	.L709
 10038              	.LVL1170:
 10039              	.L781:
5567:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (i = 0, pau = 1; cst[i] && cst[i] <= n; i++, pau <<= 1) ;	/* Get from table */
 10040              		.loc 1 5567 6 is_stmt 1 view .LVU3374
5567:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (i = 0, pau = 1; cst[i] && cst[i] <= n; i++, pau <<= 1) ;	/* Get from table */
 10041              		.loc 1 5567 8 is_stmt 0 view .LVU3375
 10042 01ea 140B     		lsrs	r4, r2, #12
 10043              	.LVL1171:
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10044              		.loc 1 5568 6 is_stmt 1 view .LVU3376
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10045              		.loc 1 5568 13 is_stmt 0 view .LVU3377
 10046 01ec 3146     		mov	r1, r6
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10047              		.loc 1 5568 22 view .LVU3378
 10048 01ee 0127     		movs	r7, #1
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10049              		.loc 1 5568 6 view .LVU3379
 10050 01f0 01E0     		b	.L714
 10051              	.LVL1172:
 10052              	.L715:
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10053              		.loc 1 5568 66 is_stmt 1 discriminator 4 view .LVU3380
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10054              		.loc 1 5568 50 discriminator 4 view .LVU3381
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10055              		.loc 1 5568 51 is_stmt 0 discriminator 4 view .LVU3382
 10056 01f2 0131     		adds	r1, r1, #1
 10057              	.LVL1173:
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10058              		.loc 1 5568 59 discriminator 4 view .LVU3383
 10059 01f4 7F00     		lsls	r7, r7, #1
 10060              	.LVL1174:
 10061              	.L714:
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10062              		.loc 1 5568 27 is_stmt 1 discriminator 1 view .LVU3384
ARM GAS  /tmp/ccWTW02a.s 			page 334


5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10063              		.loc 1 5568 30 is_stmt 0 discriminator 1 view .LVU3385
 10064 01f6 1C4B     		ldr	r3, .L792+20
 10065 01f8 33F81130 		ldrh	r3, [r3, r1, lsl #1]
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10066              		.loc 1 5568 6 discriminator 1 view .LVU3386
 10067 01fc 002B     		cmp	r3, #0
 10068 01fe 3FF47BAF 		beq	.L713
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10069              		.loc 1 5568 34 discriminator 3 view .LVU3387
 10070 0202 A342     		cmp	r3, r4
 10071 0204 F5D9     		bls	.L715
 10072 0206 77E7     		b	.L713
 10073              	.LVL1175:
 10074              	.L716:
5574:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = (n_clst * 3 + 1) / 2 + 3;	/* FAT size [byte] */
 10075              		.loc 1 5574 6 is_stmt 1 view .LVU3388
5575:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10076              		.loc 1 5575 6 view .LVU3389
5575:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10077              		.loc 1 5575 18 is_stmt 0 view .LVU3390
 10078 0208 03EB4305 		add	r5, r3, r3, lsl #1
5575:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10079              		.loc 1 5575 22 view .LVU3391
 10080 020c 0135     		adds	r5, r5, #1
5575:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10081              		.loc 1 5575 27 view .LVU3392
 10082 020e 6D08     		lsrs	r5, r5, #1
5575:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10083              		.loc 1 5575 8 view .LVU3393
 10084 0210 0335     		adds	r5, r5, #3
 10085              	.LVL1176:
5574:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = (n_clst * 3 + 1) / 2 + 3;	/* FAT size [byte] */
 10086              		.loc 1 5574 10 view .LVU3394
 10087 0212 4FF0010A 		mov	r10, #1
 10088 0216 78E7     		b	.L717
 10089              	.LVL1177:
 10090              	.L782:
5587:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* FAT12/16: Expand FAT size */
 10091              		.loc 1 5587 5 is_stmt 1 view .LVU3395
5587:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* FAT12/16: Expand FAT size */
 10092              		.loc 1 5587 12 is_stmt 0 view .LVU3396
 10093 0218 A444     		add	ip, ip, r4
 10094              	.LVL1178:
5587:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* FAT12/16: Expand FAT size */
 10095              		.loc 1 5587 18 is_stmt 1 view .LVU3397
5587:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* FAT12/16: Expand FAT size */
 10096              		.loc 1 5587 24 is_stmt 0 view .LVU3398
 10097 021a A044     		add	r8, r8, r4
 10098              	.LVL1179:
5587:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* FAT12/16: Expand FAT size */
 10099              		.loc 1 5587 24 view .LVU3399
 10100 021c 8BE7     		b	.L719
 10101              	.LVL1180:
 10102              	.L783:
5596:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (au = pau / 2) != 0) continue;	/* Adjust cluster size and retry */
 10103              		.loc 1 5596 5 is_stmt 1 view .LVU3400
ARM GAS  /tmp/ccWTW02a.s 			page 335


5596:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (au = pau / 2) != 0) continue;	/* Adjust cluster size and retry */
 10104              		.loc 1 5596 8 is_stmt 0 view .LVU3401
 10105 021e 4FF6F571 		movw	r1, #65525
 10106 0222 8B42     		cmp	r3, r1
 10107 0224 98D8     		bhi	.L720
5597:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10108              		.loc 1 5597 6 is_stmt 1 view .LVU3402
5597:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10109              		.loc 1 5597 9 is_stmt 0 view .LVU3403
 10110 0226 002E     		cmp	r6, #0
 10111 0228 40F01C82 		bne	.L761
5597:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10112              		.loc 1 5597 21 discriminator 1 view .LVU3404
 10113 022c 7E08     		lsrs	r6, r7, #1
 10114              	.LVL1181:
5597:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10115              		.loc 1 5597 14 discriminator 1 view .LVU3405
 10116 022e 012F     		cmp	r7, #1
 10117 0230 3FF65CAF 		bhi	.L707
5598:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10118              		.loc 1 5598 13 view .LVU3406
 10119 0234 0E20     		movs	r0, #14
 10120 0236 FCE1     		b	.L699
 10121              	.LVL1182:
 10122              	.L723:
5612:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (au = pau * 2) <= 128) continue;	/* Adjust cluster size and retry */
 10123              		.loc 1 5612 5 is_stmt 1 view .LVU3407
5612:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (au = pau * 2) <= 128) continue;	/* Adjust cluster size and retry */
 10124              		.loc 1 5612 9 is_stmt 0 view .LVU3408
 10125 0238 40F6F571 		movw	r1, #4085
 10126 023c 8B42     		cmp	r3, r1
 10127 023e 15D8     		bhi	.L722
5613:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10128              		.loc 1 5613 6 is_stmt 1 view .LVU3409
5613:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10129              		.loc 1 5613 9 is_stmt 0 view .LVU3410
 10130 0240 002E     		cmp	r6, #0
 10131 0242 40F01382 		bne	.L765
5613:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10132              		.loc 1 5613 21 discriminator 1 view .LVU3411
 10133 0246 7E00     		lsls	r6, r7, #1
 10134              	.LVL1183:
5613:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10135              		.loc 1 5613 14 discriminator 1 view .LVU3412
 10136 0248 802E     		cmp	r6, #128
 10137 024a 7FF64FAF 		bls	.L707
5614:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10138              		.loc 1 5614 13 view .LVU3413
 10139 024e 0E20     		movs	r0, #14
 10140 0250 EFE1     		b	.L699
 10141              	.L793:
 10142 0252 00BF     		.align	2
 10143              	.L792:
 10144 0254 00000000 		.word	.LANCHOR2
 10145 0258 00FEFFFF 		.word	-512
 10146 025c 0A00FFFF 		.word	-65526
 10147 0260 FFFFFE0F 		.word	268369919
ARM GAS  /tmp/ccWTW02a.s 			page 336


 10148 0264 00000000 		.word	.LANCHOR4
 10149 0268 00000000 		.word	.LANCHOR5
 10150              	.LVL1184:
 10151              	.L722:
5614:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10152              		.loc 1 5614 13 view .LVU3414
 10153 026c CDF818E0 		str	lr, [sp, #24]
 10154 0270 CDF81CC0 		str	ip, [sp, #28]
 10155 0274 CDF81480 		str	r8, [sp, #20]
 10156 0278 039C     		ldr	r4, [sp, #12]
 10157              	.LVL1185:
5614:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10158              		.loc 1 5614 13 view .LVU3415
 10159 027a 049E     		ldr	r6, [sp, #16]
 10160 027c 0493     		str	r3, [sp, #16]
 10161              	.LVL1186:
5617:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10162              		.loc 1 5617 4 is_stmt 1 view .LVU3416
5617:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10163              		.loc 1 5617 24 is_stmt 0 view .LVU3417
 10164 027e 40F6F572 		movw	r2, #4085
 10165 0282 1946     		mov	r1, r3
 10166 0284 BAF1010F 		cmp	r10, #1
 10167 0288 14BF     		ite	ne
 10168 028a 0023     		movne	r3, #0
 10169              	.LVL1187:
5617:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10170              		.loc 1 5617 24 view .LVU3418
 10171 028c 0123     		moveq	r3, #1
 10172 028e 9142     		cmp	r1, r2
 10173 0290 98BF     		it	ls
 10174 0292 0023     		movls	r3, #0
5617:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10175              		.loc 1 5617 7 view .LVU3419
 10176 0294 002B     		cmp	r3, #0
 10177 0296 40F0EB81 		bne	.L766
5620:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (1);
 10178              		.loc 1 5620 4 is_stmt 1 view .LVU3420
5628:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(buf + BS_JmpBoot, "\xEB\xFE\x90" "MSDOS5.0", 11);/* Boot jump code (x86), OEM name */
 10179              		.loc 1 5628 3 view .LVU3421
 10180 029a 4FF40072 		mov	r2, #512
 10181 029e 0021     		movs	r1, #0
 10182              	.LVL1188:
5628:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(buf + BS_JmpBoot, "\xEB\xFE\x90" "MSDOS5.0", 11);/* Boot jump code (x86), OEM name */
 10183              		.loc 1 5628 3 is_stmt 0 view .LVU3422
 10184 02a0 DDF80080 		ldr	r8, [sp]
 10185              	.LVL1189:
5628:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(buf + BS_JmpBoot, "\xEB\xFE\x90" "MSDOS5.0", 11);/* Boot jump code (x86), OEM name */
 10186              		.loc 1 5628 3 view .LVU3423
 10187 02a4 4046     		mov	r0, r8
 10188 02a6 FFF7FEFF 		bl	mem_set
 10189              	.LVL1190:
5629:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_BytsPerSec, ss);				/* Sector size [byte] */
 10190              		.loc 1 5629 3 is_stmt 1 view .LVU3424
 10191 02aa 0B22     		movs	r2, #11
 10192 02ac D749     		ldr	r1, .L794
 10193 02ae 4046     		mov	r0, r8
ARM GAS  /tmp/ccWTW02a.s 			page 337


 10194 02b0 FFF7FEFF 		bl	mem_cpy
 10195              	.LVL1191:
5630:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[BPB_SecPerClus] = (BYTE)pau;				/* Cluster size [sector] */
 10196              		.loc 1 5630 3 view .LVU3425
 10197 02b4 4FF40071 		mov	r1, #512
 10198 02b8 CDF80080 		str	r8, [sp]
 10199              	.LVL1192:
5630:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[BPB_SecPerClus] = (BYTE)pau;				/* Cluster size [sector] */
 10200              		.loc 1 5630 3 is_stmt 0 view .LVU3426
 10201 02bc 08F10B00 		add	r0, r8, #11
 10202 02c0 FFF7FEFF 		bl	st_word
 10203              	.LVL1193:
5631:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_RsvdSecCnt, (WORD)sz_rsv);	/* Size of reserved area */
 10204              		.loc 1 5631 3 is_stmt 1 view .LVU3427
5631:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_RsvdSecCnt, (WORD)sz_rsv);	/* Size of reserved area */
 10205              		.loc 1 5631 23 is_stmt 0 view .LVU3428
 10206 02c4 009B     		ldr	r3, [sp]
 10207 02c6 5F73     		strb	r7, [r3, #13]
5632:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[BPB_NumFATs] = (BYTE)n_fats;				/* Number of FATs */
 10208              		.loc 1 5632 3 is_stmt 1 view .LVU3429
 10209 02c8 BDF81C10 		ldrh	r1, [sp, #28]
 10210 02cc 03F10E00 		add	r0, r3, #14
 10211 02d0 FFF7FEFF 		bl	st_word
 10212              	.LVL1194:
5633:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_RootEntCnt, (WORD)((fmt == FS_FAT32) ? 0 : n_rootdir));	/* Number of root direc
 10213              		.loc 1 5633 3 view .LVU3430
5633:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_RootEntCnt, (WORD)((fmt == FS_FAT32) ? 0 : n_rootdir));	/* Number of root direc
 10214              		.loc 1 5633 20 is_stmt 0 view .LVU3431
 10215 02d4 0123     		movs	r3, #1
 10216 02d6 009A     		ldr	r2, [sp]
 10217 02d8 1374     		strb	r3, [r2, #16]
5634:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < 0x10000) {
 10218              		.loc 1 5634 3 is_stmt 1 view .LVU3432
 10219 02da 02F11100 		add	r0, r2, #17
 10220 02de BAF1030F 		cmp	r10, #3
 10221 02e2 00F09580 		beq	.L785
 10222 02e6 4FF40071 		mov	r1, #512
 10223              	.L726:
5634:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < 0x10000) {
 10224              		.loc 1 5634 3 is_stmt 0 discriminator 4 view .LVU3433
 10225 02ea FFF7FEFF 		bl	st_word
 10226              	.LVL1195:
5635:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_TotSec16, (WORD)sz_vol);	/* Volume size in 16-bit LBA */
 10227              		.loc 1 5635 3 is_stmt 1 discriminator 4 view .LVU3434
5635:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_TotSec16, (WORD)sz_vol);	/* Volume size in 16-bit LBA */
 10228              		.loc 1 5635 14 is_stmt 0 discriminator 4 view .LVU3435
 10229 02ee 0A99     		ldr	r1, [sp, #40]
5635:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_TotSec16, (WORD)sz_vol);	/* Volume size in 16-bit LBA */
 10230              		.loc 1 5635 6 discriminator 4 view .LVU3436
 10231 02f0 B1F5803F 		cmp	r1, #65536
 10232 02f4 80F08E80 		bcs	.L727
5636:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 10233              		.loc 1 5636 4 is_stmt 1 view .LVU3437
 10234 02f8 89B2     		uxth	r1, r1
 10235 02fa 009B     		ldr	r3, [sp]
 10236 02fc 03F11300 		add	r0, r3, #19
 10237 0300 FFF7FEFF 		bl	st_word
ARM GAS  /tmp/ccWTW02a.s 			page 338


 10238              	.LVL1196:
 10239              	.L728:
5640:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_SecPerTrk, 63);				/* Number of sectors per track (for int13) */
 10240              		.loc 1 5640 3 view .LVU3438
5640:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_SecPerTrk, 63);				/* Number of sectors per track (for int13) */
 10241              		.loc 1 5640 18 is_stmt 0 view .LVU3439
 10242 0304 F823     		movs	r3, #248
 10243 0306 009A     		ldr	r2, [sp]
 10244 0308 5375     		strb	r3, [r2, #21]
5641:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_NumHeads, 255);				/* Number of heads (for int13) */
 10245              		.loc 1 5641 3 is_stmt 1 view .LVU3440
 10246 030a 3F21     		movs	r1, #63
 10247 030c 02F11800 		add	r0, r2, #24
 10248 0310 FFF7FEFF 		bl	st_word
 10249              	.LVL1197:
5642:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(buf + BPB_HiddSec, b_vol);				/* Volume offset in the physical drive [sector] */
 10250              		.loc 1 5642 3 view .LVU3441
 10251 0314 FF21     		movs	r1, #255
 10252 0316 009B     		ldr	r3, [sp]
 10253 0318 03F11A00 		add	r0, r3, #26
 10254 031c FFF7FEFF 		bl	st_word
 10255              	.LVL1198:
5643:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32) {
 10256              		.loc 1 5643 3 view .LVU3442
 10257 0320 4946     		mov	r1, r9
 10258 0322 009B     		ldr	r3, [sp]
 10259 0324 03F11C00 		add	r0, r3, #28
 10260 0328 FFF7FEFF 		bl	st_dword
 10261              	.LVL1199:
5644:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BS_VolID32, GET_FATTIME());	/* VSN */
 10262              		.loc 1 5644 3 view .LVU3443
5644:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BS_VolID32, GET_FATTIME());	/* VSN */
 10263              		.loc 1 5644 6 is_stmt 0 view .LVU3444
 10264 032c BAF1030F 		cmp	r10, #3
 10265 0330 76D0     		beq	.L786
5654:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_FATSz16, (WORD)sz_fat);	/* FAT size [sector] */
 10266              		.loc 1 5654 4 is_stmt 1 view .LVU3445
 10267 0332 FFF7FEFF 		bl	get_fattime
 10268              	.LVL1200:
 10269 0336 0146     		mov	r1, r0
 10270 0338 009B     		ldr	r3, [sp]
 10271 033a 03F12700 		add	r0, r3, #39
 10272 033e FFF7FEFF 		bl	st_dword
 10273              	.LVL1201:
5655:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_DrvNum] = 0x80;						/* Drive number (for int13) */
 10274              		.loc 1 5655 4 view .LVU3446
 10275 0342 A9B2     		uxth	r1, r5
 10276 0344 009B     		ldr	r3, [sp]
 10277 0346 03F11600 		add	r0, r3, #22
 10278 034a FFF7FEFF 		bl	st_word
 10279              	.LVL1202:
5656:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_BootSig] = 0x29;						/* Extended boot signature */
 10280              		.loc 1 5656 4 view .LVU3447
5656:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_BootSig] = 0x29;						/* Extended boot signature */
 10281              		.loc 1 5656 19 is_stmt 0 view .LVU3448
 10282 034e 8023     		movs	r3, #128
 10283 0350 0098     		ldr	r0, [sp]
ARM GAS  /tmp/ccWTW02a.s 			page 339


 10284 0352 80F82430 		strb	r3, [r0, #36]
5657:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(buf + BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
 10285              		.loc 1 5657 4 is_stmt 1 view .LVU3449
5657:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(buf + BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
 10286              		.loc 1 5657 20 is_stmt 0 view .LVU3450
 10287 0356 2923     		movs	r3, #41
 10288 0358 80F82630 		strb	r3, [r0, #38]
5658:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 10289              		.loc 1 5658 4 is_stmt 1 view .LVU3451
 10290 035c 1322     		movs	r2, #19
 10291 035e AC49     		ldr	r1, .L794+4
 10292 0360 2B30     		adds	r0, r0, #43
 10293 0362 FFF7FEFF 		bl	mem_cpy
 10294              	.LVL1203:
 10295              	.L730:
5660:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(pdrv, buf, b_vol, 1) != RES_OK) return FR_DISK_ERR;	/* Write it to the VBR sector 
 10296              		.loc 1 5660 3 view .LVU3452
 10297 0366 009B     		ldr	r3, [sp]
 10298 0368 03F5FF73 		add	r3, r3, #510
 10299 036c 0393     		str	r3, [sp, #12]
 10300              	.LVL1204:
5660:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(pdrv, buf, b_vol, 1) != RES_OK) return FR_DISK_ERR;	/* Write it to the VBR sector 
 10301              		.loc 1 5660 3 is_stmt 0 view .LVU3453
 10302 036e 4AF65521 		movw	r1, #43605
 10303 0372 1846     		mov	r0, r3
 10304 0374 FFF7FEFF 		bl	st_word
 10305              	.LVL1205:
5661:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10306              		.loc 1 5661 3 is_stmt 1 view .LVU3454
5661:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10307              		.loc 1 5661 7 is_stmt 0 view .LVU3455
 10308 0378 0123     		movs	r3, #1
 10309 037a 4A46     		mov	r2, r9
 10310 037c 0099     		ldr	r1, [sp]
 10311 037e 2046     		mov	r0, r4
 10312 0380 FFF7FEFF 		bl	disk_write
 10313              	.LVL1206:
5661:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10314              		.loc 1 5661 6 view .LVU3456
 10315 0384 0028     		cmp	r0, #0
 10316 0386 40F07581 		bne	.L768
5664:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(pdrv, buf, b_vol + 6, 1);		/* Write backup VBR (VBR + 6) */
 10317              		.loc 1 5664 3 is_stmt 1 view .LVU3457
5664:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(pdrv, buf, b_vol + 6, 1);		/* Write backup VBR (VBR + 6) */
 10318              		.loc 1 5664 6 is_stmt 0 view .LVU3458
 10319 038a BAF1030F 		cmp	r10, #3
 10320 038e 74D0     		beq	.L787
 10321              	.L731:
5677:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = b_fat;		/* FAT start sector */
 10322              		.loc 1 5677 3 is_stmt 1 view .LVU3459
 10323 0390 3246     		mov	r2, r6
 10324 0392 0021     		movs	r1, #0
 10325 0394 009E     		ldr	r6, [sp]
 10326 0396 3046     		mov	r0, r6
 10327 0398 FFF7FEFF 		bl	mem_set
 10328              	.LVL1207:
5678:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < n_fats; i++) {			/* Initialize FATs each */
ARM GAS  /tmp/ccWTW02a.s 			page 340


 10329              		.loc 1 5678 3 view .LVU3460
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10330              		.loc 1 5679 3 view .LVU3461
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10331              		.loc 1 5679 3 is_stmt 0 view .LVU3462
 10332 039c 0495     		str	r5, [sp, #16]
 10333              	.LVL1208:
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10334              		.loc 1 5679 3 view .LVU3463
 10335 039e 0797     		str	r7, [sp, #28]
 10336              	.LVL1209:
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10337              		.loc 1 5679 3 view .LVU3464
 10338 03a0 DDF81480 		ldr	r8, [sp, #20]
 10339 03a4 CDF82090 		str	r9, [sp, #32]
 10340 03a8 019D     		ldr	r5, [sp, #4]
 10341              	.LVL1210:
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10342              		.loc 1 5679 3 view .LVU3465
 10343 03aa B146     		mov	r9, r6
 10344              	.LVL1211:
 10345              	.L732:
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10346              		.loc 1 5679 15 is_stmt 1 discriminator 1 view .LVU3466
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10347              		.loc 1 5679 3 is_stmt 0 discriminator 1 view .LVU3467
 10348 03ac BBF1000F 		cmp	fp, #0
 10349 03b0 00F0A080 		beq	.L737
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10350              		.loc 1 5679 3 discriminator 1 view .LVU3468
 10351 03b4 079F     		ldr	r7, [sp, #28]
 10352 03b6 CDF81480 		str	r8, [sp, #20]
 10353              	.LVL1212:
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10354              		.loc 1 5679 3 discriminator 1 view .LVU3469
 10355 03ba DDF82090 		ldr	r9, [sp, #32]
5697:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 10356              		.loc 1 5697 3 is_stmt 1 view .LVU3470
5697:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 10357              		.loc 1 5697 35 is_stmt 0 view .LVU3471
 10358 03be BAF1030F 		cmp	r10, #3
 10359 03c2 00F0D080 		beq	.L788
 10360 03c6 069E     		ldr	r6, [sp, #24]
 10361 03c8 059F     		ldr	r7, [sp, #20]
 10362 03ca DDF80480 		ldr	r8, [sp, #4]
 10363              	.LVL1213:
5697:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 10364              		.loc 1 5697 35 view .LVU3472
 10365 03ce DDF800B0 		ldr	fp, [sp]
 10366              	.LVL1214:
 10367              	.L739:
5698:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (nsect > sz_buf) ? sz_buf : nsect;
 10368              		.loc 1 5698 3 is_stmt 1 view .LVU3473
5699:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, sect, (UINT)n) != RES_OK) return FR_DISK_ERR;
 10369              		.loc 1 5699 4 view .LVU3474
5699:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, sect, (UINT)n) != RES_OK) return FR_DISK_ERR;
 10370              		.loc 1 5699 6 is_stmt 0 view .LVU3475
ARM GAS  /tmp/ccWTW02a.s 			page 341


 10371 03d2 3546     		mov	r5, r6
 10372 03d4 4645     		cmp	r6, r8
 10373 03d6 28BF     		it	cs
 10374 03d8 4546     		movcs	r5, r8
 10375              	.LVL1215:
5700:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += n; nsect -= n;
 10376              		.loc 1 5700 4 is_stmt 1 view .LVU3476
5700:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += n; nsect -= n;
 10377              		.loc 1 5700 8 is_stmt 0 view .LVU3477
 10378 03da 2B46     		mov	r3, r5
 10379 03dc 3A46     		mov	r2, r7
 10380 03de 5946     		mov	r1, fp
 10381 03e0 2046     		mov	r0, r4
 10382 03e2 FFF7FEFF 		bl	disk_write
 10383              	.LVL1216:
5700:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += n; nsect -= n;
 10384              		.loc 1 5700 7 view .LVU3478
 10385 03e6 0028     		cmp	r0, #0
 10386 03e8 40F04881 		bne	.L771
5701:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (nsect);
 10387              		.loc 1 5701 4 is_stmt 1 view .LVU3479
5701:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (nsect);
 10388              		.loc 1 5701 9 is_stmt 0 view .LVU3480
 10389 03ec 2F44     		add	r7, r7, r5
 10390              	.LVL1217:
5701:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (nsect);
 10391              		.loc 1 5701 15 is_stmt 1 view .LVU3481
5702:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 10392              		.loc 1 5702 11 view .LVU3482
5702:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 10393              		.loc 1 5702 3 is_stmt 0 view .LVU3483
 10394 03ee 761B     		subs	r6, r6, r5
 10395              	.LVL1218:
5702:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 10396              		.loc 1 5702 3 view .LVU3484
 10397 03f0 EFD1     		bne	.L739
5706:Middlewares/Third_Party/FatFs/src/ff.c **** 		sys = 0x07;			/* HPFS/NTFS/exFAT */
 10398              		.loc 1 5706 2 is_stmt 1 view .LVU3485
5709:Middlewares/Third_Party/FatFs/src/ff.c **** 			sys = 0x0C;		/* FAT32X */
 10399              		.loc 1 5709 3 view .LVU3486
5709:Middlewares/Third_Party/FatFs/src/ff.c **** 			sys = 0x0C;		/* FAT32X */
 10400              		.loc 1 5709 6 is_stmt 0 view .LVU3487
 10401 03f2 BAF1030F 		cmp	r10, #3
 10402 03f6 00F0BF80 		beq	.L772
5712:Middlewares/Third_Party/FatFs/src/ff.c **** 				sys = 0x06;	/* FAT12/16 (>=64KS) */
 10403              		.loc 1 5712 4 is_stmt 1 view .LVU3488
5712:Middlewares/Third_Party/FatFs/src/ff.c **** 				sys = 0x06;	/* FAT12/16 (>=64KS) */
 10404              		.loc 1 5712 15 is_stmt 0 view .LVU3489
 10405 03fa 0A9B     		ldr	r3, [sp, #40]
5712:Middlewares/Third_Party/FatFs/src/ff.c **** 				sys = 0x06;	/* FAT12/16 (>=64KS) */
 10406              		.loc 1 5712 7 view .LVU3490
 10407 03fc B3F5803F 		cmp	r3, #65536
 10408 0400 80F01081 		bcs	.L773
5715:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10409              		.loc 1 5715 5 is_stmt 1 view .LVU3491
5715:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10410              		.loc 1 5715 9 is_stmt 0 view .LVU3492
ARM GAS  /tmp/ccWTW02a.s 			page 342


 10411 0404 BAF1020F 		cmp	r10, #2
 10412 0408 00F0B480 		beq	.L789
 10413 040c 0127     		movs	r7, #1
 10414              	.LVL1219:
5715:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10415              		.loc 1 5715 9 view .LVU3493
 10416 040e B4E0     		b	.L740
 10417              	.LVL1220:
 10418              	.L785:
5634:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < 0x10000) {
 10419              		.loc 1 5634 3 view .LVU3494
 10420 0410 0021     		movs	r1, #0
 10421 0412 6AE7     		b	.L726
 10422              	.L727:
5638:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 10423              		.loc 1 5638 4 is_stmt 1 view .LVU3495
 10424 0414 009B     		ldr	r3, [sp]
 10425 0416 03F12000 		add	r0, r3, #32
 10426 041a FFF7FEFF 		bl	st_dword
 10427              	.LVL1221:
 10428 041e 71E7     		b	.L728
 10429              	.L786:
5645:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_FATSz32, sz_fat);		/* FAT size [sector] */
 10430              		.loc 1 5645 4 view .LVU3496
 10431 0420 FFF7FEFF 		bl	get_fattime
 10432              	.LVL1222:
 10433 0424 0146     		mov	r1, r0
 10434 0426 009B     		ldr	r3, [sp]
 10435 0428 03F14300 		add	r0, r3, #67
 10436 042c FFF7FEFF 		bl	st_dword
 10437              	.LVL1223:
5646:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_RootClus32, 2);			/* Root directory cluster # (2) */
 10438              		.loc 1 5646 4 view .LVU3497
 10439 0430 2946     		mov	r1, r5
 10440 0432 009B     		ldr	r3, [sp]
 10441 0434 03F12400 		add	r0, r3, #36
 10442 0438 FFF7FEFF 		bl	st_dword
 10443              	.LVL1224:
5647:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_FSInfo32, 1);				/* Offset of FSINFO sector (VBR + 1) */
 10444              		.loc 1 5647 4 view .LVU3498
 10445 043c 0221     		movs	r1, #2
 10446 043e 009B     		ldr	r3, [sp]
 10447 0440 03F12C00 		add	r0, r3, #44
 10448 0444 FFF7FEFF 		bl	st_dword
 10449              	.LVL1225:
5648:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_BkBootSec32, 6);			/* Offset of backup VBR (VBR + 6) */
 10450              		.loc 1 5648 4 view .LVU3499
 10451 0448 0121     		movs	r1, #1
 10452 044a 009B     		ldr	r3, [sp]
 10453 044c 03F13000 		add	r0, r3, #48
 10454 0450 FFF7FEFF 		bl	st_word
 10455              	.LVL1226:
5649:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_DrvNum32] = 0x80;					/* Drive number (for int13) */
 10456              		.loc 1 5649 4 view .LVU3500
 10457 0454 0621     		movs	r1, #6
 10458 0456 009B     		ldr	r3, [sp]
 10459 0458 03F13200 		add	r0, r3, #50
ARM GAS  /tmp/ccWTW02a.s 			page 343


 10460 045c FFF7FEFF 		bl	st_word
 10461              	.LVL1227:
5650:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_BootSig32] = 0x29;					/* Extended boot signature */
 10462              		.loc 1 5650 4 view .LVU3501
5650:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_BootSig32] = 0x29;					/* Extended boot signature */
 10463              		.loc 1 5650 21 is_stmt 0 view .LVU3502
 10464 0460 8023     		movs	r3, #128
 10465 0462 0098     		ldr	r0, [sp]
 10466 0464 80F84030 		strb	r3, [r0, #64]
5651:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(buf + BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
 10467              		.loc 1 5651 4 is_stmt 1 view .LVU3503
5651:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(buf + BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
 10468              		.loc 1 5651 22 is_stmt 0 view .LVU3504
 10469 0468 2923     		movs	r3, #41
 10470 046a 80F84230 		strb	r3, [r0, #66]
5652:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 10471              		.loc 1 5652 4 is_stmt 1 view .LVU3505
 10472 046e 1322     		movs	r2, #19
 10473 0470 6849     		ldr	r1, .L794+8
 10474 0472 4730     		adds	r0, r0, #71
 10475 0474 FFF7FEFF 		bl	mem_cpy
 10476              	.LVL1228:
 10477 0478 75E7     		b	.L730
 10478              	.LVL1229:
 10479              	.L787:
5665:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
 10480              		.loc 1 5665 4 view .LVU3506
 10481 047a 0123     		movs	r3, #1
 10482 047c 09F10602 		add	r2, r9, #6
 10483 0480 DDF80080 		ldr	r8, [sp]
 10484 0484 4146     		mov	r1, r8
 10485 0486 2046     		mov	r0, r4
 10486 0488 FFF7FEFF 		bl	disk_write
 10487              	.LVL1230:
5666:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_LeadSig, 0x41615252);
 10488              		.loc 1 5666 4 view .LVU3507
 10489 048c 4FF40072 		mov	r2, #512
 10490 0490 0021     		movs	r1, #0
 10491 0492 4046     		mov	r0, r8
 10492 0494 FFF7FEFF 		bl	mem_set
 10493              	.LVL1231:
5667:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_StrucSig, 0x61417272);
 10494              		.loc 1 5667 4 view .LVU3508
 10495 0498 5F49     		ldr	r1, .L794+12
 10496 049a 4046     		mov	r0, r8
 10497 049c FFF7FEFF 		bl	st_dword
 10498              	.LVL1232:
5668:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
 10499              		.loc 1 5668 4 view .LVU3509
 10500 04a0 5E49     		ldr	r1, .L794+16
 10501 04a2 CDF80080 		str	r8, [sp]
 10502 04a6 08F5F270 		add	r0, r8, #484
 10503 04aa FFF7FEFF 		bl	st_dword
 10504              	.LVL1233:
5669:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_Nxt_Free, 2);			/* Last allocated cluster# */
 10505              		.loc 1 5669 4 view .LVU3510
 10506 04ae 049A     		ldr	r2, [sp, #16]
ARM GAS  /tmp/ccWTW02a.s 			page 344


 10507 04b0 511E     		subs	r1, r2, #1
 10508 04b2 009B     		ldr	r3, [sp]
 10509 04b4 03F5F470 		add	r0, r3, #488
 10510 04b8 FFF7FEFF 		bl	st_dword
 10511              	.LVL1234:
5670:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BS_55AA, 0xAA55);
 10512              		.loc 1 5670 4 view .LVU3511
 10513 04bc 0221     		movs	r1, #2
 10514 04be 009B     		ldr	r3, [sp]
 10515 04c0 03F5F670 		add	r0, r3, #492
 10516 04c4 FFF7FEFF 		bl	st_dword
 10517              	.LVL1235:
5671:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(pdrv, buf, b_vol + 7, 1);		/* Write backup FSINFO (VBR + 7) */
 10518              		.loc 1 5671 4 view .LVU3512
 10519 04c8 4AF65521 		movw	r1, #43605
 10520 04cc 0398     		ldr	r0, [sp, #12]
 10521 04ce FFF7FEFF 		bl	st_word
 10522              	.LVL1236:
5672:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(pdrv, buf, b_vol + 1, 1);		/* Write original FSINFO (VBR + 1) */
 10523              		.loc 1 5672 4 view .LVU3513
 10524 04d2 0123     		movs	r3, #1
 10525 04d4 09F10702 		add	r2, r9, #7
 10526 04d8 DDF80080 		ldr	r8, [sp]
 10527 04dc 4146     		mov	r1, r8
 10528 04de 2046     		mov	r0, r4
 10529 04e0 FFF7FEFF 		bl	disk_write
 10530              	.LVL1237:
5673:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 10531              		.loc 1 5673 4 view .LVU3514
 10532 04e4 0123     		movs	r3, #1
 10533 04e6 09EB0302 		add	r2, r9, r3
 10534 04ea 4146     		mov	r1, r8
 10535 04ec 2046     		mov	r0, r4
 10536 04ee FFF7FEFF 		bl	disk_write
 10537              	.LVL1238:
 10538 04f2 4DE7     		b	.L731
 10539              	.LVL1239:
 10540              	.L737:
5680:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + 0, 0xFFFFFFF8);	/* Entry 0 */
 10541              		.loc 1 5680 4 view .LVU3515
5680:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + 0, 0xFFFFFFF8);	/* Entry 0 */
 10542              		.loc 1 5680 7 is_stmt 0 view .LVU3516
 10543 04f4 BAF1030F 		cmp	r10, #3
 10544 04f8 21D0     		beq	.L790
5685:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10545              		.loc 1 5685 5 is_stmt 1 view .LVU3517
 10546 04fa BAF1010F 		cmp	r10, #1
 10547 04fe 30D0     		beq	.L791
 10548 0500 6FF00701 		mvn	r1, #7
 10549              	.L735:
5685:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10550              		.loc 1 5685 5 is_stmt 0 discriminator 4 view .LVU3518
 10551 0504 4846     		mov	r0, r9
 10552 0506 FFF7FEFF 		bl	st_dword
 10553              	.LVL1240:
 10554              	.L734:
5685:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
ARM GAS  /tmp/ccWTW02a.s 			page 345


 10555              		.loc 1 5685 5 view .LVU3519
 10556 050a 049F     		ldr	r7, [sp, #16]
 10557              	.L736:
 10558              	.LVL1241:
5688:Middlewares/Third_Party/FatFs/src/ff.c **** 				n = (nsect > sz_buf) ? sz_buf : nsect;
 10559              		.loc 1 5688 4 is_stmt 1 view .LVU3520
5689:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(pdrv, buf, sect, (UINT)n) != RES_OK) return FR_DISK_ERR;
 10560              		.loc 1 5689 5 view .LVU3521
5689:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(pdrv, buf, sect, (UINT)n) != RES_OK) return FR_DISK_ERR;
 10561              		.loc 1 5689 7 is_stmt 0 view .LVU3522
 10562 050c 3E46     		mov	r6, r7
 10563 050e AF42     		cmp	r7, r5
 10564 0510 28BF     		it	cs
 10565 0512 2E46     		movcs	r6, r5
 10566              	.LVL1242:
5690:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(buf, 0, ss);
 10567              		.loc 1 5690 5 is_stmt 1 view .LVU3523
5690:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(buf, 0, ss);
 10568              		.loc 1 5690 9 is_stmt 0 view .LVU3524
 10569 0514 3346     		mov	r3, r6
 10570 0516 4246     		mov	r2, r8
 10571 0518 4946     		mov	r1, r9
 10572 051a 2046     		mov	r0, r4
 10573 051c FFF7FEFF 		bl	disk_write
 10574              	.LVL1243:
5690:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(buf, 0, ss);
 10575              		.loc 1 5690 8 view .LVU3525
 10576 0520 0028     		cmp	r0, #0
 10577 0522 40F0A980 		bne	.L770
5691:Middlewares/Third_Party/FatFs/src/ff.c **** 				sect += n; nsect -= n;
 10578              		.loc 1 5691 5 is_stmt 1 view .LVU3526
 10579 0526 4FF40072 		mov	r2, #512
 10580 052a 0021     		movs	r1, #0
 10581 052c 4846     		mov	r0, r9
 10582 052e FFF7FEFF 		bl	mem_set
 10583              	.LVL1244:
5692:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (nsect);
 10584              		.loc 1 5692 5 view .LVU3527
5692:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (nsect);
 10585              		.loc 1 5692 10 is_stmt 0 view .LVU3528
 10586 0532 B044     		add	r8, r8, r6
 10587              	.LVL1245:
5692:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (nsect);
 10588              		.loc 1 5692 16 is_stmt 1 view .LVU3529
5693:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 10589              		.loc 1 5693 12 view .LVU3530
5693:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 10590              		.loc 1 5693 4 is_stmt 0 view .LVU3531
 10591 0534 BF1B     		subs	r7, r7, r6
 10592              	.LVL1246:
5693:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 10593              		.loc 1 5693 4 view .LVU3532
 10594 0536 E9D1     		bne	.L736
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10595              		.loc 1 5679 27 is_stmt 1 discriminator 2 view .LVU3533
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10596              		.loc 1 5679 28 is_stmt 0 discriminator 2 view .LVU3534
ARM GAS  /tmp/ccWTW02a.s 			page 346


 10597 0538 0BF1010B 		add	fp, fp, #1
 10598              	.LVL1247:
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10599              		.loc 1 5679 28 discriminator 2 view .LVU3535
 10600 053c 36E7     		b	.L732
 10601              	.LVL1248:
 10602              	.L790:
5681:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + 4, 0xFFFFFFFF);	/* Entry 1 */
 10603              		.loc 1 5681 5 is_stmt 1 view .LVU3536
 10604 053e 6FF00701 		mvn	r1, #7
 10605 0542 4846     		mov	r0, r9
 10606 0544 FFF7FEFF 		bl	st_dword
 10607              	.LVL1249:
5682:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + 8, 0x0FFFFFFF);	/* Entry 2 (root directory) */
 10608              		.loc 1 5682 5 view .LVU3537
 10609 0548 4FF0FF31 		mov	r1, #-1
 10610 054c 09F10400 		add	r0, r9, #4
 10611 0550 FFF7FEFF 		bl	st_dword
 10612              	.LVL1250:
5683:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 10613              		.loc 1 5683 5 view .LVU3538
 10614 0554 6FF07041 		mvn	r1, #-268435456
 10615 0558 09F10800 		add	r0, r9, #8
 10616 055c FFF7FEFF 		bl	st_dword
 10617              	.LVL1251:
 10618 0560 D3E7     		b	.L734
 10619              	.L791:
5685:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10620              		.loc 1 5685 5 is_stmt 0 view .LVU3539
 10621 0562 2F49     		ldr	r1, .L794+20
 10622 0564 CEE7     		b	.L735
 10623              	.LVL1252:
 10624              	.L788:
5697:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 10625              		.loc 1 5697 35 view .LVU3540
 10626 0566 3E46     		mov	r6, r7
 10627 0568 4746     		mov	r7, r8
 10628 056a DDF80480 		ldr	r8, [sp, #4]
 10629              	.LVL1253:
5697:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 10630              		.loc 1 5697 35 view .LVU3541
 10631 056e DDF800B0 		ldr	fp, [sp]
 10632              	.LVL1254:
5697:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 10633              		.loc 1 5697 35 view .LVU3542
 10634 0572 2EE7     		b	.L739
 10635              	.LVL1255:
 10636              	.L789:
5715:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10637              		.loc 1 5715 9 view .LVU3543
 10638 0574 0427     		movs	r7, #4
 10639              	.LVL1256:
5715:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10640              		.loc 1 5715 9 view .LVU3544
 10641 0576 00E0     		b	.L740
 10642              	.LVL1257:
 10643              	.L772:
ARM GAS  /tmp/ccWTW02a.s 			page 347


5710:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 10644              		.loc 1 5710 8 view .LVU3545
 10645 0578 0C27     		movs	r7, #12
 10646              	.LVL1258:
 10647              	.L740:
5721:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Update system ID in the partition table */
 10648              		.loc 1 5721 2 is_stmt 1 view .LVU3546
5727:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
 10649              		.loc 1 5727 3 view .LVU3547
5727:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
 10650              		.loc 1 5727 6 is_stmt 0 view .LVU3548
 10651 057a 029B     		ldr	r3, [sp, #8]
 10652 057c 002B     		cmp	r3, #0
 10653 057e 3CD1     		bne	.L741
5728:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BS_55AA, 0xAA55);		/* MBR signature */
 10654              		.loc 1 5728 4 is_stmt 1 view .LVU3549
 10655 0580 4FF40072 		mov	r2, #512
 10656 0584 0021     		movs	r1, #0
 10657 0586 009E     		ldr	r6, [sp]
 10658              	.LVL1259:
5728:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BS_55AA, 0xAA55);		/* MBR signature */
 10659              		.loc 1 5728 4 is_stmt 0 view .LVU3550
 10660 0588 3046     		mov	r0, r6
 10661 058a FFF7FEFF 		bl	mem_set
 10662              	.LVL1260:
5729:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte = buf + MBR_Table;				/* Create partition table for single partition in the drive */
 10663              		.loc 1 5729 4 is_stmt 1 view .LVU3551
 10664 058e 4AF65521 		movw	r1, #43605
 10665 0592 0398     		ldr	r0, [sp, #12]
 10666 0594 FFF7FEFF 		bl	st_word
 10667              	.LVL1261:
5730:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_Boot] = 0;					/* Boot indicator */
 10668              		.loc 1 5730 4 view .LVU3552
5731:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StHead] = 1;				/* Start head */
 10669              		.loc 1 5731 4 view .LVU3553
5731:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StHead] = 1;				/* Start head */
 10670              		.loc 1 5731 18 is_stmt 0 view .LVU3554
 10671 0598 0025     		movs	r5, #0
 10672              	.LVL1262:
5731:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StHead] = 1;				/* Start head */
 10673              		.loc 1 5731 18 view .LVU3555
 10674 059a 3346     		mov	r3, r6
 10675 059c 3146     		mov	r1, r6
 10676 059e 86F8BE51 		strb	r5, [r6, #446]
5732:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StSec] = 1;					/* Start sector */
 10677              		.loc 1 5732 4 is_stmt 1 view .LVU3556
5732:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StSec] = 1;					/* Start sector */
 10678              		.loc 1 5732 20 is_stmt 0 view .LVU3557
 10679 05a2 0126     		movs	r6, #1
 10680              	.LVL1263:
5732:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StSec] = 1;					/* Start sector */
 10681              		.loc 1 5732 20 view .LVU3558
 10682 05a4 83F8BF61 		strb	r6, [r3, #447]
5733:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StCyl] = 0;					/* Start cylinder */
 10683              		.loc 1 5733 4 is_stmt 1 view .LVU3559
5733:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StCyl] = 0;					/* Start cylinder */
 10684              		.loc 1 5733 19 is_stmt 0 view .LVU3560
ARM GAS  /tmp/ccWTW02a.s 			page 348


 10685 05a8 83F8C061 		strb	r6, [r3, #448]
5734:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_System] = sys;				/* System type */
 10686              		.loc 1 5734 4 is_stmt 1 view .LVU3561
5734:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_System] = sys;				/* System type */
 10687              		.loc 1 5734 19 is_stmt 0 view .LVU3562
 10688 05ac 83F8C151 		strb	r5, [r3, #449]
5735:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (b_vol + sz_vol) / (63 * 255);	/* (End CHS may be invalid) */
 10689              		.loc 1 5735 4 is_stmt 1 view .LVU3563
5735:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (b_vol + sz_vol) / (63 * 255);	/* (End CHS may be invalid) */
 10690              		.loc 1 5735 20 is_stmt 0 view .LVU3564
 10691 05b0 83F8C271 		strb	r7, [r3, #450]
5736:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdHead] = 254;				/* End head */
 10692              		.loc 1 5736 4 is_stmt 1 view .LVU3565
5736:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdHead] = 254;				/* End head */
 10693              		.loc 1 5736 15 is_stmt 0 view .LVU3566
 10694 05b4 0A9B     		ldr	r3, [sp, #40]
 10695 05b6 4B44     		add	r3, r3, r9
5736:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdHead] = 254;				/* End head */
 10696              		.loc 1 5736 6 view .LVU3567
 10697 05b8 43F6C162 		movw	r2, #16065
 10698 05bc B3FBF2F3 		udiv	r3, r3, r2
 10699              	.LVL1264:
5737:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdSec] = (BYTE)(n >> 2 | 63);	/* End sector */
 10700              		.loc 1 5737 4 is_stmt 1 view .LVU3568
5737:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdSec] = (BYTE)(n >> 2 | 63);	/* End sector */
 10701              		.loc 1 5737 20 is_stmt 0 view .LVU3569
 10702 05c0 FE22     		movs	r2, #254
 10703 05c2 81F8C321 		strb	r2, [r1, #451]
5738:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdCyl] = (BYTE)n;			/* End cylinder */
 10704              		.loc 1 5738 4 is_stmt 1 view .LVU3570
5738:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdCyl] = (BYTE)n;			/* End cylinder */
 10705              		.loc 1 5738 30 is_stmt 0 view .LVU3571
 10706 05c6 9A08     		lsrs	r2, r3, #2
5738:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdCyl] = (BYTE)n;			/* End cylinder */
 10707              		.loc 1 5738 21 view .LVU3572
 10708 05c8 42F03F02 		orr	r2, r2, #63
5738:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdCyl] = (BYTE)n;			/* End cylinder */
 10709              		.loc 1 5738 19 view .LVU3573
 10710 05cc 0F46     		mov	r7, r1
 10711              	.LVL1265:
5738:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdCyl] = (BYTE)n;			/* End cylinder */
 10712              		.loc 1 5738 19 view .LVU3574
 10713 05ce 81F8C421 		strb	r2, [r1, #452]
5739:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(pte + PTE_StLba, b_vol);	/* Start offset in LBA */
 10714              		.loc 1 5739 4 is_stmt 1 view .LVU3575
5739:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(pte + PTE_StLba, b_vol);	/* Start offset in LBA */
 10715              		.loc 1 5739 19 is_stmt 0 view .LVU3576
 10716 05d2 81F8C531 		strb	r3, [r1, #453]
5740:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(pte + PTE_SizLba, sz_vol);	/* Size in sectors */
 10717              		.loc 1 5740 4 is_stmt 1 view .LVU3577
 10718 05d6 4946     		mov	r1, r9
 10719              	.LVL1266:
5740:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(pte + PTE_SizLba, sz_vol);	/* Size in sectors */
 10720              		.loc 1 5740 4 is_stmt 0 view .LVU3578
 10721 05d8 07F5E370 		add	r0, r7, #454
 10722 05dc FFF7FEFF 		bl	st_dword
 10723              	.LVL1267:
ARM GAS  /tmp/ccWTW02a.s 			page 349


5741:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, 0, 1) != RES_OK) return FR_DISK_ERR;	/* Write it to the MBR */
 10724              		.loc 1 5741 4 is_stmt 1 view .LVU3579
 10725 05e0 0A99     		ldr	r1, [sp, #40]
 10726 05e2 07F5E570 		add	r0, r7, #458
 10727 05e6 FFF7FEFF 		bl	st_dword
 10728              	.LVL1268:
5742:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 10729              		.loc 1 5742 4 view .LVU3580
5742:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 10730              		.loc 1 5742 8 is_stmt 0 view .LVU3581
 10731 05ea 3346     		mov	r3, r6
 10732 05ec 2A46     		mov	r2, r5
 10733 05ee 3946     		mov	r1, r7
 10734 05f0 2046     		mov	r0, r4
 10735 05f2 FFF7FEFF 		bl	disk_write
 10736              	.LVL1269:
5742:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 10737              		.loc 1 5742 7 view .LVU3582
 10738 05f6 0028     		cmp	r0, #0
 10739 05f8 42D1     		bne	.L775
 10740              	.LVL1270:
 10741              	.L741:
5746:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10742              		.loc 1 5746 2 is_stmt 1 view .LVU3583
5746:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10743              		.loc 1 5746 6 is_stmt 0 view .LVU3584
 10744 05fa 0022     		movs	r2, #0
 10745 05fc 1146     		mov	r1, r2
 10746 05fe 2046     		mov	r0, r4
 10747 0600 FFF7FEFF 		bl	disk_ioctl
 10748              	.LVL1271:
5746:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10749              		.loc 1 5746 5 view .LVU3585
 10750 0604 A8B1     		cbz	r0, .L699
5746:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10751              		.loc 1 5746 55 view .LVU3586
 10752 0606 0120     		movs	r0, #1
 10753 0608 13E0     		b	.L699
 10754              	.L795:
 10755 060a 00BF     		.align	2
 10756              	.L794:
 10757 060c 00000000 		.word	.LC1
 10758 0610 20000000 		.word	.LC3
 10759 0614 0C000000 		.word	.LC2
 10760 0618 52526141 		.word	1096897106
 10761 061c 72724161 		.word	1631679090
 10762 0620 F8FFFF00 		.word	16777208
 10763              	.LVL1272:
 10764              	.L773:
5713:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 10765              		.loc 1 5713 9 view .LVU3587
 10766 0624 0627     		movs	r7, #6
 10767              	.LVL1273:
5713:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 10768              		.loc 1 5713 9 view .LVU3588
 10769 0626 A8E7     		b	.L740
 10770              	.LVL1274:
ARM GAS  /tmp/ccWTW02a.s 			page 350


 10771              	.L742:
5328:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (FatFs[vol]) FatFs[vol]->fs_type = 0;	/* Clear the volume */
 10772              		.loc 1 5328 22 view .LVU3589
 10773 0628 0B20     		movs	r0, #11
 10774              	.LVL1275:
5328:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (FatFs[vol]) FatFs[vol]->fs_type = 0;	/* Clear the volume */
 10775              		.loc 1 5328 22 view .LVU3590
 10776 062a 02E0     		b	.L699
 10777              	.LVL1276:
 10778              	.L743:
5335:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
 10779              		.loc 1 5335 32 view .LVU3591
 10780 062c 0320     		movs	r0, #3
 10781              	.LVL1277:
5335:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
 10782              		.loc 1 5335 32 view .LVU3592
 10783 062e 00E0     		b	.L699
 10784              	.LVL1278:
 10785              	.L744:
5336:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, GET_BLOCK_SIZE, &sz_blk) != RES_OK || !sz_blk || sz_blk > 32768 || (sz_blk & 
 10786              		.loc 1 5336 33 view .LVU3593
 10787 0630 0A20     		movs	r0, #10
 10788              	.LVL1279:
 10789              	.L699:
5749:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10790              		.loc 1 5749 1 view .LVU3594
 10791 0632 0DB0     		add	sp, sp, #52
 10792              	.LCFI117:
 10793              		.cfi_remember_state
 10794              		.cfi_def_cfa_offset 36
 10795              		@ sp needed
 10796 0634 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 10797              	.LVL1280:
 10798              	.L745:
 10799              	.LCFI118:
 10800              		.cfi_restore_state
5344:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
 10801              		.loc 1 5344 72 view .LVU3595
 10802 0638 1320     		movs	r0, #19
 10803 063a FAE7     		b	.L699
 10804              	.L746:
5344:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
 10805              		.loc 1 5344 72 view .LVU3596
 10806 063c 1320     		movs	r0, #19
 10807 063e F8E7     		b	.L699
 10808              	.L747:
 10809 0640 1320     		movs	r0, #19
 10810 0642 F6E7     		b	.L699
 10811              	.LVL1281:
 10812              	.L748:
5351:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10813              		.loc 1 5351 23 view .LVU3597
 10814 0644 0E20     		movs	r0, #14
 10815 0646 F4E7     		b	.L699
 10816              	.L749:
5364:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_vol = (opt & FM_SFD) ? 0 : 63;		/* Volume start sector */
 10817              		.loc 1 5364 69 view .LVU3598
ARM GAS  /tmp/ccWTW02a.s 			page 351


 10818 0648 0120     		movs	r0, #1
 10819 064a F2E7     		b	.L699
 10820              	.LVL1282:
 10821              	.L751:
5366:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_vol -= b_vol;						/* Volume size */
 10822              		.loc 1 5366 30 view .LVU3599
 10823 064c 0E20     		movs	r0, #14
 10824 064e F0E7     		b	.L699
 10825              	.L752:
5369:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10826              		.loc 1 5369 27 view .LVU3600
 10827 0650 0E20     		movs	r0, #14
 10828 0652 EEE7     		b	.L699
 10829              	.L753:
5378:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (opt & FM_FAT32) {	/* FAT32 possible? */
 10830              		.loc 1 5378 24 view .LVU3601
 10831 0654 1320     		movs	r0, #19
 10832 0656 ECE7     		b	.L699
 10833              	.L756:
5384:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_FAT16;
 10834              		.loc 1 5384 31 view .LVU3602
 10835 0658 1320     		movs	r0, #19
 10836 065a EAE7     		b	.L699
 10837              	.LVL1283:
 10838              	.L758:
5564:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* FAT12/16 volume */
 10839              		.loc 1 5564 59 view .LVU3603
 10840 065c 0E20     		movs	r0, #14
 10841 065e E8E7     		b	.L699
 10842              	.LVL1284:
 10843              	.L760:
5593:Middlewares/Third_Party/FatFs/src/ff.c **** 			n_clst = (sz_vol - sz_rsv - sz_fat * n_fats - sz_dir) / pau;
 10844              		.loc 1 5593 51 view .LVU3604
 10845 0660 0E20     		movs	r0, #14
 10846 0662 E6E7     		b	.L699
 10847              	.LVL1285:
 10848              	.L761:
5598:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10849              		.loc 1 5598 13 view .LVU3605
 10850 0664 0E20     		movs	r0, #14
 10851 0666 E4E7     		b	.L699
 10852              	.LVL1286:
 10853              	.L764:
5610:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10854              		.loc 1 5610 13 view .LVU3606
 10855 0668 0E20     		movs	r0, #14
 10856 066a E2E7     		b	.L699
 10857              	.LVL1287:
 10858              	.L765:
5614:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10859              		.loc 1 5614 13 view .LVU3607
 10860 066c 0E20     		movs	r0, #14
 10861 066e E0E7     		b	.L699
 10862              	.LVL1288:
 10863              	.L766:
5617:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10864              		.loc 1 5617 54 view .LVU3608
ARM GAS  /tmp/ccWTW02a.s 			page 352


 10865 0670 0E20     		movs	r0, #14
 10866 0672 DEE7     		b	.L699
 10867              	.LVL1289:
 10868              	.L768:
5661:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10869              		.loc 1 5661 57 view .LVU3609
 10870 0674 0120     		movs	r0, #1
 10871 0676 DCE7     		b	.L699
 10872              	.LVL1290:
 10873              	.L770:
5690:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(buf, 0, ss);
 10874              		.loc 1 5690 64 view .LVU3610
 10875 0678 0120     		movs	r0, #1
 10876 067a DAE7     		b	.L699
 10877              	.LVL1291:
 10878              	.L771:
5700:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += n; nsect -= n;
 10879              		.loc 1 5700 63 view .LVU3611
 10880 067c 0120     		movs	r0, #1
 10881 067e D8E7     		b	.L699
 10882              	.LVL1292:
 10883              	.L775:
5742:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 10884              		.loc 1 5742 54 view .LVU3612
 10885 0680 0120     		movs	r0, #1
 10886 0682 D6E7     		b	.L699
 10887              		.cfi_endproc
 10888              	.LFE195:
 10890              		.section	.text.f_gets,"ax",%progbits
 10891              		.align	1
 10892              		.global	f_gets
 10893              		.syntax unified
 10894              		.thumb
 10895              		.thumb_func
 10896              		.fpu fpv5-d16
 10898              	f_gets:
 10899              	.LVL1293:
 10900              	.LFB196:
5835:Middlewares/Third_Party/FatFs/src/ff.c **** 	int n = 0;
 10901              		.loc 1 5835 1 is_stmt 1 view -0
 10902              		.cfi_startproc
 10903              		@ args = 0, pretend = 0, frame = 8
 10904              		@ frame_needed = 0, uses_anonymous_args = 0
5835:Middlewares/Third_Party/FatFs/src/ff.c **** 	int n = 0;
 10905              		.loc 1 5835 1 is_stmt 0 view .LVU3614
 10906 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 10907              	.LCFI119:
 10908              		.cfi_def_cfa_offset 24
 10909              		.cfi_offset 4, -24
 10910              		.cfi_offset 5, -20
 10911              		.cfi_offset 6, -16
 10912              		.cfi_offset 7, -12
 10913              		.cfi_offset 8, -8
 10914              		.cfi_offset 14, -4
 10915 0004 82B0     		sub	sp, sp, #8
 10916              	.LCFI120:
 10917              		.cfi_def_cfa_offset 32
ARM GAS  /tmp/ccWTW02a.s 			page 353


 10918 0006 8046     		mov	r8, r0
 10919 0008 0E46     		mov	r6, r1
 10920 000a 1746     		mov	r7, r2
5836:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c, *p = buff;
 10921              		.loc 1 5836 2 is_stmt 1 view .LVU3615
 10922              	.LVL1294:
5837:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE s[2];
 10923              		.loc 1 5837 2 view .LVU3616
5838:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT rc;
 10924              		.loc 1 5838 2 view .LVU3617
5839:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10925              		.loc 1 5839 2 view .LVU3618
5842:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
 10926              		.loc 1 5842 2 view .LVU3619
5837:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE s[2];
 10927              		.loc 1 5837 12 is_stmt 0 view .LVU3620
 10928 000c 0446     		mov	r4, r0
5836:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c, *p = buff;
 10929              		.loc 1 5836 6 view .LVU3621
 10930 000e 0025     		movs	r5, #0
 10931              	.LVL1295:
 10932              	.L797:
5842:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
 10933              		.loc 1 5842 8 is_stmt 1 view .LVU3622
5842:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
 10934              		.loc 1 5842 17 is_stmt 0 view .LVU3623
 10935 0010 731E     		subs	r3, r6, #1
5842:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
 10936              		.loc 1 5842 8 view .LVU3624
 10937 0012 AB42     		cmp	r3, r5
 10938 0014 11DD     		ble	.L798
5887:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 1) break;
 10939              		.loc 1 5887 3 is_stmt 1 view .LVU3625
 10940 0016 6B46     		mov	r3, sp
 10941 0018 0122     		movs	r2, #1
 10942 001a 01A9     		add	r1, sp, #4
 10943 001c 3846     		mov	r0, r7
 10944 001e FFF7FEFF 		bl	f_read
 10945              	.LVL1296:
5888:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
 10946              		.loc 1 5888 3 view .LVU3626
5888:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
 10947              		.loc 1 5888 10 is_stmt 0 view .LVU3627
 10948 0022 009B     		ldr	r3, [sp]
5888:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
 10949              		.loc 1 5888 6 view .LVU3628
 10950 0024 012B     		cmp	r3, #1
 10951 0026 08D1     		bne	.L798
5889:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 10952              		.loc 1 5889 3 is_stmt 1 view .LVU3629
5889:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 10953              		.loc 1 5889 5 is_stmt 0 view .LVU3630
 10954 0028 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 10955              	.LVL1297:
5891:Middlewares/Third_Party/FatFs/src/ff.c **** 		*p++ = c;
 10956              		.loc 1 5891 3 is_stmt 1 view .LVU3631
5891:Middlewares/Third_Party/FatFs/src/ff.c **** 		*p++ = c;
ARM GAS  /tmp/ccWTW02a.s 			page 354


 10957              		.loc 1 5891 6 is_stmt 0 view .LVU3632
 10958 002c 0D2B     		cmp	r3, #13
 10959 002e EFD0     		beq	.L797
5892:Middlewares/Third_Party/FatFs/src/ff.c **** 		n++;
 10960              		.loc 1 5892 3 is_stmt 1 view .LVU3633
 10961              	.LVL1298:
5892:Middlewares/Third_Party/FatFs/src/ff.c **** 		n++;
 10962              		.loc 1 5892 8 is_stmt 0 view .LVU3634
 10963 0030 04F8013B 		strb	r3, [r4], #1
 10964              	.LVL1299:
5893:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '\n') break;		/* Break on EOL */
 10965              		.loc 1 5893 3 is_stmt 1 view .LVU3635
5893:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '\n') break;		/* Break on EOL */
 10966              		.loc 1 5893 4 is_stmt 0 view .LVU3636
 10967 0034 0135     		adds	r5, r5, #1
 10968              	.LVL1300:
5894:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 10969              		.loc 1 5894 3 is_stmt 1 view .LVU3637
5894:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 10970              		.loc 1 5894 6 is_stmt 0 view .LVU3638
 10971 0036 0A2B     		cmp	r3, #10
 10972 0038 EAD1     		bne	.L797
 10973              	.LVL1301:
 10974              	.L798:
5896:Middlewares/Third_Party/FatFs/src/ff.c **** 	return n ? buff : 0;			/* When no data read (eof or error), return with error. */
 10975              		.loc 1 5896 2 is_stmt 1 view .LVU3639
5896:Middlewares/Third_Party/FatFs/src/ff.c **** 	return n ? buff : 0;			/* When no data read (eof or error), return with error. */
 10976              		.loc 1 5896 5 is_stmt 0 view .LVU3640
 10977 003a 0023     		movs	r3, #0
 10978 003c 2370     		strb	r3, [r4]
5897:Middlewares/Third_Party/FatFs/src/ff.c **** }
 10979              		.loc 1 5897 2 is_stmt 1 view .LVU3641
5897:Middlewares/Third_Party/FatFs/src/ff.c **** }
 10980              		.loc 1 5897 18 is_stmt 0 view .LVU3642
 10981 003e 1DB1     		cbz	r5, .L804
5897:Middlewares/Third_Party/FatFs/src/ff.c **** }
 10982              		.loc 1 5897 18 view .LVU3643
 10983 0040 4046     		mov	r0, r8
 10984              	.L796:
5898:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10985              		.loc 1 5898 1 view .LVU3644
 10986 0042 02B0     		add	sp, sp, #8
 10987              	.LCFI121:
 10988              		.cfi_remember_state
 10989              		.cfi_def_cfa_offset 24
 10990              		@ sp needed
 10991 0044 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 10992              	.LVL1302:
 10993              	.L804:
 10994              	.LCFI122:
 10995              		.cfi_restore_state
5897:Middlewares/Third_Party/FatFs/src/ff.c **** }
 10996              		.loc 1 5897 18 view .LVU3645
 10997 0048 0020     		movs	r0, #0
 10998 004a FAE7     		b	.L796
 10999              		.cfi_endproc
 11000              	.LFE196:
ARM GAS  /tmp/ccWTW02a.s 			page 355


 11002              		.section	.text.f_putc,"ax",%progbits
 11003              		.align	1
 11004              		.global	f_putc
 11005              		.syntax unified
 11006              		.thumb
 11007              		.thumb_func
 11008              		.fpu fpv5-d16
 11010              	f_putc:
 11011              	.LVL1303:
 11012              	.LFB200:
5995:Middlewares/Third_Party/FatFs/src/ff.c **** 
5996:Middlewares/Third_Party/FatFs/src/ff.c **** 
5997:Middlewares/Third_Party/FatFs/src/ff.c **** 
5998:Middlewares/Third_Party/FatFs/src/ff.c **** int f_putc (
5999:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c,	/* A character to be output */
6000:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp		/* Pointer to the file object */
6001:Middlewares/Third_Party/FatFs/src/ff.c **** )
6002:Middlewares/Third_Party/FatFs/src/ff.c **** {
 11013              		.loc 1 6002 1 is_stmt 1 view -0
 11014              		.cfi_startproc
 11015              		@ args = 0, pretend = 0, frame = 80
 11016              		@ frame_needed = 0, uses_anonymous_args = 0
 11017              		.loc 1 6002 1 is_stmt 0 view .LVU3647
 11018 0000 10B5     		push	{r4, lr}
 11019              	.LCFI123:
 11020              		.cfi_def_cfa_offset 8
 11021              		.cfi_offset 4, -8
 11022              		.cfi_offset 14, -4
 11023 0002 94B0     		sub	sp, sp, #80
 11024              	.LCFI124:
 11025              		.cfi_def_cfa_offset 88
 11026 0004 0446     		mov	r4, r0
6003:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff pb;
 11027              		.loc 1 6003 2 is_stmt 1 view .LVU3648
6004:Middlewares/Third_Party/FatFs/src/ff.c **** 
6005:Middlewares/Third_Party/FatFs/src/ff.c **** 
6006:Middlewares/Third_Party/FatFs/src/ff.c **** 	putc_init(&pb, fp);
 11028              		.loc 1 6006 2 view .LVU3649
 11029 0006 01A8     		add	r0, sp, #4
 11030              	.LVL1304:
 11031              		.loc 1 6006 2 is_stmt 0 view .LVU3650
 11032 0008 FFF7FEFF 		bl	putc_init
 11033              	.LVL1305:
6007:Middlewares/Third_Party/FatFs/src/ff.c **** 	putc_bfd(&pb, c);	/* Put the character */
 11034              		.loc 1 6007 2 is_stmt 1 view .LVU3651
 11035 000c 2146     		mov	r1, r4
 11036 000e 01A8     		add	r0, sp, #4
 11037 0010 FFF7FEFF 		bl	putc_bfd
 11038              	.LVL1306:
6008:Middlewares/Third_Party/FatFs/src/ff.c **** 	return putc_flush(&pb);
 11039              		.loc 1 6008 2 view .LVU3652
 11040              		.loc 1 6008 9 is_stmt 0 view .LVU3653
 11041 0014 01A8     		add	r0, sp, #4
 11042 0016 FFF7FEFF 		bl	putc_flush
 11043              	.LVL1307:
6009:Middlewares/Third_Party/FatFs/src/ff.c **** }
 11044              		.loc 1 6009 1 view .LVU3654
ARM GAS  /tmp/ccWTW02a.s 			page 356


 11045 001a 14B0     		add	sp, sp, #80
 11046              	.LCFI125:
 11047              		.cfi_def_cfa_offset 8
 11048              		@ sp needed
 11049 001c 10BD     		pop	{r4, pc}
 11050              		.cfi_endproc
 11051              	.LFE200:
 11053              		.section	.text.f_puts,"ax",%progbits
 11054              		.align	1
 11055              		.global	f_puts
 11056              		.syntax unified
 11057              		.thumb
 11058              		.thumb_func
 11059              		.fpu fpv5-d16
 11061              	f_puts:
 11062              	.LVL1308:
 11063              	.LFB201:
6010:Middlewares/Third_Party/FatFs/src/ff.c **** 
6011:Middlewares/Third_Party/FatFs/src/ff.c **** 
6012:Middlewares/Third_Party/FatFs/src/ff.c **** 
6013:Middlewares/Third_Party/FatFs/src/ff.c **** 
6014:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
6015:Middlewares/Third_Party/FatFs/src/ff.c **** /* Put a string to the file                                              */
6016:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
6017:Middlewares/Third_Party/FatFs/src/ff.c **** 
6018:Middlewares/Third_Party/FatFs/src/ff.c **** int f_puts (
6019:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* str,	/* Pointer to the string to be output */
6020:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp				/* Pointer to the file object */
6021:Middlewares/Third_Party/FatFs/src/ff.c **** )
6022:Middlewares/Third_Party/FatFs/src/ff.c **** {
 11064              		.loc 1 6022 1 is_stmt 1 view -0
 11065              		.cfi_startproc
 11066              		@ args = 0, pretend = 0, frame = 80
 11067              		@ frame_needed = 0, uses_anonymous_args = 0
 11068              		.loc 1 6022 1 is_stmt 0 view .LVU3656
 11069 0000 10B5     		push	{r4, lr}
 11070              	.LCFI126:
 11071              		.cfi_def_cfa_offset 8
 11072              		.cfi_offset 4, -8
 11073              		.cfi_offset 14, -4
 11074 0002 94B0     		sub	sp, sp, #80
 11075              	.LCFI127:
 11076              		.cfi_def_cfa_offset 88
 11077 0004 0446     		mov	r4, r0
6023:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff pb;
 11078              		.loc 1 6023 2 is_stmt 1 view .LVU3657
6024:Middlewares/Third_Party/FatFs/src/ff.c **** 
6025:Middlewares/Third_Party/FatFs/src/ff.c **** 
6026:Middlewares/Third_Party/FatFs/src/ff.c **** 	putc_init(&pb, fp);
 11079              		.loc 1 6026 2 view .LVU3658
 11080 0006 01A8     		add	r0, sp, #4
 11081              	.LVL1309:
 11082              		.loc 1 6026 2 is_stmt 0 view .LVU3659
 11083 0008 FFF7FEFF 		bl	putc_init
 11084              	.LVL1310:
6027:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (*str) putc_bfd(&pb, *str++);		/* Put the string */
 11085              		.loc 1 6027 2 is_stmt 1 view .LVU3660
ARM GAS  /tmp/ccWTW02a.s 			page 357


 11086              	.L809:
 11087              		.loc 1 6027 8 discriminator 1 view .LVU3661
 11088              		.loc 1 6027 9 is_stmt 0 discriminator 1 view .LVU3662
 11089 000c 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 11090              		.loc 1 6027 8 discriminator 1 view .LVU3663
 11091 000e 21B1     		cbz	r1, .L812
 11092              		.loc 1 6027 15 is_stmt 1 discriminator 2 view .LVU3664
 11093              		.loc 1 6027 33 is_stmt 0 discriminator 2 view .LVU3665
 11094 0010 0134     		adds	r4, r4, #1
 11095              	.LVL1311:
 11096              		.loc 1 6027 15 discriminator 2 view .LVU3666
 11097 0012 01A8     		add	r0, sp, #4
 11098 0014 FFF7FEFF 		bl	putc_bfd
 11099              	.LVL1312:
 11100 0018 F8E7     		b	.L809
 11101              	.L812:
6028:Middlewares/Third_Party/FatFs/src/ff.c **** 	return putc_flush(&pb);
 11102              		.loc 1 6028 2 is_stmt 1 view .LVU3667
 11103              		.loc 1 6028 9 is_stmt 0 view .LVU3668
 11104 001a 01A8     		add	r0, sp, #4
 11105 001c FFF7FEFF 		bl	putc_flush
 11106              	.LVL1313:
6029:Middlewares/Third_Party/FatFs/src/ff.c **** }
 11107              		.loc 1 6029 1 view .LVU3669
 11108 0020 14B0     		add	sp, sp, #80
 11109              	.LCFI128:
 11110              		.cfi_def_cfa_offset 8
 11111              		@ sp needed
 11112 0022 10BD     		pop	{r4, pc}
 11113              		.loc 1 6029 1 view .LVU3670
 11114              		.cfi_endproc
 11115              	.LFE201:
 11117              		.section	.text.f_printf,"ax",%progbits
 11118              		.align	1
 11119              		.global	f_printf
 11120              		.syntax unified
 11121              		.thumb
 11122              		.thumb_func
 11123              		.fpu fpv5-d16
 11125              	f_printf:
 11126              	.LVL1314:
 11127              	.LFB202:
6030:Middlewares/Third_Party/FatFs/src/ff.c **** 
6031:Middlewares/Third_Party/FatFs/src/ff.c **** 
6032:Middlewares/Third_Party/FatFs/src/ff.c **** 
6033:Middlewares/Third_Party/FatFs/src/ff.c **** 
6034:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
6035:Middlewares/Third_Party/FatFs/src/ff.c **** /* Put a formatted string to the file                                    */
6036:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
6037:Middlewares/Third_Party/FatFs/src/ff.c **** 
6038:Middlewares/Third_Party/FatFs/src/ff.c **** int f_printf (
6039:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,			/* Pointer to the file object */
6040:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* fmt,	/* Pointer to the format string */
6041:Middlewares/Third_Party/FatFs/src/ff.c **** 	...					/* Optional arguments... */
6042:Middlewares/Third_Party/FatFs/src/ff.c **** )
6043:Middlewares/Third_Party/FatFs/src/ff.c **** {
 11128              		.loc 1 6043 1 is_stmt 1 view -0
ARM GAS  /tmp/ccWTW02a.s 			page 358


 11129              		.cfi_startproc
 11130              		@ args = 4, pretend = 12, frame = 112
 11131              		@ frame_needed = 0, uses_anonymous_args = 1
 11132              		.loc 1 6043 1 is_stmt 0 view .LVU3672
 11133 0000 0EB4     		push	{r1, r2, r3}
 11134              	.LCFI129:
 11135              		.cfi_def_cfa_offset 12
 11136              		.cfi_offset 1, -12
 11137              		.cfi_offset 2, -8
 11138              		.cfi_offset 3, -4
 11139 0002 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 11140              	.LCFI130:
 11141              		.cfi_def_cfa_offset 44
 11142              		.cfi_offset 4, -44
 11143              		.cfi_offset 5, -40
 11144              		.cfi_offset 6, -36
 11145              		.cfi_offset 7, -32
 11146              		.cfi_offset 8, -28
 11147              		.cfi_offset 9, -24
 11148              		.cfi_offset 10, -20
 11149              		.cfi_offset 14, -16
 11150 0006 9DB0     		sub	sp, sp, #116
 11151              	.LCFI131:
 11152              		.cfi_def_cfa_offset 160
 11153 0008 0146     		mov	r1, r0
 11154 000a 25AC     		add	r4, sp, #148
 11155 000c 54F8045B 		ldr	r5, [r4], #4
6044:Middlewares/Third_Party/FatFs/src/ff.c **** 	va_list arp;
 11156              		.loc 1 6044 2 is_stmt 1 view .LVU3673
6045:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff pb;
 11157              		.loc 1 6045 2 view .LVU3674
6046:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE f, r;
 11158              		.loc 1 6046 2 view .LVU3675
6047:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, j, w;
 11159              		.loc 1 6047 2 view .LVU3676
6048:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD v;
 11160              		.loc 1 6048 2 view .LVU3677
6049:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c, d, str[32], *p;
 11161              		.loc 1 6049 2 view .LVU3678
6050:Middlewares/Third_Party/FatFs/src/ff.c **** 
6051:Middlewares/Third_Party/FatFs/src/ff.c **** 
6052:Middlewares/Third_Party/FatFs/src/ff.c **** 	putc_init(&pb, fp);
 11162              		.loc 1 6052 2 view .LVU3679
 11163 0010 08A8     		add	r0, sp, #32
 11164              	.LVL1315:
 11165              		.loc 1 6052 2 is_stmt 0 view .LVU3680
 11166 0012 FFF7FEFF 		bl	putc_init
 11167              	.LVL1316:
6053:Middlewares/Third_Party/FatFs/src/ff.c **** 
6054:Middlewares/Third_Party/FatFs/src/ff.c **** 	va_start(arp, fmt);
 11168              		.loc 1 6054 2 is_stmt 1 view .LVU3681
 11169 0016 1B94     		str	r4, [sp, #108]
 11170 0018 03E0     		b	.L814
 11171              	.LVL1317:
 11172              	.L863:
6055:Middlewares/Third_Party/FatFs/src/ff.c **** 
6056:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
ARM GAS  /tmp/ccWTW02a.s 			page 359


6057:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = *fmt++;
6058:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) break;			/* End of string */
6059:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c != '%') {				/* Non escape character */
6060:Middlewares/Third_Party/FatFs/src/ff.c **** 			putc_bfd(&pb, c);
 11173              		.loc 1 6060 4 view .LVU3682
 11174 001a 08A8     		add	r0, sp, #32
 11175 001c FFF7FEFF 		bl	putc_bfd
 11176              	.LVL1318:
6061:Middlewares/Third_Party/FatFs/src/ff.c **** 			continue;
 11177              		.loc 1 6061 4 view .LVU3683
6057:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) break;			/* End of string */
 11178              		.loc 1 6057 11 is_stmt 0 view .LVU3684
 11179 0020 2546     		mov	r5, r4
 11180              	.LVL1319:
 11181              	.L814:
6056:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = *fmt++;
 11182              		.loc 1 6056 2 is_stmt 1 view .LVU3685
6057:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) break;			/* End of string */
 11183              		.loc 1 6057 3 view .LVU3686
6057:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) break;			/* End of string */
 11184              		.loc 1 6057 11 is_stmt 0 view .LVU3687
 11185 0022 2C46     		mov	r4, r5
 11186              	.LVL1320:
6057:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) break;			/* End of string */
 11187              		.loc 1 6057 5 view .LVU3688
 11188 0024 14F8011B 		ldrb	r1, [r4], #1	@ zero_extendqisi2
 11189              	.LVL1321:
6058:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c != '%') {				/* Non escape character */
 11190              		.loc 1 6058 3 is_stmt 1 view .LVU3689
6058:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c != '%') {				/* Non escape character */
 11191              		.loc 1 6058 6 is_stmt 0 view .LVU3690
 11192 0028 0029     		cmp	r1, #0
 11193 002a 00F0FC80 		beq	.L815
6059:Middlewares/Third_Party/FatFs/src/ff.c **** 			putc_bfd(&pb, c);
 11194              		.loc 1 6059 3 is_stmt 1 view .LVU3691
6059:Middlewares/Third_Party/FatFs/src/ff.c **** 			putc_bfd(&pb, c);
 11195              		.loc 1 6059 6 is_stmt 0 view .LVU3692
 11196 002e 2529     		cmp	r1, #37
 11197 0030 F3D1     		bne	.L863
6062:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
6063:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = f = 0;
 11198              		.loc 1 6063 3 is_stmt 1 view .LVU3693
 11199              	.LVL1322:
6064:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = *fmt++;
 11200              		.loc 1 6064 3 view .LVU3694
 11201              		.loc 1 6064 11 is_stmt 0 view .LVU3695
 11202 0032 0235     		adds	r5, r5, #2
 11203              	.LVL1323:
 11204              		.loc 1 6064 5 view .LVU3696
 11205 0034 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 11206              	.LVL1324:
6065:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '0') {				/* Flag: '0' padding */
 11207              		.loc 1 6065 3 is_stmt 1 view .LVU3697
 11208              		.loc 1 6065 6 is_stmt 0 view .LVU3698
 11209 0036 3029     		cmp	r1, #48
 11210 0038 04D0     		beq	.L864
6066:Middlewares/Third_Party/FatFs/src/ff.c **** 			f = 1; c = *fmt++;
ARM GAS  /tmp/ccWTW02a.s 			page 360


6067:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
6068:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c == '-') {			/* Flag: left justified */
 11211              		.loc 1 6068 4 is_stmt 1 view .LVU3699
 11212              		.loc 1 6068 7 is_stmt 0 view .LVU3700
 11213 003a 2D29     		cmp	r1, #45
 11214 003c 06D0     		beq	.L865
6063:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = *fmt++;
 11215              		.loc 1 6063 9 view .LVU3701
 11216 003e 0026     		movs	r6, #0
 11217              	.LVL1325:
 11218              	.L819:
6063:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = *fmt++;
 11219              		.loc 1 6063 9 view .LVU3702
 11220 0040 0024     		movs	r4, #0
 11221 0042 0EE0     		b	.L820
 11222              	.LVL1326:
 11223              	.L864:
6066:Middlewares/Third_Party/FatFs/src/ff.c **** 			f = 1; c = *fmt++;
 11224              		.loc 1 6066 4 is_stmt 1 view .LVU3703
6066:Middlewares/Third_Party/FatFs/src/ff.c **** 			f = 1; c = *fmt++;
 11225              		.loc 1 6066 11 view .LVU3704
6066:Middlewares/Third_Party/FatFs/src/ff.c **** 			f = 1; c = *fmt++;
 11226              		.loc 1 6066 19 is_stmt 0 view .LVU3705
 11227 0044 A51C     		adds	r5, r4, #2
 11228              	.LVL1327:
6066:Middlewares/Third_Party/FatFs/src/ff.c **** 			f = 1; c = *fmt++;
 11229              		.loc 1 6066 13 view .LVU3706
 11230 0046 6178     		ldrb	r1, [r4, #1]	@ zero_extendqisi2
 11231              	.LVL1328:
6066:Middlewares/Third_Party/FatFs/src/ff.c **** 			f = 1; c = *fmt++;
 11232              		.loc 1 6066 6 view .LVU3707
 11233 0048 0126     		movs	r6, #1
 11234 004a F9E7     		b	.L819
 11235              	.LVL1329:
 11236              	.L865:
6069:Middlewares/Third_Party/FatFs/src/ff.c **** 				f = 2; c = *fmt++;
 11237              		.loc 1 6069 5 is_stmt 1 view .LVU3708
 11238              		.loc 1 6069 12 view .LVU3709
 11239              		.loc 1 6069 20 is_stmt 0 view .LVU3710
 11240 004c A51C     		adds	r5, r4, #2
 11241              	.LVL1330:
 11242              		.loc 1 6069 14 view .LVU3711
 11243 004e 6178     		ldrb	r1, [r4, #1]	@ zero_extendqisi2
 11244              	.LVL1331:
 11245              		.loc 1 6069 7 view .LVU3712
 11246 0050 0226     		movs	r6, #2
 11247 0052 F5E7     		b	.L819
 11248              	.LVL1332:
 11249              	.L821:
6070:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
6071:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
6072:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (IsDigit(c)) {		/* Precision */
6073:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = w * 10 + c - '0';
 11250              		.loc 1 6073 4 is_stmt 1 view .LVU3713
 11251              		.loc 1 6073 10 is_stmt 0 view .LVU3714
 11252 0054 04EB8404 		add	r4, r4, r4, lsl #2
 11253              	.LVL1333:
ARM GAS  /tmp/ccWTW02a.s 			page 361


 11254              		.loc 1 6073 15 view .LVU3715
 11255 0058 01EB4404 		add	r4, r1, r4, lsl #1
 11256              		.loc 1 6073 6 view .LVU3716
 11257 005c 303C     		subs	r4, r4, #48
 11258              	.LVL1334:
6074:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = *fmt++;
 11259              		.loc 1 6074 4 is_stmt 1 view .LVU3717
 11260              		.loc 1 6074 6 is_stmt 0 view .LVU3718
 11261 005e 15F8011B 		ldrb	r1, [r5], #1	@ zero_extendqisi2
 11262              	.LVL1335:
 11263              	.L820:
6072:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = w * 10 + c - '0';
 11264              		.loc 1 6072 9 is_stmt 1 view .LVU3719
6072:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = w * 10 + c - '0';
 11265              		.loc 1 6072 10 is_stmt 0 view .LVU3720
 11266 0062 A1F13003 		sub	r3, r1, #48
 11267 0066 DBB2     		uxtb	r3, r3
6072:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = w * 10 + c - '0';
 11268              		.loc 1 6072 9 view .LVU3721
 11269 0068 092B     		cmp	r3, #9
 11270 006a F3D9     		bls	.L821
6075:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
6076:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 'l' || c == 'L') {	/* Prefix: Size is long int */
 11271              		.loc 1 6076 3 is_stmt 1 view .LVU3722
 11272              		.loc 1 6076 6 is_stmt 0 view .LVU3723
 11273 006c 4C29     		cmp	r1, #76
 11274 006e 18BF     		it	ne
 11275 0070 6C29     		cmpne	r1, #108
 11276 0072 03D1     		bne	.L822
6077:Middlewares/Third_Party/FatFs/src/ff.c **** 			f |= 4; c = *fmt++;
 11277              		.loc 1 6077 4 is_stmt 1 view .LVU3724
 11278              		.loc 1 6077 6 is_stmt 0 view .LVU3725
 11279 0074 46F00406 		orr	r6, r6, #4
 11280              	.LVL1336:
 11281              		.loc 1 6077 12 is_stmt 1 view .LVU3726
 11282              		.loc 1 6077 14 is_stmt 0 view .LVU3727
 11283 0078 15F8011B 		ldrb	r1, [r5], #1	@ zero_extendqisi2
 11284              	.LVL1337:
 11285              	.L822:
6078:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
6079:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!c) break;
 11286              		.loc 1 6079 3 is_stmt 1 view .LVU3728
 11287              		.loc 1 6079 6 is_stmt 0 view .LVU3729
 11288 007c 0029     		cmp	r1, #0
 11289 007e 00F0D280 		beq	.L815
6080:Middlewares/Third_Party/FatFs/src/ff.c **** 		d = c;
 11290              		.loc 1 6080 3 is_stmt 1 view .LVU3730
 11291              	.LVL1338:
6081:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsLower(d)) d -= 0x20;
 11292              		.loc 1 6081 3 view .LVU3731
 11293              		.loc 1 6081 7 is_stmt 0 view .LVU3732
 11294 0082 A1F16103 		sub	r3, r1, #97
 11295 0086 DBB2     		uxtb	r3, r3
 11296              		.loc 1 6081 6 view .LVU3733
 11297 0088 192B     		cmp	r3, #25
 11298 008a 14D8     		bhi	.L857
 11299              		.loc 1 6081 19 is_stmt 1 discriminator 1 view .LVU3734
ARM GAS  /tmp/ccWTW02a.s 			page 362


 11300              		.loc 1 6081 21 is_stmt 0 discriminator 1 view .LVU3735
 11301 008c A1F12003 		sub	r3, r1, #32
 11302 0090 DBB2     		uxtb	r3, r3
 11303              	.LVL1339:
 11304              	.L823:
6082:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (d) {				/* Type is... */
 11305              		.loc 1 6082 3 is_stmt 1 view .LVU3736
 11306 0092 A3F14202 		sub	r2, r3, #66
 11307 0096 162A     		cmp	r2, #22
 11308 0098 5DD8     		bhi	.L824
 11309 009a DFE802F0 		tbb	[pc, r2]
 11310              	.L826:
 11311 009e 60       		.byte	(.L831-.L826)/2
 11312 009f 3D       		.byte	(.L830-.L826)/2
 11313 00a0 45       		.byte	(.L827-.L826)/2
 11314 00a1 5C       		.byte	(.L824-.L826)/2
 11315 00a2 5C       		.byte	(.L824-.L826)/2
 11316 00a3 5C       		.byte	(.L824-.L826)/2
 11317 00a4 5C       		.byte	(.L824-.L826)/2
 11318 00a5 5C       		.byte	(.L824-.L826)/2
 11319 00a6 5C       		.byte	(.L824-.L826)/2
 11320 00a7 5C       		.byte	(.L824-.L826)/2
 11321 00a8 5C       		.byte	(.L824-.L826)/2
 11322 00a9 5C       		.byte	(.L824-.L826)/2
 11323 00aa 5C       		.byte	(.L824-.L826)/2
 11324 00ab 62       		.byte	(.L858-.L826)/2
 11325 00ac 5C       		.byte	(.L824-.L826)/2
 11326 00ad 5C       		.byte	(.L824-.L826)/2
 11327 00ae 5C       		.byte	(.L824-.L826)/2
 11328 00af 0E       		.byte	(.L828-.L826)/2
 11329 00b0 5C       		.byte	(.L824-.L826)/2
 11330 00b1 45       		.byte	(.L827-.L826)/2
 11331 00b2 5C       		.byte	(.L824-.L826)/2
 11332 00b3 5C       		.byte	(.L824-.L826)/2
 11333 00b4 5A       		.byte	(.L825-.L826)/2
 11334              	.LVL1340:
 11335 00b5 00       		.p2align 1
 11336              	.L857:
6080:Middlewares/Third_Party/FatFs/src/ff.c **** 		d = c;
 11337              		.loc 1 6080 5 is_stmt 0 view .LVU3737
 11338 00b6 0B46     		mov	r3, r1
 11339 00b8 EBE7     		b	.L823
 11340              	.LVL1341:
 11341              	.L828:
6083:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'S' :					/* String */
6084:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = va_arg(arp, TCHAR*);
 11342              		.loc 1 6084 4 is_stmt 1 view .LVU3738
 11343              		.loc 1 6084 6 is_stmt 0 view .LVU3739
 11344 00ba 1B9B     		ldr	r3, [sp, #108]
 11345              	.LVL1342:
 11346              		.loc 1 6084 6 view .LVU3740
 11347 00bc 1A1D     		adds	r2, r3, #4
 11348 00be 1B92     		str	r2, [sp, #108]
 11349 00c0 D3F80080 		ldr	r8, [r3]
6085:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (j = 0; p[j]; j++) ;
 11350              		.loc 1 6085 4 is_stmt 1 view .LVU3741
 11351              	.LVL1343:
ARM GAS  /tmp/ccWTW02a.s 			page 363


 11352              		.loc 1 6085 11 is_stmt 0 view .LVU3742
 11353 00c4 0027     		movs	r7, #0
 11354              		.loc 1 6085 4 view .LVU3743
 11355 00c6 00E0     		b	.L832
 11356              	.LVL1344:
 11357              	.L833:
 11358              		.loc 1 6085 27 is_stmt 1 discriminator 3 view .LVU3744
 11359              		.loc 1 6085 22 discriminator 3 view .LVU3745
 11360              		.loc 1 6085 23 is_stmt 0 discriminator 3 view .LVU3746
 11361 00c8 0137     		adds	r7, r7, #1
 11362              	.LVL1345:
 11363              	.L832:
 11364              		.loc 1 6085 16 is_stmt 1 discriminator 1 view .LVU3747
 11365              		.loc 1 6085 17 is_stmt 0 discriminator 1 view .LVU3748
 11366 00ca 18F80730 		ldrb	r3, [r8, r7]	@ zero_extendqisi2
 11367              		.loc 1 6085 4 discriminator 1 view .LVU3749
 11368 00ce 002B     		cmp	r3, #0
 11369 00d0 FAD1     		bne	.L833
6086:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(f & 2)) {
 11370              		.loc 1 6086 4 is_stmt 1 view .LVU3750
 11371              		.loc 1 6086 7 is_stmt 0 view .LVU3751
 11372 00d2 16F0020F 		tst	r6, #2
 11373 00d6 10D1     		bne	.L837
 11374 00d8 05E0     		b	.L834
 11375              	.LVL1346:
 11376              	.L836:
6087:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (j++ < w) putc_bfd(&pb, ' ');
 11377              		.loc 1 6087 21 is_stmt 1 discriminator 2 view .LVU3752
 11378 00da 2021     		movs	r1, #32
 11379 00dc 0DEB0100 		add	r0, sp, r1
 11380 00e0 FFF7FEFF 		bl	putc_bfd
 11381              	.LVL1347:
 11382              		.loc 1 6087 13 is_stmt 0 discriminator 2 view .LVU3753
 11383 00e4 3746     		mov	r7, r6
 11384              	.LVL1348:
 11385              	.L834:
 11386              		.loc 1 6087 11 is_stmt 1 discriminator 1 view .LVU3754
 11387              		.loc 1 6087 13 is_stmt 0 discriminator 1 view .LVU3755
 11388 00e6 7E1C     		adds	r6, r7, #1
 11389              	.LVL1349:
 11390              		.loc 1 6087 11 discriminator 1 view .LVU3756
 11391 00e8 A742     		cmp	r7, r4
 11392 00ea F6D3     		bcc	.L836
 11393              		.loc 1 6087 13 view .LVU3757
 11394 00ec 3746     		mov	r7, r6
 11395 00ee 04E0     		b	.L837
 11396              	.LVL1350:
 11397              	.L838:
6088:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
6089:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (*p) putc_bfd(&pb, *p++);
 11398              		.loc 1 6089 15 is_stmt 1 discriminator 2 view .LVU3758
 11399              		.loc 1 6089 31 is_stmt 0 discriminator 2 view .LVU3759
 11400 00f0 08F10108 		add	r8, r8, #1
 11401              	.LVL1351:
 11402              		.loc 1 6089 15 discriminator 2 view .LVU3760
 11403 00f4 08A8     		add	r0, sp, #32
 11404 00f6 FFF7FEFF 		bl	putc_bfd
ARM GAS  /tmp/ccWTW02a.s 			page 364


 11405              	.LVL1352:
 11406              	.L837:
 11407              		.loc 1 6089 10 is_stmt 1 discriminator 1 view .LVU3761
 11408              		.loc 1 6089 11 is_stmt 0 discriminator 1 view .LVU3762
 11409 00fa 98F80010 		ldrb	r1, [r8]	@ zero_extendqisi2
 11410              		.loc 1 6089 10 discriminator 1 view .LVU3763
 11411 00fe 0029     		cmp	r1, #0
 11412 0100 F6D1     		bne	.L838
 11413              		.loc 1 6089 10 discriminator 1 view .LVU3764
 11414 0102 05E0     		b	.L839
 11415              	.LVL1353:
 11416              	.L840:
6090:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (j++ < w) putc_bfd(&pb, ' ');
 11417              		.loc 1 6090 20 is_stmt 1 discriminator 2 view .LVU3765
 11418 0104 2021     		movs	r1, #32
 11419 0106 0DEB0100 		add	r0, sp, r1
 11420 010a FFF7FEFF 		bl	putc_bfd
 11421              	.LVL1354:
 11422              		.loc 1 6090 12 is_stmt 0 discriminator 2 view .LVU3766
 11423 010e 3746     		mov	r7, r6
 11424              	.LVL1355:
 11425              	.L839:
 11426              		.loc 1 6090 10 is_stmt 1 discriminator 1 view .LVU3767
 11427              		.loc 1 6090 12 is_stmt 0 discriminator 1 view .LVU3768
 11428 0110 7E1C     		adds	r6, r7, #1
 11429              	.LVL1356:
 11430              		.loc 1 6090 10 discriminator 1 view .LVU3769
 11431 0112 A742     		cmp	r7, r4
 11432 0114 F6D3     		bcc	.L840
 11433 0116 84E7     		b	.L814
 11434              	.LVL1357:
 11435              	.L830:
6091:Middlewares/Third_Party/FatFs/src/ff.c **** 			continue;
6092:Middlewares/Third_Party/FatFs/src/ff.c **** 
6093:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'C' :					/* Character */
6094:Middlewares/Third_Party/FatFs/src/ff.c **** 			putc_bfd(&pb, (TCHAR)va_arg(arp, int)); continue;
 11436              		.loc 1 6094 4 is_stmt 1 view .LVU3770
 11437              		.loc 1 6094 25 is_stmt 0 view .LVU3771
 11438 0118 1B9B     		ldr	r3, [sp, #108]
 11439              	.LVL1358:
 11440              		.loc 1 6094 25 view .LVU3772
 11441 011a 1A1D     		adds	r2, r3, #4
 11442 011c 1B92     		str	r2, [sp, #108]
 11443              		.loc 1 6094 4 view .LVU3773
 11444 011e 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 11445              	.LVL1359:
 11446              		.loc 1 6094 4 view .LVU3774
 11447 0120 08A8     		add	r0, sp, #32
 11448 0122 FFF7FEFF 		bl	putc_bfd
 11449              	.LVL1360:
 11450              		.loc 1 6094 44 is_stmt 1 view .LVU3775
 11451              		.loc 1 6094 4 is_stmt 0 view .LVU3776
 11452 0126 7CE7     		b	.L814
 11453              	.LVL1361:
 11454              	.L827:
6095:Middlewares/Third_Party/FatFs/src/ff.c **** 
6096:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'B' :					/* Binary */
ARM GAS  /tmp/ccWTW02a.s 			page 365


6097:Middlewares/Third_Party/FatFs/src/ff.c **** 			r = 2; break;
6098:Middlewares/Third_Party/FatFs/src/ff.c **** 
6099:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'O' :					/* Octal */
6100:Middlewares/Third_Party/FatFs/src/ff.c **** 			r = 8; break;
6101:Middlewares/Third_Party/FatFs/src/ff.c **** 
6102:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'D' :					/* Signed decimal */
6103:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'U' :					/* Unsigned decimal */
6104:Middlewares/Third_Party/FatFs/src/ff.c **** 			r = 10; break;
 11455              		.loc 1 6104 4 is_stmt 1 view .LVU3777
 11456              		.loc 1 6104 12 view .LVU3778
 11457              		.loc 1 6104 6 is_stmt 0 view .LVU3779
 11458 0128 0A20     		movs	r0, #10
 11459              	.LVL1362:
 11460              	.L829:
6105:Middlewares/Third_Party/FatFs/src/ff.c **** 
6106:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'X' :					/* Hexdecimal */
6107:Middlewares/Third_Party/FatFs/src/ff.c **** 			r = 16; break;
6108:Middlewares/Third_Party/FatFs/src/ff.c **** 
6109:Middlewares/Third_Party/FatFs/src/ff.c **** 		default:					/* Unknown type (pass-through) */
6110:Middlewares/Third_Party/FatFs/src/ff.c **** 			putc_bfd(&pb, c); continue;
6111:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
6112:Middlewares/Third_Party/FatFs/src/ff.c **** 
6113:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Get an argument and put it in numeral */
6114:Middlewares/Third_Party/FatFs/src/ff.c **** 		v = (f & 4) ? (DWORD)va_arg(arp, long) : ((d == 'D') ? (DWORD)(long)va_arg(arp, int) : (DWORD)va_
 11461              		.loc 1 6114 3 is_stmt 1 view .LVU3780
 11462              		.loc 1 6114 42 is_stmt 0 view .LVU3781
 11463 012a 16F0040F 		tst	r6, #4
 11464 012e 1AD0     		beq	.L841
 11465              		.loc 1 6114 24 view .LVU3782
 11466 0130 1B9A     		ldr	r2, [sp, #108]
 11467 0132 171D     		adds	r7, r2, #4
 11468 0134 1B97     		str	r7, [sp, #108]
 11469 0136 1268     		ldr	r2, [r2]
 11470              	.L842:
 11471              	.LVL1363:
6115:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 11472              		.loc 1 6115 3 is_stmt 1 discriminator 8 view .LVU3783
 11473              		.loc 1 6115 16 is_stmt 0 discriminator 8 view .LVU3784
 11474 0138 D70F     		lsrs	r7, r2, #31
 11475 013a 442B     		cmp	r3, #68
 11476 013c 14BF     		ite	ne
 11477 013e 0023     		movne	r3, #0
 11478 0140 07F00103 		andeq	r3, r7, #1
 11479              	.LVL1364:
 11480              		.loc 1 6115 6 discriminator 8 view .LVU3785
 11481 0144 13B1     		cbz	r3, .L844
6116:Middlewares/Third_Party/FatFs/src/ff.c **** 			v = 0 - v;
 11482              		.loc 1 6116 4 is_stmt 1 view .LVU3786
 11483              		.loc 1 6116 6 is_stmt 0 view .LVU3787
 11484 0146 5242     		rsbs	r2, r2, #0
 11485              	.LVL1365:
6117:Middlewares/Third_Party/FatFs/src/ff.c **** 			f |= 8;
 11486              		.loc 1 6117 4 is_stmt 1 view .LVU3788
 11487              		.loc 1 6117 6 is_stmt 0 view .LVU3789
 11488 0148 46F00806 		orr	r6, r6, #8
 11489              	.LVL1366:
 11490              	.L844:
ARM GAS  /tmp/ccWTW02a.s 			page 366


6118:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
6119:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = 0;
 11491              		.loc 1 6119 3 is_stmt 1 view .LVU3790
 11492              		.loc 1 6119 5 is_stmt 0 view .LVU3791
 11493 014c 4FF0000C 		mov	ip, #0
 11494 0150 25E0     		b	.L847
 11495              	.LVL1367:
 11496              	.L825:
6107:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11497              		.loc 1 6107 4 is_stmt 1 view .LVU3792
6107:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11498              		.loc 1 6107 12 view .LVU3793
6107:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11499              		.loc 1 6107 6 is_stmt 0 view .LVU3794
 11500 0152 1020     		movs	r0, #16
6107:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11501              		.loc 1 6107 4 view .LVU3795
 11502 0154 E9E7     		b	.L829
 11503              	.LVL1368:
 11504              	.L824:
6110:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 11505              		.loc 1 6110 4 is_stmt 1 view .LVU3796
 11506 0156 08A8     		add	r0, sp, #32
 11507 0158 FFF7FEFF 		bl	putc_bfd
 11508              	.LVL1369:
6110:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 11509              		.loc 1 6110 22 view .LVU3797
6110:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 11510              		.loc 1 6110 4 is_stmt 0 view .LVU3798
 11511 015c 61E7     		b	.L814
 11512              	.LVL1370:
 11513              	.L831:
6104:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11514              		.loc 1 6104 6 view .LVU3799
 11515 015e 0220     		movs	r0, #2
 11516 0160 E3E7     		b	.L829
 11517              	.L858:
6100:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11518              		.loc 1 6100 6 view .LVU3800
 11519 0162 0820     		movs	r0, #8
 11520 0164 E1E7     		b	.L829
 11521              	.LVL1371:
 11522              	.L841:
6114:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 11523              		.loc 1 6114 88 discriminator 2 view .LVU3801
 11524 0166 442B     		cmp	r3, #68
 11525 0168 04D0     		beq	.L866
6114:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 11526              		.loc 1 6114 88 view .LVU3802
 11527 016a 1B9A     		ldr	r2, [sp, #108]
 11528 016c 171D     		adds	r7, r2, #4
 11529 016e 1B97     		str	r7, [sp, #108]
 11530 0170 1268     		ldr	r2, [r2]
 11531 0172 E1E7     		b	.L842
 11532              	.L866:
6114:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 11533              		.loc 1 6114 71 view .LVU3803
ARM GAS  /tmp/ccWTW02a.s 			page 367


 11534 0174 1B9A     		ldr	r2, [sp, #108]
 11535 0176 171D     		adds	r7, r2, #4
 11536 0178 1B97     		str	r7, [sp, #108]
 11537 017a 1268     		ldr	r2, [r2]
 11538 017c DCE7     		b	.L842
 11539              	.LVL1372:
 11540              	.L868:
6120:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
6121:Middlewares/Third_Party/FatFs/src/ff.c **** 			d = (TCHAR)(v % r); v /= r;
6122:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 11541              		.loc 1 6122 17 view .LVU3804
 11542 017e 2727     		movs	r7, #39
 11543              	.L846:
 11544              		.loc 1 6122 17 discriminator 5 view .LVU3805
 11545 0180 3B44     		add	r3, r3, r7
 11546              	.LVL1373:
 11547              		.loc 1 6122 17 discriminator 5 view .LVU3806
 11548 0182 DBB2     		uxtb	r3, r3
 11549              	.LVL1374:
 11550              	.L845:
6123:Middlewares/Third_Party/FatFs/src/ff.c **** 			str[i++] = d + '0';
 11551              		.loc 1 6123 4 is_stmt 1 view .LVU3807
 11552              		.loc 1 6123 9 is_stmt 0 view .LVU3808
 11553 0184 0CF10107 		add	r7, ip, #1
 11554              	.LVL1375:
 11555              		.loc 1 6123 17 view .LVU3809
 11556 0188 3033     		adds	r3, r3, #48
 11557              	.LVL1376:
 11558              		.loc 1 6123 13 view .LVU3810
 11559 018a 0DF17009 		add	r9, sp, #112
 11560 018e E144     		add	r9, r9, ip
 11561 0190 09F8703C 		strb	r3, [r9, #-112]
6124:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (v && i < sizeof str / sizeof str[0]);
 11562              		.loc 1 6124 11 is_stmt 1 view .LVU3811
 11563              		.loc 1 6124 3 is_stmt 0 view .LVU3812
 11564 0194 C645     		cmp	lr, r8
 11565 0196 98BF     		it	ls
 11566 0198 1F2F     		cmpls	r7, #31
 11567 019a 0ED8     		bhi	.L867
6123:Middlewares/Third_Party/FatFs/src/ff.c **** 			str[i++] = d + '0';
 11568              		.loc 1 6123 9 view .LVU3813
 11569 019c BC46     		mov	ip, r7
 11570              	.LVL1377:
 11571              	.L847:
6120:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 11572              		.loc 1 6120 3 is_stmt 1 view .LVU3814
6121:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 11573              		.loc 1 6121 4 view .LVU3815
6121:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 11574              		.loc 1 6121 18 is_stmt 0 view .LVU3816
 11575 019e 8646     		mov	lr, r0
 11576 01a0 B2FBF0F7 		udiv	r7, r2, r0
 11577 01a4 00FB1723 		mls	r3, r0, r7, r2
6121:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 11578              		.loc 1 6121 6 view .LVU3817
 11579 01a8 DBB2     		uxtb	r3, r3
 11580              	.LVL1378:
ARM GAS  /tmp/ccWTW02a.s 			page 368


6121:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 11581              		.loc 1 6121 24 is_stmt 1 view .LVU3818
 11582 01aa 9046     		mov	r8, r2
6121:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 11583              		.loc 1 6121 26 is_stmt 0 view .LVU3819
 11584 01ac 3A46     		mov	r2, r7
 11585              	.LVL1379:
6122:Middlewares/Third_Party/FatFs/src/ff.c **** 			str[i++] = d + '0';
 11586              		.loc 1 6122 4 is_stmt 1 view .LVU3820
6122:Middlewares/Third_Party/FatFs/src/ff.c **** 			str[i++] = d + '0';
 11587              		.loc 1 6122 7 is_stmt 0 view .LVU3821
 11588 01ae 092B     		cmp	r3, #9
 11589 01b0 E8D9     		bls	.L845
6122:Middlewares/Third_Party/FatFs/src/ff.c **** 			str[i++] = d + '0';
 11590              		.loc 1 6122 15 is_stmt 1 discriminator 1 view .LVU3822
6122:Middlewares/Third_Party/FatFs/src/ff.c **** 			str[i++] = d + '0';
 11591              		.loc 1 6122 17 is_stmt 0 discriminator 1 view .LVU3823
 11592 01b2 7829     		cmp	r1, #120
 11593 01b4 E3D0     		beq	.L868
6122:Middlewares/Third_Party/FatFs/src/ff.c **** 			str[i++] = d + '0';
 11594              		.loc 1 6122 17 view .LVU3824
 11595 01b6 0727     		movs	r7, #7
 11596 01b8 E2E7     		b	.L846
 11597              	.LVL1380:
 11598              	.L867:
6125:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (f & 8) str[i++] = '-';
 11599              		.loc 1 6125 3 is_stmt 1 view .LVU3825
 11600              		.loc 1 6125 6 is_stmt 0 view .LVU3826
 11601 01ba 16F0080F 		tst	r6, #8
 11602 01be 06D0     		beq	.L848
 11603              		.loc 1 6125 14 is_stmt 1 discriminator 1 view .LVU3827
 11604              	.LVL1381:
 11605              		.loc 1 6125 23 is_stmt 0 discriminator 1 view .LVU3828
 11606 01c0 1CAB     		add	r3, sp, #112
 11607 01c2 1F44     		add	r7, r7, r3
 11608 01c4 2D23     		movs	r3, #45
 11609 01c6 07F8703C 		strb	r3, [r7, #-112]
 11610              		.loc 1 6125 19 discriminator 1 view .LVU3829
 11611 01ca 0CF10207 		add	r7, ip, #2
 11612              	.LVL1382:
 11613              	.L848:
6126:Middlewares/Third_Party/FatFs/src/ff.c **** 		j = i; d = (f & 1) ? '0' : ' ';
 11614              		.loc 1 6126 3 is_stmt 1 view .LVU3830
 11615              		.loc 1 6126 10 view .LVU3831
 11616              		.loc 1 6126 12 is_stmt 0 view .LVU3832
 11617 01ce 16F0010F 		tst	r6, #1
 11618 01d2 03D0     		beq	.L861
 11619              		.loc 1 6126 12 view .LVU3833
 11620 01d4 4FF0300A 		mov	r10, #48
 11621              	.L849:
 11622              	.LVL1383:
6127:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (!(f & 2) && j++ < w) putc_bfd(&pb, d);
 11623              		.loc 1 6127 3 is_stmt 1 discriminator 4 view .LVU3834
6126:Middlewares/Third_Party/FatFs/src/ff.c **** 		j = i; d = (f & 1) ? '0' : ' ';
 11624              		.loc 1 6126 5 is_stmt 0 discriminator 4 view .LVU3835
 11625 01d8 B846     		mov	r8, r7
 11626              		.loc 1 6127 9 discriminator 4 view .LVU3836
ARM GAS  /tmp/ccWTW02a.s 			page 369


 11627 01da 07E0     		b	.L850
 11628              	.LVL1384:
 11629              	.L861:
6126:Middlewares/Third_Party/FatFs/src/ff.c **** 		j = i; d = (f & 1) ? '0' : ' ';
 11630              		.loc 1 6126 12 view .LVU3837
 11631 01dc 4FF0200A 		mov	r10, #32
 11632 01e0 FAE7     		b	.L849
 11633              	.LVL1385:
 11634              	.L852:
 11635              		.loc 1 6127 31 is_stmt 1 discriminator 3 view .LVU3838
 11636 01e2 5146     		mov	r1, r10
 11637 01e4 08A8     		add	r0, sp, #32
 11638 01e6 FFF7FEFF 		bl	putc_bfd
 11639              	.LVL1386:
 11640              		.loc 1 6127 23 is_stmt 0 discriminator 3 view .LVU3839
 11641 01ea C846     		mov	r8, r9
 11642              	.LVL1387:
 11643              	.L850:
 11644              		.loc 1 6127 9 is_stmt 1 discriminator 1 view .LVU3840
 11645 01ec 16F0020F 		tst	r6, #2
 11646 01f0 04D1     		bne	.L853
 11647              		.loc 1 6127 23 is_stmt 0 discriminator 2 view .LVU3841
 11648 01f2 08F10109 		add	r9, r8, #1
 11649              	.LVL1388:
 11650              		.loc 1 6127 19 discriminator 2 view .LVU3842
 11651 01f6 A045     		cmp	r8, r4
 11652 01f8 F3D3     		bcc	.L852
 11653              		.loc 1 6127 23 view .LVU3843
 11654 01fa C846     		mov	r8, r9
 11655              	.LVL1389:
 11656              	.L853:
6128:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 11657              		.loc 1 6128 3 is_stmt 1 discriminator 1 view .LVU3844
6129:Middlewares/Third_Party/FatFs/src/ff.c **** 			putc_bfd(&pb, str[--i]);
 11658              		.loc 1 6129 4 discriminator 1 view .LVU3845
 11659 01fc 013F     		subs	r7, r7, #1
 11660              	.LVL1390:
 11661              		.loc 1 6129 4 is_stmt 0 discriminator 1 view .LVU3846
 11662 01fe 1CAB     		add	r3, sp, #112
 11663 0200 3B44     		add	r3, r3, r7
 11664 0202 13F8701C 		ldrb	r1, [r3, #-112]	@ zero_extendqisi2
 11665 0206 08A8     		add	r0, sp, #32
 11666 0208 FFF7FEFF 		bl	putc_bfd
 11667              	.LVL1391:
6130:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (i);
 11668              		.loc 1 6130 11 is_stmt 1 discriminator 1 view .LVU3847
 11669              		.loc 1 6130 3 is_stmt 0 discriminator 1 view .LVU3848
 11670 020c 002F     		cmp	r7, #0
 11671 020e F5D1     		bne	.L853
 11672              	.LVL1392:
 11673              	.L854:
6131:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (j++ < w) putc_bfd(&pb, d);
 11674              		.loc 1 6131 9 is_stmt 1 discriminator 1 view .LVU3849
 11675              		.loc 1 6131 11 is_stmt 0 discriminator 1 view .LVU3850
 11676 0210 08F10106 		add	r6, r8, #1
 11677              	.LVL1393:
 11678              		.loc 1 6131 9 discriminator 1 view .LVU3851
ARM GAS  /tmp/ccWTW02a.s 			page 370


 11679 0214 A045     		cmp	r8, r4
 11680 0216 BFF404AF 		bcs	.L814
 11681              		.loc 1 6131 19 is_stmt 1 discriminator 2 view .LVU3852
 11682 021a 5146     		mov	r1, r10
 11683 021c 08A8     		add	r0, sp, #32
 11684 021e FFF7FEFF 		bl	putc_bfd
 11685              	.LVL1394:
 11686              		.loc 1 6131 11 is_stmt 0 discriminator 2 view .LVU3853
 11687 0222 B046     		mov	r8, r6
 11688 0224 F4E7     		b	.L854
 11689              	.LVL1395:
 11690              	.L815:
6132:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
6133:Middlewares/Third_Party/FatFs/src/ff.c **** 
6134:Middlewares/Third_Party/FatFs/src/ff.c **** 	va_end(arp);
 11691              		.loc 1 6134 2 is_stmt 1 view .LVU3854
6135:Middlewares/Third_Party/FatFs/src/ff.c **** 
6136:Middlewares/Third_Party/FatFs/src/ff.c **** 	return putc_flush(&pb);
 11692              		.loc 1 6136 2 view .LVU3855
 11693              		.loc 1 6136 9 is_stmt 0 view .LVU3856
 11694 0226 08A8     		add	r0, sp, #32
 11695 0228 FFF7FEFF 		bl	putc_flush
 11696              	.LVL1396:
6137:Middlewares/Third_Party/FatFs/src/ff.c **** }
 11697              		.loc 1 6137 1 view .LVU3857
 11698 022c 1DB0     		add	sp, sp, #116
 11699              	.LCFI132:
 11700              		.cfi_def_cfa_offset 44
 11701              		@ sp needed
 11702 022e BDE8F047 		pop	{r4, r5, r6, r7, r8, r9, r10, lr}
 11703              	.LCFI133:
 11704              		.cfi_restore 14
 11705              		.cfi_restore 10
 11706              		.cfi_restore 9
 11707              		.cfi_restore 8
 11708              		.cfi_restore 7
 11709              		.cfi_restore 6
 11710              		.cfi_restore 5
 11711              		.cfi_restore 4
 11712              		.cfi_def_cfa_offset 12
 11713 0232 03B0     		add	sp, sp, #12
 11714              	.LCFI134:
 11715              		.cfi_restore 3
 11716              		.cfi_restore 2
 11717              		.cfi_restore 1
 11718              		.cfi_def_cfa_offset 0
 11719 0234 7047     		bx	lr
 11720              		.cfi_endproc
 11721              	.LFE202:
 11723              		.section	.bss.FatFs,"aw",%nobits
 11724              		.align	2
 11725              		.set	.LANCHOR2,. + 0
 11728              	FatFs:
 11729 0000 00000000 		.space	4
 11730              		.section	.bss.Files,"aw",%nobits
 11731              		.align	2
 11732              		.set	.LANCHOR0,. + 0
ARM GAS  /tmp/ccWTW02a.s 			page 371


 11735              	Files:
 11736 0000 00000000 		.space	32
 11736      00000000 
 11736      00000000 
 11736      00000000 
 11736      00000000 
 11737              		.section	.bss.Fsid,"aw",%nobits
 11738              		.align	1
 11739              		.set	.LANCHOR3,. + 0
 11742              	Fsid:
 11743 0000 0000     		.space	2
 11744              		.section	.rodata.ExCvt,"a"
 11745              		.align	2
 11746              		.set	.LANCHOR1,. + 0
 11749              	ExCvt:
 11750 0000 43554541 		.ascii	"CUEAAAACEEEIIIAAE\222\222OOOUUYOUO\234O\236\237AIOU"
 11750      41414143 
 11750      45454549 
 11750      49494141 
 11750      4592924F 
 11751 0024 A5A5A6A7 		.ascii	"\245\245\246\247\250\251\252\253\254\255\256\257\260"
 11751      A8A9AAAB 
 11751      ACADAEAF 
 11751      B0
 11752 0031 B1B2B3B4 		.ascii	"\261\262\263\264AAA\270\271\272\273\274\275\276\277"
 11752      414141B8 
 11752      B9BABBBC 
 11752      BDBEBF
 11753 0040 C0C1C2C3 		.ascii	"\300\301\302\303\304\305AA\310\311\312\313\314\315\316"
 11753      C4C54141 
 11753      C8C9CACB 
 11753      CCCDCE
 11754 004f CFD1D145 		.ascii	"\317\321\321EEEIIII\331\332\333\334\335I\337O\341OO"
 11754      45454949 
 11754      4949D9DA 
 11754      DBDCDD49 
 11754      DF4FE14F 
 11755 0064 4F4FE6E8 		.ascii	"OO\346\350\350UUUYY\356\357\360\361\362\363\364\365"
 11755      E8555555 
 11755      5959EEEF 
 11755      F0F1F2F3 
 11755      F4F5
 11756 0076 F6F7F8F9 		.ascii	"\366\367\370\371\372\373\374\375\376\377"
 11756      FAFBFCFD 
 11756      FEFF
 11757              		.section	.rodata.cst.11032,"a"
 11758              		.align	2
 11759              		.set	.LANCHOR5,. + 0
 11762              	cst.11032:
 11763 0000 0100     		.short	1
 11764 0002 0400     		.short	4
 11765 0004 1000     		.short	16
 11766 0006 4000     		.short	64
 11767 0008 0001     		.short	256
 11768 000a 0002     		.short	512
 11769 000c 0000     		.short	0
 11770              		.section	.rodata.cst32.11033,"a"
ARM GAS  /tmp/ccWTW02a.s 			page 372


 11771              		.align	2
 11772              		.set	.LANCHOR4,. + 0
 11775              	cst32.11033:
 11776 0000 0100     		.short	1
 11777 0002 0200     		.short	2
 11778 0004 0400     		.short	4
 11779 0006 0800     		.short	8
 11780 0008 1000     		.short	16
 11781 000a 2000     		.short	32
 11782 000c 0000     		.short	0
 11783              		.text
 11784              	.Letext0:
 11785              		.file 2 "Middlewares/Third_Party/FatFs/src/integer.h"
 11786              		.file 3 "/home/alex/Mass Storage/ARM-GCC/arm-none-eabi/include/machine/_default_types.h"
 11787              		.file 4 "/home/alex/Mass Storage/ARM-GCC/arm-none-eabi/include/sys/_stdint.h"
 11788              		.file 5 "Drivers/CMSIS/Include/core_cm7.h"
 11789              		.file 6 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/system_stm32f7xx.h"
 11790              		.file 7 "Drivers/STM32F7xx_HAL_Driver/Inc/stm32f7xx_hal.h"
 11791              		.file 8 "/home/alex/Mass Storage/ARM-GCC/lib/gcc/arm-none-eabi/9.3.1/include/stddef.h"
 11792              		.file 9 "/home/alex/Mass Storage/ARM-GCC/arm-none-eabi/include/sys/_types.h"
 11793              		.file 10 "/home/alex/Mass Storage/ARM-GCC/arm-none-eabi/include/sys/reent.h"
 11794              		.file 11 "/home/alex/Mass Storage/ARM-GCC/arm-none-eabi/include/sys/lock.h"
 11795              		.file 12 "/home/alex/Mass Storage/ARM-GCC/arm-none-eabi/include/stdlib.h"
 11796              		.file 13 "Middlewares/Third_Party/FatFs/src/ff.h"
 11797              		.file 14 "Middlewares/Third_Party/FatFs/src/diskio.h"
 11798              		.file 15 "/home/alex/Mass Storage/ARM-GCC/lib/gcc/arm-none-eabi/9.3.1/include/stdarg.h"
 11799              		.file 16 "<built-in>"
ARM GAS  /tmp/ccWTW02a.s 			page 373


DEFINED SYMBOLS
                            *ABS*:0000000000000000 ff.c
     /tmp/ccWTW02a.s:17     .text.ld_word:0000000000000000 $t
     /tmp/ccWTW02a.s:24     .text.ld_word:0000000000000000 ld_word
     /tmp/ccWTW02a.s:52     .text.ld_dword:0000000000000000 $t
     /tmp/ccWTW02a.s:58     .text.ld_dword:0000000000000000 ld_dword
     /tmp/ccWTW02a.s:97     .text.st_word:0000000000000000 $t
     /tmp/ccWTW02a.s:103    .text.st_word:0000000000000000 st_word
     /tmp/ccWTW02a.s:128    .text.st_dword:0000000000000000 $t
     /tmp/ccWTW02a.s:134    .text.st_dword:0000000000000000 st_dword
     /tmp/ccWTW02a.s:173    .text.mem_cpy:0000000000000000 $t
     /tmp/ccWTW02a.s:179    .text.mem_cpy:0000000000000000 mem_cpy
     /tmp/ccWTW02a.s:231    .text.mem_set:0000000000000000 $t
     /tmp/ccWTW02a.s:237    .text.mem_set:0000000000000000 mem_set
     /tmp/ccWTW02a.s:264    .text.mem_cmp:0000000000000000 $t
     /tmp/ccWTW02a.s:270    .text.mem_cmp:0000000000000000 mem_cmp
     /tmp/ccWTW02a.s:323    .text.chk_chr:0000000000000000 $t
     /tmp/ccWTW02a.s:329    .text.chk_chr:0000000000000000 chk_chr
     /tmp/ccWTW02a.s:364    .text.chk_lock:0000000000000000 $t
     /tmp/ccWTW02a.s:370    .text.chk_lock:0000000000000000 chk_lock
     /tmp/ccWTW02a.s:512    .text.chk_lock:0000000000000074 $d
     /tmp/ccWTW02a.s:517    .text.enq_lock:0000000000000000 $t
     /tmp/ccWTW02a.s:523    .text.enq_lock:0000000000000000 enq_lock
     /tmp/ccWTW02a.s:570    .text.enq_lock:000000000000001c $d
     /tmp/ccWTW02a.s:575    .text.inc_lock:0000000000000000 $t
     /tmp/ccWTW02a.s:581    .text.inc_lock:0000000000000000 inc_lock
     /tmp/ccWTW02a.s:762    .text.inc_lock:00000000000000a0 $d
     /tmp/ccWTW02a.s:767    .text.dec_lock:0000000000000000 $t
     /tmp/ccWTW02a.s:773    .text.dec_lock:0000000000000000 dec_lock
     /tmp/ccWTW02a.s:856    .text.dec_lock:000000000000003c $d
     /tmp/ccWTW02a.s:861    .text.clear_lock:0000000000000000 $t
     /tmp/ccWTW02a.s:867    .text.clear_lock:0000000000000000 clear_lock
     /tmp/ccWTW02a.s:948    .text.clear_lock:0000000000000038 $d
     /tmp/ccWTW02a.s:953    .text.clust2sect:0000000000000000 $t
     /tmp/ccWTW02a.s:959    .text.clust2sect:0000000000000000 clust2sect
     /tmp/ccWTW02a.s:999    .text.clmt_clust:0000000000000000 $t
     /tmp/ccWTW02a.s:1005   .text.clmt_clust:0000000000000000 clmt_clust
     /tmp/ccWTW02a.s:1073   .text.ld_clust:0000000000000000 $t
     /tmp/ccWTW02a.s:1079   .text.ld_clust:0000000000000000 ld_clust
     /tmp/ccWTW02a.s:1135   .text.st_clust:0000000000000000 $t
     /tmp/ccWTW02a.s:1141   .text.st_clust:0000000000000000 st_clust
     /tmp/ccWTW02a.s:1190   .text.get_fileinfo:0000000000000000 $t
     /tmp/ccWTW02a.s:1196   .text.get_fileinfo:0000000000000000 get_fileinfo
     /tmp/ccWTW02a.s:1339   .rodata.create_name.str1.4:0000000000000000 $d
     /tmp/ccWTW02a.s:1343   .text.create_name:0000000000000000 $t
     /tmp/ccWTW02a.s:1349   .text.create_name:0000000000000000 create_name
     /tmp/ccWTW02a.s:1579   .text.create_name:00000000000000cc $d
     /tmp/ccWTW02a.s:1585   .text.get_ldnumber:0000000000000000 $t
     /tmp/ccWTW02a.s:1591   .text.get_ldnumber:0000000000000000 get_ldnumber
     /tmp/ccWTW02a.s:1693   .text.putc_init:0000000000000000 $t
     /tmp/ccWTW02a.s:1699   .text.putc_init:0000000000000000 putc_init
     /tmp/ccWTW02a.s:1722   .text.validate:0000000000000000 $t
     /tmp/ccWTW02a.s:1728   .text.validate:0000000000000000 validate
     /tmp/ccWTW02a.s:1837   .text.sync_window:0000000000000000 $t
     /tmp/ccWTW02a.s:1843   .text.sync_window:0000000000000000 sync_window
     /tmp/ccWTW02a.s:1949   .text.move_window:0000000000000000 $t
     /tmp/ccWTW02a.s:1955   .text.move_window:0000000000000000 move_window
ARM GAS  /tmp/ccWTW02a.s 			page 374


     /tmp/ccWTW02a.s:2026   .text.check_fs:0000000000000000 $t
     /tmp/ccWTW02a.s:2032   .text.check_fs:0000000000000000 check_fs
     /tmp/ccWTW02a.s:2128   .text.check_fs:000000000000006c $d
     /tmp/ccWTW02a.s:2135   .text.find_volume:0000000000000000 $t
     /tmp/ccWTW02a.s:2141   .text.find_volume:0000000000000000 find_volume
     /tmp/ccWTW02a.s:2808   .text.find_volume:00000000000002f0 $d
     /tmp/ccWTW02a.s:2816   .text.put_fat:0000000000000000 $t
     /tmp/ccWTW02a.s:2822   .text.put_fat:0000000000000000 put_fat
     /tmp/ccWTW02a.s:3078   .text.get_fat:0000000000000000 $t
     /tmp/ccWTW02a.s:3084   .text.get_fat:0000000000000000 get_fat
     /tmp/ccWTW02a.s:3301   .text.dir_sdi:0000000000000000 $t
     /tmp/ccWTW02a.s:3307   .text.dir_sdi:0000000000000000 dir_sdi
     /tmp/ccWTW02a.s:3504   .text.create_chain:0000000000000000 $t
     /tmp/ccWTW02a.s:3510   .text.create_chain:0000000000000000 create_chain
     /tmp/ccWTW02a.s:3744   .text.remove_chain:0000000000000000 $t
     /tmp/ccWTW02a.s:3750   .text.remove_chain:0000000000000000 remove_chain
     /tmp/ccWTW02a.s:3911   .text.dir_remove:0000000000000000 $t
     /tmp/ccWTW02a.s:3917   .text.dir_remove:0000000000000000 dir_remove
     /tmp/ccWTW02a.s:3968   .text.dir_next:0000000000000000 $t
     /tmp/ccWTW02a.s:3974   .text.dir_next:0000000000000000 dir_next
     /tmp/ccWTW02a.s:4271   .text.dir_find:0000000000000000 $t
     /tmp/ccWTW02a.s:4277   .text.dir_find:0000000000000000 dir_find
     /tmp/ccWTW02a.s:4384   .text.follow_path:0000000000000000 $t
     /tmp/ccWTW02a.s:4390   .text.follow_path:0000000000000000 follow_path
     /tmp/ccWTW02a.s:4550   .text.dir_alloc:0000000000000000 $t
     /tmp/ccWTW02a.s:4556   .text.dir_alloc:0000000000000000 dir_alloc
     /tmp/ccWTW02a.s:4668   .text.dir_register:0000000000000000 $t
     /tmp/ccWTW02a.s:4674   .text.dir_register:0000000000000000 dir_register
     /tmp/ccWTW02a.s:4748   .text.dir_read:0000000000000000 $t
     /tmp/ccWTW02a.s:4754   .text.dir_read:0000000000000000 dir_read
     /tmp/ccWTW02a.s:4876   .text.sync_fs:0000000000000000 $t
     /tmp/ccWTW02a.s:4882   .text.sync_fs:0000000000000000 sync_fs
     /tmp/ccWTW02a.s:4996   .text.sync_fs:0000000000000084 $d
     /tmp/ccWTW02a.s:5002   .text.f_mount:0000000000000000 $t
     /tmp/ccWTW02a.s:5009   .text.f_mount:0000000000000000 f_mount
     /tmp/ccWTW02a.s:5125   .text.f_mount:000000000000005c $d
     /tmp/ccWTW02a.s:5130   .text.f_open:0000000000000000 $t
     /tmp/ccWTW02a.s:5137   .text.f_open:0000000000000000 f_open
     /tmp/ccWTW02a.s:5692   .text.f_read:0000000000000000 $t
     /tmp/ccWTW02a.s:5699   .text.f_read:0000000000000000 f_read
     /tmp/ccWTW02a.s:6112   .text.f_write:0000000000000000 $t
     /tmp/ccWTW02a.s:6119   .text.f_write:0000000000000000 f_write
     /tmp/ccWTW02a.s:6577   .text.putc_bfd:0000000000000000 $t
     /tmp/ccWTW02a.s:6583   .text.putc_bfd:0000000000000000 putc_bfd
     /tmp/ccWTW02a.s:6694   .text.putc_flush:0000000000000000 $t
     /tmp/ccWTW02a.s:6700   .text.putc_flush:0000000000000000 putc_flush
     /tmp/ccWTW02a.s:6779   .text.f_sync:0000000000000000 $t
     /tmp/ccWTW02a.s:6786   .text.f_sync:0000000000000000 f_sync
     /tmp/ccWTW02a.s:6934   .text.f_close:0000000000000000 $t
     /tmp/ccWTW02a.s:6941   .text.f_close:0000000000000000 f_close
     /tmp/ccWTW02a.s:7010   .text.f_lseek:0000000000000000 $t
     /tmp/ccWTW02a.s:7017   .text.f_lseek:0000000000000000 f_lseek
     /tmp/ccWTW02a.s:7713   .text.f_opendir:0000000000000000 $t
     /tmp/ccWTW02a.s:7720   .text.f_opendir:0000000000000000 f_opendir
     /tmp/ccWTW02a.s:7889   .text.f_closedir:0000000000000000 $t
     /tmp/ccWTW02a.s:7896   .text.f_closedir:0000000000000000 f_closedir
     /tmp/ccWTW02a.s:7962   .text.f_readdir:0000000000000000 $t
ARM GAS  /tmp/ccWTW02a.s 			page 375


     /tmp/ccWTW02a.s:7969   .text.f_readdir:0000000000000000 f_readdir
     /tmp/ccWTW02a.s:8074   .text.f_stat:0000000000000000 $t
     /tmp/ccWTW02a.s:8081   .text.f_stat:0000000000000000 f_stat
     /tmp/ccWTW02a.s:8174   .text.f_getfree:0000000000000000 $t
     /tmp/ccWTW02a.s:8181   .text.f_getfree:0000000000000000 f_getfree
     /tmp/ccWTW02a.s:8464   .text.f_truncate:0000000000000000 $t
     /tmp/ccWTW02a.s:8471   .text.f_truncate:0000000000000000 f_truncate
     /tmp/ccWTW02a.s:8664   .text.f_unlink:0000000000000000 $t
     /tmp/ccWTW02a.s:8671   .text.f_unlink:0000000000000000 f_unlink
     /tmp/ccWTW02a.s:8898   .text.f_mkdir:0000000000000000 $t
     /tmp/ccWTW02a.s:8905   .text.f_mkdir:0000000000000000 f_mkdir
     /tmp/ccWTW02a.s:9279   .text.f_rename:0000000000000000 $t
     /tmp/ccWTW02a.s:9286   .text.f_rename:0000000000000000 f_rename
     /tmp/ccWTW02a.s:9564   .rodata.f_mkfs.str1.4:0000000000000000 $d
     /tmp/ccWTW02a.s:9574   .text.f_mkfs:0000000000000000 $t
     /tmp/ccWTW02a.s:9581   .text.f_mkfs:0000000000000000 f_mkfs
     /tmp/ccWTW02a.s:10144  .text.f_mkfs:0000000000000254 $d
     /tmp/ccWTW02a.s:10153  .text.f_mkfs:000000000000026c $t
     /tmp/ccWTW02a.s:10757  .text.f_mkfs:000000000000060c $d
     /tmp/ccWTW02a.s:10766  .text.f_mkfs:0000000000000624 $t
     /tmp/ccWTW02a.s:10891  .text.f_gets:0000000000000000 $t
     /tmp/ccWTW02a.s:10898  .text.f_gets:0000000000000000 f_gets
     /tmp/ccWTW02a.s:11003  .text.f_putc:0000000000000000 $t
     /tmp/ccWTW02a.s:11010  .text.f_putc:0000000000000000 f_putc
     /tmp/ccWTW02a.s:11054  .text.f_puts:0000000000000000 $t
     /tmp/ccWTW02a.s:11061  .text.f_puts:0000000000000000 f_puts
     /tmp/ccWTW02a.s:11118  .text.f_printf:0000000000000000 $t
     /tmp/ccWTW02a.s:11125  .text.f_printf:0000000000000000 f_printf
     /tmp/ccWTW02a.s:11311  .text.f_printf:000000000000009e $d
     /tmp/ccWTW02a.s:11724  .bss.FatFs:0000000000000000 $d
     /tmp/ccWTW02a.s:11728  .bss.FatFs:0000000000000000 FatFs
     /tmp/ccWTW02a.s:11731  .bss.Files:0000000000000000 $d
     /tmp/ccWTW02a.s:11735  .bss.Files:0000000000000000 Files
     /tmp/ccWTW02a.s:11738  .bss.Fsid:0000000000000000 $d
     /tmp/ccWTW02a.s:11742  .bss.Fsid:0000000000000000 Fsid
     /tmp/ccWTW02a.s:11745  .rodata.ExCvt:0000000000000000 $d
     /tmp/ccWTW02a.s:11749  .rodata.ExCvt:0000000000000000 ExCvt
     /tmp/ccWTW02a.s:11758  .rodata.cst.11032:0000000000000000 $d
     /tmp/ccWTW02a.s:11762  .rodata.cst.11032:0000000000000000 cst.11032
     /tmp/ccWTW02a.s:11771  .rodata.cst32.11033:0000000000000000 $d
     /tmp/ccWTW02a.s:11775  .rodata.cst32.11033:0000000000000000 cst32.11033
     /tmp/ccWTW02a.s:11335  .text.f_printf:00000000000000b5 $d
     /tmp/ccWTW02a.s:11335  .text.f_printf:00000000000000b6 $t

UNDEFINED SYMBOLS
disk_status
disk_write
disk_read
disk_initialize
disk_ioctl
get_fattime
